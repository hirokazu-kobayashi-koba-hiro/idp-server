<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_06_developer-guide/application-plane/authorization-flow" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Authorization Code Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰ | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_06_developer-guide/application-plane/authorization-flow"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Authorization Code Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰ | IdP-Server Documentation"><meta data-rh="true" name="description" content="ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„"><meta data-rh="true" property="og:description" content="ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_06_developer-guide/application-plane/authorization-flow"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_06_developer-guide/application-plane/authorization-flow" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_06_developer-guide/application-plane/authorization-flow" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.e252421f.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.982a3c7e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—</a></div><nav aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’é–‹ã" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å…ˆé ­ã¸æˆ»ã‚‹" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µã‚¤ãƒ‰ãƒãƒ¼" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">ã¯ã˜ã‚ã«</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´¢å¼•</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">è£½å“ç´¹ä»‹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/concept-01-multi-tenant">ã‚³ã‚¢æ¦‚å¿µ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">èªè¨¼ãƒ»èªå¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/index">How-toï¼ˆè¨­å®šãƒ»é‹ç”¨ãƒ¬ã‚·ãƒ”ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_06_developer-guide/getting-started/service-overview">Developer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/getting-started/service-overview">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/control-plane/resource-overview">Control Planeï¼ˆç®¡ç†APIï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/overview">Application Planeï¼ˆèªè¨¼ãƒ»èªå¯APIï¼‰</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/overview">Application Plane - OAuth/OIDCèªè¨¼ãƒ•ãƒ­ãƒ¼æ¦‚è¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/authorization-flow">Authorization Code Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/token-endpoint">Token Endpointå®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/authentication">èªè¨¼å®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/userinfo">UserInfoå®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/ciba-flow">CIBA Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/identity-verification">èº«å…ƒç¢ºèªç”³è¾¼ã¿å®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/federation">ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¤–éƒ¨IdPé€£æºï¼‰å®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/events">ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†å®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_06_developer-guide/application-plane/client-authentication">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèªè¨¼å®Ÿè£…ã‚¬ã‚¤ãƒ‰</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/implementation-guides/overview">Implementation Guidesï¼ˆå®Ÿè£…ã‚¬ã‚¤ãƒ‰ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/configuration/CONFIGURATION_COVERAGE">Configurationï¼ˆè¨­å®šï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/patterns/common-patterns">Patternsï¼ˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/troubleshooting/common-errors">Troubleshootingï¼ˆãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/reference/code-review-checklist">Referenceï¼ˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_06_developer-guide/learning-paths/beginner">Learning Pathsï¼ˆå­¦ç¿’ãƒ‘ã‚¹ï¼‰</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">é‹ç”¨ï¼ˆOpsï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Application Planeï¼ˆèªè¨¼ãƒ»èªå¯APIï¼‰</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Authorization Code Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">ã“ã®ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—</button></div><div class="theme-doc-markdown markdown"><header><h1>Authorization Code Flowå®Ÿè£…ã‚¬ã‚¤ãƒ‰</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„">ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„<a href="#ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„" class="hash-link" aria-label="ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>Authorization Code Flow</strong>ï¼ˆOAuth 2.0ã§æœ€ã‚‚ä¸€èˆ¬çš„ãªèªå¯ãƒ•ãƒ­ãƒ¼ï¼‰ã®å®Ÿè£…ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒç›®æ¨™ã§ã™ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰€è¦æ™‚é–“">æ‰€è¦æ™‚é–“<a href="#æ‰€è¦æ™‚é–“" class="hash-link" aria-label="æ‰€è¦æ™‚é–“ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="æ‰€è¦æ™‚é–“ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>â±ï¸ <strong>ç´„45åˆ†</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰æçŸ¥è­˜">å‰æçŸ¥è­˜<a href="#å‰æçŸ¥è­˜" class="hash-link" aria-label="å‰æçŸ¥è­˜ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å‰æçŸ¥è­˜ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ul>
<li><a href="/idp-server/docs/content_06_developer-guide/application-plane/overview">01. Application Planeæ¦‚è¦</a></li>
<li>OAuth 2.0åŸºç¤çŸ¥è­˜ï¼ˆ<a href="https://datatracker.ietf.org/doc/html/rfc6749" target="_blank" rel="noopener noreferrer">RFC 6749</a>ï¼‰</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authorization-code-flowã¨ã¯">Authorization Code Flowã¨ã¯<a href="#authorization-code-flowã¨ã¯" class="hash-link" aria-label="Authorization Code Flowã¨ã¯ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Authorization Code Flowã¨ã¯ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹èªå¯ãƒ•ãƒ­ãƒ¼ã€‚</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Authorization Requestï¼ˆèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. User Authenticationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Token Requestï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>RFC 6749 Section 4.1æº–æ‹ </strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹">ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹ï¼Ÿ<a href="#ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹" class="hash-link" aria-label="ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹ï¼Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹ï¼Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±</strong>:</p>
<ul>
<li>âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«éœ²å‡ºã—ãªã„</li>
<li>âœ… ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒURLã«å«ã¾ã‚Œãªã„ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶å±¥æ­´ã«æ®‹ã‚‰ãªã„ï¼‰</li>
<li>âœ… èªå¯ã‚³ãƒ¼ãƒ‰ã¯1å›é™ã‚Šä½¿ç”¨å¯èƒ½ï¼ˆãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒé˜²æ­¢ï¼‰</li>
</ul>
<p><strong>ä½¿ç”¨å ´é¢</strong>:</p>
<ul>
<li>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å‹•ä½œï¼‰</li>
<li>SPAã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPKCEä½µç”¨ï¼‰</li>
<li>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªï¼ˆPKCEå¿…é ˆï¼‰</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ">å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ<a href="#å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ" class="hash-link" aria-label="å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ">30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ<a href="#30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ" class="hash-link" aria-label="30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Controller (OAuthV1Api) - HTTPå‡¦ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EntryService (OAuthFlowEntryService) - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Coreå±¤ (OAuthProtocol) - OAuthä»•æ§˜æº–æ‹ ãƒ­ã‚¸ãƒƒã‚¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repository - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™">ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™<a href="#ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™" class="hash-link" aria-label="ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">  â€‹</a></h3>
<table><thead><tr><th>ã‚¯ãƒ©ã‚¹</th><th>å½¹å‰²</th><th>ä¸»ãªå‡¦ç†</th></tr></thead><tbody><tr><td><strong>OAuthV1Api</strong></td><td>HTTPã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</td><td>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å—ã‘å–ã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´</td></tr><tr><td><strong>OAuthFlowEntryService</strong></td><td>ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</td><td>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ</td></tr><tr><td><strong>OAuthProtocol</strong></td><td>OAuthä»•æ§˜å®Ÿè£…</td><td>æ¤œè¨¼ã€AuthorizationRequestä½œæˆã€Codeç™ºè¡Œ</td></tr><tr><td><strong>OAuthRequestHandler</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†</td><td>Validatorã€Verifierå®Ÿè¡Œ</td></tr><tr><td><strong>OAuthAuthorizeHandler</strong></td><td>Codeç™ºè¡Œå‡¦ç†</td><td>èªè¨¼ç¢ºèªã€Authorization Codeç”Ÿæˆ</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ">ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ<a href="#ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ" class="hash-link" aria-label="ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</th><th>èª¬æ˜</th><th>ä¿å­˜å ´æ‰€</th><th>æœ‰åŠ¹æœŸé™</th></tr></thead><tbody><tr><td><strong>AuthorizationRequest</strong></td><td>èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±</td><td>DB</td><td>èªè¨¼å®Œäº†å¾Œå‰Šé™¤</td></tr><tr><td><strong>AuthenticationTransaction</strong></td><td>èªè¨¼ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</td><td>DB</td><td>èªè¨¼å®Œäº†å¾Œå‰Šé™¤</td></tr><tr><td><strong>AuthorizationCodeGrant</strong></td><td>èªå¯ã‚³ãƒ¼ãƒ‰</td><td>DB</td><td>10åˆ†ï¼ˆä½¿ç”¨å¾Œå³å‰Šé™¤ï¼‰</td></tr><tr><td><strong>OAuthSession</strong></td><td>ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ï¼ˆSSOç”¨ï¼‰</td><td>Redis</td><td>max_ageè¨­å®šã«ã‚ˆã‚‹</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£">Coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£<a href="#coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" class="hash-link" aria-label="Coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ† ã‚¯ãƒãƒ£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>Phase 1ï¼ˆAuthorization Requestï¼‰ã®Coreå±¤å‡¦ç†ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAuthProtocol.request()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ OAuthRequestHandler                                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  1. OAuthRequestValidatorï¼ˆå…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼‰         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - client_idå¿…é ˆ                                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é‡è¤‡ç¦æ­¢                              â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  2. è¨­å®šå–å¾—                                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationServerConfigurationå–å¾—          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - ClientConfigurationå–å¾—                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  3. OAuthRequestContextä½œæˆ                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ + è¨­å®šã‚’çµ±åˆ                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  4. OAuthRequestVerifierï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«æ¤œè¨¼ï¼‰        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”œâ”€ Base Verifierï¼ˆOAuth2/OIDCï¼‰                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”‚   - response_typeæ¤œè¨¼                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”‚   - redirect_uriæ¤œè¨¼                          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”‚   - scopeæ¤œè¨¼                                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”‚   - nonceå¿…é ˆãƒã‚§ãƒƒã‚¯ï¼ˆOIDCï¼‰                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â”‚                                               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     â””â”€ Extension Verifiersï¼ˆPluginï¼‰                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚         - RequestObjectVerifierï¼ˆJWTç½²åæ¤œè¨¼ï¼‰       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚         - AuthorizationDetailsVerifier              â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚         - JarmVerifier                              â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  5. AuthorizationRequestç”Ÿæˆ                        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationRequestIdentifierï¼ˆUUIDï¼‰        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - response_type, client_id, scopeç­‰             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  6. AuthorizationRequestä¿å­˜ï¼ˆDBï¼‰                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationRequestRepository.register()    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthRequestHandler-9acdc99347940d5fd81b0b1c7d57f5b4.java" target="_blank">OAuthRequestHandler.java</a></p>
<hr>
<p>Phase 3ï¼ˆAuthorization Approveï¼‰ã®Coreå±¤å‡¦ç†ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAuthProtocol.authorize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ OAuthAuthorizeHandler                               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  1. OAuthAuthorizeRequestValidator                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationRequestIdentifierå¿…é ˆ            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - Userå­˜åœ¨ç¢ºèª                                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - Authenticationå­˜åœ¨ç¢ºèª                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  2. AuthorizationRequestå–å¾—                        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationRequestRepository.get()          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  3. è¨­å®šå–å¾—                                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - AuthorizationServerConfigurationå–å¾—          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - ClientConfigurationå–å¾—                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  4. OAuthAuthorizeContextä½œæˆ                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  â”‚     - AuthorizationRequest + User + Authentication  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  5. AuthorizationResponseCreatoré¸æŠï¼ˆPluginï¼‰       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - response_type=&quot;code&quot; â†’ CodeResponseCreator    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - response_type=&quot;token&quot; â†’ TokenResponseCreator  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  6. AuthorizationResponseç”Ÿæˆ                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - Authorization Codeç”Ÿæˆï¼ˆUUIDï¼‰                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - redirect_uri + &quot;?code=xxx&amp;state=yyy&quot;          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  7. AuthorizationCodeGrantä¿å­˜                      â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - code, expiresAtï¼ˆ10åˆ†ï¼‰                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - authorizationGrantï¼ˆuser, scopeç­‰ï¼‰           â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - DBä¿å­˜                                        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  8. OAuthSessionä¿å­˜                                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - user, authentication                          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - sessionKey: tenant-id:client-id               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚     - SSOç”¨ï¼ˆæ¬¡å›ã®è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼‰                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthAuthorizeHandler-f5f4a96ecfadca2404fa4990ec25f092.java" target="_blank">OAuthAuthorizeHandler.java</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼">3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼<a href="#3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®  å‡¦ç†ãƒ•ãƒ­ãƒ¼" class="hash-link" aria-label="3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-authorization-requestèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ">Phase 1: Authorization Requestï¼ˆèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰<a href="#phase-1-authorization-requestèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ" class="hash-link" aria-label="Phase 1: Authorization Requestï¼ˆèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Phase 1: Authorization Requestï¼ˆèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>ç›®çš„</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /{tenant-id}/v1/authorizations?response_type=code&amp;client_id=xxx&amp;redirect_uri=...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthFlowEntryService.request()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ Tenantå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ OAuthProtocol.request() å‘¼ã³å‡ºã—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼ï¼ˆValidatorï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¤œè¨¼ï¼ˆVerifierï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ AuthorizationRequestç”Ÿæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ DBä¿å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€ AuthenticationTransactionä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€ èªè¨¼ãƒãƒªã‚·ãƒ¼è¨­å®šï¼ˆMFAå¿…é ˆï¼Ÿç­‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢URL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿å­˜ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿</strong>:</p>
<ul>
<li><code>AuthorizationRequest</code>: client_id, redirect_uri, scopeç­‰</li>
<li><code>AuthenticationTransaction</code>: èªè¨¼çŠ¶æ…‹ç®¡ç†ï¼ˆstatus: PENDINGï¼‰</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-user-authenticationãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼">Phase 2: User Authenticationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼‰<a href="#phase-2-user-authenticationãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼" class="hash-link" aria-label="Phase 2: User Authenticationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Phase 2: User Authenticationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èª è¨¼ï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>ç›®çš„</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ¬äººç¢ºèª</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST /{tenant-id}/v1/authorizations/{authReqId}/password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;username&quot;: &quot;user@example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;password&quot;: &quot;secret&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthFlowEntryService.interact()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthorizationRequestå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthenticationTransactionå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthenticationInteractoré¸æŠ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ PasswordAuthenticationInteractorç­‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthenticationInteractor.interact()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ AuthenticationResultç”Ÿæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthenticationTransactionæ›´æ–°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ status: AUTHENTICATED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ subject: userId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€ OAuthSessionæ›´æ–°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€ èªè¨¼æƒ…å ±ä¿å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: èªè¨¼å®Œäº†</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è©³ç´°</strong>: <a href="/idp-server/docs/content_06_developer-guide/application-plane/authentication">04-authentication.md</a></p>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthFlowEntryService-fd20b725962d5936869d5c3d79f544ea.java#L164" target="_blank">OAuthFlowEntryService.java:164</a></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-authorization-approveèªå¯æ‰¿èª">Phase 3: Authorization Approveï¼ˆèªå¯æ‰¿èªï¼‰<a href="#phase-3-authorization-approveèªå¯æ‰¿èª" class="hash-link" aria-label="Phase 3: Authorization Approveï¼ˆèªå¯æ‰¿èªï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Phase 3: Authorization Approveï¼ˆèªå¯æ‰¿èªï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>ç›®çš„</strong>: Authorization Codeç™ºè¡Œã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST /{tenant-id}/v1/authorizations/{authReqId}/authorize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthFlowEntryService.authorize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ Tenantå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ OAuthProtocolå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthorizationRequestå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthenticationTransactionå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ userå–å¾—ï¼ˆæ—¢ã«AuthenticationTransactionã«å«ã¾ã‚Œã‚‹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ deniedScopeså–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ isSuccess()åˆ¤å®š â†’ authentication or null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ OAuthAuthorizeRequestä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€ OAuthProtocol.authorize() å‘¼ã³å‡ºã—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€ OAuthAuthorizeHandler.handle()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ Validationï¼ˆAuthorizationRequestIdentifierãƒ»Userãƒ»Authenticationï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ AuthorizationRequestå–å¾—ï¼ˆDBï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ ClientConfigurationãƒ»AuthorizationServerConfigurationå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ OAuthAuthorizeContextä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ AuthorizationResponseCreatoré¸æŠ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â”œâ”€ response_type=code â†’ CodeResponseCreator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â”œâ”€ response_type=token â†’ TokenResponseCreator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â””â”€ response_type=id_token token â†’ HybridResponseCreator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ AuthorizationResponseç”Ÿæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â”œâ”€ Authorization Codeç”Ÿæˆï¼ˆUUIDï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â””â”€ redirect_uri + &quot;?code=abc123&amp;state=xyz&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ hasAuthorizationCode() â†’ AuthorizationCodeGrantä¿å­˜ï¼ˆDBï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   - code: &quot;abc123...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   - expiresAt: ç¾åœ¨æ™‚åˆ»+10åˆ†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   - authorizationRequestIdentifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   - authorizationGrantï¼ˆuser, scope, clientIdç­‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€ hasAccessToken() â†’ OAuthTokenä¿å­˜ï¼ˆDBï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚   â€» Implicit/Hybrid Flowã®å ´åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â””â”€ OAuthSessionä½œæˆãƒ»ç™»éŒ²ï¼ˆSSOç”¨ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                - user, authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                - sessionKey: tenant-id:client-id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ (authorizeæˆåŠŸã®å ´åˆ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ userRegistrator.registerOrUpdate() - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²/æ›´æ–°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ æ‹›å¾…å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œï¼ˆinvitation_idãŒã‚ã‚Œã°ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€ authenticationTransactionå‰Šé™¤ï¼ˆDBï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€ oauth_authorizeã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€ (authorizeå¤±æ•—ã®å ´åˆ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€ authorize_failureã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 302 Redirect</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®Ÿè£…</strong>:</p>
<ul>
<li><a href="/idp-server/assets/files/OAuthFlowEntryService-fd20b725962d5936869d5c3d79f544ea.java#L283-L346" target="_blank">OAuthFlowEntryService.java:283-346</a></li>
<li><a href="/idp-server/assets/files/OAuthAuthorizeHandler-f5f4a96ecfadca2404fa4990ec25f092.java#L77-L133" target="_blank">OAuthAuthorizeHandler.java:77-133</a></li>
</ul>
<p><strong>ä¿å­˜ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿</strong>:</p>
<ul>
<li><code>AuthorizationCodeGrant</code>: code, expiresAt, authorizationRequestIdentifier, authorizationGrant<!-- -->
<ul>
<li><strong>æ³¨æ„</strong>: <code>used</code>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å­˜åœ¨ã—ãªã„ï¼ˆä½¿ç”¨å¾Œå³å‰Šé™¤ã™ã‚‹è¨­è¨ˆï¼‰</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³">ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³<a href="#ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³" class="hash-link" aria-label="ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿">å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿<a href="#å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿" class="hash-link" aria-label="å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</th><th>å¿…é ˆ</th><th>èª¬æ˜</th><th>ä¾‹</th></tr></thead><tbody><tr><td><code>response_type</code></td><td>âœ…</td><td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ï¼ˆ<code>code</code>å›ºå®šï¼‰</td><td><code>code</code></td></tr><tr><td><code>client_id</code></td><td>âœ…</td><td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID</td><td><code>my-web-app</code></td></tr><tr><td><code>redirect_uri</code></td><td>æ¡ä»¶ä»˜ã</td><td>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIï¼ˆè¤‡æ•°ç™»éŒ²æ™‚ã¯å¿…é ˆï¼‰</td><td><code>https://app.example.com/callback</code></td></tr><tr><td><code>scope</code></td><td>âœ…</td><td>ã‚¢ã‚¯ã‚»ã‚¹ã‚¹ã‚³ãƒ¼ãƒ—</td><td><code>openid profile email</code></td></tr><tr><td><code>state</code></td><td>æ¨å¥¨</td><td>CSRFå¯¾ç­–ç”¨ãƒ©ãƒ³ãƒ€ãƒ å€¤</td><td><code>random-xyz-123</code></td></tr><tr><td><code>nonce</code></td><td>æ¨å¥¨</td><td>ãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒå¯¾ç­–ï¼ˆOIDCï¼‰</td><td><code>nonce-abc-456</code></td></tr></tbody></table>
<p><strong>RFC 6749 Section 4.1.1æº–æ‹ </strong></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£">ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£<a href="#ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" class="hash-link" aria-label="ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthRequestHandler-9acdc99347940d5fd81b0b1c7d57f5b4.java#L115-L139" target="_blank">OAuthRequestHandler.java:115-139</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAuthRequestï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ OAuthRequestValidator                â”‚ ã‚¹ãƒ†ãƒƒãƒ—1: å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  - client_idå¿…é ˆãƒã‚§ãƒƒã‚¯               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é‡è¤‡ç¦æ­¢                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“ OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">è¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€ AuthorizationServerConfiguration ï¼ˆã‚µãƒ¼ãƒãƒ¼è¨­å®šï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€ ClientConfiguration              ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthRequestContextä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ OAuthRequestVerifier                 â”‚ ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«æ¤œè¨¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  â”œâ”€ Base Verifieré¸æŠ                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  â”‚   â”œâ”€ OAuth2RequestVerifier        â”‚ â† OAuth 2.0ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  â”‚   â””â”€ OidcRequestVerifier           â”‚ â† OIDCç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  â”‚                                    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  â””â”€ Extension Verifiersï¼ˆé †æ¬¡å®Ÿè¡Œï¼‰    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚      â”œâ”€ RequestObjectVerifier        â”‚ â† Request Object (JWT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚      â”œâ”€ AuthorizationDetailsVerifier â”‚ â† Authorization Details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚      â””â”€ JarmVerifier                 â”‚ â† JARM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“ OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AuthorizationRequestä¿å­˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validator-å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯">Validator: å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯<a href="#validator-å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯" class="hash-link" aria-label="Validator: å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Validator: å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthRequestValidator-6dff060a9b1c30d826f7236132c5d7fe.java" target="_blank">OAuthRequestValidator.java</a></p>
<p><strong>æ¤œè¨¼å†…å®¹</strong>:</p>
<ol>
<li><strong>client_idå¿…é ˆãƒã‚§ãƒƒã‚¯</strong></li>
<li><strong>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é‡è¤‡ç¦æ­¢</strong>ï¼ˆRFC 6749 Section 3.1ï¼‰</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// client_idå¿…é ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!oAuthRequestParameters.hasClientId()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  throw new OAuthBadRequestException(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;invalid_request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;authorization request must contains client_id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åŒã˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¤‡æ•°å›æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;String&gt; duplicateKeys = oAuthRequestParameters.multiValueKeys();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!duplicateKeys.isEmpty()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  throw new OAuthBadRequestException(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;invalid_request&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;authorization request must not contains duplicate value&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¾‹å¤–</strong>: <code>OAuthBadRequestException</code> â†’ <strong>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸è¡¨ç¤º</strong>ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ãªã„ï¼‰</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifier-ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼">Verifier: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼<a href="#verifier-ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼" class="hash-link" aria-label="Verifier: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Verifier: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuthRequestVerifier-7bd5b7fccd6e4f7b0a5ca4241bedbb87.java" target="_blank">OAuthRequestVerifier.java</a></p>
<p><strong>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAuthRequestVerifier.verify(context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ 1. Base Verifieré¸æŠï¼ˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ï¼‰           â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  AuthorizationProfile.OAUTH2                â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â†’ OAuth2RequestVerifier                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€ redirect_uriæ¤œè¨¼                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€ OAuthRequestBaseVerifier           â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€ response_typeæ¤œè¨¼              â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€ ã‚µãƒ¼ãƒãƒ¼å¯¾å¿œãƒã‚§ãƒƒã‚¯             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¯¾å¿œãƒã‚§ãƒƒã‚¯          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â””â”€ scopeæ¤œè¨¼                      â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  AuthorizationProfile.OIDC                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â†’ OidcRequestVerifier                    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€ nonceå¿…é ˆãƒã‚§ãƒƒã‚¯                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€ OidcRequestBaseVerifier            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â””â”€ OIDCå›ºæœ‰ã®æ¤œè¨¼                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ 2. Extension Verifiersï¼ˆè©²å½“æ™‚ã®ã¿å®Ÿè¡Œï¼‰       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  RequestObjectVerifier                      â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¡ä»¶: request ã¾ãŸã¯ request_uri å­˜åœ¨     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¤œè¨¼: JWTç½²åæ¤œè¨¼ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•´åˆæ€§        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  AuthorizationDetailsVerifier               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¡ä»¶: authorization_details ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å­˜åœ¨ â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¤œè¨¼: JSONå½¢å¼ã€å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                             â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  JarmVerifier                               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¡ä»¶: response_mode=jwt                  â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    æ¤œè¨¼: JARMè¨­å®šã®å¦¥å½“æ€§                    â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼</strong>:</p>
<ul>
<li><code>AuthorizationRequestVerifierPluginLoader.load()</code> - Base Verifieræ‹¡å¼µ</li>
<li><code>AuthorizationRequestExtensionVerifierPluginLoader.load()</code> - Extension Verifieræ‹¡å¼µ</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth2requestverifier-ã®æ¤œè¨¼è©³ç´°">OAuth2RequestVerifier ã®æ¤œè¨¼è©³ç´°<a href="#oauth2requestverifier-ã®æ¤œè¨¼è©³ç´°" class="hash-link" aria-label="OAuth2RequestVerifier ã®æ¤œè¨¼è©³ç´° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="OAuth2RequestVerifier ã®æ¤œè¨¼è©³ç´° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/OAuth2RequestVerifier-f2bcdb77103598303fe4d8cff45a57be.java" target="_blank">OAuth2RequestVerifier.java</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAuth2RequestVerifier.verify(context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ redirect_uriæ¤œè¨¼ï¼ˆRFC 6749 Section 3.1.2ï¼‰ â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  redirect_uriæŒ‡å®šã‚ã‚Šï¼Ÿ                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    YES                                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â”œâ”€ ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆ#ï¼‰å«ã‚€ï¼Ÿ               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â”‚   YES â†’ ã‚¨ãƒ©ãƒ¼                         â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â”‚                                        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â””â”€ ç™»éŒ²URIã¨å®Œå…¨ä¸€è‡´ï¼Ÿ                   â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚        NO â†’ ã‚¨ãƒ©ãƒ¼                          â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚                                            â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    NO                                      â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚    â””â”€ ç™»éŒ²URIãŒè¤‡æ•°ï¼Ÿ                       â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚        YES â†’ ã‚¨ãƒ©ãƒ¼ï¼ˆredirect_uriå¿…é ˆï¼‰      â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚ OAuthRequestBaseVerifierï¼ˆå…±é€šæ¤œè¨¼ï¼‰        â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  1. response_typeå¿…é ˆï¼Ÿ                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  2. response_typeãŒæ—¢çŸ¥ã®å€¤ï¼Ÿ               â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  3. ã‚µãƒ¼ãƒãƒ¼ãŒã‚µãƒãƒ¼ãƒˆï¼Ÿ                     â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  4. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒä½¿ç”¨å¯èƒ½ï¼Ÿ                 â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚  5. scopeãŒæœ‰åŠ¹ï¼Ÿ                           â”‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>redirect_uriæ¤œè¨¼ãŒ<strong>æœ€å„ªå…ˆ</strong>ï¼ˆRFC 6749 Section 3.1.2.4æº–æ‹ ï¼‰</li>
<li>redirect_uriä¸æ­£ â†’ <code>OAuthBadRequestException</code> â†’ <strong>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ãªã„</strong></li>
<li>ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ â†’ <code>OAuthRedirectableBadRequestException</code> â†’ <strong>ã‚¨ãƒ©ãƒ¼ã‚’ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</strong></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validator-vs-verifier-ã®é•ã„å®Ÿè£…ãƒ™ãƒ¼ã‚¹">Validator vs Verifier ã®é•ã„ï¼ˆå®Ÿè£…ãƒ™ãƒ¼ã‚¹ï¼‰<a href="#validator-vs-verifier-ã®é•ã„å®Ÿè£…ãƒ™ãƒ¼ã‚¹" class="hash-link" aria-label="Validator vs Verifier ã®é•ã„ï¼ˆå®Ÿè£…ãƒ™ãƒ¼ã‚¹ï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Validator vs Verifier ã®é•ã„ï¼ˆå®Ÿè£…ãƒ™ãƒ¼ã‚¹ï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>è¦³ç‚¹</th><th>OAuthRequestValidator</th><th>OAuthRequestVerifier</th></tr></thead><tbody><tr><td><strong>å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—ä¿¡ç›´å¾Œ</td><td>Contextä½œæˆå¾Œ</td></tr><tr><td><strong>å¿…è¦ãªæƒ…å ±</strong></td><td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿</td><td>Tenantè¨­å®šãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š</td></tr><tr><td><strong>æ¤œè¨¼å†…å®¹</strong></td><td>å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆclient_idå­˜åœ¨ã€é‡è¤‡ãªã—ï¼‰</td><td>ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼ˆredirect_uriä¸€è‡´ã€scopeæœ‰åŠ¹æ€§ï¼‰</td></tr><tr><td><strong>ä¾‹å¤–å‹</strong></td><td><code>OAuthBadRequestException</code></td><td><code>OAuthRedirectableBadRequestException</code></td></tr><tr><td><strong>ã‚¨ãƒ©ãƒ¼å‡¦ç†</strong></td><td>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸è¡¨ç¤º</td><td>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã®æ¤œè¨ã§ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸<br>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã®æ¤œè¨¼å¾Œã¯ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«ã‚¨ãƒ©ãƒ¼ã‚’è¿”å´</td></tr></tbody></table>
<p><strong>RFC 6749 Section 3.1.2.4ã®å®Ÿè£…</strong>:</p>
<blockquote>
<p>redirect_uriãŒç„¡åŠ¹ãªå ´åˆã¯ã€<strong>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¦ã¯ã„ã‘ãªã„</strong>ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç†ç”±ï¼‰</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«">ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«<a href="#ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«" class="hash-link" aria-label="ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authorization-code-ã®ä¸€ç”Ÿ">Authorization Code ã®ä¸€ç”Ÿ<a href="#authorization-code-ã®ä¸€ç”Ÿ" class="hash-link" aria-label="Authorization Code ã®ä¸€ç”Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Authorization Code ã®ä¸€ç”Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. ç™ºè¡Œ (authorizeæ™‚)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ DBä¿å­˜ã€expiresAt=ç¾åœ¨æ™‚åˆ»+10åˆ†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - è¨­å®š: AuthorizationServerConfiguration.authorizationCodeValidDuration()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤: 600ç§’ï¼ˆ10åˆ†ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. ä½¿ç”¨ (Token Requestæ™‚)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”œâ”€ å­˜åœ¨ç¢ºèª âœ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”œâ”€ æœ‰åŠ¹æœŸé™ãƒã‚§ãƒƒã‚¯ âœ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”œâ”€ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸€è‡´ãƒã‚§ãƒƒã‚¯ âœ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â”œâ”€ redirect_uriä¸€è‡´ãƒã‚§ãƒƒã‚¯ âœ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ Access Tokenç™ºè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. å‰Šé™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ Token RequestæˆåŠŸå¾Œã«å³åº§ã«å‰Šé™¤ï¼ˆä½¿ç”¨å¾Œå³å‰Šé™¤ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">âš ï¸ é‡è¦:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 1å›é™ã‚Šä½¿ç”¨å¯èƒ½ï¼ˆä½¿ç”¨å¾Œå³å‰Šé™¤ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- usedãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯å­˜åœ¨ã—ãªã„ï¼ˆå‰Šé™¤ã«ã‚ˆã‚‹å®Ÿè£…ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 10åˆ†ä»¥å†…ã«ä½¿ç”¨ã—ãªã„ã¨æœŸé™åˆ‡ã‚Œâ†’invalid_grant</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®Ÿè£…</strong>: <a href="/idp-server/assets/files/AuthorizationServerExtensionConfiguration-0191c8f39681922fd80fa72529831fb0.java" target="_blank">AuthorizationServerExtensionConfiguration.java</a> - <code>authorizationCodeValidDuration = 600</code>ï¼ˆç§’ï¼‰</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authorizationrequest-ã®ä¸€ç”Ÿ">AuthorizationRequest ã®ä¸€ç”Ÿ<a href="#authorizationrequest-ã®ä¸€ç”Ÿ" class="hash-link" aria-label="AuthorizationRequest ã®ä¸€ç”Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="AuthorizationRequest ã®ä¸€ç”Ÿ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. ä½œæˆ (requestæ™‚)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ PostgreSQL/MySQLã®`authorization_request`ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - expires_at: ç¾åœ¨æ™‚åˆ» + 30åˆ†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€è¨­å®šå¤‰æ›´å¯èƒ½ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - è¨­å®š: AuthorizationServerConfiguration.oauthAuthorizationRequestExpiresIn()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. èªè¨¼ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ AuthenticationTransactionã§çŠ¶æ…‹ç®¡ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - status: PENDING â†’ AUTHENTICATED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Token Request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ Authorization Codeäº¤æ›æ™‚ã«å³åº§ã«å‰Šé™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - AuthorizationCodeGrantRepository.delete()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - AuthorizationRequestRepository.delete()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - å®Ÿè£…: AuthorizationCodeGrantService.java:200-201</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. æœŸé™åˆ‡ã‚Œãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   â””â”€ æ‰‹å‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—APIã§å‰Šé™¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      POST /v1/admin/operations/cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;max_deletion_number&quot;: 10000}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      âš ï¸ æ³¨æ„: è‡ªå‹•å‰Šé™¤æ©Ÿèƒ½ã¯æœªå®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      æœŸé™åˆ‡ã‚Œãƒ‡ãƒ¼ã‚¿ã¯æ‰‹å‹•ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ã‚ã‚Š</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®Ÿè£…</strong>:</p>
<ul>
<li>ä¿å­˜: <a href="/idp-server/assets/files/AuthorizationRequestDataSource-94d70d056fc86d00d23f7fd4d37b4629.java#L36-L38" target="_blank">AuthorizationRequestDataSource.java:36-38</a></li>
<li>å‰Šé™¤: <a href="/idp-server/assets/files/AuthorizationCodeGrantService-51584ffaad2ed181451cdfb01295eae0.java#L200-L201" target="_blank">AuthorizationCodeGrantService.java:200-201</a></li>
<li>æœ‰åŠ¹æœŸé™è¨­å®š: <a href="/idp-server/assets/files/AuthorizationServerExtensionConfiguration-0191c8f39681922fd80fa72529831fb0.java" target="_blank">AuthorizationServerExtensionConfiguration.java</a> - <code>oauthAuthorizationRequestExpiresIn = 1800</code>ï¼ˆç§’ï¼‰</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹">å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹<a href="#å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹" class="hash-link" aria-label="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ææ¡ä»¶">å‰ææ¡ä»¶<a href="#å‰ææ¡ä»¶" class="hash-link" aria-label="å‰ææ¡ä»¶ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å‰ææ¡ä»¶ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ol>
<li><strong>ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæ¸ˆã¿</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TENANT_ID=&quot;18ffff8d-8d97-460f-a71b-33f2e8afd41e&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç™»éŒ²æ¸ˆã¿</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT_ID=&quot;my-web-app&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT_SECRET=&quot;secret-12345&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIRECT_URI=&quot;http://localhost:3000/callback&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ¸ˆã¿</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">USERNAME=&quot;test@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PASSWORD=&quot;password123&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-stepå®Ÿè¡Œ">Step-by-Stepå®Ÿè¡Œ<a href="#step-by-stepå®Ÿè¡Œ" class="hash-link" aria-label="Step-by-Stepå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Step-by-Stepå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-authorization-requestãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œ">1. Authorization Requestï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œï¼‰<a href="#1-authorization-requestãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œ" class="hash-link" aria-label="1. Authorization Requestï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="1. Authorization Requestï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/${TENANT_ID}/v1/authorizations?response_type=code&amp;client_id=${CLIENT_ID}&amp;redirect_uri=${REDIRECT_URI}&amp;scope=openid%20profile%20email&amp;state=random-state-xyz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ</strong>:</p>
<ul>
<li>ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹</li>
<li>URLã«<code>authorization_request_id</code>ãŒå«ã¾ã‚Œã‚‹</li>
</ul>
<p><strong>å®Ÿéš›ã®URLä¾‹</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/signin/index.html?id=abc-123-def&amp;tenant_id=18ffff8d-8d97-460f-a71b-33f2e8afd41e</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-user-authenticationcurlã§å®Ÿè¡Œ">2. User Authenticationï¼ˆcurlã§å®Ÿè¡Œï¼‰<a href="#2-user-authenticationcurlã§å®Ÿè¡Œ" class="hash-link" aria-label="2. User Authenticationï¼ˆcurlã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="2. User Authenticationï¼ˆcurlã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AUTH_REQUEST_ID=&quot;abc-123-def&quot;  # ä¸Šè¨˜URLã‹ã‚‰å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/authorizations/${AUTH_REQUEST_ID}/password&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;username&quot;: &quot;test@example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;password&quot;: &quot;password123&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authenticated&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;next_step&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authorize&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-authorization-approvecurlã§å®Ÿè¡Œ">3. Authorization Approveï¼ˆcurlã§å®Ÿè¡Œï¼‰<a href="#3-authorization-approvecurlã§å®Ÿè¡Œ" class="hash-link" aria-label="3. Authorization Approveï¼ˆcurlã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="3. Authorization Approveï¼ˆcurlã§å®Ÿè¡Œï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/authorizations/${AUTH_REQUEST_ID}/authorize&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i  # ãƒ˜ãƒƒãƒ€ãƒ¼ã‚‚è¡¨ç¤º</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 302 Found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Location: http://localhost:3000/callback?code=eyJhbGc...&amp;state=random-state-xyz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-authorization-codeæŠ½å‡º">4. Authorization CodeæŠ½å‡º<a href="#4-authorization-codeæŠ½å‡º" class="hash-link" aria-label="4. Authorization CodeæŠ½å‡º ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="4. Authorization CodeæŠ½å‡º ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Locationãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰ codeãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CODE=&quot;eyJhbGc...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-token-request">5. Token Request<a href="#5-token-request" class="hash-link" aria-label="5. Token Request ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="5. Token Request ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/tokens&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &quot;grant_type=authorization_code&amp;code=${CODE}&amp;client_id=${CLIENT_ID}&amp;client_secret=${CLIENT_SECRET}&amp;redirect_uri=${REDIRECT_URI}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bearer&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expires_in&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3600</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;refresh_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;openid profile email&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ">ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ<a href="#ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ" class="hash-link" aria-label="ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>AuthorizationRequestã®ç¢ºèª</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ç›´æ¥ç¢ºèªï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it postgres psql -U idp_user -d idp_db -c \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;SELECT id, client_id, redirect_uri, scope, created_at FROM authorization_request WHERE tenant_id=&#x27;${TENANT_ID}&#x27; ORDER BY created_at DESC LIMIT 5;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ãƒ­ã‚°ç¢ºèª</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># idp-serverã®ãƒ­ã‚°ã‚’ç›£è¦–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker logs -f idp-server | grep -E &quot;OAuthFlowEntryService|AuthorizationRequest&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="parpushed-authorization-request">PARï¼ˆPushed Authorization Requestï¼‰<a href="#parpushed-authorization-request" class="hash-link" aria-label="PARï¼ˆPushed Authorization Requestï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="PARï¼ˆPushed Authorization Requestï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>RFC 9126æº–æ‹ ã®æ‹¡å¼µæ©Ÿèƒ½</strong> - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ç‰ˆAuthorization Request</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šå¸¸ã®authorization-requestã¨ã®é•ã„">é€šå¸¸ã®Authorization Requestã¨ã®é•ã„<a href="#é€šå¸¸ã®authorization-requestã¨ã®é•ã„" class="hash-link" aria-label="é€šå¸¸ã®Authorization Requestã¨ã®é•ã„ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="é€šå¸¸ã®Authorization Requestã¨ã®é•ã„ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>é …ç›®</th><th>é€šå¸¸ã®GET</th><th>PARï¼ˆPOSTï¼‰</th></tr></thead><tbody><tr><td><strong>é€ä¿¡æ–¹æ³•</strong></td><td>URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</td><td>POSTãƒœãƒ‡ã‚£</td></tr><tr><td><strong>ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</strong></td><td><code>GET /v1/authorizations</code></td><td><code>POST /v1/authorizations/push</code></td></tr><tr><td><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</strong></td><td>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒURLéœ²å‡º</td><td>ãƒãƒƒã‚¯ãƒãƒ£ãƒãƒ«ã§å®‰å…¨</td></tr><tr><td><strong>ã‚µã‚¤ã‚ºåˆ¶é™</strong></td><td>URLã‚µã‚¤ã‚ºåˆ¶é™ã‚ã‚Š</td><td>åˆ¶é™ãªã—</td></tr><tr><td><strong>FAPIè¦ä»¶</strong></td><td>-</td><td>FAPI 2.0ã§å¿…é ˆ</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parä½¿ç”¨ãƒ•ãƒ­ãƒ¼">PARä½¿ç”¨ãƒ•ãƒ­ãƒ¼<a href="#parä½¿ç”¨ãƒ•ãƒ­ãƒ¼" class="hash-link" aria-label="PARä½¿ç”¨ãƒ•ãƒ­ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="PARä½¿ç”¨ãƒ•ãƒ­ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Step 1: PARå®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /{tenant-id}/v1/authorizations/push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;response_type&quot;: &quot;code&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;client_id&quot;: &quot;xxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;redirect_uri&quot;: &quot;https://...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scope&quot;: &quot;openid profile&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ãƒ¬ã‚¹ãƒãƒ³ã‚¹:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;request_uri&quot;: &quot;urn:ietf:params:oauth:request_uri:abc123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expires_in&quot;: 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Step 2: request_uriã§èªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /{tenant-id}/v1/authorizations?client_id=xxx&amp;request_uri=urn:ietf:params:oauth:request_uri:abc123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ï¼ˆé€šå¸¸ã®ãƒ•ãƒ­ãƒ¼ã¨åŒã˜ï¼‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="e2eãƒ†ã‚¹ãƒˆä¾‹">E2Eãƒ†ã‚¹ãƒˆä¾‹<a href="#e2eãƒ†ã‚¹ãƒˆä¾‹" class="hash-link" aria-label="E2Eãƒ†ã‚¹ãƒˆä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="E2Eãƒ†ã‚¹ãƒˆä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«</strong>: <code>e2e/src/tests/scenario/application/scenario-02-sso-oidc.test.js</code></p>
<p>ä»¥ä¸‹ã¯æ•™è‚²ç”¨ã®ç°¡ç•¥åŒ–ã—ãŸä¾‹ã§ã™ã€‚å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã‚ˆã‚Šè¤‡é›‘ãªè¨­å®šã‚’å«ã¿ã¾ã™ã€‚</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">v4</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> uuidv4 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;uuid&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> axios </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;axios&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">describe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Authorization Code Flow&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> tenantId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;18ffff8d-8d97-460f-a71b-33f2e8afd41e&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> clientId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;test-client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> redirectUri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://client.example.com/callback&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;should complete authorization code flow&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1. Authorization Request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> authResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">http://localhost:8080/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">tenantId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/v1/authorizations</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">params</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">response_type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;code&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">client_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> clientId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">redirect_uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> redirectUri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">scope</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;openid profile email&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;random-state&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">maxRedirects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function-variable function" style="color:#d73a49">validateStatus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢URLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toContain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/signin/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// authorization_request_idæŠ½å‡º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> authReqId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://localhost&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2. User Authenticationï¼ˆåˆ¥ãƒ†ã‚¹ãƒˆã§å®Ÿæ–½ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">http://localhost:8080/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">tenantId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/v1/authentications/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">authReqId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;password123&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3. Authorization Approve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> approveResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">http://localhost:8080/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">tenantId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/v1/authorizations/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">authReqId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/approve</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">maxRedirects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function-variable function" style="color:#d73a49">validateStatus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> status </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">302</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆAuthorization Codeä»˜ãï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">approveResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">302</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> redirectUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">approveResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redirectUrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">origin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> redirectUrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">redirectUri</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redirectUrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">searchParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;code&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBeTruthy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 4. Token Requestï¼ˆæ¬¡ã®ã‚¬ã‚¤ãƒ‰å‚ç…§ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tokenResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">http://localhost:8080/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">tenantId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/v1/tokens</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">grant_type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;authorization_code&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">code</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">client_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> clientId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">client_secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;client-secret&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">redirect_uri</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> redirectUri</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/x-www-form-urlencoded&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tokenResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tokenResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;access_token&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tokenResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;id_token&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tokenResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;token_type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Bearer&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•">ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•<a href="#ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•" class="hash-link" aria-label="ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³• ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³• ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼1-invalid_request---redirect_uriä¸ä¸€è‡´">ã‚¨ãƒ©ãƒ¼1: <code>invalid_request</code> - redirect_uriä¸ä¸€è‡´<a href="#ã‚¨ãƒ©ãƒ¼1-invalid_request---redirect_uriä¸ä¸€è‡´" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼1-invalid_request---redirect_uriä¸ä¸€è‡´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼1-invalid_request---redirect_uriä¸ä¸€è‡´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /{tenant-id}/v1/authorizations?response_type=code&amp;client_id=my-app&amp;redirect_uri=https://wrong-domain.com/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">302 Redirect to ã‚¨ãƒ©ãƒ¼ç”»é¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã¾ãŸã¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://registered-uri.com/callback?error=invalid_request&amp;error_description=redirect_uri+does+not+match+registered+URIs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç™»éŒ²æ™‚ã®<code>redirect_uris</code>ã¨ä¸€è‡´ã—ãªã„</p>
<p><strong>è§£æ±ºç­–</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. ç™»éŒ²æ¸ˆã¿redirect_uriã‚’ç¢ºèª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET &quot;http://localhost:8080/v1/management/tenants/${TENANT_ID}/clients/${CLIENT_ID}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer ${ADMIN_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | jq &#x27;.redirect_uris&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å‡ºåŠ›ä¾‹:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># [&quot;https://app.example.com/callback&quot;, &quot;http://localhost:3000/callback&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. å®Œå…¨ä¸€è‡´ã™ã‚‹URIã‚’ä½¿ç”¨ï¼ˆãƒ‘ã‚¹ã€ãƒãƒ¼ãƒˆã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã™ã¹ã¦ä¸€è‡´å¿…é ˆï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redirect_uri=https://app.example.com/callback  # âœ…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redirect_uri=https://app.example.com/callback/ # âŒ æœ«å°¾ã‚¹ãƒ©ãƒƒã‚·ãƒ¥é•ã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redirect_uri=http://app.example.com/callback   # âŒ httpã¨httpsã®é•ã„</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼2-unsupported_response_type---æœªã‚µãƒãƒ¼ãƒˆã®response_type">ã‚¨ãƒ©ãƒ¼2: <code>unsupported_response_type</code> - æœªã‚µãƒãƒ¼ãƒˆã®response_type<a href="#ã‚¨ãƒ©ãƒ¼2-unsupported_response_type---æœªã‚µãƒãƒ¼ãƒˆã®response_type" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼2-unsupported_response_type---æœªã‚µãƒãƒ¼ãƒˆã®response_type ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼2-unsupported_response_type---æœªã‚µãƒãƒ¼ãƒˆã®response_type ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;unsupported_response_type&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error_description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authorization server is unsupported response_type (token)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>:</p>
<ul>
<li><code>response_type=token</code>ï¼ˆImplicit Flowï¼‰ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç†ç”±ã§ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹</li>
<li>ã¾ãŸã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ãŒè¨±å¯ã—ã¦ã„ãªã„</li>
</ul>
<p><strong>è§£æ±ºç­–</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Authorization Code Flowã‚’ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">response_type=code  # âœ… æ¨å¥¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ã‚µãƒ¼ãƒãƒ¼è¨­å®šã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹response_typeã‚’ç¢ºèª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET &quot;http://localhost:8080/${TENANT_ID}/.well-known/openid-configuration&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | jq &#x27;.response_types_supported&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å‡ºåŠ›ä¾‹:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># [&quot;code&quot;, &quot;code id_token&quot;, &quot;code token&quot;, &quot;code id_token token&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰  ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼3-invalid_scope---ç„¡åŠ¹ãªscope">ã‚¨ãƒ©ãƒ¼3: <code>invalid_scope</code> - ç„¡åŠ¹ãªscope<a href="#ã‚¨ãƒ©ãƒ¼3-invalid_scope---ç„¡åŠ¹ãªscope" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼3-invalid_scope---ç„¡åŠ¹ãªscope ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼3-invalid_scope---ç„¡åŠ¹ãªscope ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">302 Redirect to:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://app.example.com/callback?error=invalid_scope&amp;error_description=authorization+request+does+not+contains+valid+scope</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>:</p>
<ul>
<li>scopeãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒç©º</li>
<li>ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„scopeã‚’æŒ‡å®š</li>
</ul>
<p><strong>è§£æ±ºç­–</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. æœ€ä½é™å¿…é ˆã®scope</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scope=openid  # âœ… OIDCã®å ´åˆã¯å¿…é ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. è¿½åŠ æƒ…å ±ãŒå¿…è¦ãªå ´åˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scope=openid profile email  # âœ… ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. ã‚«ã‚¹ã‚¿ãƒ scopeã®ç¢ºèªï¼ˆãƒ†ãƒŠãƒ³ãƒˆè¨­å®šä¾å­˜ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET &quot;http://localhost:8080/${TENANT_ID}/.well-known/openid-configuration&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | jq &#x27;.scopes_supported&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼4-èªè¨¼æœªå®Œäº†ã§authorizeå®Ÿè¡Œ">ã‚¨ãƒ©ãƒ¼4: èªè¨¼æœªå®Œäº†ã§<code>/authorize</code>å®Ÿè¡Œ<a href="#ã‚¨ãƒ©ãƒ¼4-èªè¨¼æœªå®Œäº†ã§authorizeå®Ÿè¡Œ" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼4-èªè¨¼æœªå®Œäº†ã§authorizeå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼4-èªè¨¼æœªå®Œäº†ã§authorizeå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authentication_required&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error_description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User authentication is not completed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>: Phase 2ï¼ˆèªè¨¼ï¼‰ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦Phase 3ï¼ˆCodeç™ºè¡Œï¼‰ã‚’å®Ÿè¡Œ</p>
<p><strong>æ­£ã—ã„é †åº</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># âŒ é–“é•ã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/authorizations/${AUTH_REQUEST_ID}/authorize&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># â†’ ã‚¨ãƒ©ãƒ¼: authentication_required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># âœ… æ­£ã—ã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 1: èªè¨¼å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/authorizations/${AUTH_REQUEST_ID}/password&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{&quot;username&quot;: &quot;user@example.com&quot;, &quot;password&quot;: &quot;secret&quot;}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Step 2: èªè¨¼å®Œäº†å¾Œã«authorizeå®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://localhost:8080/${TENANT_ID}/v1/authorizations/${AUTH_REQUEST_ID}/authorize&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼5-authorization-codeæœŸé™åˆ‡ã‚Œ">ã‚¨ãƒ©ãƒ¼5: Authorization CodeæœŸé™åˆ‡ã‚Œ<a href="#ã‚¨ãƒ©ãƒ¼5-authorization-codeæœŸé™åˆ‡ã‚Œ" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼5: Authorization CodeæœŸé™åˆ‡ã‚Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼5: Authorization CodeæœŸé™åˆ‡ã‚Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼ï¼ˆToken Requestæ™‚ï¼‰</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;invalid_grant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error_description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;authorization code is expired&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>: Authorization Codeç™ºè¡Œã‹ã‚‰10åˆ†ä»¥ä¸ŠçµŒé</p>
<p><strong>è§£æ±ºç­–</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Authorization Codeç™ºè¡Œå¾Œã€ã™ãã«Token Requestå®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># æœ‰åŠ¹æœŸé™: 10åˆ†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã¯ã€æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># â†’ å†åº¦Authorization Requestã‹ã‚‰å®Ÿè¡Œ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¨ãƒ©ãƒ¼6-authorization-codeå†åˆ©ç”¨">ã‚¨ãƒ©ãƒ¼6: Authorization Codeå†åˆ©ç”¨<a href="#ã‚¨ãƒ©ãƒ¼6-authorization-codeå†åˆ©ç”¨" class="hash-link" aria-label="ã‚¨ãƒ©ãƒ¼6: Authorization Codeå†åˆ©ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¨ãƒ©ãƒ¼6: Authorization Codeå†åˆ©ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;invalid_grant&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error_description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;not found authorization code&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå› </strong>: åŒã˜Authorization Codeã§2å›Token Requestå®Ÿè¡Œ</p>
<p><strong>å‹•ä½œ</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1å›ç›®ã®Token Request: âœ… æˆåŠŸï¼ˆèªå¯ã‚³ãƒ¼ãƒ‰å‰Šé™¤ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2å›ç›®ã®Token Request: âŒ ã‚¨ãƒ©ãƒ¼ï¼ˆinvalid_grantï¼‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å¯¾å‡¦</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Authorization Codeã¯1å›é™ã‚Šä½¿ç”¨å¯èƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># å†åº¦å¿…è¦ãªå ´åˆã¯ã€æœ€åˆã‹ã‚‰Authorization Flowã‚’å®Ÿè¡Œ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—<a href="#æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—" class="hash-link" aria-label="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>âœ… Authorization Code Flowã®å®Ÿè£…ã‚’ç†è§£ã—ãŸï¼</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">ğŸ“– æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ<a href="#-æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ" class="hash-link" aria-label="ğŸ“– æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ“– æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ol>
<li><a href="/idp-server/docs/content_06_developer-guide/application-plane/token-endpoint">03. Token Flowå®Ÿè£…</a> - ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œãƒ»æ¤œè¨¼</li>
<li><a href="/idp-server/docs/content_06_developer-guide/application-plane/authentication">04. Authenticationå®Ÿè£…</a> - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-è©³ç´°æƒ…å ±">ğŸ”— è©³ç´°æƒ…å ±<a href="#-è©³ç´°æƒ…å ±" class="hash-link" aria-label="   ğŸ”— è©³ç´°æƒ…å ± ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ”— è©³ç´°æƒ…å ± ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ul>
<li><a href="/idp-server/docs/content_10_ai_developer/ai-11-core#oauth---oauth-20%E3%82%B3%E3%82%A2">AIé–‹ç™ºè€…å‘ã‘: Core - OAuth</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1" target="_blank" rel="noopener noreferrer">RFC 6749 Section 4.1</a> - Authorization Code Grant</li>
</ul>
<hr>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/OAuthFlowEntryService-fd20b725962d5936869d5c3d79f544ea.java" target="_blank">OAuthFlowEntryService.java</a>
<strong>æœ€çµ‚æ›´æ–°</strong>: 2025-10-12</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/03-application-plane/02-authorization-flow.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_06_developer-guide/application-plane/overview"><div class="pagination-nav__sublabel">å‰ã¸</div><div class="pagination-nav__label">Application Plane - OAuth/OIDCèªè¨¼ãƒ•ãƒ­ãƒ¼æ¦‚è¦</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_06_developer-guide/application-plane/token-endpoint"><div class="pagination-nav__sublabel">æ¬¡ã¸</div><div class="pagination-nav__label">Token Endpointå®Ÿè£…ã‚¬ã‚¤ãƒ‰</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„" class="table-of-contents__link toc-highlight">ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„</a><ul><li><a href="#æ‰€è¦æ™‚é–“" class="table-of-contents__link toc-highlight">æ‰€è¦æ™‚é–“</a></li><li><a href="#å‰æçŸ¥è­˜" class="table-of-contents__link toc-highlight">å‰æçŸ¥è­˜</a></li></ul></li><li><a href="#authorization-code-flowã¨ã¯" class="table-of-contents__link toc-highlight">Authorization Code Flowã¨ã¯</a><ul><li><a href="#ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹" class="table-of-contents__link toc-highlight">ãªãœã“ã®ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªã®ã‹ï¼Ÿ</a></li></ul></li><li><a href="#å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ" class="table-of-contents__link toc-highlight">å®Ÿè£…ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ</a><ul><li><a href="#30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ" class="table-of-contents__link toc-highlight">30ç§’ã§ç†è§£ã™ã‚‹å…¨ä½“åƒ</a></li><li><a href="#ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™" class="table-of-contents__link toc-highlight">ä¸»è¦ã‚¯ãƒ©ã‚¹ã®è²¬å‹™</a></li><li><a href="#ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ" class="table-of-contents__link toc-highlight">ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</a></li><li><a href="#coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" class="table-of-contents__link toc-highlight">Coreå±¤ã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a></li></ul></li><li><a href="#3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼" class="table-of-contents__link toc-highlight">3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã®å‡¦ç†ãƒ•ãƒ­ãƒ¼</a><ul><li><a href="#phase-1-authorization-requestèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ" class="table-of-contents__link toc-highlight">Phase 1: Authorization Requestï¼ˆèªå¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰</a></li><li><a href="#phase-2-user-authenticationãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼" class="table-of-contents__link toc-highlight">Phase 2: User Authenticationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼‰</a></li><li><a href="#phase-3-authorization-approveèªå¯æ‰¿èª" class="table-of-contents__link toc-highlight">Phase 3: Authorization Approveï¼ˆèªå¯æ‰¿èªï¼‰</a></li></ul></li><li><a href="#ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³" class="table-of-contents__link toc-highlight">ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</a><ul><li><a href="#å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿" class="table-of-contents__link toc-highlight">å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</a></li><li><a href="#ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£" class="table-of-contents__link toc-highlight">ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a></li><li><a href="#validator-å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯" class="table-of-contents__link toc-highlight">Validator: å…¥åŠ›å½¢å¼ãƒã‚§ãƒƒã‚¯</a></li><li><a href="#verifier-ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼" class="table-of-contents__link toc-highlight">Verifier: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ®µéšçš„æ¤œè¨¼</a></li><li><a href="#oauth2requestverifier-ã®æ¤œè¨¼è©³ç´°" class="table-of-contents__link toc-highlight">OAuth2RequestVerifier ã®æ¤œè¨¼è©³ç´°</a></li><li><a href="#validator-vs-verifier-ã®é•ã„å®Ÿè£…ãƒ™ãƒ¼ã‚¹" class="table-of-contents__link toc-highlight">Validator vs Verifier ã®é•ã„ï¼ˆå®Ÿè£…ãƒ™ãƒ¼ã‚¹ï¼‰</a></li></ul></li><li><a href="#ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«" class="table-of-contents__link toc-highlight">ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«</a><ul><li><a href="#authorization-code-ã®ä¸€ç”Ÿ" class="table-of-contents__link toc-highlight">Authorization Code ã®ä¸€ç”Ÿ</a></li><li><a href="#authorizationrequest-ã®ä¸€ç”Ÿ" class="table-of-contents__link toc-highlight">AuthorizationRequest ã®ä¸€ç”Ÿ</a></li></ul></li><li><a href="#å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹" class="table-of-contents__link toc-highlight">å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹</a><ul><li><a href="#å‰ææ¡ä»¶" class="table-of-contents__link toc-highlight">å‰ææ¡ä»¶</a></li><li><a href="#step-by-stepå®Ÿè¡Œ" class="table-of-contents__link toc-highlight">Step-by-Stepå®Ÿè¡Œ</a></li><li><a href="#ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ" class="table-of-contents__link toc-highlight">ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ</a></li></ul></li><li><a href="#parpushed-authorization-request" class="table-of-contents__link toc-highlight">PARï¼ˆPushed Authorization Requestï¼‰</a><ul><li><a href="#é€šå¸¸ã®authorization-requestã¨ã®é•ã„" class="table-of-contents__link toc-highlight">é€šå¸¸ã®Authorization Requestã¨ã®é•ã„</a></li><li><a href="#parä½¿ç”¨ãƒ•ãƒ­ãƒ¼" class="table-of-contents__link toc-highlight">PARä½¿ç”¨ãƒ•ãƒ­ãƒ¼</a></li></ul></li><li><a href="#e2eãƒ†ã‚¹ãƒˆä¾‹" class="table-of-contents__link toc-highlight">E2Eãƒ†ã‚¹ãƒˆä¾‹</a></li><li><a href="#ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•" class="table-of-contents__link toc-highlight">ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•</a><ul><li><a href="#ã‚¨ãƒ©ãƒ¼1-invalid_request---redirect_uriä¸ä¸€è‡´" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼1: <code>invalid_request</code> - redirect_uriä¸ä¸€è‡´</a></li><li><a href="#ã‚¨ãƒ©ãƒ¼2-unsupported_response_type---æœªã‚µãƒãƒ¼ãƒˆã®response_type" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼2: <code>unsupported_response_type</code> - æœªã‚µãƒãƒ¼ãƒˆã®response_type</a></li><li><a href="#ã‚¨ãƒ©ãƒ¼3-invalid_scope---ç„¡åŠ¹ãªscope" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼3: <code>invalid_scope</code> - ç„¡åŠ¹ãªscope</a></li><li><a href="#ã‚¨ãƒ©ãƒ¼4-èªè¨¼æœªå®Œäº†ã§authorizeå®Ÿè¡Œ" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼4: èªè¨¼æœªå®Œäº†ã§<code>/authorize</code>å®Ÿè¡Œ</a></li><li><a href="#ã‚¨ãƒ©ãƒ¼5-authorization-codeæœŸé™åˆ‡ã‚Œ" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼5: Authorization CodeæœŸé™åˆ‡ã‚Œ</a></li><li><a href="#ã‚¨ãƒ©ãƒ¼6-authorization-codeå†åˆ©ç”¨" class="table-of-contents__link toc-highlight">ã‚¨ãƒ©ãƒ¼6: Authorization Codeå†åˆ©ç”¨</a></li></ul></li><li><a href="#æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—" class="table-of-contents__link toc-highlight">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</a><ul><li><a href="#-æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ" class="table-of-contents__link toc-highlight">ğŸ“– æ¬¡ã«èª­ã‚€ã¹ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li><li><a href="#-è©³ç´°æƒ…å ±" class="table-of-contents__link toc-highlight">ğŸ”— è©³ç´°æƒ…å ±</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>