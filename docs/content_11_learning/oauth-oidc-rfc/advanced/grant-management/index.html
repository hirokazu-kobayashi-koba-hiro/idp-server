<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_11_learning/oauth-oidc-rfc/advanced/grant-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">OAuth 2.0 Grant Management | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/grant-management"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OAuth 2.0 Grant Management | IdP-Server Documentation"><meta data-rh="true" name="description" content="Grant Management は、ユーザーが付与した認可（Grant）を照会・管理するための API を定義した仕様です。"><meta data-rh="true" property="og:description" content="Grant Management は、ユーザーが付与した認可（Grant）を照会・管理するための API を定義した仕様です。"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/grant-management"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/grant-management" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/grant-management" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.e8840035.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.b70dab8e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">はじめに</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ドキュメントガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">製品紹介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">クイックスタート</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/foundation/concept-01-multi-tenant">コア概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">認証・認可プロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/">How-to（設定・運用レシピ）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/">開発者ガイド</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">リファレンス</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">学習（Learning）</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">アイデンティティ管理の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-fundamentals/modern-web-authz-authn">OAuth 2.0の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-tokens/id-token-jwt">OAuth 2.0トークン</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/openid-connect/oauth-oidc-basics">OpenID Connect</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-architecture-rp-browser-authenticator">FIDO2/WebAuthn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/security/glossary">セキュリティ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/multi-tenancy/multi-tenancy-basics">マルチテナント</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/advanced-protocols/ciba-basics">高度なプロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/http-rest/http-basics">HTTP/REST</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/jwt-jose/jwt-introduction">JWT/JOSE</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/">OAuth/OIDC RFC学習</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/">OAuth 2.0 / OpenID Connect RFC 学習ガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/core/rfc6749-oauth2-core">基礎（OAuth 2.0 Core）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/jose/rfc7515-jws">JWT/JOSE（署名・暗号化）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/client-auth/rfc7521-assertion-framework">クライアント認証</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/extensions/rfc7009-revocation">OAuth 2.0 拡張</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/oidc/back-channel-logout">OpenID Connect</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/security/attack-patterns">セキュリティ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/fapi1-advanced">高度なプロトコル</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/fapi1-advanced">FAPI 1.0 Advanced Profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/fapi1-baseline">FAPI 1.0 Baseline Profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/fapi2-security">FAPI 2.0 Security Profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/grant-management">OAuth 2.0 Grant Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/oidc-ciba">OpenID Connect CIBA（Client-Initiated Backchannel Authentication）</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced-identity/oid4vci">Advanced Identity</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/verifiable-credentials/">Verifiable Credentials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/data-formats/">データフォーマット</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/postgresql/">PostgreSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/crypto/">暗号化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/kubernetes/">コンテナ/Kubernetes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/linux/">Linux</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">運用（Ops）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">プロジェクト</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">学習（Learning）</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">OAuth/OIDC RFC学習</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">高度なプロトコル</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OAuth 2.0 Grant Management</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>OAuth 2.0 Grant Management</h1></header>
<p>Grant Management は、ユーザーが付与した認可（Grant）を照会・管理するための API を定義した仕様です。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="目次">目次<a href="#目次" class="hash-link" aria-label="目次 への直接リンク" title="目次 への直接リンク">​</a></h2>
<ol>
<li><a href="#%E7%AC%AC1%E9%83%A8-%E6%A6%82%E8%A6%81%E7%B7%A8">第1部: 概要編</a></li>
<li><a href="#%E7%AC%AC2%E9%83%A8-%E8%A9%B3%E7%B4%B0%E7%B7%A8">第2部: 詳細編</a></li>
<li><a href="#%E7%AC%AC3%E9%83%A8-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3">第3部: セキュリティ</a></li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="第1部-概要編">第1部: 概要編<a href="#第1部-概要編" class="hash-link" aria-label="第1部: 概要編 への直接リンク" title="第1部: 概要編 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-management-とは">Grant Management とは？<a href="#grant-management-とは" class="hash-link" aria-label="Grant Management とは？ への直接リンク" title="Grant Management とは？ への直接リンク">​</a></h3>
<p>Grant Management は、エンドユーザーと RP が認可サーバーで管理される<strong>認可（Grant）を照会・更新・削除</strong>できる API です。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Grant のライフサイクル:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┌────────────┐      認可リクエスト      ┌────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │     RP     │ ──────────────────────► │     AS     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │            │ ◄────────────────────── │            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └────────────┘     Grant 作成           └────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ┌─────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │    Grant    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │ - sub       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │ - client_id │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │ - scope     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   │ - claims    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   └─────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ┌──────────────────┼──────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ▼                  ▼                  ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    照会(GET)          更新(PATCH)        削除(DELETE)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="なぜ-grant-management-が必要なのか">なぜ Grant Management が必要なのか？<a href="#なぜ-grant-management-が必要なのか" class="hash-link" aria-label="なぜ Grant Management が必要なのか？ への直接リンク" title="なぜ Grant Management が必要なのか？ への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="背景と歴史">背景と歴史<a href="#背景と歴史" class="hash-link" aria-label="背景と歴史 への直接リンク" title="背景と歴史 への直接リンク">​</a></h4>
<p>従来のOAuth 2.0では、ユーザーが一度認可を付与すると、その後の管理が困難でした：</p>
<table><thead><tr><th>課題</th><th>従来の方法</th><th>Grant Management による解決</th></tr></thead><tbody><tr><td>認可状況の確認</td><td>ASの独自UIのみ</td><td>標準APIで照会可能</td></tr><tr><td>認可の取り消し</td><td>ASの独自UIのみ</td><td>DELETE APIで取り消し</td></tr><tr><td>段階的な認可</td><td>毎回新規認可</td><td>既存Grantを更新</td></tr><tr><td>GDPR対応</td><td>個別実装</td><td>標準APIでユーザーに制御権</td></tr><tr><td>RP側からの確認</td><td>不可能</td><td>GET APIで状況確認可能</td></tr><tr><td>監査ログ</td><td>個別実装</td><td>標準APIで統一的なログ</td></tr></tbody></table>
<p>Grant Managementは2020年頃からFAPI 2.0の一部として策定が始まり、ユーザーのプライバシーと自律性を重視した設計となっています。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="脅威モデル">脅威モデル<a href="#脅威モデル" class="hash-link" aria-label="脅威モデル への直接リンク" title="脅威モデル への直接リンク">​</a></h4>
<p>Grant Management が対処する主な脅威：</p>
<ol>
<li>
<p><strong>不正なGrant操作</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">攻撃シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 攻撃者が別ユーザーのGrant IDを推測</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 攻撃者がGrant情報を照会または削除を試みる</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 成功すればユーザーのプライバシー侵害</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">対策:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Grant IDに十分なエントロピー（128ビット以上）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- アクセス制御（subject検証）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 監査ログ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Grant情報の漏洩</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">攻撃シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. ネットワーク盗聴でGrant情報を取得</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 攻撃者がユーザーの認可状況を把握</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">対策:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- TLS必須</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 機密情報の最小化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- レスポンスの適切なキャッシュ制御</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>GDPR違反</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">リスク:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ユーザーが自分のデータを管理できない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 忘れられる権利が実現できない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">対策:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Grant Management APIでユーザーに制御権を付与</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- データエクスポート機能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 削除の完全性保証</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主要なユースケース">主要なユースケース<a href="#主要なユースケース" class="hash-link" aria-label="主要なユースケース への直接リンク" title="主要なユースケース への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユースケース1-ユーザー向けダッシュボード">ユースケース1: ユーザー向けダッシュボード<a href="#ユースケース1-ユーザー向けダッシュ ボード" class="hash-link" aria-label="ユースケース1: ユーザー向けダッシュボード への直接リンク" title="ユースケース1: ユーザー向けダッシュボード への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ユーザーが「連携アプリ管理」画面を表示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">表示内容:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. 銀行アプリ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 権限: 口座情報の閲覧</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 付与日: 2024-01-15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 最終利用: 2024-01-20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - [取り消し]ボタン</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. 家計簿アプリ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 権限: 取引履歴の閲覧</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 付与日: 2024-02-01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 最終利用: 2024-02-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - [取り消し]ボタン</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">実装:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GET /grants で一覧取得</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DELETE /grants/\{grant_id\} で取り消し</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユースケース2-段階的な認可">ユースケース2: 段階的な認可<a href="#ユースケース2-段階的な認可" class="hash-link" aria-label="ユースケース2: 段階的な認可 への直接リンク" title="ユースケース2: 段階的な認可 への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ユーザーが銀行アプリを使用中、決済機能を初めて使う</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">フロー:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. 初回ログイン</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     scope=openid profile accounts:read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     → Grant A 作成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. 決済機能を使う（後日）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - アプリ: 「決済権限が必要です」</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - grant_id=A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - grant_management_action=merge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - scope=openid profile accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3. AS: ユーザーに追加同意を求める</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     「銀行アプリが決済権限 を要求しています」</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  4. 同意後、Grant A が更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     scope=openid profile accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">メリット:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 必要な時に必要な権限のみ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ユーザー体験の向上</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - セキュリティの向上（最小権限の原則）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユースケース3-rpによる状況確認">ユースケース3: RPによる状況確認<a href="#ユースケース3-rpによる状況確認" class="hash-link" aria-label="ユースケース3: RPによる状況確認 への直接リンク" title="ユースケース3: RPによる状況確認 への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ユーザーが「家計簿アプリで銀行口座が同期できない」と問い合わせ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RPの対応:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GET /grants/\{grant_id\}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  レスポンス:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;grant_id&quot;: &quot;...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;status&quot;: &quot;active&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scope&quot;: &quot;openid accounts:read&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  → scopeが正しいことを確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  → 別の原因を調査</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユースケース4-gdpr対応データポータビリティ">ユースケース4: GDPR対応（データポータビリティ）<a href="#ユースケース4-gdpr対応データポータビリティ" class="hash-link" aria-label="ユースケース4: GDPR対応（データポータビリティ） への直接リンク" title="ユースケース4: GDPR対応（データポータビリティ） への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">シナリオ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ユーザーが「自分のデータをエクスポートしたい」と要求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">フロー:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. GET /grants でユーザーのすべてのGrantを取得</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. 各Grantの詳細情報をJSON形式でエクスポート</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3. ユーザーにダウンロード提供</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">データ例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;user_id&quot;: &quot;user-123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;export_date&quot;: &quot;2024-01-20T10:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grants&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;grant_id&quot;: &quot;PTRWWMo_YsGxl17r6MBj5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_name&quot;: &quot;Banking App&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;scope&quot;: &quot;openid accounts:read&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;created_at&quot;: &quot;2024-01-01T00:00:00Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="規制対応">規制対応<a href="#規制対応" class="hash-link" aria-label="規制対応 への直接リンク" title="規制対応 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gdpr一般データ保護規則">GDPR（一般データ保護規則）<a href="#gdpr一般データ保護規則" class="hash-link" aria-label="GDPR（一般データ保護規則） への直接リンク" title="GDPR（一般データ保護規則） への直接リンク">​</a></h4>
<table><thead><tr><th>GDPR要件</th><th>Grant Management による実現</th></tr></thead><tbody><tr><td><strong>アクセス権</strong></td><td>GET /grants でユーザーが自分のGrantを照会</td></tr><tr><td><strong>訂正権</strong></td><td>PATCH /grants でGrantを更新（scope変更）</td></tr><tr><td><strong>削除権（忘れられる権利）</strong></td><td>DELETE /grants でGrantを削除</td></tr><tr><td><strong>データポータビリティ権</strong></td><td>GET /grants でデータをエクスポート</td></tr><tr><td><strong>透明性</strong></td><td>Grantの詳細情報（scope, claims等）を提供</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="その他の規制">その他の規制<a href="#その他の規制" class="hash-link" aria-label="その他の規制 への直接リンク" title="その他の規制 への直接リンク">​</a></h4>
<table><thead><tr><th>規制</th><th>地域</th><th>Grant Management の役割</th></tr></thead><tbody><tr><td><strong>CCPA</strong></td><td>カリフォルニア州</td><td>ユーザーのデータアクセス権・削除権を保証</td></tr><tr><td><strong>LGPD</strong></td><td>ブラジル</td><td>GDPRと同様の権利を実現</td></tr><tr><td><strong>POPIA</strong></td><td>南アフリカ</td><td>データ主体の権利を実現</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="第2部-詳細編">第2部: 詳細編<a href="#第2部-詳細編" class="hash-link" aria-label="第2部: 詳細編 への直接リンク" title="第2部: 詳細編 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-id">Grant ID<a href="#grant-id" class="hash-link" aria-label="Grant ID への直接リンク" title="Grant ID への直接リンク">​</a></h3>
<p>Grant はユニークな識別子（Grant ID）で識別されます。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">トークンレスポンスに Grant ID が含まれる:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;access_token&quot;: &quot;eyJhbGciOiJSUzI1NiIs...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;token_type&quot;: &quot;Bearer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expires_in&quot;: 3600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;refresh_token&quot;: &quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grant_id&quot;: &quot;PTRWWMo_YsGxl17r6MBj5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Grant ID の要件:</p>
<ul>
<li><strong>ユニークであること</strong>: 全システムで一意</li>
<li><strong>推測不可能であること</strong>: 128ビット以上のエントロピー</li>
<li><strong>URL Safe であること</strong>: Base64URL エンコード</li>
<li><strong>長期間有効</strong>: Grantの有効期限まで（通常6ヶ月〜1年）</li>
<li><strong>不変であること</strong>: 一度発行されたら変更されない</li>
</ul>
<p>Grant ID の生成例:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-の照会get">Grant の照会（GET）<a href="#grant-の照会get" class="hash-link" aria-label="Grant の照会（GET） への直接リンク" title="Grant の照会（GET） への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="単一-grant-の取得">単一 Grant の取得<a href="#単一-grant-の取得" class="hash-link" aria-label="単一 Grant の取得 への直接リンク" title="単一 Grant の取得 への直接リンク">​</a></h4>
<p>リクエスト:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /grants/PTRWWMo_YsGxl17r6MBj5 HTTP/1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host: auth.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Authorization: Bearer eyJhbGciOiJSUzI1NiIs...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>レスポンス:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: no-store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pragma: no-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grant_id&quot;: &quot;PTRWWMo_YsGxl17r6MBj5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;status&quot;: &quot;active&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;client_id&quot;: &quot;s6BhdRkqt3&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;client_name&quot;: &quot;Banking App&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;client_uri&quot;: &quot;https://bank.example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;client_logo_uri&quot;: &quot;https://bank.example.com/logo.png&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;created_at&quot;: &quot;2024-01-01T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;updated_at&quot;: &quot;2024-01-15T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expires_at&quot;: &quot;2024-07-01T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;last_used_at&quot;: &quot;2024-01-20T10:30:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scope&quot;: &quot;openid profile email accounts:read&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;claims&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;userinfo&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;email&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;essential&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;authorization_details&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;account_information&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;actions&quot;: [&quot;read&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;accounts&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;iban&quot;: &quot;DE89370400440532013000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>フィールドの詳細：</p>
<table><thead><tr><th>フィールド</th><th>必須</th><th>説明</th><th>型</th></tr></thead><tbody><tr><td><code>grant_id</code></td><td>✅</td><td>Grant の一意識別子</td><td>String</td></tr><tr><td><code>status</code></td><td>✅</td><td>Grant の状態</td><td><code>active</code>, <code>revoked</code>, <code>expired</code></td></tr><tr><td><code>client_id</code></td><td>✅</td><td>クライアント ID</td><td>String</td></tr><tr><td><code>client_name</code></td><td>△</td><td>クライアント名（表示用）</td><td>String</td></tr><tr><td><code>client_uri</code></td><td>△</td><td>クライアントのURL</td><td>String (URI)</td></tr><tr><td><code>client_logo_uri</code></td><td>△</td><td>クライアントのロゴ</td><td>String (URI)</td></tr><tr><td><code>created_at</code></td><td>✅</td><td>Grant 作成日時</td><td>String (ISO 8601)</td></tr><tr><td><code>updated_at</code></td><td>✅</td><td>Grant 更新日時</td><td>String (ISO 8601)</td></tr><tr><td><code>expires_at</code></td><td>△</td><td>Grant 有効期限</td><td>String (ISO 8601)</td></tr><tr><td><code>last_used_at</code></td><td>△</td><td>最終利用日時</td><td>String (ISO 8601)</td></tr><tr><td><code>scope</code></td><td>✅</td><td>付与されたスコープ</td><td>String (space-separated)</td></tr><tr><td><code>claims</code></td><td>△</td><td>付与されたクレーム</td><td>Object</td></tr><tr><td><code>authorization_details</code></td><td>△</td><td>RAR（Rich Authorization Requests）</td><td>Array</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grant-一覧の取得">Grant 一覧の取得<a href="#grant-一覧の取得" class="hash-link" aria-label="Grant 一覧の取得 への直接リンク" title="Grant 一覧の取得 への直接リンク">​</a></h4>
<p>リクエスト:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /grants?status=active&amp;limit=10&amp;offset=0 HTTP/1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host: auth.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Authorization: Bearer eyJhbGciOiJSUzI1NiIs...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>レスポンス:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: no-store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pragma: no-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grants&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;grant_id&quot;: &quot;PTRWWMo_YsGxl17r6MBj5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_id&quot;: &quot;s6BhdRkqt3&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_name&quot;: &quot;Banking App&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_uri&quot;: &quot;https://bank.example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_logo_uri&quot;: &quot;https://bank.example.com/logo.png&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;status&quot;: &quot;active&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;scope&quot;: &quot;openid profile email accounts:read&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;created_at&quot;: &quot;2024-01-01T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;last_used_at&quot;: &quot;2024-01-20T10:30:00Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;grant_id&quot;: &quot;abc123def456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_id&quot;: &quot;another_client&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_name&quot;: &quot;Payment App&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_uri&quot;: &quot;https://payment.example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;client_logo_uri&quot;: &quot;https://payment.example.com/logo.png&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;status&quot;: &quot;active&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;scope&quot;: &quot;openid payment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;created_at&quot;: &quot;2024-01-10T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;last_used_at&quot;: &quot;2024-01-19T15:45:00Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;total&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;offset&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;limit&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>クエリパラメータ:</p>
<table><thead><tr><th>パラメータ</th><th>説明</th><th>デフォルト</th><th>例</th></tr></thead><tbody><tr><td><code>client_id</code></td><td>特定クライアントのGrantのみ</td><td>なし</td><td><code>s6BhdRkqt3</code></td></tr><tr><td><code>status</code></td><td>active, revoked, expired</td><td><code>active</code></td><td><code>active</code></td></tr><tr><td><code>offset</code></td><td>ページネーション（開始位置）</td><td><code>0</code></td><td><code>0</code></td></tr><tr><td><code>limit</code></td><td>取得件数</td><td><code>10</code></td><td><code>10</code></td></tr><tr><td><code>sort</code></td><td>ソート順</td><td><code>created_at:desc</code></td><td><code>last_used_at:desc</code></td></tr></tbody></table>
<p>ソートオプション:</p>
<ul>
<li><code>created_at:asc</code> / <code>created_at:desc</code> - 作成日時順</li>
<li><code>updated_at:asc</code> / <code>updated_at:desc</code> - 更新日時順</li>
<li><code>last_used_at:asc</code> / <code>last_used_at:desc</code> - 最終利用日時順</li>
<li><code>expires_at:asc</code> / <code>expires_at:desc</code> - 有効期限順</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-の更新認可の拡張">Grant の更新（認可の拡張）<a href="#grant-の更新認可の拡張" class="hash-link" aria-label="Grant の更新（認可の拡張） への直接リンク" title="Grant の更新（認可の拡張） への直接リンク">​</a></h3>
<p>既存の Grant に新しいスコープを追加する場合、PAR で <code>grant_id</code> と <code>grant_management_action</code> を指定します。</p>
<p>リクエスト:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST /par HTTP/1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host: auth.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/x-www-form-urlencoded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grant_id=PTRWWMo_YsGxl17r6MBj5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;grant_management_action=merge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;scope=openid profile email accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;client_id=s6BhdRkqt3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;redirect_uri=https://client.example.com/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;state=af0ifjsldkj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;nonce=n-0S6_WzA2Mj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;code_challenge=E9Melhoa2OwvFrEMTJguCHaoeK1t8URWbuGJSstw-cM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;code_challenge_method=S256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;client_assertion=eyJhbGciOiJQUzI1NiIs...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Grant Management アクション:</p>
<table><thead><tr><th>アクション</th><th>説明</th><th>用途</th><th>既存Grantの扱い</th></tr></thead><tbody><tr><td><code>create</code></td><td>新しい Grant を作成（デフォルト）</td><td>初回認可</td><td>無視（新規作成）</td></tr><tr><td><code>replace</code></td><td>既存の Grant を置換</td><td>権限の完全な変更</td><td>完全に上書き</td></tr><tr><td><code>merge</code></td><td>既存の Grant に追加</td><td>段階的な認可拡張</td><td>スコープを追加</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create新規作成">create（新規作成）<a href="#create新規作成" class="hash-link" aria-label="create（新規作成） への直接リンク" title="create（新規作成） への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">動作:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 既存のGrantは無視</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 常に新しいGrant IDを生成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 新しいGrantを作成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">使用例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 初回認可</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 完全に別の認可が必要な場合</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="replace置換">replace（置換）<a href="#replace置換" class="hash-link" aria-label="replace（置換） への直接リンク" title="replace（置換） への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">動作:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 既存のGrantを完全に上書き</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Grant IDは変わらない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - scopeを完全に置き換え</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">使用例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 権限を減らす場合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 権限を完全に変更する場合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  既存: scope=openid profile accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  新規: scope=openid profile accounts:read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  結果: scope=openid profile accounts:read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  （payments:writeが削除される）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mergeマージ">merge（マージ）<a href="#mergeマージ" class="hash-link" aria-label="merge（マージ） への直接リンク" title="merge（マージ） への直接リンク">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">動作:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 既存のGrantにスコープを追加</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Grant IDは変わらない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - scopeは和集合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">使用例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 段階的な権限追加</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 機能追加時の権限拡張</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  既存: scope=openid profile accounts:read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  新規: scope=openid profile accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  結果: scope=openid profile accounts:read payments:write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  （payments:writeが追加される）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-の削除delete">Grant の削除（DELETE）<a href="#grant-の削除delete" class="hash-link" aria-label="Grant の削除（DELETE） への直接リンク" title="Grant の削除（DELETE） への直接リンク">​</a></h3>
<p>リクエスト:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DELETE /grants/PTRWWMo_YsGxl17r6MBj5 HTTP/1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host: auth.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Authorization: Bearer eyJhbGciOiJSUzI1NiIs...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>レスポンス:</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 204 No Content</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>削除の効果（カスケード削除）</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Grant削除時の影響範囲:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Grantの状態変更</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   status: active → revoked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. アクセストークンの無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 発行済みのすべてのアクセストークンが即座に無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - APIアクセス時に401エラー</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. リフレッシュトークンの無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 発行済みのすべてのリフレッシュトークンが無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - トークン更新時に400エラー（invalid_grant）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. 認可コードの無効化（未使用の場合）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 未使用の認可コードが無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - トークン取得時に400エラー</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. セッションの無効化（オプション）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - SSOセッションも無効化する実装もある</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>注意事項</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">削除の不可逆性:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 削除は即座に反映される</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 元に戻すことはできない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 再度認可が必要な場合は、新規の認可フローを実行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">監査ログ:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 削除操作は監査ログに記録すべき</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 誰が、いつ、どのGrantを削除したか</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">通知:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ユーザーへの通知（メール等）を検討</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - RPへの通知（webhook等）を検討</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grant-のライフサイクル">Grant のライフサイクル<a href="#grant-のライフサイクル" class="hash-link" aria-label="Grant のライフサイクル への直接リンク" title="Grant のライフサイクル への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Grantのライフサイクル:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┌──────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  作成    │ ← 認可フロー完了時</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └────┬─────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┌──────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  active  │ ← 通常の状態</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └────┬─────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ├──────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ▼              ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ┌──────────┐  ┌──────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ expired  │  │ revoked  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └──────────┘  └──────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       └──────┬───────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        （完全削除）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>状態の詳細:</p>
<table><thead><tr><th>状態</th><th>説明</th><th>トークン発行</th><th>API アクセス</th><th>削除可能</th></tr></thead><tbody><tr><td><code>active</code></td><td>有効</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td><code>expired</code></td><td>期限切れ</td><td>❌</td><td>❌</td><td>✅</td></tr><tr><td><code>revoked</code></td><td>取り消し済み</td><td>❌</td><td>❌</td><td>✅（論理削除済み）</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ディスカバリーメタデータ">ディスカバリーメタデータ<a href="#ディスカバリーメタデータ" class="hash-link" aria-label="ディスカバリーメタデータ への直接リンク" title="ディスカバリーメタデータ への直接リンク">​</a></h3>
<p>メタデータフィールド:</p>
<table><thead><tr><th>フィールド</th><th>説明</th></tr></thead><tbody><tr><td><code>grant_management_endpoint</code></td><td>Grant Management API のベース URL</td></tr><tr><td><code>grant_management_actions_supported</code></td><td>サポートされるアクション（create, replace, merge）</td></tr><tr><td><code>grant_management_grant_types_supported</code></td><td>Grant Management対象のgrant_type</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="第3部-セキュリティ">第3部: セキュリティ<a href="#第3部-セキュリティ" class="hash-link" aria-label="第3部: セキュリティ への直接リンク" title="第3部: セキュリティ への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="セキュリティ考慮事項">セキュリティ考慮事項<a href="#セキュリティ考慮事項" class="hash-link" aria-label="セキュリティ考慮事項 への直接リンク" title="セキュリティ考慮事項 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-アクセス制御">1. アクセス制御<a href="#1-アクセス制御" class="hash-link" aria-label="1. アクセス制御 への直接リンク" title="1. アクセス制御 への直接リンク">​</a></h4>
<p><strong>必須の検証:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Grant操作時の検証項目:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 認証検証</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - アクセストークンの署名検証</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 有効期限の確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - スコープの確認（grant_management等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 認可検証</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - tenant_id一致確認（マルチテナント分離）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - subject一致確認（ユーザー権限）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - grant_id所有権の確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Grant操作の制限</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 読み取り: 自分のGrantのみ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 更新/削除: 自分のGrantのみ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - 他ユーザーのGrantは操作不可</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>実装例:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validate_grant_access</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grant_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> access_token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    grant </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_grant</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">grant_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> decode_token</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">access_token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># tenant_id検証</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> grant</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ForbiddenError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tenant mismatch&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># subject検証</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> grant</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subject </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sub</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ForbiddenError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Not authorized&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> grant</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-レート制限">2. レート制限<a href="#2-レート制限" class="hash-link" aria-label="2. レート制限 への直接リンク" title="2. レート制限 への直接リンク">​</a></h4>
<p><strong>推奨設定:</strong></p>
<table><thead><tr><th>操作</th><th>レート制限</th><th>期間</th><th>理由</th></tr></thead><tbody><tr><td>GET /grants</td><td>100リクエスト</td><td>1分</td><td>DoS防止</td></tr><tr><td>GET /grants/{id}</td><td>300リクエスト</td><td>1分</td><td>詳細照会の頻度が高い</td></tr><tr><td>DELETE /grants/{id}</td><td>10リクエスト</td><td>1分</td><td>誤操作防止、悪用防止</td></tr></tbody></table>
<p><strong>実装のポイント:</strong></p>
<ul>
<li>IPアドレスとユーザーIDの両方で制限</li>
<li>エラー時は429 Too Many Requests</li>
<li>Retry-Afterヘッダーで次回試行可能時刻を通知</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-監査ログとモニタリング">3. 監査ログとモニタリング<a href="#3-監査ログとモニタリング" class="hash-link" aria-label="3. 監査ログとモニタリング への直接リンク" title="3. 監査ログとモニタリング への直接リンク">​</a></h4>
<p><strong>記録すべき項目:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">監査ログフォーマット:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;timestamp&quot;: &quot;2024-01-20T10:30:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;event_type&quot;: &quot;grant.deleted&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grant_id&quot;: &quot;PTRWWMo_YsGxl17r6MBj5&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;actor&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;subject&quot;: &quot;user-123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tenant_id&quot;: &quot;tenant-456&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ip_address&quot;: &quot;192.168.1.100&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;grant_details&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;client_id&quot;: &quot;s6BhdRkqt3&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;scope&quot;: &quot;openid accounts:read&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;created_at&quot;: &quot;2024-01-01T00:00:00Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;result&quot;: &quot;success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>モニタリング指標:</strong></p>
<ul>
<li>Grant作成・削除の頻度</li>
<li>エラー率</li>
<li>レスポンス時間</li>
<li>アクセス制御違反の試行</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-gdpr対応">4. GDPR対応<a href="#4-gdpr対応" class="hash-link" aria-label="4. GDPR対応 への直接リンク" title="4. GDPR対応 への直接リンク">​</a></h4>
<p><strong>GDPR要件の実装:</strong></p>
<ol>
<li>
<p><strong>アクセス権（Right to Access）</strong></p>
<ul>
<li>GET /grants でユーザーのすべてのGrantを取得</li>
<li>JSON形式でエクスポート</li>
</ul>
</li>
<li>
<p><strong>削除権（Right to Erasure）</strong></p>
<ul>
<li>DELETE /grants でGrant削除</li>
<li>カスケード削除（トークン、セッション）</li>
<li>監査ログは保持（法的要件）</li>
</ul>
</li>
<li>
<p><strong>データポータビリティ権</strong></p>
<ul>
<li>GET /grants でデータ取得</li>
<li>JSON形式で提供</li>
</ul>
</li>
<li>
<p><strong>透明性</strong></p>
<ul>
<li>Grantの詳細情報を提供</li>
<li>scope, claims, authorization_details</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="脅威モデルと攻撃シナリオ">脅威モデルと攻撃シナリオ<a href="#脅威モデルと攻撃シナリオ" class="hash-link" aria-label="脅威モデルと攻撃シナリオ への直接リンク" title="脅威モデルと攻撃シナリオ への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-grant-id推測攻撃">1. Grant ID推測攻撃<a href="#1-grant-id推測攻撃" class="hash-link" aria-label="1. Grant ID推測攻撃 への直接リンク" title="1. Grant ID推測攻撃 への直接リンク">​</a></h4>
<p><strong>攻撃シナリオ:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. 攻撃者がGrant IDのパターンを推測</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 総当たりでGrant情報を取得試行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 他ユーザーのGrant情報が漏洩</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>対策:</strong></p>
<ul>
<li>Grant IDに十分なエントロピー（128ビット以上）</li>
<li>UUID v4等の推測不可能な値を使用</li>
<li>レート制限</li>
<li>アクセス制御の厳格化</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-grant情報の漏洩">2. Grant情報の漏洩<a href="#2-grant情報の漏洩" class="hash-link" aria-label="2. Grant情報の漏洩 への直接リンク" title="2. Grant情報の漏洩 への直接リンク">​</a></h4>
<p><strong>攻撃シナリオ:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. ネットワーク盗聴でGrant情報を取得</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. ユーザーの認  可状況を把握</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. プライバシー侵害</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>対策:</strong></p>
<ul>
<li>TLS必須</li>
<li>レスポンスのキャッシュ制御（no-store）</li>
<li>機密情報の最小化</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-不正なgrant削除">3. 不正なGrant削除<a href="#3-不正なgrant削除" class="hash-link" aria-label="3. 不正なGrant削除 への直接リンク" title="3. 不正なGrant削除 への直接リンク">​</a></h4>
<p><strong>攻撃シナリオ:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. 攻撃者が盗んだアクセストークンでGrant削除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. ユーザーのサービス利用が不可に</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. サービス妨害</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>対策:</strong></p>
<ul>
<li>強固な認証（アクセストークン）</li>
<li>削除前の確認（オプション）</li>
<li>監査ログで追跡可能に</li>
<li>通知機能（メール等）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="よくあるgrant-management要件違反とエラー">よくあるGrant Management要件違反とエラー<a href="#よくあるgrant-management要件違反とエラー" class="hash-link" aria-label="よくあるGrant Management要件違反とエラー への直接リンク" title="よくあるGrant Management要件違反とエラー への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="違反1-アクセス制御の未実装">違反1: アクセス制御の未実装<a href="#違反1-アクセス制御の未実装" class="hash-link" aria-label="違反1: アクセス制御の未実装 への直接リンク" title="違反1: アクセス制御の未実装 への直接リンク">​</a></h4>
<p><strong>エラー:</strong> <code>forbidden</code> (403)
<strong>セキュリティリスク:</strong> 権限昇格、他ユーザーのGrant情報漏洩、プライバシー侵害
<strong>Grant Management要件:</strong> Grant操作時、リクエストのsubjectとGrantのsubjectが一致すること、tenant_idが一致することを検証しなければならない
<strong>対策:</strong> アクセストークンから抽出したsubjectとtenant_idをGrantレコー ドの値と照合し、不一致の場合は403エラーを返す</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="違反2-grant-id-の推測可能性">違反2: Grant ID の推測可能性<a href="#違反2-grant-id-の推測可能性" class="hash-link" aria-label="違反2: Grant ID の推測可能性 への直接リンク" title="違反2: Grant ID の推測可能性 への直接リンク">​</a></h4>
<p><strong>エラー:</strong> なし（セキュリティ脅威のみ）
<strong>セキュリティリスク:</strong> Grant ID推測攻撃、総当たり攻撃による情報漏洩
<strong>Grant Management要件:</strong> Grant IDは推測不可能な値（128ビット以上のエントロピー）でなければならない
<strong>対策:</strong> <code>secrets.token_urlsafe()</code>やUUID v4等の暗号学的に安全な乱数生成器を使用し、予測可能なパターン（user_id + timestamp等）を避ける</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="違反3-カスケード削除の未実装">違反3: カスケード削除の未実装<a href="#違反3-カスケード削除の未実装" class="hash-link" aria-label="違反3: カスケード削除の未実装 への直接リンク" title="違反3: カスケード削除の未実装 への直接リンク">​</a></h4>
<p><strong>エラー:</strong> なし（セキュリティ脅威のみ）
<strong>セキュリティリスク:</strong> Grant削除後もトークンが有効で不正利用可能、認可の不完全な取り消し
<strong>Grant Management要件:</strong> Grant削除時、関連するすべてのトークン（アクセストークン、リフレッシュトークン）とセッションを無効化しなければならない
<strong>対策:</strong> Grant削除時にトランザクションで関連トークンとセッションを同時に削除し、完全な無効化を保証する</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="セキュリティベストプラクティス">セキュリティベストプラク ティス<a href="#セキュリティベストプラクティス" class="hash-link" aria-label="セキュリティベストプラクティス への直接リンク" title="セキュリティベストプラクティス への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-grant-idの生成">1. Grant IDの生成<a href="#1-grant-idの生成" class="hash-link" aria-label="1. Grant IDの生成 への直接リンク" title="1. Grant IDの生成 への直接リンク">​</a></h4>
<p><strong>推奨事項:</strong></p>
<ul>
<li>128ビット以上のエントロピー</li>
<li>secrets.token_urlsafe()等の暗号学的に安全な乱数生成器</li>
<li>UUID v4も可</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-マルチテナント分離">2. マルチテナント分離<a href="#2-マルチテナント分離" class="hash-link" aria-label="2. マルチテナント分離 への直接リンク" title="2. マルチテナント分離 への直接リンク">​</a></h4>
<p><strong>推奨事項:</strong></p>
<ul>
<li>すべてのクエリでtenant_idをフィルタ</li>
<li>インデックスに tenant_id を含める</li>
<li>Row Level Security（PostgreSQL）の活用</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-監査ログの保持">3. 監査ログの保持<a href="#3-監査ログの保持" class="hash-link" aria-label="3. 監査ログの保持 への直接リンク" title="3. 監査ログの保持 への直接リンク">​</a></h4>
<p><strong>推奨事項:</strong></p>
<ul>
<li>すべてのGrant操作をログに記録</li>
<li>ログは改ざん不可能な形式で保存</li>
<li>法的要件に応じた保持期間（例: 7年）</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-gdpr対応-1">4. GDPR対応<a href="#4-gdpr対応-1" class="hash-link" aria-label="4. GDPR対応 への直接リンク" title="4. GDPR対応 への直接リンク">​</a></h4>
<p><strong>推奨事項:</strong></p>
<ul>
<li>データエクスポート機能  の実装</li>
<li>削除の完全性保証（カスケード削除）</li>
<li>透明性の確保（Grant詳細情報）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="セキュリティ理解度チェック">セキュリティ理解度チェック<a href="#セキュリティ理解度チェック" class="hash-link" aria-label="セキュリティ理解度チェック への直接リンク" title="セキュリティ理解度チェック への直接リンク">​</a></h3>
<p>この章を学習した後、以下を理解できているか確認してください：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="認可サーバーas">認可サーバー（AS）<a href="#認可サーバーas" class="hash-link" aria-label="認可サーバー（AS） への直接リンク" title="認可サーバー（AS） への直接リンク">​</a></h4>
<p>□ Grant IDに128ビット以上のエントロピーが必要な理由と、推測攻撃のリスクを説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>推測攻撃のリスク（エントロピー不足）</strong>:</p><p>攻撃シナリオ:</p><ol>
<li>攻撃者がGrant IDのパターンを推測<!-- -->
<ul>
<li>例: user_id + timestamp（予測可能）</li>
</ul>
</li>
<li>総当たりでGrant情報を取得試行</li>
<li>他ユーザーのGrant情報が漏洩</li>
<li>プライバシー侵害、認可の不正削除</li>
</ol><p><strong>対策（128ビット以上のエントロピー）</strong>:</p><ol>
<li>
<p><strong>暗号学的に安全な乱数生成器</strong></p>
<ul>
<li>Python: <code>secrets.token_urlsafe(16)</code></li>
<li>Java: <code>SecureRandom</code></li>
<li>UUID v4も可（122ビットのランダム性）</li>
</ul>
</li>
<li>
<p><strong>予測可能なパターンを避ける</strong></p>
<ul>
<li>❌ user_id + timestamp</li>
<li>❌ 連番</li>
<li>✅ 完全にランダムな値</li>
</ul>
</li>
<li>
<p><strong>推測不可能性</strong></p>
<ul>
<li>128ビット = 2^128 = 約3.4×10^38 通り</li>
<li>総当たり攻撃が実質不可能</li>
</ul>
</li>
</ol><p><strong>実装例</strong>:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> secrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grant_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> secrets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">token_urlsafe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 128ビット</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>□ アクセス制御（tenant_id、subject検証）が必須な理由と、  検証漏れのリスクを説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>検証漏れのリスク</strong>:</p><p>攻撃シナリオ:</p><ol>
<li>攻撃者が正規ユーザーのGrant IDを入手</li>
<li>自分のアクセストークンでGET /grants/{grant_id}</li>
<li>検証なしの場合、他ユーザーのGrant情報を取得</li>
<li>プライバシー侵害、権限昇格</li>
</ol><p><strong>必須の検証項目</strong>:</p><ol>
<li>
<p><strong>tenant_id検証（マルチテナント分離）</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> grant</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ForbiddenError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tenant mismatch&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>理由: 異なるテナントのデータにアクセスさせない</li>
<li>リスク: テナント間のデータ漏洩</li>
</ul>
</li>
<li>
<p><strong>subject検証（ユーザー権限）</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> grant</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subject </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sub</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ForbiddenError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Not authorized&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>理由: 自分のGrantのみアクセス可能</li>
<li>リスク: 他ユーザーのGrant操作</li>
</ul>
</li>
</ol><p><strong>実装のポイント</strong>:</p><ul>
<li>すべてのGrant操作で必須</li>
<li>データベースクエリにもフィルタを追加</li>
<li>Row Level Security（PostgreSQL）の活用</li>
</ul></div></div></details>
<p>□ Grant削除時のカスケード削除が必要な理由と、削除すべきリソースを説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>カスケード削除の目的</strong>:
Grant削除時、関連するすべてのリソースを無効化し、認可の完全な取り消しを保証する</p><p><strong>削除すべきリソース</strong>:</p><ol>
<li>
<p><strong>Grantの状態変更</strong></p>
<ul>
<li>status: active → revoked</li>
</ul>
</li>
<li>
<p><strong>アクセストークンの無効化</strong></p>
<ul>
<li>発行済みのすべてのアクセストークンを無効化</li>
<li>APIアクセス時に401エラー</li>
</ul>
</li>
<li>
<p><strong>リフレッシュトークンの無効化</strong></p>
<ul>
<li>発行済みのすべてのリフレッシュトークンを無効化</li>
<li>トークン更新時に400エラー（invalid_grant）</li>
</ul>
</li>
<li>
<p><strong>認可コードの無効化（未使用の場合）</strong></p>
<ul>
<li>未使用の認可コードを無効化</li>
</ul>
</li>
<li>
<p><strong>セッションの無効化（オプション）</strong></p>
<ul>
<li>SSOセッションも無効化する実装もある</li>
</ul>
</li>
</ol><p><strong>カスケード削除なしのリスク</strong>:</p><p>攻撃シナリオ:</p><ol>
<li>ユーザーがGrant削除</li>
<li>カスケード削除が未実装</li>
<li>アクセストークンが有効なまま</li>
<li>攻撃者が盗んだトークンで引き続きAPIアクセス可能</li>
<li>認可の取り消しが不完全</li>
</ol><p><strong>実装のポイント</strong>:</p><ul>
<li>トランザクションで一括削除</li>
<li>削除の完全性を保証</li>
<li>監査ログに記録</li>
<li>ユーザーへの通知（メール等）</li>
</ul></div></div></details>
<p>□ Grant Management APIのレート制限が必要な理由と、推奨設定を説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>レート制限が必要な理由</strong>:</p><ol>
<li>
<p><strong>DoS攻撃防止</strong></p>
<ul>
<li>大量のGET /grants リクエストでサーバー負荷増大</li>
<li>サービスの可用性低下</li>
</ul>
</li>
<li>
<p><strong>Grant ID推測攻撃の防止</strong></p>
<ul>
<li>総当たりでGrant IDを推測する攻撃を制限</li>
<li>短時間での大量試行を防止</li>
</ul>
</li>
<li>
<p><strong>誤操作防止</strong></p>
<ul>
<li>短時間での大量削除を防止</li>
<li>ユーザーの誤操作を制限</li>
</ul>
</li>
</ol><p><strong>推奨設定</strong>:</p><table><thead><tr><th>操作</th><th>レート制限</th><th>期間</th><th>理由</th></tr></thead><tbody><tr><td>GET /grants</td><td>100リクエスト</td><td>1分</td><td>DoS防止</td></tr><tr><td>GET /grants/{id}</td><td>300リクエスト</td><td>1分</td><td>詳細 照会の頻度が高い</td></tr><tr><td>DELETE /grants/{id}</td><td>10リクエスト</td><td>1分</td><td>誤操作防止、悪用防止</td></tr></tbody></table><p><strong>実装のポイント</strong>:</p><ul>
<li>IPアドレスとユーザーIDの両方で制限</li>
<li>エラー時は429 Too Many Requests</li>
<li>Retry-Afterヘッダーで次回試行可能時刻を通知</li>
</ul><p><strong>実装例（Redis）</strong>:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;rate_limit:\</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">user_id\</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">:grants:get&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">incr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 1分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> TooManyRequestsError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Rate limit exceeded&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>□ GDPRとGrant Managementの関係、および対応する権利を説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>GDPR（一般データ保護規則）との対応</strong>:</p><table><thead><tr><th>GDPR要件</th><th>Grant Management による実現</th><th>APIエンドポイント</th></tr></thead><tbody><tr><td><strong>アクセス権</strong></td><td>ユーザーが自分のGrantを照会</td><td>GET /grants</td></tr><tr><td><strong>訂正権</strong></td><td>Grantを更新（scope変更）</td><td>PATCH /grants（grant_management_action=merge/replace）</td></tr><tr><td><strong>削除権（忘れられる権利）</strong></td><td>Grantを削除</td><td>DELETE /grants/{id}</td></tr><tr><td><strong>データポータビリティ権</strong></td><td>データをエクスポート</td><td>GET /grants（JSON形式）</td></tr><tr><td><strong>透明性</strong></td><td>Grantの詳細情報を提供</td><td>GET /grants/{id}</td></tr></tbody></table><p><strong>具体的な実装</strong>:</p><ol>
<li>
<p><strong>アクセス権（Right to Access）</strong></p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /grants?status=active&amp;limit=100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>ユーザーのすべてのGrantを取得</li>
<li>client_name、scope、作成日時等を含む</li>
</ul>
</li>
<li>
<p><strong>削除権（Right to Erasure）</strong></p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DELETE /grants/\{grant_id\}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>カスケード削除（トークン、セッション）</li>
<li>監査ログは保持（法的要件）</li>
</ul>
</li>
<li>
<p><strong>データポータビリティ権</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;user_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user-123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;export_date&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-20T10:00:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;grants&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>JSON形式でデータ提供</li>
<li>機械可読形式</li>
</ul>
</li>
</ol><p><strong>GDPR対応のメリット</strong>:</p><ul>
<li>ユーザーのプライバシー保護</li>
<li>法的コンプライアンス</li>
<li>ユーザーの信頼向上</li>
</ul></div></div></details>
<p>□ 段階的な認可（grant_management_action=merge）の仕組みと、ユーザー体験上のメリットを説明できる</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>解答例</summary><div><div class="collapsibleContent_i85q"><p><strong>段階的な認可の仕組み</strong>:</p><p>シナリオ: 家計簿アプリの利用</p><ol>
<li>
<p><strong>初回認可（残高照会のみ）</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scope=openid accounts:read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">→ Grant A 作成</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>決済機能追加時（後日）</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grant_id=A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grant_management_action=merge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scope=openid accounts:read payments:write</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>AS: 追加の同意のみ求める</strong></p>
<ul>
<li>既存のscope（accounts<!-- -->:read<!-- -->）は再同意不要</li>
<li>新しいscope（payments<!-- -->:write<!-- -->）のみ同意</li>
</ul>
</li>
<li>
<p><strong>Grant A 更新</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scope=openid accounts:read payments:write</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol><p><strong>grant_management_actionの種類</strong>:</p><table><thead><tr><th>アクション</th><th>動作</th><th>使用例</th></tr></thead><tbody><tr><td><code>create</code></td><td>新しいGrant作成</td><td>初回認可</td></tr><tr><td><code>replace</code></td><td>既存Grantを完全に置換</td><td>権限の完全な変更</td></tr><tr><td><code>merge</code></td><td>既存Grantにスコープを追加</td><td>段階的な権限拡張</td></tr></tbody></table><p><strong>ユーザー体験上のメリット</strong>:</p><ol>
<li>
<p><strong>最小限の同意</strong></p>
<ul>
<li>必要な時に必要な権限のみ</li>
<li>初回に大量の権限を要求しない</li>
</ul>
</li>
<li>
<p><strong>セキュリティの向上</strong></p>
<ul>
<li>最小権限の原則</li>
<li>不要な権限を付与しない</li>
</ul>
</li>
<li>
<p><strong>管理が容易</strong></p>
<ul>
<li>Grantの一覧・取り消しが簡単</li>
<li>どのアプリにどの権限を付与したか明確</li>
</ul>
</li>
</ol><p><strong>実装のポイント</strong>:</p><ul>
<li>既存のGrant IDを指定</li>
<li>ASが差分のみ同意を求める</li>
<li>Grant IDは変わらない</li>
</ul></div></div></details>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考リンク">参考リンク<a href="#参考リンク" class="hash-link" aria-label="参考リンク への直接リンク" title="参考リンク への直接リンク">​</a></h2>
<ul>
<li><a href="https://datatracker.ietf.org/doc/html/draft-ietf-oauth-grant-management" target="_blank" rel="noopener noreferrer">OAuth 2.0 Grant Management</a></li>
<li><a href="https://openid.bitbucket.io/fapi/fapi-2_0-security-profile.html" target="_blank" rel="noopener noreferrer">FAPI 2.0 Security Profile</a></li>
<li><a href="https://gdpr-info.eu/" target="_blank" rel="noopener noreferrer">GDPR - 一般データ保護規則</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="まとめ">まとめ<a href="#まとめ" class="hash-link" aria-label="まとめ への直接リンク" title="まとめ への直接リンク">​</a></h2>
<p>Grant Management は、ユーザーに認可の制御権を与え、プライバシーとセキュリティを向上させる重要な仕様です。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主要な利点">主要な利点<a href="#主要な利点" class="hash-link" aria-label="主要な利点 への直接リンク" title="主要な利点 への直接リンク">​</a></h3>
<ol>
<li>
<p><strong>ユーザーの自律性</strong></p>
<ul>
<li>認可の照会・取り消しが可能</li>
<li>GDPR等の規制対応</li>
</ul>
</li>
<li>
<p><strong>段階的な認可</strong></p>
<ul>
<li>必要な時に必要な権限のみ</li>
<li>ユーザー体験の向上</li>
</ul>
</li>
<li>
<p><strong>運用の改善</strong></p>
<ul>
<li>RPが認可状況を確認可能</li>
<li>トラブルシューティングが容易</li>
</ul>
</li>
<li>
<p><strong>セキュリティ</strong></p>
<ul>
<li>不要な認可を削除可能</li>
<li>監査ログで追跡可能</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="実装時の重要ポイント">実装時の重要ポイント<a href="#実装時の重要ポイント" class="hash-link" aria-label="実装時の重要ポイント への直接リンク" title="実装時の重要ポイント への直接リンク">​</a></h3>
<ul>
<li>Grant IDに十分なエントロピー</li>
<li>アクセス制御の徹底（tenant_id, subject検証）</li>
<li>ページネーションとフィルタリング</li>
<li>監査ログとモニタリング</li>
<li>マルチテナント対応</li>
<li>GDPR対応（データエクスポート、削除）</li>
</ul>
<p>Grant Management を適切に実装することで、ユーザーのプライバシーを保護しつつ、柔軟な認可管理を実現できます。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/16-oauth-oidc-rfc/advanced/grant-management.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/fapi2-security"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">FAPI 2.0 Security Profile</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/advanced/oidc-ciba"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">OpenID Connect CIBA（Client-Initiated Backchannel Authentication）</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#目次" class="table-of-contents__link toc-highlight">目次</a></li><li><a href="#第1部-概要編" class="table-of-contents__link toc-highlight">第1部: 概要編</a><ul><li><a href="#grant-management-とは" class="table-of-contents__link toc-highlight">Grant Management とは？</a></li><li><a href="#なぜ-grant-management-が必要なのか" class="table-of-contents__link toc-highlight">なぜ Grant Management が必要なのか？</a></li><li><a href="#主要なユースケース" class="table-of-contents__link toc-highlight">主要なユースケース</a></li><li><a href="#規制対応" class="table-of-contents__link toc-highlight">規制対応</a></li></ul></li><li><a href="#第2部-詳細編" class="table-of-contents__link toc-highlight">第2部: 詳細編</a><ul><li><a href="#grant-id" class="table-of-contents__link toc-highlight">Grant ID</a></li><li><a href="#grant-の照会get" class="table-of-contents__link toc-highlight">Grant の照会（GET）</a></li><li><a href="#grant-の更新認可の拡張" class="table-of-contents__link toc-highlight">Grant の更新（認可の拡張）</a></li><li><a href="#grant-の削除delete" class="table-of-contents__link toc-highlight">Grant の削除（DELETE）</a></li><li><a href="#grant-のライフサイクル" class="table-of-contents__link toc-highlight">Grant のライフサイクル</a></li><li><a href="#ディスカバリーメタデータ" class="table-of-contents__link toc-highlight">ディスカバリーメタデータ</a></li></ul></li><li><a href="#第3部-セキュリティ" class="table-of-contents__link toc-highlight">第3部: セキュリティ</a><ul><li><a href="#セキュリティ考慮事項" class="table-of-contents__link toc-highlight">セキュリティ考慮事項</a></li><li><a href="#脅威モデルと攻撃シナリオ" class="table-of-contents__link toc-highlight">脅威モデルと攻撃シナリオ</a></li><li><a href="#よくあるgrant-management要件違反とエラー" class="table-of-contents__link toc-highlight">よくあるGrant Management要件違反とエラー</a></li><li><a href="#セキュリティベストプラクティス" class="table-of-contents__link toc-highlight">セキュリティベストプラクティス</a></li><li><a href="#セキュリティ理解度チェック" class="table-of-contents__link toc-highlight">セキュリティ理解度チェック</a></li></ul></li><li><a href="#参考リンク" class="table-of-contents__link toc-highlight">参考リンク</a></li><li><a href="#まとめ" class="table-of-contents__link toc-highlight">まとめ</a><ul><li><a href="#主要な利点" class="table-of-contents__link toc-highlight">主要な利点</a></li><li><a href="#実装時の重要ポイント" class="table-of-contents__link toc-highlight">実装時の重要ポイント</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>