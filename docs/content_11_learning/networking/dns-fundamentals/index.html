<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_11_learning/networking/dns-fundamentals" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">DNS基礎 | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/networking/dns-fundamentals"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DNS基礎 | IdP-Server Documentation"><meta data-rh="true" name="description" content="所要時間"><meta data-rh="true" property="og:description" content="所要時間"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/networking/dns-fundamentals"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/networking/dns-fundamentals" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/networking/dns-fundamentals" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.5bdbf449.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.4b374a20.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">はじめに</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ドキュメントガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">製品紹介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">クイックスタート</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/foundation/concept-01-multi-tenant">コア概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">認証・認可プロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/">How-to（設定・運用レシピ）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/">開発者ガイド</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">リファレンス</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">学習（Learning）</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">アイデンティティ管理の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-fundamentals/modern-web-authz-authn">OAuth 2.0の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-tokens/id-token-jwt">OAuth 2.0トークン</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/openid-connect/oauth-oidc-basics">OpenID Connect</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-architecture-rp-browser-authenticator">FIDO2/WebAuthn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/security/glossary">セキュリティ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/multi-tenancy/multi-tenancy-basics">マルチテナント</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/advanced-protocols/ciba-basics">高度なプロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/http-rest/http-basics">HTTP/REST</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/jwt-jose/jwt-introduction">JWT/JOSE</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/">OAuth/OIDC RFC学習</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/verifiable-credentials/">Verifiable Credentials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/data-formats/">データフォーマット</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/session-management/web-session-basics">セッション管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/postgresql/">PostgreSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/crypto/">暗号化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/kubernetes/">コンテナ/Kubernetes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/linux/">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_11_learning/networking/">ネットワーク</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/networking/">ネットワーク学習ガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_11_learning/networking/dns-fundamentals">DNS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_11_learning/networking/dns-fundamentals">DNS基礎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/networking/dns-advanced">DNS詳細: CNAMEとDNSSEC</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/networking/load-balancing">インフラストラクチャ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/networking/network-troubleshooting">トラブルシューティング</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/networking/column-speed-of-light">コラ  ム</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/jvm/">JVM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/os-fundamentals/">OS基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/frameworks/">フレームワーク</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/sdk/">SDK</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/clean-architecture/">クリーンアーキテクチャ</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">運用（Ops）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">プロジェクト</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">学習（Learning）</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ネットワーク</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">DNS</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DNS基礎</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>DNS基礎</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="所要時間">所要時間<a href="#所要時間" class="hash-link" aria-label="所要時間 への直接リンク" title="所要時間 への直接リンク">​</a></h2>
<p>約40分</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="学べること">学べること<a href="#学べること" class="hash-link" aria-label="学べること への直接リンク" title="学べること への直接リンク">​</a></h2>
<ul>
<li>DNS（Domain Name System）の基本概念と動作原理</li>
<li>DNSの階層構造とゾーン管理</li>
<li>レコードタイプと用途</li>
<li>名前解決の仕組みとキャッシュ</li>
<li>アプリケーション開発で必要なDNS知識</li>
<li>実践的なDNSクエリとトラブルシューティング</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="前提知識">前提知識<a href="#前提知識" class="hash-link" aria-label="前提知識 への直接リンク" title="前提知識 への直接リンク">​</a></h2>
<ul>
<li>TCP/IPの基本的な理解</li>
<li>ネットワークの基礎知識（IPアドレス、ポート）</li>
<li>Linuxコマンドラインの基本操作</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-dnsとは">1. DNSとは<a href="#1-dnsとは" class="hash-link" aria-label="1. DNSとは への直接リンク" title="1. DNSとは への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-基本概念">1.1 基本概念<a href="#11-基本概念" class="hash-link" aria-label="1.1 基本概念 への直接リンク" title="1.1 基本概念 への直接リンク">​</a></h3>
<p>**DNS（Domain Name System）**は、人間が読みやすいドメイン名（例：example.com）をコンピュータが理解できるIPアドレス（例：93.184.216.34）に変換する分散型データベースシステムです。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    DNS の役割                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  人間                                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &quot;www.example.com にアクセスしたい&quot;                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ↓                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【DNS】名前解決                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  www.example.com → 93.184.216.34                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ↓                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  コンピュータ                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &quot;93.184.216.34 に接続する&quot;                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>なぜDNSが必要なのか</strong>:</p>
<ul>
<li><strong>人間の記憶</strong>: IPアドレス（93.184.216.34）より、ドメイン名（example.com）の方が覚えやすい</li>
<li><strong>柔軟性</strong>: サーバーのIPアドレスが変わっても、DNSレコードを更新するだけで対応可能</li>
<li><strong>負荷分散</strong>: 1つのドメイン名に複数のIPアドレスを割り当てることができる</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-dnsの歴史">1.2 DNSの歴史<a href="#12-dnsの歴史" class="hash-link" aria-label="1.2 DNSの歴史 への直接リンク" title="1.2 DNSの歴史 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                  DNS 前後のネットワーク                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【DNS以前（1970年代初期）】                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  /etc/hosts ファイルを手動で管理                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌────────────────────────────────────┐                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ /etc/hosts                         │                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 192.168.1.1  server1.example.com   │                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 192.168.1.2  server2.example.com   │                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ ...                                │                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────────────────────────┘                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  問題: インターネットの成長に追  従できない                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【DNS以降（1983年〜）】                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  分散型データベースで自動的に名前解決                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - スケーラブル                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 階層的                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 分散管理                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-dnsの階層構造">2. DNSの階層構造<a href="#2-dnsの階層構造" class="hash-link" aria-label="2. DNSの階層構造 への直接リンク" title="2. DNSの階層構造 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-dns階層モデル">2.1 DNS階層モデル<a href="#21-dns階層モデル" class="hash-link" aria-label="2.1 DNS階層モデル への直接リンク" title="2.1 DNS階層モデル への直接リンク">​</a></h3>
<p>DNSは木構造の階層型データベースです。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    DNS階層構造                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                         . (ルート)                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                          │                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         ┌────────────────┼────────────────┐                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │                │                │                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       .com             .org             .jp                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         │                │                │                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ┌────┼────┐          │           ┌────┼────┐           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    │    │    │          │           │    │    │           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ example google  │       wikipedia   co   ne   go           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    │         amazon                  │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    │                                 │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  www                              example                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                      │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                     www                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  例: www.example.com の階層                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  . (ルート)                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── com (トップレベルドメイン: TLD)                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── example (第2レベルドメイン)                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           └── www (ホスト名/サブドメイン)                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-ドメインレベル">2.2 ドメインレベル<a href="#22-ドメインレベル" class="hash-link" aria-label="2.2 ドメインレベル への直接リンク" title="2.2 ドメインレベル への直接リンク">​</a></h3>
<table><thead><tr><th>レベル</th><th>名称</th><th>例</th><th>説明</th></tr></thead><tbody><tr><td>ルート</td><td>Root</td><td>.</td><td>DNSツリーの最上位</td></tr><tr><td>1階層目</td><td>TLD（Top Level Domain）</td><td>.com, .org, .jp</td><td>トップレベルドメイン</td></tr><tr><td>2階層目</td><td>SLD（Second Level Domain）</td><td>example.com</td><td>組織が登録するドメイン</td></tr><tr><td>3階層目以降</td><td>サブドメイン</td><td><a href="http://www.example.com" target="_blank" rel="noopener noreferrer">www.example.com</a></td><td>組織が自由に設定</td></tr></tbody></table>
<p><strong>TLDの種類</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gTLD（Generic TLD - 一般トップレベルドメイン）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .com    商用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .org    非営利組織</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .net    ネットワーク</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .edu    教育機関</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .gov    米国政府</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ccTLD（Country Code TLD - 国別トップレベルドメイン）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .jp     日本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .uk     イギリス</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .de     ドイツ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .cn     中国</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">新gTLD（2013年以降）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .app    アプリケーション</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .dev    開発者向け</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .cloud  クラウドサービス</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-ゾーンと権威サーバー">2.3 ゾーンと権威サーバー<a href="#23-ゾーンと権威サーバー" class="hash-link" aria-label="2.3 ゾーンと権威サーバー への直接リンク" title="2.3 ゾーンと権威サーバー への直接リンク">​</a></h3>
<p><strong>ゾーン</strong>は、DNSの管理単位です。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    ゾーンの概念                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  example.com ゾーン                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  example.com.           IN  A      93.184.216.34    │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  www.example.com.       IN  A      93.184.216.34    │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  mail.example.com.      IN  A      93.184.216.35    │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  example.com.           IN  MX     10 mail.example.com. │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  example.com.           IN  NS     ns1.example.com. │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  example.com.           IN  NS     ns2.example.com. │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【ゾーンの委任】                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  サブドメインを別のゾーンとして管理できる                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  example.com ゾーン                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ├── www.example.com      (このゾーンで管理)              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ├── mail.example.com     (このゾーンで管理)              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    └── dev.example.com      (別ゾーンに委任)                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  dev.example.com ゾーン（委任先）                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ├── api.dev.example.com                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    └── db.dev.example.com                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-dnsレコードタイプ">3. DNSレコードタイプ<a href="#3-dnsレコードタイプ" class="hash-link" aria-label="3. DNSレコードタイプ への直接リンク" title="3. DNSレコードタイプ への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-主要なレコードタイプ">3.1 主要なレコードタイプ<a href="#31-主要なレコードタイプ" class="hash-link" aria-label="3.1 主要なレコードタイプ への直接リンク" title="3.1 主要なレコードタイプ への直接リンク">​</a></h3>
<p>DNSには多数のレコードタイプがありますが、アプリケーション開発で頻繁に使用するものを説明します。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aレコードaddress-record">Aレコード（Address Record）<a href="#aレコードaddress-record" class="hash-link" aria-label="Aレコード（Address Record） への直接リンク" title="Aレコード（Address Record） への直接リンク">​</a></h4>
<p><strong>最も基本的なレコード</strong>。ドメイン名をIPv4アドレスにマッピングします。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.        IN  A   93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">www.example.com.    IN  A   93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Webサイトへのアクセス</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 任意のサービスのホスト名解決</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aaaaレコードipv6-address-record">AAAAレコード（IPv6 Address Record）<a href="#aaaaレコードipv6-address-record" class="hash-link" aria-label="AAAAレコード（IPv6 Address Record） への直接リンク" title="AAAAレコード（IPv6 Address Record） への直接リンク">​</a></h4>
<p>ドメイン名をIPv6アドレスにマッピングします。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レ  コード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.        IN  AAAA    2606:2800:220:1:248:1893:25c8:1946</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- IPv6対応サービス</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- デュアルスタック環境（IPv4/IPv6両対応）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cnameレコードcanonical-name-record">CNAMEレコード（Canonical Name Record）<a href="#cnameレコードcanonical-name-record" class="hash-link" aria-label="CNAMEレコード（Canonical Name Record） への直接リンク" title="CNAMEレコード（Canonical Name Record） への直接リンク">​</a></h4>
<p>別名（エイリアス）を定義します。詳細は次章で説明しますが、基本概念を理解しておきましょう。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">www.example.com.    IN  CNAME   example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">blog.example.com.   IN  CNAME   example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 複数のホスト名を同じ宛先に向ける</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- CDNやロードバランサーへのマッピング</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 重要な制約</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- CNAMEレコードは他のレコードタイプと共存できない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- CNAME先は最終的にAまたはAAAAレコードに解決される必要がある</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mxレコードmail-exchange-record">MXレコード（Mail Exchange Record）<a href="#mxレコードmail-exchange-record" class="hash-link" aria-label="MXレコード（Mail Exchange Record） への直接リンク" title="MXレコード（Mail Exchange Record） への直接リンク">​</a></h4>
<p>メールサーバーを指定します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  MX  10  mail1.example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  MX  20  mail2.example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 優先度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 数値が小さいほど優先度が高い</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- メールサーバーは優先度順に試行される</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- メール配送先の指定</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nsレコードname-server-record">NSレコード（Name Server Record）<a href="#nsレコードname-server-record" class="hash-link" aria-label="NSレコード（Name Server Record） への直接リンク" title="NSレコード（Name Server Record） への直接リンク">​</a></h4>
<p>ゾーンの権威DNSサーバーを指定します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  NS  ns1.example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  NS  ns2.example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ゾーンの委 任</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 権威サーバーの指定</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="txtレコードtext-record">TXTレコード（Text Record）<a href="#txtレコードtext-record" class="hash-link" aria-label="TXTレコード（Text Record） への直接リンク" title="TXTレコード（Text Record） への直接リンク">​</a></h4>
<p>任意のテキスト情報を格納します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコード例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  TXT &quot;v=spf1 include:_spf.google.com ~all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_dmarc.example.com. IN TXT &quot;v=DMARC1; p=none; rua=mailto:dmarc@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- SPF（Sender Policy Framework）レコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- DKIM（DomainKeys Identified Mail）設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ドメイン所有権の検証（Let&#x27;s Encrypt等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- サイト認証（Google Search Console等）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="srvレコードservice-record">SRVレコード（Service Record）<a href="#srvレコードservice-record" class="hash-link" aria-label="SRVレコード（Service Record） への直接リンク" title="SRVレコード（Service Record） への直接リンク">​</a></h4>
<p>特定のサービスの場所を指定します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># レコー ド例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_sip._tcp.example.com.  IN  SRV 10 60 5060 sipserver.example.com.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             優先度 重み ポート ターゲット</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 用途</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- SIP（VoIP）サーバー</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- XMPP（Jabber）サーバー</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Active Directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Kubernetes外部サービス発見</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-レコードの構造">3.2 レコードの構造<a href="#32-レコードの構造" class="hash-link" aria-label="3.2 レコードの構造 への直接リンク" title="3.2 レコードの構造 への直接リンク">​</a></h3>
<p>DNSレコードの一般的な形式:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                  DNSレコードの構造                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &lt;name&gt;  &lt;TTL&gt;  &lt;class&gt;  &lt;type&gt;  &lt;data&gt;                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  例:                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  www.example.com.  3600  IN  A  93.184.216.34               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──┬──┘          └┬┘  └┬┘ └┬┘ └────┬────┘                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │              │    │   │       │                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │              │    │   │       └── データ（IPアドレス等）│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │              │    │   └────────── タイプ（A, CNAME等）│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │              │    └────────────── クラス（通常はIN）   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │              └─────────────────── TTL（秒単位）        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     └────────────────────────────────── 名前（FQDN）        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【各フィールドの説明】                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  name:  完全修飾ドメイン名（FQDN）                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  TTL:   Time To Live（キャッシュ時間、秒）                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  class: ほぼ常に IN（Internet）                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  type:  レコードタイプ（A, AAAA, CNAME等）                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  data:  レコード固有のデータ                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-dns名前解決の仕組み">4. DNS名前解決の仕組み<a href="#4-dns名前解決の仕組み" class="hash-link" aria-label="4. DNS名前解決の仕組み への直接リンク" title="4. DNS名前解決の仕組み への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-再帰的問い合わせと反復的問い合わせ">4.1 再帰的問い合わせと反復的問い合わせ<a href="#41-再帰的問い合わせと反復的問い合わせ" class="hash-link" aria-label="4.1 再帰的問い合わせと反復的問い合わせ への直接リンク" title="4.1 再帰 的問い合わせと反復的問い合わせ への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                DNS名前解決の流れ                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│              (www.example.com の解決)                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  クライアント (192.168.1.100)                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (1) www.example.com のIPは?                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ▼                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────┐                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  リゾルバ（再帰的DNS）   │ ← /etc/resolv.conf で指定     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  (例: 8.8.8.8)          │                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────┘                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (2) . のNSは? ───────────►  ルートDNSサーバー         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                (.の権威サーバー)      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ ◄────────────────────── (3) .com のNSはX.X.X.X      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (4) example.com のNSは? ──►  .com DNSサーバー        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ ◄────────────────────── (5) example.com のNSはY.Y.Y.Y│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (6) www.example.com のIPは? ► example.com DNSサーバー│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                (権威DNSサーバー)      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ ◄────────────────────── (7) 93.184.216.34           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ▼                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  (8) 93.184.216.34 を返却                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ▼                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  クライアント                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ポイント</strong>:</p>
<ul>
<li><strong>再帰的問い合わせ</strong>: クライアント → リゾルバ（完全な回答を返す）</li>
<li><strong>反復的問い合わせ</strong>: リゾルバ → 各DNSサーバー（次のサーバーを教えてもらう）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-リゾルバの種類">4.2 リゾルバの種類<a href="#42-リゾルバの種類" class="hash-link" aria-label="4.2 リゾルバの種類 への直接リンク" title="4.2 リゾルバの種類 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────────────────────────────────────────────── ────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                  リゾルバの種類                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【スタブリゾルバ】                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - アプリケーション内のDNSクライアント                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 再帰的問い合わせのみ                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - /etc/resolv.conf で指定されたDNSサーバーに問い合わせ      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【再帰的リゾルバ（キャッシュDNSサーバー）】                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Google Public DNS (8.8.8.8)                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Cloudflare DNS (1.1.1.1)                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ISPのDNSサーバー                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - キャッシュ機能あり                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 再帰的問い合わせを代行                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【権威DNSサーバー】                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ゾーンの正式な情報を持つ                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 再帰的問い合わせは行わない                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - マスター/スレーブ構成が一般的                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-dnsキャッシュとttl">5. DNSキャッシュとTTL<a href="#5-dnsキャッシュとttl" class="hash-link" aria-label="5. DNSキャッシュとTTL への直接リンク" title="5. DNSキャッシュとTTL への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-キャッシュの動作">5.1 キャッシュの動作<a href="#51-キャッシュの動作" class="hash-link" aria-label="5.1 キャッシュの動作 への直接リンク" title="5.1 キャッシュの動作 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                  DNSキャッシュの動作                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【初回問い合わせ】                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  クライアント → リゾルバ → 権威DNSサーバー                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  所要時間: 100ms                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  リゾルバがキャッシュに保存（TTL: 3600秒）                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────┐                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ example.com  A  93.184.216.34    │                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 残り時間: 3600秒                  │                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────────────────────────────┘                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【2回目以降の問い合わせ（TTL内）】                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  クライアント → リゾルバ（キャッシュから返却）               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  所要時間: 1ms                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【TTL経過後】                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  キャッシュが無効化され、再度問い合わせが必要                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-ttl設計のベストプラクティス">5.2 TTL設計のベストプラクティス<a href="#52-ttl設計のベストプラクティス" class="hash-link" aria-label="5.2 TTL設計のベストプラクティス への直接リンク" title="5.2 TTL設計のベストプラクティス への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">用途別のTTL推奨値:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌────────────────────┬──────┬─────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 用途               │ TTL  │ 理由                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├────────────────────┼──────┼─────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 本番環境の安定したIP │ 3600-│ キャッシュ効率向上       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │86400 │ DNS問い合わせ削減        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├────────────────────┼──────┼─────────────────────── ──┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 開発/テスト環境     │ 60-  │ 変更を素早く反映         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │ 300  │                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├────────────────────┼──────┼─────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 計画的なIP変更前    │ 300  │ 切り替え時の影響最小化   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │      │ (変更の数時間前に短縮)   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├────────────────────┼──────┼─────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ CDNエンドポイント   │ 60-  │ 動的なルーティング対応   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │ 300  │                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────────┴──────┴─────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TTL変更の手順:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 変更の24-48時間前にTTLを短縮（例: 3600 → 300）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 古いTTLの期限が切れるまで待つ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. IPアドレスやレコードを変更</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. 数時間後、TTLを元に戻す</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-キャッシュのクリア">5.3 キャッシュのクリア<a href="#53-キャッシュのクリア" class="hash-link" aria-label="5.3 キャッシュのクリア への直接リンク" title="5.3 キャッシュのクリア への直接リンク">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Linux - systemd-resolved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemd-resolve --flush-caches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemd-resolve --statistics  # キャッシュ統計</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># macOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo dscacheutil -flushcache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo killall -HUP mDNSResponder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Windows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipconfig /flushdns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ブラウザのDNSキャッシュクリア</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Chrome: chrome://net-internals/#dns → &quot;Clear host cache&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Firefox: about:networking#dns → &quot;Clear DNS Cache&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-実践-dnsクエリツール">6. 実践: DNSクエリツール<a href="#6-実践-dnsクエリツール" class="hash-link" aria-label="6. 実践: DNSクエリツール への直接リンク" title="6. 実践: DNSクエリツール への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-dig-コマンド">6.1 dig コマンド<a href="#61-dig-コマンド" class="hash-link" aria-label="6.1 dig コマンド への直接リンク" title="6.1 dig コマンド への直接リンク">​</a></h3>
<p><strong>dig</strong>（Domain Information Groper）は最も詳細な情報を取得できるDNSクエリツールです。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 基本的な使い方</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; global options: +cmd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; Got answer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 12345</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; QUESTION SECTION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;example.com.                   IN      A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; ANSWER SECTION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example.com.            3600    IN      A       93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; Query time: 23 msec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; SERVER: 8.8.8.8#53(8.8.8.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; WHEN: Thu Dec 26 10:00:00 JST 2025</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; MSG SIZE  rcvd: 56</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>digの便利なオプション</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 簡潔な出力（IPアドレスのみ）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com +short</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 特定のレコードタイプを指定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com A        # Aレコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com AAAA     # AAAAレコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com MX       # MXレコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com NS       # NSレコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com TXT      # TXTレコード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com ANY      # 全レコード（非推奨、応答しないサーバーが増加）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 特定のDNSサーバーに問い合わせ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig @8.8.8.8 example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig @1.1.1.1 example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># トレース（名前解決の全経路を表示）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com +trace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># .                       518400  IN      NS      a.root-servers.net.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># com.                    172800  IN      NS      a.gtld-servers.net.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example.com.            3600    IN      A       93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 逆引き（IPアドレスからドメイン名）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig -x 93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DNS応答時間の計測</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com | grep &quot;Query time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DNSSEC検証</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com +dnssec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-nslookup-コマンド">6.2 nslookup コマンド<a href="#62-nslookup-コマンド" class="hash-link" aria-label="6.2 nslookup コマンド への直接リンク" title="6.2 nslookup コマンド への直接リンク">​</a></h3>
<p><strong>nslookup</strong>は古典的なDNSクエリツールで、対話モードとバッチモードがあります。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 基本的な使い方</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Server:         8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Address:        8.8.8.8#53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Non-authoritative answer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Name:   example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Address: 93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 特定のDNSサーバーに問い合わせ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup example.com 8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># レコードタイプ指定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup -type=MX example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup -type=NS example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup -type=TXT example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 対話モード</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nslookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; server 8.8.8.8         # DNSサーバー指定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; set type=MX            # レコードタイプ設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; example.com            # クエリ実行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; exit                   # 終了</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-host-コマンド">6.3 host コマンド<a href="#63-host-コマンド" class="hash-link" aria-label="6.3 host コマンド への直接リンク" title="6.3 host コマンド への直接リンク">​</a></h3>
<p><strong>host</strong>はシンプルで読みやすい出力を提供します。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 基本的な使い方</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example.com has address 93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example.com has IPv6 address 2606:2800:220:1:248:1893:25c8:1946</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 特定のレコードタイプ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host -t MX example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host -t NS example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host -t TXT example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 詳細表示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host -v example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 逆引き</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host 93.184.216.34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="64-アプリケーションレベルのdns確認">6.4 アプリケーションレベルのDNS確認<a href="#64-アプリケーションレベルのdns確認" class="hash-link" aria-label="6.4 アプリケーションレベルのDNS確認 への直接リンク" title="6.4 アプリケーションレベルのDNS確認 への直接リンク">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># getent - システムのNSS（Name Service Switch）を使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/hosts も参照するため、実際のアプリケーション動作に近い</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">getent hosts example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 93.184.216.34   example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Javaアプリケーションの場合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># JVMのDNSキャッシュをクリア（再起動が必要な場合もある）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># システムプロパティで設定:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -Dsun.net.inetaddr.ttl=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -Dsun.net.inetaddr.negative.ttl=10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-etcresolvconf-と-dns設定">7. /etc/resolv.conf と DNS設定<a href="#7-etcresolvconf-と-dns設定" class="hash-link" aria-label="7. /etc/resolv.conf と DNS設定 への直接リンク" title="7. /etc/resolv.conf と DNS設定 への直  接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-etcresolvconf">7.1 /etc/resolv.conf<a href="#71-etcresolvconf" class="hash-link" aria-label="7.1 /etc/resolv.conf への直接リンク" title="7.1 /etc/resolv.conf への直接リンク">​</a></h3>
<p>LinuxシステムでDNSサーバーを指定するファイルです。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/resolv.conf の確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /etc/resolv.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 一般的な内容:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># nameserver 8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># nameserver 8.8.4.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># search example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># options timeout:2 attempts:3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>主要なディレクティブ</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nameserver &lt;IPアドレス&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 使用するDNSサーバーのIPアドレス</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 最大3つまで指定可能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 上から順に試行される</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search &lt;ドメインリスト&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 短縮名に自動的に付加するドメイン</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 例: search example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - &quot;webserver&quot; → &quot;webserver.example.com&quot; として解決</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain &lt;ドメイン名&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ローカルドメイン名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - searchと似ているが1つだけ指定可能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options &lt;オプション&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - timeout:N    タイムアウト秒数（デフォルト: 5）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - attempts:N   試行回数（デフォルト: 2）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - rotate       nameserverをローテーション</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - ndots:N      FQDN判定のドット数（デフォルト: 1）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-systemd-resolved">7.2 systemd-resolved<a href="#72-systemd-resolved" class="hash-link" aria-label="7.2 systemd-resolved への直接リンク" title="7.2 systemd-resolved への直接リンク">​</a></h3>
<p>現代のLinuxディストリビューションの多くは<strong>systemd-resolved</strong>を使用します。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># systemd-resolved の状態確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status systemd-resolved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 現在のDNS設定を確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resolvectl status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 出力例:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#        LLMNR setting: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># MulticastDNS setting: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   DNSOverTLS setting: no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       DNSSEC setting: allow-downgrade</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     DNSSEC supported: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   Current DNS Server: 8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#          DNS Servers: 8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#                       8.8.4.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 特定のドメインを解決</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resolvectl query example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DNS統計情報</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resolvectl statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># キャッシュクリア</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resolvectl flush-caches</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-networkmanagerによるdns管理">7.3 NetworkManagerによるDNS管理<a href="#73-networkmanagerによるdns管理" class="hash-link" aria-label="7.3 NetworkManagerによるDNS管理 への直接リンク" title="7.3 NetworkManagerによるDNS管理 への直接リンク">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># NetworkManager使用時のDNS設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 現在の接続を確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 接続の詳細（DNS設定含む）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection show &quot;接続名&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DNSサーバーを設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection modify &quot;接続名&quot; ipv4.dns &quot;8.8.8.8 8.8.4.4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 自動DNS（DHCP）を無効化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection modify &quot;接続名&quot; ipv4.ignore-auto-dns yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 設定を適用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nmcli connection up &quot;接続名&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-アプリケーション開発とdns">8. アプリケーション開発とDNS<a href="#8-アプリケーション開発とdns" class="hash-link" aria-label="8. アプリケーション開発とDNS への直接リンク" title="8. アプリケーション開発とDNS への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="81-dnsタイムアウトとリトライ">8.1 DNSタイムアウトとリトライ<a href="#81-dnsタイムアウトとリトライ" class="hash-link" aria-label="8.1 DNSタイムアウトとリトライ への直接リンク" title="8.1 DNSタイムアウトとリトライ への直接リンク">​</a></h3>
<p>アプリケーションはDNS解決の失敗を適切に処理する必要があります。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Java の例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// InetAddress.getByName() のタイムアウト設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// システムプロパティで制御:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// -Dsun.net.inetaddr.ttl=60               // 成功時のキャッシュTTL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// -Dsun.net.inetaddr.negative.ttl=10      // 失敗時のキャッシュTTL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Spring Boot application.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DNS解決タイムアウト（接続プールの場合）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.hikari.connection-timeout=30000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pythonの例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">socket.setdefaulttimeout(5.0)  # 5秒でタイムアウト</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ip = socket.gethostbyname(&#x27;example.com&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;Resolved: {ip}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">except socket.gaierror as e:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;DNS resolution failed: {e}&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="82-dnsラウンドロビン">8.2 DNSラウンドロビン<a href="#82-dnsラウンドロビン" class="hash-link" aria-label="8.2 DNSラウンドロビン への直接リンク" title="8.2 DNSラウンドロビン への直接リンク">​</a></h3>
<p>1つのドメイン名に複数のIPアドレスを割り当てることで、簡易的な負荷分散が可能です。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># DNS設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  A   192.168.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  A   192.168.1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.com.    IN  A   192.168.1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># digで確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com +short</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 192.168.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 192.168.1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 192.168.1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 問い合わせごとに順序がローテーションされることがある</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>注意点</strong>:</p>
<ul>
<li>クライアントが最初のIPアドレスだけを使う場合がある</li>
<li>障害検知機能がない（ダウンしたIPにもアクセスしてしまう）</li>
<li>セッション維持が必要なアプリには不向き</li>
<li>本格的な負荷分散にはロードバランサーを使用すべき</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="83-dns障害時の対策">8.3 DNS障害時の対策<a href="#83-dns障害時の対策" class="hash-link" aria-label="8.3 DNS障害時の対策 への直接リンク" title="8.3 DNS障害時の対策 への直接リンク">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// データベース接続でのDNS障害対策例（疑似コード）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1. 複数のホストを指定（フェイルオーバー）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:postgresql://db-primary.example.com,db-secondary.example.com/mydb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. IPアドレスの直接指定（最終手段）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// DNSが完全に使えない場合のバックアップ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:postgresql://192.168.1.10/mydb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3. ローカルhostsファイルの活用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// /etc/hosts に緊急用のマッピングを記載</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 192.168.1.10  db-primary.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 4. 接続リトライロジック</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int maxRetries = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int retryDelay = 5000; // 5秒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; maxRetries; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        connection = DriverManager.getConnection(url);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (SQLException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (i == maxRetries - 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(retryDelay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-dns障害のトラブルシューティング">9. DNS障害のトラブルシューティング<a href="#9-dns障害のトラブルシューティング" class="hash-link" aria-label="9. DNS障害のトラブルシューティング への直接リンク" title="9. DNS障害のトラブルシューティング への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-診断フロー">9.1 診断フロー<a href="#91-診断フロー" class="hash-link" aria-label="9.1 診断フロー への直接リンク" title="9.1 診断フロー への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│              DNS障害の診断フロー                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. ホスト名が解決できない?                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► pingで疎通確認                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   ping example.com                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   → NG なら次へ                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► IPアドレス直接指定で疎通確認                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   ping 93.184.216.34                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   → OK ならDNS問題、NG ならネットワーク問題           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. DNS設定を確認                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► /etc/resolv.conf の確認                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   cat /etc/resolv.conf                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► 設定されているDNSサーバーに疎通確認                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   ping 8.8.8.8                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. DNSクエリテスト                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► 設定されているDNSサーバーでクエリ                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   dig @8.8.8.8 example.com                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► 別のパブリックDNSでクエリ                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   dig @1.1.1.1 example.com                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     ├─► 権威DNSサーバーに直接クエリ                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │   dig @ns1.example.com example.com                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  4. ファイアウォール確認                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     │                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └─► UDP/53が開いているか確認                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│         nc -zvu 8.8.8.8 53                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-よくあるdns問題">9.2 よくあるDNS問題<a href="#92-よくあるdns問題" class="hash-link" aria-label="9.2 よくあるDNS問題 への直接リンク" title="9.2 よくあるDNS問題 への直接リンク">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 問題1: NXDOMAIN（ドメインが存在しない）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig nonexistent.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># → ドメイン名のスペルミス or レコード未設定</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 問題2: SERVFAIL（サーバーエラー）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: SERVFAIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># → DNSサーバー側の問題（権威サーバーダウン、設定エラー等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 問題3: タイムアウト</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig @192.168.1.1 example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ;; connection timed out; no servers could be reached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># → DNSサーバーが応答しない（ファイアウォール、ネットワーク障害等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 問題4: 古いキャッシュ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 症状: レコード変更したのに反映されない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 対策:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. TTL期限まで待つ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. キャッシュをクリア</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemd-resolve --flush-caches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. TTLを確認</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig example.com | grep -A1 &quot;ANSWER SECTION&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example.com.    120    IN    A    93.184.216.34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#                 ↑ あと120秒でキャッシュ期限切れ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-セキュリティ考慮事項">10. セキュリティ考慮事項<a href="#10-セキュリティ考慮事項" class="hash-link" aria-label="10. セキュリティ考慮事項 への直接リンク" title="10. セキュリティ考慮事項 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="101-dnsキャッシュポイズニング">10.1 DNSキャッシュポイズニング<a href="#101-dnsキャッシュポイズニング" class="hash-link" aria-label="10.1 DNSキャッシュポイズニング への直接リンク" title="10.1 DNSキャッシュポイズニング への直接リンク">​</a></h3>
<p>攻撃者が偽のDNS応答をキャッシュに挿入する攻撃です。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│              DNSキャッシュポイズニング                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  クライアント                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (1) example.com のIPは?                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ▼                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  リゾルバ                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ (2) 権威DNSサーバーに問い合わせ                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                ┌──────────────┐                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                │ 正規の応答    │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ ◄──────────── │ 93.184.216.34 │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                └──────────────┘                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                ┌──────────────┐                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │   攻撃者が送信 │ 偽の応答      │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ ◄──────────── │ 10.0.0.1      │ (悪意あるIP)        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                └──────────────┘                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ どちらを信用する?                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      │ → DNSSEC、送信元ポートランダム化等で対策              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>対策</strong>:</p>
<ul>
<li><strong>DNSSEC</strong>の利用（次章で詳述）</li>
<li>DNSサーバーの最新化</li>
<li>信頼できるDNSサーバーの使用</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="102-dns-over-https-doh--dns-over-tls-dot">10.2 DNS over HTTPS (DoH) / DNS over TLS (DoT)<a href="#102-dns-over-https-doh--dns-over-tls-dot" class="hash-link" aria-label="10.2 DNS over HTTPS (DoH) / DNS over TLS (DoT) への直接リンク" title="10.2 DNS over HTTPS (DoH) / DNS over TLS (DoT) への直接リンク">​</a></h3>
<p>DNSクエリを暗号化して、盗聴や改ざんを防ぎます。</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Cloudflare DoH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dig @1.1.1.1 example.com +https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Google DoT（ポート853）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># kdig（knot-dns-utilsパッケージ）を使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kdig -d @8.8.8.8 +tls example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="まとめ">まとめ<a href="#まとめ" class="hash-link" aria-label="まとめ への直接リンク" title="まとめ への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="学んだこと">学んだこと<a href="#学んだこと" class="hash-link" aria-label="学んだこと への直接リンク" title="学んだこと への直接リンク">​</a></h3>
<p>本章では、DNSの基礎を学びました:</p>
<ul>
<li>DNSの役割と階層構造（ルート、TLD、SLD、サブドメイン）</li>
<li>主要なレコードタイプ（A, AAAA, CNAME, MX, NS, TXT, SRV）</li>
<li>名前解決の仕組み（再帰的・反復的問い合わせ）</li>
<li>DNSキャッシュとTTLの重要性</li>
<li>実践的なDNSクエリツール（dig, nslookup, host）</li>
<li>/etc/resolv.confとsystemd-resolved</li>
<li>アプリケーション開発におけるDNS考慮事項</li>
<li>DNS障害のトラブルシューティング</li>
<li>DNSセキュリティの基本</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="次のステップ">次のステップ<a href="#次のステップ" class="hash-link" aria-label="次のステップ への直接リンク" title="次のステップ への直接リンク">​</a></h3>
<ul>
<li><a href="/idp-server/docs/content_11_learning/networking/dns-advanced">02-dns-advanced.md</a> - DNS詳細（CNAME、DNSルーティング、DNSSEC）</li>
<li><a href="/idp-server/docs/content_11_learning/networking/load-balancing">03-load-balancing.md</a> - ロードバランシングとDNSの関係</li>
<li><a href="/idp-server/docs/content_11_learning/networking/network-troubleshooting">06-network-troubleshooting.md</a> - ネットワークトラブルシューティング</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="参考リンク">参考リンク<a href="#参考リンク" class="hash-link" aria-label="参考リンク への直接リンク" title="参考リンク への直接リンク">​</a></h3>
<ul>
<li><a href="https://tools.ietf.org/html/rfc1034" target="_blank" rel="noopener noreferrer">RFC 1034 - Domain Names - Concepts and Facilities</a></li>
<li><a href="https://tools.ietf.org/html/rfc1035" target="_blank" rel="noopener noreferrer">RFC 1035 - Domain Names - Implementation and Specification</a></li>
<li><a href="https://www.iana.org/domains/root/db" target="_blank" rel="noopener noreferrer">IANA Root Zone Database</a></li>
<li><a href="https://dnsflagday.net/" target="_blank" rel="noopener noreferrer">DNS Flag Day</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/15-networking/01-dns-fundamentals.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_11_learning/networking/"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">ネットワーク学習ガイド</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_11_learning/networking/dns-advanced"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">DNS詳細: CNAMEとDNSSEC</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#所要時間" class="table-of-contents__link toc-highlight">所要時間</a></li><li><a href="#学べること" class="table-of-contents__link toc-highlight">学べること</a></li><li><a href="#前提知識" class="table-of-contents__link toc-highlight">前提知識</a></li><li><a href="#1-dnsとは" class="table-of-contents__link toc-highlight">1. DNSとは</a><ul><li><a href="#11-基本概念" class="table-of-contents__link toc-highlight">1.1 基本概念</a></li><li><a href="#12-dnsの歴史" class="table-of-contents__link toc-highlight">1.2 DNSの歴史</a></li></ul></li><li><a href="#2-dnsの階層構造" class="table-of-contents__link toc-highlight">2. DNSの階層構造</a><ul><li><a href="#21-dns階層モデル" class="table-of-contents__link toc-highlight">2.1 DNS階層モデル</a></li><li><a href="#22-ドメインレベル" class="table-of-contents__link toc-highlight">2.2 ドメインレベル</a></li><li><a href="#23-ゾーンと権威サーバー" class="table-of-contents__link toc-highlight">2.3 ゾーンと権威サーバー</a></li></ul></li><li><a href="#3-dnsレコードタイプ" class="table-of-contents__link toc-highlight">3. DNSレコードタイプ</a><ul><li><a href="#31-主要なレコードタイプ" class="table-of-contents__link toc-highlight">3.1 主要なレコードタイプ</a></li><li><a href="#32-レコードの構造" class="table-of-contents__link toc-highlight">3.2 レコードの構造</a></li></ul></li><li><a href="#4-dns名前解決の仕組み" class="table-of-contents__link toc-highlight">4. DNS名前解決の仕組み</a><ul><li><a href="#41-再帰的問い合わせと反復的問い合わせ" class="table-of-contents__link toc-highlight">4.1 再帰的問い合わせと反復的問い合わせ</a></li><li><a href="#42-リゾルバの種類" class="table-of-contents__link toc-highlight">4.2 リゾルバの種類</a></li></ul></li><li><a href="#5-dnsキャッシュとttl" class="table-of-contents__link toc-highlight">5. DNSキャッシュとTTL</a><ul><li><a href="#51-キャッシュの動作" class="table-of-contents__link toc-highlight">5.1 キャッシュの動作</a></li><li><a href="#52-ttl設計のベストプラクティス" class="table-of-contents__link toc-highlight">5.2 TTL設計のベストプラクティス</a></li><li><a href="#53-キャッシュのクリア" class="table-of-contents__link toc-highlight">5.3 キャッシュのクリア</a></li></ul></li><li><a href="#6-実践-dnsクエリツール" class="table-of-contents__link toc-highlight">6. 実践: DNSクエリツール</a><ul><li><a href="#61-dig-コマンド" class="table-of-contents__link toc-highlight">6.1 dig コマンド</a></li><li><a href="#62-nslookup-コマンド" class="table-of-contents__link toc-highlight">6.2 nslookup コマンド</a></li><li><a href="#63-host-コマンド" class="table-of-contents__link toc-highlight">6.3 host コマンド</a></li><li><a href="#64-アプリケーションレベルのdns確認" class="table-of-contents__link toc-highlight">6.4 アプリケーションレベルのDNS確認</a></li></ul></li><li><a href="#7-etcresolvconf-と-dns設定" class="table-of-contents__link toc-highlight">7. /etc/resolv.conf と DNS設定</a><ul><li><a href="#71-etcresolvconf" class="table-of-contents__link toc-highlight">7.1 /etc/resolv.conf</a></li><li><a href="#72-systemd-resolved" class="table-of-contents__link toc-highlight">7.2 systemd-resolved</a></li><li><a href="#73-networkmanagerによるdns管理" class="table-of-contents__link toc-highlight">7.3 NetworkManagerによるDNS管理</a></li></ul></li><li><a href="#8-アプリケーション開発とdns" class="table-of-contents__link toc-highlight">8. アプリケーション開発とDNS</a><ul><li><a href="#81-dnsタイムアウトとリトライ" class="table-of-contents__link toc-highlight">8.1 DNSタイムアウトとリトライ</a></li><li><a href="#82-dnsラウンドロビン" class="table-of-contents__link toc-highlight">8.2 DNSラウンドロビン</a></li><li><a href="#83-dns障害時の対策" class="table-of-contents__link toc-highlight">8.3 DNS障害時の対策</a></li></ul></li><li><a href="#9-dns障害のトラブルシューティング" class="table-of-contents__link toc-highlight">9. DNS障害のトラブルシューティング</a><ul><li><a href="#91-診断フロー" class="table-of-contents__link toc-highlight">9.1 診断フロー</a></li><li><a href="#92-よくあるdns問題" class="table-of-contents__link toc-highlight">9.2 よくあるDNS問題</a></li></ul></li><li><a href="#10-セキュリティ考慮事項" class="table-of-contents__link toc-highlight">10. セキュリティ考慮事項</a><ul><li><a href="#101-dnsキャッシュポイズニング" class="table-of-contents__link toc-highlight">10.1 DNSキャッシュポイズニング</a></li><li><a href="#102-dns-over-https-doh--dns-over-tls-dot" class="table-of-contents__link toc-highlight">10.2 DNS over HTTPS (DoH) / DNS over TLS (DoT)</a></li></ul></li><li><a href="#まとめ" class="table-of-contents__link toc-highlight">まとめ</a><ul><li><a href="#学んだこと" class="table-of-contents__link toc-highlight">学んだこと</a></li><li><a href="#次のステップ" class="table-of-contents__link toc-highlight">次のステップ</a></li><li><a href="#参考リンク" class="table-of-contents__link toc-highlight">参考リンク</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>