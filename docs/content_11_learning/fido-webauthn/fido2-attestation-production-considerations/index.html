<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_11_learning/fido-webauthn/fido2-attestation-production-considerations" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">商用環境でのアテステーション検証 | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-production-considerations"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="商用環境でのアテステーション検証 | IdP-Server Documentation"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-production-considerations"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-production-considerations" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-production-considerations" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.c56bff8e.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.6cae86c5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">はじめに</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ドキュメントガイド</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">製品紹介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">クイックスタート</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/foundation/concept-01-multi-tenant">コア概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">認証・認可プロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/">How-to（設定・運用レシピ）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/">開発者ガイド</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">リファレンス</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">学習（Learning）</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">アイデンティティ管理の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-fundamentals/modern-web-authz-authn">OAuth 2.0の基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-tokens/id-token-jwt">OAuth 2.0トークン</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/openid-connect/oauth-oidc-basics">OpenID Connect</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-webauthn-passwordless">FIDO2/WebAuthn</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-webauthn-passwordless">FIDO2・WebAuthn パスワードレス認証</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-architecture-rp-browser-authenticator">FIDO2アーキテクチャ - RP・Webブラウザー・認証器の関係</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-passkey-discoverable-credential">FIDO2・パスキー・Discoverable Credentialの基本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-registration-flow-interface">FIDO2 登録フローとインターフェース詳細</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-authentication-flow-interface">FIDO2 認証フローとインターフェース詳細</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-webauthn-level-specification-evolution">FIDO2・WebAuthn仕様の変遷（Level 1 → 2 → 3）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-identifiers-idp-integration">FIDO2 識別子とIdP統合 - userId, username, credentialId の関係</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-aaguid-authenticator-identification">AAGUID - 認証器のモデル識別子</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-types-and-verification">Attestation - 認証器の信頼性証明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-production-considerations">商用環境でのアテステーション検証</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-metadata-service">FIDO Metadata Service (MDS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-cross-device-authentication">クロスデバイス認証</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-security-considerations">FIDO2 セキュリティ考慮事項</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-performance-analysis">FIDO2/WebAuthn パフォーマンス分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-faq-troubleshooting">FIDO2/WebAuthn FAQ・トラブルシューティング</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/security/glossary">セキュリティ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/multi-tenancy/multi-tenancy-basics">マルチテナント</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/advanced-protocols/ciba-basics">高度なプロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/http-rest/http-basics">HTTP/REST</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/jwt-jose/jwt-introduction">JWT/JOSE</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/oauth-oidc-rfc/">OAuth/OIDC RFC学習</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/verifiable-credentials/">Verifiable Credentials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/data-formats/">データフォーマット</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/session-management/web-session-basics">セッション管  理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/postgresql/">PostgreSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/crypto/">暗号化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/kubernetes/">コンテナ/Kubernetes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/linux/">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/networking/">ネットワーク</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/jvm/">JVM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/java/">Java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/os-fundamentals/">OS基礎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/frameworks/">フレームワーク</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/sdk/">SDK</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/clean-architecture/">クリーンアーキテクチャ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/idp-server/docs/content_11_learning/performance-tuning/">パフォーマンス・チューニング</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">運用（Ops）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">プロジェクト</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">学習（Learning）</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">FIDO2/WebAuthn</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">商用環境でのアテステーション検証</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>商用環境でのアテステーション検証</h1></header>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概要">概要<a href="#概要" class="hash-link" aria-label="概要 への直接リンク" title="概要 への直接リンク">​</a></h2>
<p>本ドキュメントでは、FIDO2 アテステーション検証を商用環境で運用する際の考慮事項を解説します。</p>
<p><strong>このドキュメントで学べること</strong>:</p>
<ul>
<li>アテステーション検証を導入する前に決めるべきポリシー</li>
<li>認証器の多様性による問題と対処法</li>
<li>証明書関連のトラブルシューティング</li>
<li>ユーザー影響を考慮した設計</li>
<li>運用時のベストプラクティス</li>
</ul>
<p><strong>対象読者</strong>:</p>
<ul>
<li>システム設計者</li>
<li>インフラ/運用担当者</li>
<li>セキュリティ担当者</li>
</ul>
<blockquote>
<p>📖 アテステーションの基礎については <a href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-types-and-verification">Attestation - 認証器の信頼性証明</a> を参照してください。</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="事前に決めておくべきポリシー">事前に決めておくべきポリシー<a href="#事前に決めておくべきポリシー" class="hash-link" aria-label="事前に決めておくべきポリシー への直接リンク" title="事前に決めておくべきポリシー への直接リンク">​</a></h2>
<p>アテステーション検証を導入する前に、以下のポリシーを決定しておく必要があります。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ポリシー決定マトリクス">ポリシー決定マトリクス<a href="#ポリシー決定マトリクス" class="hash-link" aria-label="ポリシー決定マトリクス への直接リンク" title="ポリシー決定マトリクス への直接リンク">​</a></h3>
<table><thead><tr><th>項目</th><th>内容</th><th>選択肢</th><th>推奨（一般）</th><th>推奨（高セキュリティ）</th></tr></thead><tbody><tr><td>Attestation Conveyance</td><td>認証器に attestation 送信を要求するか</td><td>none / indirect / direct / enterprise</td><td>none</td><td>direct</td></tr><tr><td>Self Attestation</td><td>証明書なしの自己署名を許可するか</td><td>許可 / 拒否</td><td>許可</td><td>要検討</td></tr><tr><td>fmt=&quot;none&quot;</td><td>attestation なしの登録を許可するか</td><td>許可 / 拒否</td><td>許可</td><td>拒否</td></tr><tr><td>FIDO 認定レベル</td><td>要求する最低認定レベル</td><td>不問 / L1以上 / L2以上</td><td>不問</td><td>L1以上</td></tr><tr><td>未知の認証器</td><td>MDS に存在しない認証器を許可するか</td><td>許可 / 拒否</td><td>許可</td><td>拒否</td></tr><tr><td>検証失敗時</td><td>検証エラー時の挙動</td><td>拒否 / 警告のみ</td><td>警告のみ</td><td>拒否</td></tr><tr><td>証明書検証方式</td><td>ルート CA の管理方法</td><td>TrustStore / MDS / 併用</td><td>MDS</td><td>併用</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="attestation-conveyance-の選択">Attestation Conveyance の選択<a href="#attestation-conveyance-の選択" class="hash-link" aria-label="Attestation Conveyance の選択 への直接リンク" title="Attestation Conveyance の選択 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    Attestation Conveyance の選択基準                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【none を選ぶべきケース】                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 一般消費者向けサービス                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ユーザーのプライバシーを最優先                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器の種類を制限したくない                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - パスワードレス認証の普及が目的                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【direct を選ぶべきケース】                                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 企業の社内システム                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 金融・医療など規制業界                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 特定の認証器のみを許可したい                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 監査で認証器の種類を証明する必要がある                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【enterprise を選ぶべきケース】                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器を会社資産として管理                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 紛失・盗難時に個体を特定したい                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 従業員の同意のもとで使用                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="attestation-とプライバシー">Attestation とプライバシー<a href="#attestation-とプライバシー" class="hash-link" aria-label="Attestation とプライバシー への直接リンク" title="Attestation とプライバシー への直接リンク">​</a></h3>
<p>「ユーザーのプライバシーを最優先」とは、認証器に関する情報を RP に送信しないことを意味します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    Attestation で RP に伝わる情報                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【AAGUID から分かること】                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器のモデル・製品名                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 例: 「このユーザーは YubiKey 5 NFC を使っている」                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【証明書チェーンから分かること】                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 製造元（Yubico、Apple、Google 等）                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 製造時期・バッチ（証明書のシリアル番号等から推測可能な場合）               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - enterprise attestation の場合、認証器の個体識別情報                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【プライバシーリスクの具体例】                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. クロスサイ  トトラッキング                                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 複数のサイトで同じ AAGUID が観測される                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 「サイト A とサイト B に同じ認証器でアクセスしている」と推測可能        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. ユーザー属性の推測                                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - YubiKey → セキュリティ意識が高い、または企業ユーザー                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 古いモデルの認証器 → 長期間使用している、または経済的理由              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 特定企業の認証器 → その企業の従業員である可能性                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. 標的型攻撃への悪用                                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 認証器の既知の脆弱性を狙った攻撃                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 特定モデルを使うユーザーを狙ったフィッシング                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【attestation=&quot;none&quot; が保護するもの】                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Attestation データを送信しない                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID が 00000000-0000-0000-0000-000000000000 になることがある           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - RP は認証器の種類を知ることができない                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ユーザーは「どの認証器を使っているか」を秘匿できる                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────────────────────────────────────  ──────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>一般消費者向けサービスでは、認証器の種類を知る必要がないケースが多いため、ユーザーのプライバシーを尊重して <code>attestation=&quot;none&quot;</code> を選択することが推奨されます。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-attestation-の扱い">Self Attestation の扱い<a href="#self-attestation-の扱い" class="hash-link" aria-label="Self Attestation の扱い への直接リンク" title="Self Attestation の扱い への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    Self Attestation とは                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Self Attestation は、認証器が生成した鍵ペアの秘密鍵自身で署名する方式        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - x5c（証明書チェーン）が含まれない                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器の製造元を証明できない                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID は含まれるが、偽装される可能性がある                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【許可する場合】                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - より多くの認証器をサポートできる                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 一部の正規認証器も Self Attestation を使用する                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【拒否する場合】                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器の正当性を検証できないリスクを排除                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ソフトウェア認証器の悪用を防止                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ただし、利用可能な認証器が減る                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="未知の認証器の扱い">未知の認証器の扱い<a href="#未知の認証器の扱い" class="hash-link" aria-label="未知の認証器の扱い への直接リンク" title="未知の認証器の扱い への直接リンク">​</a></h3>
<p>MDS に登録されていない認証器をどう扱うかは重要な決定事項です。</p>
<table><thead><tr><th>方針</th><th>メリット</th><th>デメリット</th></tr></thead><tbody><tr><td><strong>許可</strong></td><td>新しい認証器にも対応できる</td><td>セキュリティレベルが不明</td></tr><tr><td><strong>拒否</strong></td><td>信頼できる認証器のみに限定</td><td>新製品への対応が遅れる</td></tr><tr><td><strong>警告付き許可</strong></td><td>バランスが取れる</td><td>ユーザー体験が複雑になる</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="検証失敗時の挙動">検証失敗時の挙動<a href="#検証失敗時の挙動" class="hash-link" aria-label="検証失敗時の挙動 への直接リンク" title="検証失敗時の挙動 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    検証失敗時の挙動設計                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【拒否（Strict モード）】                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 検証に失敗した場合、登録を拒否                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - セキュリティは高いが、ユーザーが登録できないケースが発生                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 企業環境や高セキュリティ環境向け                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【警告のみ（Permissive モード）】                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 検証に失敗しても登録は許可                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ログに警告を記録、監査用データとして保存                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 後からポリシーを厳格化する際のデータ収集に有用                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 一般消費者向けサービスの初期導入に適切                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【段階的導入の推奨】                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Phase 1: 警告のみ（データ収集）                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Phase 2: 分析結果に基づきポリシー調整                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Phase 3: 必要に応じて Strict モードへ移行                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="証明書検証方式の選択">証明書検証方式の選択<a href="#証明書検証方式の選択" class="hash-link" aria-label="証明書検証方式の選択 への直接リンク" title="証明書検証方式の選択 への直接リンク">​</a></h3>
<p>証明書チェーン検証に使用するルート CA の管理方式を決定します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    証明書検証方式の選択基準                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【TrustStore のみ】                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 手動でルート CA 証明書を収集・登録                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - オフラインで動作可能                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 許可する認証器を厳格に管理したい企業環境向け                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 新しい認証器への対応に手動作業が必要                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【MDS のみ】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS から AAGUID に対応するルート CA を動的に取得                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 新しい認証器に自動対応                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS への依存（障害時に影響）                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 多様な認証器をサポートしたい一般向けサービス向け                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【併用（推奨）】                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 主要なルート CA は TrustStore に事前登録                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - TrustStore にないものは MDS から取得                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS 障害時も主要な認証器は動作                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 高可用性が求められる本番環境向け                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>方式</th><th>運用負荷</th><th>可用性</th><th>新認証器対応</th><th>推奨ケース</th></tr></thead><tbody><tr><td>TrustStore のみ</td><td>高（手動更新）</td><td>高</td><td>遅い</td><td>認証器限定の企業環境</td></tr><tr><td>MDS のみ</td><td>低</td><td>MDS依存</td><td>即時</td><td>一般向けサービス</td></tr><tr><td>併用</td><td>中</td><td>高</td><td>即時</td><td>本番環境（推奨）</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="認証器の多様性による問題">認証器の多様性による問題<a href="#認証器の多様性による問題" class="hash-link" aria-label="認証器の多様性による問題 への直接リンク" title="認証器の多様性による問題 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="direct-を要求しても-none-が返る">&quot;direct&quot; を要求しても &quot;none&quot; が返る<a href="#direct-を要求しても-none-が返る" class="hash-link" aria-label="&quot;direct&quot; を要求しても &quot;none&quot; が返る への直接リンク" title="&quot;direct&quot; を要求しても &quot;none&quot; が返る への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    Attestation が返らないケース                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  RP が attestation=&quot;direct&quot; を要求しても、認証器やブラウザが                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  fmt=&quot;none&quot; を返すケースがある                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【原因】                                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. ブラウザのプライバシー設定                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 一部のブラウザは attestation を自動的に削除する設定がある               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. 認証器の実装                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - 一部の認証器は attestation をサポートしていない                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - プラットフォーム認証器はプライバシー保護のため none を返すことがある    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. ユーザーの選択                                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│     - ブラウザが「認証器情報を送信しますか？」と確認し、ユーザーが拒否        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【対処法】                                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - fmt=&quot;none&quot; を許可するかどうかを事前に決定しておく                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 許可しない場合、ユーザーに別の認証器を使うよう案内                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="プラットフォーム認証器の特性">プラットフォーム認証器の特性<a href="#プラットフォーム認証器の特性" class="hash-link" aria-label="プラットフォーム認証器の特性 への直接リンク" title="プラットフォーム認証器の特性 への直接リンク">​</a></h3>
<table><thead><tr><th>認証器</th><th>Attestation Format</th><th>特記事項</th></tr></thead><tbody><tr><td><strong>Windows Hello (TPM)</strong></td><td>tpm</td><td>TPM 2.0 固有の構造。Microsoft の証明書チェーン</td></tr><tr><td><strong>Windows Hello (非TPM)</strong></td><td>none</td><td>TPM なしの環境では attestation なし</td></tr><tr><td><strong>macOS Touch ID</strong></td><td>apple</td><td>Apple 固有の形式。Safari でのみ動作</td></tr><tr><td><strong>iOS Face ID / Touch ID</strong></td><td>apple</td><td>iCloud Keychain 経由の場合は異なる</td></tr><tr><td><strong>Android</strong></td><td>android-key または packed</td><td>デバイスにより異なる</td></tr><tr><td><strong>Chrome プロファイル同期</strong></td><td>none</td><td>ソフトウェアベースのため attestation なし</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="認証器のファームウェアバグ">認証器のファームウェアバグ<a href="#認証器のファームウェアバグ" class="hash-link" aria-label="認証器のファームウェアバグ への直接リンク" title="認証器のファームウェアバグ への直接リンク">​</a></h3>
<p>実際の運用で報告されている問題例：</p>
<table><thead><tr><th>問題</th><th>影響</th><th>対処法</th></tr></thead><tbody><tr><td>証明書の有効期限が不正</td><td>チェーン検証失敗</td><td>該当 AAGUID を例外リストに追加</td></tr><tr><td>AAGUID がゼロ埋め</td><td>認証器を特定できない</td><td>fmt で判断、または許可</td></tr><tr><td>中間証明書の順序が不正</td><td>チェーン構築失敗</td><td>証明書ソートロジックを実装</td></tr><tr><td>署名アルゴリズムの不一致</td><td>署名検証失敗</td><td>アルゴリズム自動検出を実装</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="証明書関連のトラブル">証明書関連のトラブル<a href="#証明書関連のトラブル" class="hash-link" aria-label="証明書関連のトラブル への直接リンク" title="証明書関連のトラブル への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="よくある証明書エラー">よくある証明書エラー<a href="#よくある証明書エラー" class="hash-link" aria-label="よくある証明書エラー への直接リンク" title="よくある証明書エラー への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    証明書エラーの種類と対処                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【エラー1: ルート CA が TrustStore にない】                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  原因: 新しい認証器のルート CA が未登録                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  症状: &quot;Certificate chain validation failed: no trusted root&quot;              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  対処:                                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - MDS から最新のルート証明書を取得して TrustStore に追加                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - または該当認証器を一時的に許可リストに追加                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【エラー2: 中間証明書の欠落】                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  原因: 認証器が x5c に中間証明書を含めていない                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  症状: &quot;Unable to build certificate path&quot;                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  対処:                                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - MDS から中間証明書を取得してキャッシュ                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 証明書パス構築時に MDS の証明書も参照するよう実装                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【エラー3: 証明書の有効期限切れ】                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  原因: ルート CA または中間 CA の証明書が期限切れ                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  症状: &quot;Certificate has expired&quot;                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  対処:                                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - TrustStore の証明書を更新                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 認証器側の問題の場合、ベンダーに問い合わせ                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【エラー4: 署名検証失敗】                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ────────────────────────────────────────────────────────────────────────── │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  原因: attestation signature が不正、または検証ロジックのバグ                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  症状: &quot;Signature verification failed&quot;                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  対処:                                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 署名対象データの構築方法を確認                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 認証器のファームウェアバグの可能性を調査                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="証明書有効期限の監視">証明書有効期限の監視<a href="#証明書有効期限の監視" class="hash-link" aria-label="証明書有効期限の監視 への直接リンク" title="証明書有効期限の監視 への直接リンク">​</a></h3>
<p>TrustStore 内の証明書の有効期限を監視し、事前にアラートを上げる仕組みを構築します。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    証明書有効期限監視                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【監視項目】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - TrustStore 内の全ルート CA 証明書                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS BLOB の署名証明書                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - キャッシュしている中間証明書                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【アラート閾値の例】                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 90日前: 情報通知（更新計画を開始）                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 30日前: 警告（更新作業を実施）                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 7日前: 緊急（即時対応が必要）                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【対応フロー】                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. ベンダーまたは MDS から新しい証明書を入手                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. ステージング環境で TrustStore を更新してテスト                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. 本番環境に TrustStore をデプロイ                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  4. 古い証明書は猶予期間後に削除                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="運用中に発生するイベント">運用中に発生するイベント<a href="#運用中に発生するイベント" class="hash-link" aria-label="運用中に発生するイベント への直接リンク" title="運用中に発生するイベント への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="認証器の脆弱性が発覚した場合">認証器の脆弱性が発覚した場合<a href="#認証器の脆弱性が発覚した場合" class="hash-link" aria-label="認証器の脆弱性が発覚した場合 への直接リンク" title="認証器の脆弱性が発覚した場合 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    脆弱性発覚時の対応フロー                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────┐                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ MDS statusReports   │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ で脆弱性を検知      │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────┬──────────┘                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ▼                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────┐                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 影響範囲を特定      │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 該当 AAGUID の    │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   登録済みユ  ーザー  │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │   を抽出            │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────┬──────────┘                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ▼                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────┐     ┌─────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 脆弱性の深刻度を    │────&gt;│ 深刻: 即座に該当認証器をブロック        │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ 評価                │     │ 中程度: 新規登録を停止、既存は猶予期間  │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────┬──────────┘     │ 軽微: 監視継続、次回登録時に警告        │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                 └─────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ▼                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────┐                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ ユーザーへの通知    │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 脆弱性の説明      │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 推奨アクション    │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 代替認証器の案内  │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────┬──────────┘                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             │                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             ▼                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────┐                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ ク レデンシャル      │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ の再登録を促す      │                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────┘                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mds-の-statusreports-値">MDS の statusReports 値<a href="#mds-の-statusreports-値" class="hash-link" aria-label="MDS の statusReports 値 への直接リンク" title="MDS の statusReports 値 への直接リンク">​</a></h3>
<table><thead><tr><th>Status</th><th>意味</th><th>推奨アクション</th></tr></thead><tbody><tr><td><code>FIDO_CERTIFIED</code></td><td>FIDO 認定済み</td><td>許可</td></tr><tr><td><code>FIDO_CERTIFIED_L1</code></td><td>Level 1 認定</td><td>許可</td></tr><tr><td><code>FIDO_CERTIFIED_L2</code></td><td>Level 2 認定（ハードウェア保護）</td><td>許可</td></tr><tr><td><code>NOT_FIDO_CERTIFIED</code></td><td>未認定</td><td>ポリシーに基づき判断</td></tr><tr><td><code>USER_VERIFICATION_BYPASS</code></td><td>UV バイパスの脆弱性</td><td>警告または拒否</td></tr><tr><td><code>ATTESTATION_KEY_COMPROMISE</code></td><td>鍵漏洩</td><td>即座にブロック</td></tr><tr><td><code>USER_KEY_REMOTE_COMPROMISE</code></td><td>リモート攻撃で鍵漏洩の可能性</td><td>即座にブロック</td></tr><tr><td><code>USER_KEY_PHYSICAL_COMPROMISE</code></td><td>物理攻撃で鍵漏洩の可能性</td><td>リスク評価後に判断</td></tr><tr><td><code>REVOKED</code></td><td>失効</td><td>即座にブロック</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新しい認証器モデルへの対応">新しい認証器モデルへの対応<a href="#新しい認証器モデルへの対応" class="hash-link" aria-label="新しい認証器モデルへの対応 への直接リンク" title="新しい認証器モデルへの対応 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    新しい認証器への対応フロー                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【シナリオ】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ユーザーが新しい認証器で登録しようとしたが、                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID が MDS に存在しない                                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ルート CA が TrustStore にない                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【対応オプション】                                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション A: 自動許可（Permissive）                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 未知の認証器でも登録を許可                                          │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - ログに記録して後から分析                                            │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 定期的に MDS を更新して追認                                         │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション B: 手動承認（Strict）                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 未知の認証器は登録を  拒否                                            │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 管理者が AAGUID を許可リストに追加後、再試行を依頼                  │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 企業環境で認証器を厳格に管理する場合に適切                          │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション C: 段階的許可（Hybrid）                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 未知の認証器は「制限付き」で登録                                    │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 一部機能を制限（例: 高額取引は不可）                                │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - MDS で確認後、制限を解除                                            │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ユーザー影響の考慮">ユーザー影響の考慮<a href="#ユーザー影響の考慮" class="hash-link" aria-label="ユーザー影響の考慮 への直接リンク" title="ユーザー影響の考慮 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="認証器が拒否された場合のユーザー体験">認証器が拒否された場合のユーザー体験<a href="#認証器が拒否された場合のユーザー体験" class="hash-link" aria-label="認証器が拒否された場合のユーザー体験 への直接リンク" title="認証器が拒否された場合のユーザー体験 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    ユーザー向けエラーメッセージ設計                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【悪い例】                                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &quot;Attestation verification failed: AAGUID not in allowlist&quot;                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  → ユーザーには意味不明                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【良い例】                                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &quot;お使いのセキュリティキーはこのサービスではご利用いただけません。            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   以下の対応をお試しください:                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   - 別のセキュリティキーをお持ちの場合は、そちらをお試しください              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   - 会社支給のセキュリティキーをお使いください                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   - ご不明な場合はサポートまでお問い合わせください&quot;                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【エラーコードの提供】                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  &quot;エラーコード: AUTH-4001&quot;                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  → サポートが原因を特定しやすい                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="代替手段の提供">代替手段の提供<a href="#代替手段の提供" class="hash-link" aria-label="代替手段の提供 への直接リンク" title="代替手段の提供 への直接リンク">​</a></h3>
<table><thead><tr><th>シナリオ</th><th>代替手段の例</th></tr></thead><tbody><tr><td>認証器が拒否された</td><td>別の認証器を案内、または SMS/メール OTP にフォールバック</td></tr><tr><td>認証器の脆弱性で無効化</td><td>新しい認証器での再登録を案内、一時的に別の認証方式を許可</td></tr><tr><td>認証器を紛失</td><td>バックアップコード、リカバリーフロー</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="サポート対応フロー">サポート対応フロー<a href="#サポート対応フロー" class="hash-link" aria-label="サポート対応フロー への直接リンク" title="サポート対応フロー への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    サポート担当者向け情報                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ユーザーからの問い合わせ時に確認すべき情報:                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. エラーコード                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. 使用している認証器の種類（YubiKey、Windows Hello 等）                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. 使用しているブラウザとバージョン                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  4. 使用している OS                                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  サポート担当者が確認すべきログ:                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID（認証器の識別子）                                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Attestation Format（packed, tpm, none 等）                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 検証エラーの詳細                                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 証明書チェーンの状態                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  よくある問い合わせと回答:                                                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Q: 「会社の PC では登録できるのに、自宅 PC ではできない」                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  A: Windows Hello の TPM 有無、ブラウザ設定の違いを確認                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Q: 「昨日まで使えていたのに、急に使えなくなった」                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  A: 認証器の脆弱性によるブロック、証明書期限切れを確認                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="既存システムとの整合性">既存システムとの整合性<a href="#既存システムとの整合性" class="hash-link" aria-label="既存システムとの整合性 への直接リンク" title="既存システムとの整合性 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="既存ユーザーの扱い">既存ユーザーの扱い<a href="#既存ユーザーの扱い" class="hash-link" aria-label="既存ユーザーの扱い への直接リンク" title="既存ユーザーの扱い への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    既存ユーザーへの影響                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【シナリオ】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  attestation=&quot;none&quot; で運用していたシステムに                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  attestation 検証を導入する場合                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【問題】                                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 既存ユーザーのクレデンシャルには attestation データがない                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID が 00000000-0000-0000-0000-000000000000 の可能性                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 認証器の種類を後から特定できない                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【対応オプション】                                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション A: 既存ユーザーは対象外                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 新規登録のみ attestation 検証を適用                                 │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 既存クレデンシャルは従来通り使用可能                                │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 徐々に新しいポリシーに移行                                          │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション B: 再登録を促す                                                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 既存ユーザーにクレデンシャルの再登録を依頼                          │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 猶予期間を設けて段階的に移行                                        │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 再登録完了まで古いクレデンシャルも有効                              │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  オプション C: 強制移行                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - 期限を設けて古いクレデンシャルを無効化                              │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - セキュリティインシデント対応時などに使用                            │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ - ユーザー影響が大きいため慎重に判断                                  │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="段階的な導入アプローチ">段階的な導入アプローチ<a href="#段階的な導入アプローチ" class="hash-link" aria-label="段階的な導入アプローチ への直接リンク" title="段階的な導入アプローチ への直接リンク">​</a></h3>
<table><thead><tr><th>Phase</th><th>期間</th><th>内容</th><th>attestation 設定</th></tr></thead><tbody><tr><td><strong>Phase 1</strong></td><td>1-2ヶ月</td><td>データ収集</td><td>none（ログのみ記録）</td></tr><tr><td><strong>Phase 2</strong></td><td>1-2ヶ月</td><td>Permissive モード</td><td>direct（警告のみ）</td></tr><tr><td><strong>Phase 3</strong></td><td>-</td><td>Strict モード</td><td>direct（検証失敗時は拒否）</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="truststore-と-mds-の運用">TrustStore と MDS の運用<a href="#truststore-と-mds-の運用" class="hash-link" aria-label="TrustStore と MDS の運用 への直接リンク" title="TrustStore と MDS の運用 への直接リンク">​</a></h2>
<blockquote>
<p>📖 MDS の詳細（BLOB 構造、署名検証、実装パターン等）については <a href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-metadata-service">FIDO Metadata Service (MDS)</a> を参照してください。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="truststore-と-mds-の関係">TrustStore と MDS の関係<a href="#truststore-と-mds-の関係" class="hash-link" aria-label="TrustStore と MDS の関係 への直接リンク" title="TrustStore と MDS の関係 への直接リンク">​</a></h3>
<p>TrustStore と MDS は異なる役割を持ちますが、密接に関連しています。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    TrustStore と MDS の役割                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【TrustStore】                                                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 「信頼するルート CA 証明書」を格納したファイル                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 証明書チェーン検証に使用                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 自分で管理する必要がある（手動で証明書を追加）                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【MDS (FIDO Metadata Service)】                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - FIDO Alliance が運営する認証器メタデータの配布サービス                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID ごとにメタデータを提供:                                            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - attestationRootCertificates（ルート CA 証明書）← ここがポイント        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - statusReports（FIDO認定レベル、脆弱性情報）                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - description、icon 等                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【関係性】                                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS は「ルート CA 証明書の配布元」として機能する                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS から取得したルート CA を TrustStore に登録する、または                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS を直接参照してルート CA を動的に取得する                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="証明書チェーン検証の2つのアプローチ">証明書チェーン検証の2つのアプローチ<a href="#証明書チェーン検証の2つのアプローチ" class="hash-link" aria-label="証明書チェーン検証の2つのアプローチ への直接リンク" title="証明書チェーン検証の2つのアプローチ への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────── ──┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【アプローチ A: TrustStore を手動管理】                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  各ベンダーから個別にルート CA を収集して TrustStore に登録                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Yubico サイト ──→ Yubico Root CA ──┐                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Apple サイト  ──→ Apple Root CA  ──┼──→ TrustStore ──→ 証明書チェーン検証  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Google サイト ──→ Google Root CA ──┘                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  メリット: シンプル、オフラインで動作                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  デメリット: 新しい認証器に対応できない、手動更新が必要                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【アプローチ B: MDS をルート CA のソースとして使用】                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  MDS から AAGUID に対応するルート CA を動的に取得                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    ┌─────────────────┐                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │      MDS        │                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    │  (FIDO Alliance)│                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    └────────┬────────┘                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                             │                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                             ▼                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  認証器から      ┌──────────────────────┐                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  x5c を受信 ──→ │ AAGUID で MDS を検索  │                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │ ↓                    │                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │ attestationRoot      │                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │ Certificates を取得  │──→ 証明書チェーン検証              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 └──────────────────────┘                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  メリット: 新しい認証器に自動対応、常に最新                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  デメリット: MDS への依存、ネットワーク必要（キャッシュで軽減）              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="アプローチの選択">アプローチの選択<a href="#アプローチの選択" class="hash-link" aria-label="アプローチの選択 への直接リンク" title="アプローチの選択 への直接リンク">​</a></h3>
<table><thead><tr><th>方式</th><th>TrustStore</th><th>MDS</th><th>用途</th></tr></thead><tbody><tr><td>TrustStore のみ</td><td>手動管理</td><td>使わない</td><td>許可する認証器が限定的な企業環境</td></tr><tr><td>MDS のみ</td><td>使わない</td><td>ルートCA取得に使用</td><td>多様な認証器をサポートしたい場合</td></tr><tr><td><strong>併用（推奨）</strong></td><td>フォールバック用</td><td>メイン</td><td>MDS障害時も動作、かつ最新に対応</td></tr></tbody></table>
<blockquote>
<p><strong>ポイント</strong>: MDS は「ルート CA 証明書を集めた TrustStore を自動生成してくれるサービス」とも言えます。TrustStore を手動管理する代わりに、MDS から動的にルート CA を取得することで、新しい認証器への対応が容易になります。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="truststore-の初期構築">TrustStore の初期構築<a href="#truststore-の初期構築" class="hash-link" aria-label="TrustStore の初期構築 への直接リンク" title="TrustStore の初期構築 への直接リンク">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. FIDO MDS から主要なルート CA を取得</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># MDS BLOB をダウンロードして、各認証器の attestationRootCertificates を抽出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. 個別のベンダーからルート CA を取得（必要に応じて）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># - Yubico: https://developers.yubico.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># - Apple: https://www.apple.com/certificateauthority/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># - Google: Android Key Attestation Root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. TrustStore を作成</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keytool -importcert -alias yubico-root \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -file yubico-root-ca.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keystore fido-truststore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storetype PKCS12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storepass changeit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. 追加の証明書をインポート</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keytool -importcert -alias apple-webauthn-root \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -file apple-webauthn-root-ca.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -keystore fido-truststore.p12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storetype PKCS12 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -storepass changeit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mds-blob-の定期取得">MDS BLOB の定期取得<a href="#mds-blob-の定期取得" class="hash-link" aria-label="MDS BLOB の定期取得 への直接リンク" title="MDS BLOB の定期取得 への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    MDS 運用のベストプラクティス                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【取得頻度】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 日次での取得を推奨                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS は週次程度で更新されるが、脆弱性情報は随時追加される                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【署名検証】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS BLOB は JWT 形式で FIDO Alliance が署名                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 必ず署名を検証してから使用する                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 検証に失敗した場合は古いキャッシュを使用                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【キャッシュ戦略】                                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - メモリキャッシュ: 起動時にロード、定期的にリフレッシュ                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - ディスクキャッシュ: MDS 取得失敗時のフォールバック                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - キャッシュの有効期限: BLOB の nextUpdate フィールドを参照                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【障害時の挙動】                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - MDS 取得に失敗した場合:                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 直近のキャッシュを使用                                                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - アラートを発報                                                           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - 一定期間（例: 7日）を超えたら警告レベルを上げる                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="パフォーマンスへの影響">パフォーマンスへの影響<a href="#パフォーマンスへの影響" class="hash-link" aria-label="パフォーマンスへの影響 への直接リンク" title="パフォーマンスへの影響 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="証明書チェーン検証のコスト">証明書チェーン検証のコスト<a href="#証明書チェーン検証のコスト" class="hash-link" aria-label="証明書チェーン検証のコスト への直接リンク" title="証明書チェーン検証のコ  スト への直接リンク">​</a></h3>
<table><thead><tr><th>処理</th><th>概算時間</th><th>備考</th></tr></thead><tbody><tr><td>CBOR デコード</td><td>&lt; 1ms</td><td></td></tr><tr><td>署名検証（ECDSA）</td><td>1-5ms</td><td>CPU 依存</td></tr><tr><td>証明書チェーン構築</td><td>1-10ms</td><td>チェーンの深さによる</td></tr><tr><td>証明書検証（有効期限等）</td><td>&lt; 1ms</td><td></td></tr><tr><td>MDS 参照</td><td>&lt; 1ms</td><td>メモリキャッシュ時</td></tr><tr><td><strong>合計（キャッシュあり）</strong></td><td><strong>5-20ms</strong></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="最適化のポイント">最適化のポイント<a href="#最適化のポイント" class="hash-link" aria-label="最適化のポイント への直接リンク" title="最適化のポイント への直接リンク">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                    パフォーマンス最適化                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├──────────────────────────────────────────────────────────────────── ─────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【MDS のキャッシュ】                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 起動時にメモリにロード                                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID → MetadataStatement のハッシュマップを構築                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 参照は O(1)                                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【証明書のキャッシュ】                                                       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - パース済みの X509Certificate オブジェクトをキャッシュ                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - TrustStore の証明書は起動時にパース                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【証明書チェーン検証の最適化】                                               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - AAGUID が既知の場合、MDS からルート CA を直接取得                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - チェーン全体を構築せずに、直接ルート CA との照合を試みる                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  【並列処理】                                                                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - attestation 検証は登録フローの一部                                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - 他の検証（clientDataJSON、authData）と並列実行可能                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                                                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="本番デプロイ前チェックリスト">本番デプロイ前チェックリスト<a href="#本番デプロイ前チェックリスト" class="hash-link" aria-label="本番デプロイ前チェックリスト への直接リンク" title="本番デプロイ前チェックリスト への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ポリシー決定">ポリシー決定<a href="#ポリシー決定" class="hash-link" aria-label="ポリシー決定 への直接リンク" title="ポリシー決定 への直接リンク">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Attestation Conveyance を決定（none / indirect / direct / enterprise）</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Self Attestation の許可/拒否を決定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->fmt=&quot;none&quot; の許可/拒否を決定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->FIDO 認定レベルの要件を決定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->許可する AAGUID リスト（必要な場合）を作成</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->未知の認証器の扱いを決定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->検証失敗時の挙動（拒否/警告）を決定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->証明書検証方式を決定（TrustStore / MDS / 併用）</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技術的準備">技術的 準備<a href="#技術的準備" class="hash-link" aria-label="技術的準備 への直接リンク" title="技術的準備 への直接リンク">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->TrustStore を構築し、必要なルート CA を登録</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->MDS BLOB の定期取得ジョブを設定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->MDS 署名検証を実装</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->証明書有効期限の監視アラートを設定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->エラーログのフォーマットを定義</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->パフォーマンステストを実施</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="運用準備">運用準備<a href="#運用準備" class="hash-link" aria-label="運用準備 への直接リンク" title="運用準備 への直接リンク">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->ユーザー向けエラーメッセージを準備</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->サポート担当者向けドキュメントを作成</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->脆弱性発覚時の対応フローを文書化</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->既存ユーザーの移行計画を策定（必要な場合）</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->ロールバック手順を準備</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="監視アラート">監視・アラート<a href="#監視アラート" class="hash-link" aria-label="監視・アラート へ の直接リンク" title="監視・アラート への直接リンク">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->attestation 検証失敗率の監視を設定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->未知の AAGUID の検出アラートを設定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->MDS 取得失敗アラートを設定</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->証明書有効期限アラートを設定</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考リンク">参考リンク<a href="#参考リンク" class="hash-link" aria-label="参考リンク への直接リンク" title="参考リンク への直接リンク">​</a></h2>
<ul>
<li><a href="https://www.w3.org/TR/webauthn-2/#sctn-attestation" target="_blank" rel="noopener noreferrer">W3C WebAuthn - Attestation</a></li>
<li><a href="https://fidoalliance.org/metadata/" target="_blank" rel="noopener noreferrer">FIDO Metadata Service</a></li>
<li><a href="https://fidoalliance.org/specs/common-specs/fido-security-ref-v2.1-rd-20210525.html" target="_blank" rel="noopener noreferrer">FIDO Alliance Security Reference</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/05-fido-webauthn/fido2-attestation-production-considerations.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-attestation-types-and-verification"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Attestation - 認証器の信頼性証明</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_11_learning/fido-webauthn/fido2-metadata-service"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">FIDO Metadata Service (MDS)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概要" class="table-of-contents__link toc-highlight">概要</a></li><li><a href="#事前に決めておくべきポリシー" class="table-of-contents__link toc-highlight">事前に決めておくべきポリシー</a><ul><li><a href="#ポリシー決定マトリクス" class="table-of-contents__link toc-highlight">ポリシー決定マトリクス</a></li><li><a href="#attestation-conveyance-の選択" class="table-of-contents__link toc-highlight">Attestation Conveyance の選択</a></li><li><a href="#attestation-とプライバシー" class="table-of-contents__link toc-highlight">Attestation とプライバシー</a></li><li><a href="#self-attestation-の扱い" class="table-of-contents__link toc-highlight">Self Attestation の扱い</a></li><li><a href="#未知の認証器の扱い" class="table-of-contents__link toc-highlight">未知の認証器の扱い</a></li><li><a href="#検証失敗時の挙動" class="table-of-contents__link toc-highlight">検証失敗時の挙動</a></li><li><a href="#証明書検証方式の選択" class="table-of-contents__link toc-highlight">証明書検証方式の選択</a></li></ul></li><li><a href="#認  証器の多様性による問題" class="table-of-contents__link toc-highlight">認証器の多様性による問題</a><ul><li><a href="#direct-を要求しても-none-が返る" class="table-of-contents__link toc-highlight">&quot;direct&quot; を要求しても &quot;none&quot; が返る</a></li><li><a href="#プラットフォーム認証器の特性" class="table-of-contents__link toc-highlight">プラットフォーム認証器の特性</a></li><li><a href="#認証器のファームウェアバグ" class="table-of-contents__link toc-highlight">認証器のファームウェアバグ</a></li></ul></li><li><a href="#証明書関連のトラブル" class="table-of-contents__link toc-highlight">証明書関連のトラブル</a><ul><li><a href="#よくある証明書エラー" class="table-of-contents__link toc-highlight">よくある証明書エラー</a></li><li><a href="#証明書有効期限の監視" class="table-of-contents__link toc-highlight">証明書有効期限の監視</a></li></ul></li><li><a href="#運用中に発生するイベント" class="table-of-contents__link toc-highlight">運用中に発生するイベント</a><ul><li><a href="#認証器の脆弱性が発覚した場合" class="table-of-contents__link toc-highlight">認証器の脆弱性が発覚した場合</a></li><li><a href="#mds-の-statusreports-値" class="table-of-contents__link toc-highlight">MDS の statusReports 値</a></li><li><a href="#新しい認証器モデルへの対応" class="table-of-contents__link toc-highlight">新しい認証器モデルへの対応</a></li></ul></li><li><a href="#ユーザー影響の考慮" class="table-of-contents__link toc-highlight">ユーザー影響の考慮</a><ul><li><a href="#認証器が拒否された場合のユーザー体験" class="table-of-contents__link toc-highlight">認証器が拒否された場合のユーザー体験</a></li><li><a href="#代替手段の提供" class="table-of-contents__link toc-highlight">代替手段の提供</a></li><li><a href="#サポート対応フロ ー" class="table-of-contents__link toc-highlight">サポート対応フロー</a></li></ul></li><li><a href="#既存システムとの整合性" class="table-of-contents__link toc-highlight">既存システムとの整合性</a><ul><li><a href="#既存ユーザーの扱い" class="table-of-contents__link toc-highlight">既存ユーザーの扱い</a></li><li><a href="#段階的な導入アプローチ" class="table-of-contents__link toc-highlight">段階的な導入アプローチ</a></li></ul></li><li><a href="#truststore-と-mds-の運用" class="table-of-contents__link toc-highlight">TrustStore と MDS の運用</a><ul><li><a href="#truststore-と-mds-の関係" class="table-of-contents__link toc-highlight">TrustStore と MDS の関係</a></li><li><a href="#証明書チェーン検証の2つのアプローチ" class="table-of-contents__link toc-highlight">証明書チェーン検証の2つのアプローチ</a></li><li><a href="#アプローチの選択" class="table-of-contents__link toc-highlight">アプローチの選択</a></li><li><a href="#truststore-の初期構築" class="table-of-contents__link toc-highlight">TrustStore の初期構築</a></li><li><a href="#mds-blob-の定期取得" class="table-of-contents__link toc-highlight">MDS BLOB の定期取得</a></li></ul></li><li><a href="#パフォーマンスへの影響" class="table-of-contents__link toc-highlight">パフォーマンスへの影響</a><ul><li><a href="#証明書チェーン検証のコスト" class="table-of-contents__link toc-highlight">証明書チェーン検証のコスト</a></li><li><a href="#最適化のポイント" class="table-of-contents__link toc-highlight">最適化のポイント</a></li></ul></li><li><a href="#本番デプロイ前チェックリスト" class="table-of-contents__link toc-highlight">本番デプロイ前チェックリスト</a><ul><li><a href="#ポリシー決定" class="table-of-contents__link toc-highlight">ポリシー決定</a></li><li><a href="#技術的準備" class="table-of-contents__link toc-highlight">技術的準備</a></li><li><a href="#運用準備" class="table-of-contents__link toc-highlight">運用準備</a></li><li><a href="#監視アラート" class="table-of-contents__link toc-highlight">監視・アラート</a></li></ul></li><li><a href="#参考リンク" class="table-of-contents__link toc-highlight">参考リンク</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>