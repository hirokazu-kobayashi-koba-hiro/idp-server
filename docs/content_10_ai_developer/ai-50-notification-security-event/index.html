<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_10_ai_developer/ai-50-notification-security-event" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ | IdP-Server Documentation"><meta data-rh="true" name="description" content="æ¦‚è¦"><meta data-rh="true" property="og:description" content="æ¦‚è¦"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.8d1c2aba.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.532c1d3f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—</a></div><nav aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’é–‹ã" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å…ˆé ­ã¸æˆ»ã‚‹" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µã‚¤ãƒ‰ãƒãƒ¼" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">ã¯ã˜ã‚ã«</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´¢å¼•</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">è£½å“ç´¹ä»‹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/concept-01-multi-tenant">ã‚³ã‚¢æ¦‚å¿µ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">èªè¨¼ãƒ»èªå¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/index">How-toï¼ˆè¨­å®šãƒ»é‹ç”¨ãƒ¬ã‚·ãƒ”ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/getting-started/service-overview">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">é‹ç”¨ï¼ˆOpsï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AIé–‹ç™ºè€…å‘ã‘ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-02-lessons-learned">AIé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-10-use-cases">idp-server-use-cases - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ï¼ˆEntryServiceå®Ÿè£…ï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-11-core">idp-server-core - OAuth 2.0/OIDCæº–æ‹ ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-12-platform">idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-13-control-plane">idp-server-control-plane - ç®¡ç†APIå¥‘ç´„å®šç¾©</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-20-adapters">Adapterå±¤ - Repositoryå®Ÿè£…ã¨ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-21-core-adapter">idp-server-core-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-22-database">idp-server-database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-23-springboot-adapter">idp-server-springboot-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-30-extensions">æ‹¡å¼µæ©Ÿèƒ½å±¤ - OAuth/OIDCæ‹¡å¼µä»•æ§˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-31-extension-ciba">idp-server-core-extension-ciba - CIBAæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-32-extension-fapi">idp-server-core-extension-fapi - FAPIæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-33-extension-ida">idp-server-core-extension-ida - IDAæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-34-extension-pkce">idp-server-core-extension-pkce - PKCEæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-35-extension-vc">idp-server-core-extension-verifiable-credentials - VCæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-40-authentication-federation">èªè¨¼ãƒ»é€£æºå±¤ - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-41-authentication">idp-server-authentication-interactors - èªè¨¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚¿ãƒ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-42-webauthn">idp-server-webauthn4j-adapter - WebAuthn4jãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-43-federation-oidc">idp-server-federation-oidc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-51-notification-fcm">idp-server-notification-fcm-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-52-notification-apns">idp-server-notification-apns-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-53-email-aws">idp-server-email-aws-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-54-security-event-framework">idp-server-security-event-framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-55-security-event-hooks">idp-server-security-event-hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/external-api-response-handling-investigation">å¤–éƒ¨APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„èª¿æŸ»</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AI</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">ã“ã®ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—</button></div><div class="theme-doc-markdown markdown"><header><h1>é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¦‚è¦">æ¦‚è¦<a href="#æ¦‚è¦" class="hash-link" aria-label="æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚’æä¾›ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç¾¤ã€‚</p>
<p><strong>5ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</strong>:</p>
<ol>
<li><strong>idp-server-notification-fcm-adapter</strong> - Firebase Cloud Messaging</li>
<li><strong>idp-server-notification-apns-adapter</strong> - Apple Push Notification Service</li>
<li><strong>idp-server-email-aws-adapter</strong> - AWS SES ãƒ¡ãƒ¼ãƒ«é€ä¿¡</li>
<li><strong>idp-server-security-event-framework</strong> - Shared Signals Framework</li>
<li><strong>idp-server-security-event-hooks</strong> - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒƒã‚¯</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«">é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«<a href="#é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«" class="hash-link" aria-label="é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-notification-fcm-adapter">idp-server-notification-fcm-adapter<a href="#idp-server-notification-fcm-adapter" class="hash-link" aria-label="idp-server-notification-fcm-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-notification-fcm-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-notification-fcm-adapter/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™">è²¬å‹™<a href="#è²¬å‹™" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p>Firebase Cloud Messaging (FCM) ã«ã‚ˆã‚‹ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦æ©Ÿèƒ½">ä¸»è¦æ©Ÿèƒ½<a href="#ä¸»è¦æ©Ÿèƒ½" class="hash-link" aria-label="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<ul>
<li><strong>Android/iOS/Web</strong> ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥</li>
<li><strong>é€šçŸ¥å„ªå…ˆåº¦</strong>: high/normal</li>
<li><strong>Data Payload</strong>: ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒ¼ã‚¿é…ä¿¡</li>
<li><strong>ãƒˆãƒ”ãƒƒã‚¯é…ä¿¡</strong>: è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã¸ã®ä¸€æ–‰é…ä¿¡</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³">å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³<a href="#å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³" class="hash-link" aria-label="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/FcmNotifier-531966a25cca8b77325c86aedae3befc.java#L37-L108" target="_blank">FcmNotifier.java:37-108</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * FCMé€šçŸ¥å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®37-108è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FcmNotifier implements AuthenticationDeviceNotifier {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LoggerWrapper log = LoggerWrapper.getLogger(FcmNotifier.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, FirebaseMessaging&gt; cache = new ConcurrentHashMap&lt;&gt;();  // âœ… ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public NotificationChannel chanel() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new NotificationChannel(&quot;fcm&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public NotificationResult notify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AuthenticationDevice device,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AuthenticationExecutionConfig configuration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. FCMè¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FcmConfiguration fcmConfiguration =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jsonConverter.read(configuration.details().get(&quot;fcm&quot;), FcmConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. FirebaseMessagingå–å¾—ï¼ˆãƒ†ãƒŠãƒ³ãƒˆåˆ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FirebaseMessaging firebaseMessaging = getOrInitFirebaseMessaging(tenant, fcmConfiguration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NotificationTemplate template = fcmConfiguration.findTemplate(&quot;default&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String notificationToken = device.notificationToken().value();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹ç¯‰ï¼ˆAndroid/iOSä¸¡å¯¾å¿œï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message message =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Message.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setToken(notificationToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setAndroidConfig(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AndroidConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setPriority(AndroidConfig.Priority.HIGH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .putData(&quot;sender&quot;, template.optSender(tenant.identifierValue()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .putData(&quot;title&quot;, template.optTitle(&quot;Transaction Authentication&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .putData(&quot;body&quot;, template.optBody(&quot;Please approve...&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setApnsConfig(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ApnsConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .putHeader(&quot;apns-priority&quot;, &quot;10&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setAps(Aps.builder().setContentAvailable(true).build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 5. é€ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String result = firebaseMessaging.send(message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return NotificationResult.success(&quot;fcm&quot;, Map.of(&quot;result&quot;, result));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ãƒ†ãƒŠãƒ³ãƒˆåˆ¥FirebaseMessagingåˆæœŸåŒ–ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FirebaseMessaging getOrInitFirebaseMessaging(Tenant tenant, FcmConfiguration config) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return cache.computeIfAbsent(tenant.identifierValue(), (key) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FirebaseOptions options = FirebaseOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .setCredentials(GoogleCredentials.fromStream(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              new ByteArrayInputStream(config.credential().getBytes())))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FirebaseApp app = FirebaseApp.initializeApp(options, tenant.identifierValue());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return FirebaseMessaging.getInstance(app);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… <code>AuthenticationDeviceNotifier</code> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…</li>
<li>âœ… ãƒ†ãƒŠãƒ³ãƒˆåˆ¥FirebaseMessaging ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œï¼‰</li>
<li>âœ… <code>NotificationTemplate</code> ã«ã‚ˆã‚‹è¨­å®šé§†å‹•</li>
<li>âœ… Android/iOSä¸¡å¯¾å¿œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹ç¯‰</li>
<li>âœ… <code>NotificationResult</code> ã«ã‚ˆã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-notification-apns-adapter">idp-server-notification-apns-adapter<a href="#idp-server-notification-apns-adapter" class="hash-link" aria-label="idp-server-notification-apns-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-notification-apns-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-notification-apns-adapter/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™-1">è²¬å‹™<a href="#è²¬å‹™-1" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p>Apple Push Notification Service (APNS) ã«ã‚ˆã‚‹ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦æ©Ÿèƒ½-1">ä¸»è¦æ©Ÿèƒ½<a href="#ä¸»è¦æ©Ÿèƒ½-1" class="hash-link" aria-label="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<ul>
<li><strong>iOS/macOS</strong> ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥</li>
<li><strong>Badge/Sound/Alert</strong> è¨­å®š</li>
<li><strong>Silent Notification</strong>: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°</li>
<li><strong>Token Authentication</strong>: JWTèªè¨¼</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-1">å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³<a href="#å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-1" class="hash-link" aria-label="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/ApnsNotifier-f16796b9aa3dba107a9be02a49690098.java#L42-L134" target="_blank">ApnsNotifier.java:42-134</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * APNSé€šçŸ¥å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®42-134è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ApnsNotifier implements AuthenticationDeviceNotifier {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LoggerWrapper log = LoggerWrapper.getLogger(ApnsNotifier.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, JwtTokenCache&gt; jwtTokenCache = new ConcurrentHashMap&lt;&gt;();  // âœ… JWTèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpClient httpClient = HttpClient.newBuilder().version(HttpClient.Version.HTTP_2).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String PRODUCTION_URL = &quot;https://api.push.apple.com&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String DEVELOPMENT_URL = &quot;https://api.sandbox.push.apple.com&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public NotificationChannel chanel() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new NotificationChannel(&quot;apns&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public NotificationResult notify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AuthenticationDevice device,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AuthenticationExecutionConfig configuration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. APNSè¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ApnsConfiguration apnsConfiguration =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jsonConverter.read(configuration.details().get(&quot;apns&quot;), ApnsConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. JWTèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€1æ™‚é–“æœ‰åŠ¹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String jwtToken = getOrCreateJwtToken(tenant, apnsConfiguration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NotificationTemplate template = apnsConfiguration.findTemplate(&quot;default&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String notificationToken = device.notificationToken().value();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 4. APNsãƒšã‚¤ãƒ­ãƒ¼ãƒ‰æ§‹ç¯‰ï¼ˆJSONï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String payload = createApnsPayload(template, tenant);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 5. HTTP/2ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String apnsUrl = (apnsConfiguration.isProduction() ? PRODUCTION_URL : DEVELOPMENT_URL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        + &quot;/3/device/&quot; + notificationToken;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequest request =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .uri(URI.create(apnsUrl))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(&quot;Authorization&quot;, &quot;bearer &quot; + jwtToken)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(&quot;apns-topic&quot;, apnsConfiguration.bundleId())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(&quot;apns-priority&quot;, &quot;10&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(&quot;apns-push-type&quot;, &quot;alert&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .POST(HttpRequest.BodyPublishers.ofString(payload))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (response.statusCode() == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return NotificationResult.success(&quot;apns&quot;, Map.of(&quot;status&quot;, &quot;sent&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return NotificationResult.failure(&quot;apns&quot;, &quot;APNs returned: &quot; + response.statusCode());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… Javaæ¨™æº–<code>HttpClient</code>ï¼ˆHTTP/2å¯¾å¿œï¼‰ã§APNsç›´æ¥é€šä¿¡</li>
<li>âœ… JWTèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ1æ™‚é–“æœ‰åŠ¹ï¼‰</li>
<li>âœ… Production/Developmentç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆ</li>
<li>âœ… <code>NotificationTemplate</code>ã«ã‚ˆã‚‹è¨­å®šé§†å‹•</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-email-aws-adapter">idp-server-email-aws-adapter<a href="#idp-server-email-aws-adapter" class="hash-link" aria-label="idp-server-email-aws-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-email-aws-adapter ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-email-aws-adapter/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™-2">è²¬å‹™<a href="#è²¬å‹™-2" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p>AWS SES (Simple Email Service) ã«ã‚ˆã‚‹ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦æ©Ÿèƒ½-2">ä¸»è¦æ©Ÿèƒ½<a href="#ä¸»è¦æ©Ÿèƒ½-2" class="hash-link" aria-label="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<ul>
<li><strong>HTML/Text</strong> ãƒ¡ãƒ¼ãƒ«</li>
<li><strong>æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«</strong>: æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡</li>
<li><strong>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</strong>: SESãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨</li>
<li><strong>ãƒã‚¦ãƒ³ã‚¹/è‹¦æƒ…</strong> ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="emailsender-ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…">EmailSender ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»å®Ÿè£…<a href="#emailsender-ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…" class="hash-link" aria-label="EmailSender ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»å®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="EmailSender ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»å®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/AwsEmailSender-280e08ebe67200f8f66a6938b433a05d.java#L29-L82" target="_blank">AwsEmailSender.java:29-82</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆPluginï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface EmailSender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  String function();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmailSendResult send(EmailSendingRequest request, EmailSenderConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * AWS SESå®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®29-82è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AwsEmailSender implements EmailSender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String function() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &quot;aws_ses&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public EmailSendResult send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EmailSendingRequest request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EmailSenderConfiguration configuration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. SESè¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AwsSesEmailSenderConfig sesConfig =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jsonConverter.read(configuration.details(), AwsSesEmailSenderConfig.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. SESã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆï¼ˆAWS SDK v2ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Region region = Region.of(sesConfig.regionName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SesClient sesClient =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SesClient.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .credentialsProvider(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                StaticCredentialsProvider.create(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    AwsBasicCredentials.create(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        sesConfig.accessKeyId(), sesConfig.secretAccessKey())))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .region(region)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Destination destination = Destination.builder().toAddresses(request.to()).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Content subject = Content.builder().data(request.subject()).charset(&quot;UTF-8&quot;).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Content textBody = Content.builder().data(request.body()).charset(&quot;UTF-8&quot;).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Body body = Body.builder().text(textBody).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Message message = Message.builder().subject(subject).body(body).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SendEmailRequest emailRequest =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SendEmailRequest.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .source(sesConfig.sender())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .destination(destination)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .message(message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 4. é€ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SendEmailResponse response = sesClient.sendEmail(emailRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new EmailSendResult(true, Map.of(&quot;message_id&quot;, response.messageId()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… AWS SDK v2ä½¿ç”¨ï¼ˆ<code>software.amazon.awssdk</code>ï¼‰</li>
<li>âœ… <code>EmailSenderConfiguration</code>ã«ã‚ˆã‚‹è¨­å®šé§†å‹•</li>
<li>âœ… <code>EmailSendResult</code>ã«ã‚ˆã‚‹çµæœç®¡ç†</li>
<li>âœ… ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»èªè¨¼æƒ…å ±ã®è¨­å®šå¯èƒ½</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pluginç™»éŒ²">Pluginç™»éŒ²<a href="#pluginç™»éŒ²" class="hash-link" aria-label="Pluginç™»éŒ² ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Pluginç™»éŒ² ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># META-INF/services/org.idp.server.platform.notification.email.EmailSender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">org.idp.server.emai.aws.adapter.AwsEmailSender</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«<a href="#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«" class="hash-link" aria-label="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-security-event-framework">idp-server-security-event-framework<a href="#idp-server-security-event-framework" class="hash-link" aria-label="idp-server-security-event-framework ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-security-event-framework ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-security-event-framework/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™-3">è²¬å‹™<a href="#è²¬å‹™-3" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p>Shared Signals Framework (SSF) ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡ã€‚</p>
<p><strong>ä»•æ§˜</strong>: <a href="https://openid.net/specs/openid-sse-framework-1_0.html" target="_blank" rel="noopener noreferrer">Shared Signals Framework</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦æ©Ÿèƒ½-3">ä¸»è¦æ©Ÿèƒ½<a href="#ä¸»è¦æ©Ÿèƒ½-3" class="hash-link" aria-label="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<ul>
<li><strong>Push Delivery</strong>: Webhooké…ä¿¡</li>
<li><strong>Pull Delivery</strong>: Pollingé…ä¿¡</li>
<li><strong>Event Types</strong>: <code>account-disabled</code>, <code>credential-change</code>, <code>session-revoked</code>ç­‰</li>
<li><strong>Security Event Token (SET)</strong>: JWTå½¢å¼ã®ã‚¤ãƒ™ãƒ³ãƒˆ</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ssf-event-types">SSF Event Types<a href="#ssf-event-types" class="hash-link" aria-label="SSF Event Types ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="SSF Event Types ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<table><thead><tr><th>Event Type</th><th>èª¬æ˜</th></tr></thead><tbody><tr><td><code>https://schemas.openid.net/secevent/risc/event-type/account-disabled</code></td><td>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç„¡åŠ¹åŒ–</td></tr><tr><td><code>https://schemas.openid.net/secevent/risc/event-type/credential-change</code></td><td>èªè¨¼æƒ…å ±å¤‰æ›´</td></tr><tr><td><code>https://schemas.openid.net/secevent/risc/event-type/session-revoked</code></td><td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–</td></tr><tr><td><code>https://schemas.openid.net/secevent/caep/event-type/token-claims-change</code></td><td>ãƒˆãƒ¼ã‚¯ãƒ³ã‚¯ãƒ¬ãƒ¼ãƒ å¤‰æ›´</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ssf-hook-executor---push-deliveryå®Ÿè£…">SSF Hook Executor - Push Deliveryå®Ÿè£…<a href="#ssf-hook-executor---push-deliveryå®Ÿè£…" class="hash-link" aria-label="SSF Hook Executor - Push Deliveryå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="SSF Hook Executor - Push Deliveryå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/SsfHookExecutor-51d5336d11e4e24238156b880032ec40.java#L35-L176" target="_blank">SsfHookExecutor.java:35-176</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * SSF Hook Executorï¼ˆPush Deliveryï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®35-176è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SsfHookExecutor implements SecurityEventHook {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequestExecutor httpRequestExecutor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JsonConverter jsonConverter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookType type() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return StandardSecurityEventHookType.SSF.toHookType();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookResult execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration hookConfiguration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1. SSF  è¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventConfig securityEventConfig = hookConfiguration.getEvent(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SharedSignalFrameworkMetadataConfig metadataConfig =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          jsonConverter.read(hookConfiguration.metadata(), SharedSignalFrameworkMetadataConfig.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventExecutionConfig executionConfig = securityEventConfig.execution();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SharedSignalFrameworkTransmissionConfig transmissionConfig =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          jsonConverter.read(executionConfig.details(), SharedSignalFrameworkTransmissionConfig.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2. Security Event Token (SET) ç”Ÿæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventTokenCreator securityEventTokenCreator =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          new SecurityEventTokenCreator(securityEvent, metadataConfig, transmissionConfig);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventToken securityEventToken = securityEventTokenCreator.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 3. SSFé€ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          hookConfiguration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          transmissionConfig.url(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          securityEventToken,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          transmissionConfig,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          startTime);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return SecurityEventHookResult.failureWithContext(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          hookConfiguration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          executionDurationMs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          e.getClass().getSimpleName(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;SSF hook execution failed: &quot; + e.getMessage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private SecurityEventHookResult send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration hookConfiguration,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      String endpoint,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventToken securityEventToken,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SharedSignalFrameworkTransmissionConfig transmissionConfig,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      long startTime) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequest httpRequest = HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .uri(new URI(endpoint))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .header(&quot;Content-Type&quot;, &quot;application/secevent+jwt&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .POST(HttpRequest.BodyPublishers.ofString(securityEventToken.value()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // OAuthèªè¨¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯è¿½åŠ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequestResult httpRequestResult =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (transmissionConfig.oauthAuthorization() != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ? httpRequestExecutor.executeWithOAuth(httpRequest, transmissionConfig.oauthAuthorization())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            : httpRequestExecutor.execute(httpRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (httpRequestResult.isSuccess()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return SecurityEventHookResult.successWithContext(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          hookConfiguration, securityEvent, executionDetails, executionDurationMs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return SecurityEventHookResult.failureWithContext(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          hookConfiguration, securityEvent, executionDetails, executionDurationMs,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;SSF_ERROR&quot;, &quot;SSF transmission failed&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… <code>SecurityEventHook</code> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…</li>
<li>âœ… <code>SecurityEventTokenCreator</code>ã«ã‚ˆã‚‹SETç”Ÿæˆ</li>
<li>âœ… OAuthèªè¨¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¯¾å¿œ</li>
<li>âœ… <code>SecurityEventHookResult</code>ã«ã‚ˆã‚‹çµæœç®¡ç†</li>
<li>âœ… å®Ÿè¡Œæ™‚é–“è¨ˆæ¸¬ï¼ˆexecutionDurationMsï¼‰</li>
</ul>
<p><strong>æ³¨æ„</strong>: SSF Pull Deliveryã®å®Ÿè£…ã¯ç¾æ™‚ç‚¹ã§æœªç¢ºèªã€‚å®Ÿè£…ãŒå­˜åœ¨ã™ã‚‹ã‹è¦èª¿æŸ»ã€‚</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-security-event-hooks">idp-server-security-event-hooks<a href="#idp-server-security-event-hooks" class="hash-link" aria-label="idp-server-security-event-hooks ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-security-event-hooks ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-security-event-hooks/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™-4">è²¬å‹™<a href="#è²¬å‹™-4" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒƒã‚¯ï¼ˆWebhook/Slack/Datadogé€£æºï¼‰ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸»è¦æ©Ÿèƒ½-4">ä¸»è¦æ©Ÿèƒ½<a href="#ä¸»è¦æ©Ÿèƒ½-4" class="hash-link" aria-label="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¸»è¦æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<ul>
<li><strong>Webhook</strong>: æ±ç”¨Webhooké…ä¿¡</li>
<li><strong>Slack</strong>: Slacké€šçŸ¥</li>
<li><strong>Datadog</strong>: Datadogã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡</li>
<li><strong>Retry Mechanism</strong>: å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="securityeventhook-ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹">SecurityEventHook ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹<a href="#securityeventhook-ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹" class="hash-link" aria-label="SecurityEventHook ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="SecurityEventHook ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/SecurityEventHook-b3c08fbcbed46611f595336ce6d3e879.java#L23" target="_blank">SecurityEventHook.java:23</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒƒã‚¯ï¼ˆPluginï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®23-41è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface SecurityEventHook {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ãƒ•ãƒƒã‚¯ã‚¿ã‚¤ãƒ—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SecurityEventHookType type();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… å®Ÿè¡Œåˆ¤å®šï¼ˆdefaultãƒ¡ã‚½ãƒƒãƒ‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default boolean shouldExecute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration hookConfiguration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!hookConfiguration.hasEvents()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return hookConfiguration.containsTrigger(securityEvent.type().value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ãƒ•ãƒƒã‚¯å®Ÿè¡Œï¼ˆTenantç¬¬ä¸€å¼•æ•°ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SecurityEventHookResult execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration configuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="webhooksecurityeventexecutor---webhookå®Ÿè£…">WebHookSecurityEventExecutor - Webhookå®Ÿè£…<a href="#webhooksecurityeventexecutor---webhookå®Ÿè£…" class="hash-link" aria-label="WebHookSecurityEventExecutor - Webhookå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="WebHookSecurityEventExecutor - Webhookå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/WebHookSecurityEventExecutor-b40ce2197091b846bde4c4042fd33830.java#L35" target="_blank">WebHookSecurityEventExecutor.java:35</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Webhookå®Ÿè£…ï¼ˆRFC 8935æº–æ‹ ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®35-80è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @see &lt;a href=&quot;https://datatracker.ietf.org/doc/html/rfc8935&quot;&gt;RFC 8935 - Push-Based SET Delivery&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WebHookSecurityEventExecutor implements SecurityEventHook {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequestExecutor httpRequestExecutor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JsonConverter jsonConverter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookType type() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return StandardSecurityEventHookType.WEBHOOK.toHookType();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookResult execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration hookConfiguration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 1. è¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      WebHookConfiguration configuration =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          jsonConverter.read(hookConfiguration, WebHookConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 2. ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—åˆ¥ã®è¨­å®šå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestUrl httpRequestUrl = configuration.httpRequestUrl(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpMethod httpMethod = configuration.httpMethod(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestStaticHeaders httpRequestStaticHeaders =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          configuration.httpRequestHeaders(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestDynamicBodyKeys httpRequestDynamicBodyKeys =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          configuration.httpRequestDynamicBodyKeys(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestStaticBody httpRequestStaticBody =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          configuration.httpRequestStaticBody(securityEvent.type());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 3. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ç”Ÿæˆï¼ˆå‹•çš„ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestBodyCreator requestBodyCreator =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          new HttpRequestBodyCreator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              new HttpRequestBaseParams(securityEvent.toMap()),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              httpRequestDynamicBodyKeys,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              httpRequestStaticBody);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Map&lt;String, Object&gt; requestBody = requestBodyCreator.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 4. HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequest httpRequest = HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .uri(new URI(httpRequestUrl.value()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .method(httpMethod.value(), /* body */)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .headers(httpRequestStaticHeaders.toArray())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      HttpRequestResult result = httpRequestExecutor.execute(httpRequest);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (result.isSuccess()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SecurityEventHookResult.success(securityEvent, result, executionDurationMs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SecurityEventHookResult.failure(securityEvent, result, executionDurationMs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return SecurityEventHookResult.error(securityEvent, e, executionDurationMs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… <strong>Tenantç¬¬ä¸€å¼•æ•°</strong>: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢</li>
<li>âœ… <strong>å®Ÿè¡Œæ™‚é–“è¨ˆæ¸¬</strong>: <code>executionDurationMs</code>ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–</li>
<li>âœ… <strong>å‹•çš„è¨­å®š</strong>: ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—åˆ¥ã«URL/ãƒ¡ã‚½ãƒƒãƒ‰/ãƒ˜ãƒƒãƒ€ãƒ¼/ãƒœãƒ‡ã‚£ã‚’è¨­å®šå¯èƒ½</li>
<li>âœ… <strong>ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>: æˆåŠŸ/å¤±æ•—/ã‚¨ãƒ©ãƒ¼ã‚’æ˜ç¢ºã«åŒºåˆ¥</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="slacksecurityeventhookexecutor---slackå®Ÿè£…">SlackSecurityEventHookExecutor - Slackå®Ÿè£…<a href="#slacksecurityeventhookexecutor---slackå®Ÿè£…" class="hash-link" aria-label="SlackSecurityEventHookExecutor - Slackå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="SlackSecurityEventHookExecutor - Slackå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-security-event-hooks/src/main/java/org/idp/server/security/event/hooks/slack/</code></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SlackSecurityEventHookExecutor implements SecurityEventHook {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequestExecutor httpRequestExecutor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookType type() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return StandardSecurityEventHookType.SLACK.toHookType();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookResult execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Tenant tenant,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEvent securityEvent,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      SecurityEventHookConfiguration hookConfiguration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. Slack Webhook URLå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SlackSecurityEventHookConfiguration config =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jsonConverter.read(hookConfiguration, SlackSecurityEventHookConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. Slackãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹ç¯‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String slackPayload = buildSlackMessage(securityEvent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. Webhooké€ä¿¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequest request = HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .uri(new URI(config.webhookUrl()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .POST(HttpRequest.BodyPublishers.ofString(slackPayload))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequestResult result = httpRequestExecutor.execute(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return result.isSuccess()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ? SecurityEventHookResult.success(securityEvent, result, executionDurationMs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : SecurityEventHookResult.failure(securityEvent, result, executionDurationMs);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private String buildSlackMessage(SecurityEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return String.format(&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;text&quot;: &quot;Security Event: %s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;blocks&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: &quot;header&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;text&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;: &quot;plain_text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;text&quot;: &quot;ğŸš¨ Security Event&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: &quot;section&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {&quot;type&quot;: &quot;mrkdwn&quot;, &quot;text&quot;: &quot;*Type:*\\n%s&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {&quot;type&quot;: &quot;mrkdwn&quot;, &quot;text&quot;: &quot;*User:*\\n%s&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {&quot;type&quot;: &quot;mrkdwn&quot;, &quot;text&quot;: &quot;*Time:*\\n%s&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;&quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event.type(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event.type().value(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event.userSub(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event.timestamp()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="retry-mechanism">Retry Mechanism<a href="#retry-mechanism" class="hash-link" aria-label="Retry Mechanism ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Retry Mechanism ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/HttpRequestExecutor-df08690d676e01581db9acb02265224c.java" target="_blank">HttpRequestExecutor.java</a>ï¼ˆplatformå±¤ã§æä¾›ï¼‰</p>
<p><strong>é‡è¦</strong>: å°‚ç”¨ã®RetryExecutorã‚¯ãƒ©ã‚¹ã¯å­˜åœ¨ã—ãªã„ã€‚<code>HttpRequestExecutor.executeWithRetry()</code>ã‚’ä½¿ç”¨ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹ï¼ˆIssue #398ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * platformå±¤ã®HttpRequestExecutorãŒæä¾›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// SSF Hookå†…ã§HttpRequestExecutor.executeWithRetry()ã‚’ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SsfHookExecutor implements SecurityEventHook {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequestExecutor httpRequestExecutor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private SecurityEventHookResult send(...) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequest httpRequest = HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .uri(new URI(endpoint))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .header(&quot;Content-Type&quot;, &quot;application/secevent+jwt&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .POST(HttpRequest.BodyPublishers.ofString(securityEventToken.value()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âœ… ãƒªãƒˆãƒ©ã‚¤è¨­å®šï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRetryConfiguration retryConfig = HttpRetryConfiguration.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxRetries(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .retryableStatusCodes(List.of(502, 503, 504))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .backoffDelays(List.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Duration.ofSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Duration.ofSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Duration.ofSeconds(4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .idempotencyRequired(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âœ… HttpRequestExecutor.executeWithRetry()ã§ãƒªãƒˆãƒ©ã‚¤å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HttpRequestResult httpRequestResult =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (transmissionConfig.oauthAuthorization() != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ? httpRequestExecutor.executeWithRetry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                httpRequest,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                transmissionConfig.oauthAuthorization(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                retryConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            : httpRequestExecutor.executeWithRetry(httpRequest, retryConfig);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long executionDurationMs = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return httpRequestResult.isSuccess()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ? SecurityEventHookResult.successWithContext(...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : SecurityEventHookResult.failureWithContext(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>:</p>
<ul>
<li>âœ… platformå±¤ã®<code>HttpRequestExecutor</code>ãŒãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã‚’æä¾›</li>
<li>âœ… <code>HttpRetryConfiguration</code>ã§ãƒªãƒˆãƒ©ã‚¤è¨­å®šã‚’å®šç¾©</li>
<li>âœ… Exponential Backoffè‡ªå‹•å®Ÿè¡Œ</li>
<li>âœ… Idempotency-Keyãƒ˜ãƒƒãƒ€ãƒ¼è‡ªå‹•ä»˜ä¸ï¼ˆ<code>idempotencyRequired: true</code>ï¼‰</li>
<li>âŒ å°‚ç”¨ã®<code>SecurityEventHookRetryExecutor</code>ã‚¯ãƒ©ã‚¹ã¯å­˜åœ¨ã—ãªã„</li>
</ul>
<p><strong>æƒ…å ±æº</strong>:</p>
<ul>
<li>Issue #398ï¼ˆSecurity Event Hook Retry Mechanismï¼‰</li>
<li>platform.mdã€ŒHTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ - ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œã€</li>
<li><a href="/idp-server/assets/files/HttpRequestExecutor-df08690d676e01581db9acb02265224c.java" target="_blank">HttpRequestExecutor.java</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é€šçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ<a href="#é€šçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ" class="hash-link" aria-label="é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ol>
<li><strong>å¤šæ§˜ãªé€šçŸ¥æ‰‹æ®µ</strong>: FCM/APNS/Email ã‚’PluginåŒ–</li>
<li><strong>SSFæº–æ‹ </strong>: Shared Signals Frameworkã«ã‚ˆã‚‹æ¨™æº–ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡</li>
<li><strong>Push/Pullé…ä¿¡</strong>: Webhooké…ä¿¡ã¨Pollingé…ä¿¡ã®ä¸¡å¯¾å¿œ</li>
<li><strong>ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹</strong>: å¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ãƒ»Backoff</li>
<li><strong>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº</strong>: Slack/Datadogç­‰ã¸ã®é€šçŸ¥</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆ">å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆï¼<a href="#å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆ" class="hash-link" aria-label="å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆï¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆï¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>ã™ã¹ã¦ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå®Œæˆã—ã¾ã—ãŸã€‚</p>
<ul>
<li><a href="/idp-server/docs/content_10_ai_developer/ai-01-index">ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´<a href="#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´" class="hash-link" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£">2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£<a href="#2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£" class="hash-link" aria-label="2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£1-fcm-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-33-113è¡Œç›®">ä¿®æ­£1: FCM Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (33-113è¡Œç›®)<a href="#ä¿®æ­£1-fcm-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-33-113è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£1: FCM Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (33-113è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£1: FCM Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (33-113è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å­˜åœ¨ã—ãªã„ã‚¯ãƒ©ã‚¹å<code>FcmNotificationSender</code>ã‚’ä½¿ç”¨</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class FcmNotificationSender {  // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FirebaseApp firebaseApp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void send(FcmNotificationRequest request) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class FcmNotifier implements AuthenticationDeviceNotifier {  // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, FirebaseMessaging&gt; cache = new ConcurrentHashMap&lt;&gt;();  // âœ… ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ã‚­ãƒ£ãƒƒã‚·ãƒ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public NotificationResult notify(Tenant, AuthenticationDevice, ...) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li><code>AuthenticationDeviceNotifier</code>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…</li>
<li>ãƒ†ãƒŠãƒ³ãƒˆåˆ¥FirebaseMessagingã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹</li>
<li><code>NotificationTemplate</code>ã«ã‚ˆã‚‹è¨­å®šé§†å‹•</li>
<li><code>NotificationResult</code>ã«ã‚ˆã‚‹çµæœç®¡ç†</li>
</ul>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/assets/files/FcmNotifier-531966a25cca8b77325c86aedae3befc.java#L37-L108" target="_blank">FcmNotifier.java:37-108</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£2-apns-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-131-205è¡Œç›®">ä¿®æ­£2: APNS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (131-205è¡Œç›®)<a href="#ä¿®æ­£2-apns-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-131-205è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£2: APNS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (131-205è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£2: APNS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (131-205è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: pushy/ApnsClientæƒ³å®šã®æƒ³åƒå®Ÿè£…</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ApnsNotificationSender {  // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ApnsClient apnsClient;  // âŒ pushyä¾å­˜æƒ³å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SimpleApnsPushNotification pushNotification = ...  // âŒ pushy API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class ApnsNotifier implements AuthenticationDeviceNotifier {  // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpClient httpClient = HttpClient.newBuilder().version(HttpClient.Version.HTTP_2).build();  // âœ… Javaæ¨™æº–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, JwtTokenCache&gt; jwtTokenCache = ...  // âœ… JWTèªè¨¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li>Javaæ¨™æº–HttpClientï¼ˆHTTP/2ï¼‰ã«ã‚ˆã‚‹APNsç›´æ¥é€šä¿¡</li>
<li>JWTèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ1æ™‚é–“æœ‰åŠ¹ï¼‰</li>
<li>Production/Developmentç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆ</li>
</ul>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/assets/files/ApnsNotifier-f16796b9aa3dba107a9be02a49690098.java#L42-L134" target="_blank">ApnsNotifier.java:42-134</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£3-email-aws-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-224-302è¡Œç›®">ä¿®æ­£3: Email AWS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (224-302è¡Œç›®)<a href="#ä¿®æ­£3-email-aws-adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³-224-302è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£3: Email AWS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (224-302è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£3: Email AWS Adapterå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ (224-302è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: AWS SDK v1æƒ³å®šã®å¤ã„API</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AwsSesEmailSender implements EmailSender {  // âŒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä¸æ­£ç¢º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AmazonSimpleEmailService sesClient;  // âŒ AWS SDK v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void send(EmailRequest request) { ... }  // âŒ æˆ»ã‚Šå€¤ãªã—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class AwsEmailSender implements EmailSender {  // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EmailSendResult send(EmailSendingRequest, EmailSenderConfiguration) { ... }  // âœ… æ­£ç¢ºãªã‚·ã‚°ãƒãƒãƒ£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SesClient sesClient = SesClient.builder()...  // âœ… AWS SDK v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li>AWS SDK v2ä½¿ç”¨ï¼ˆ<code>software.amazon.awssdk</code>ï¼‰</li>
<li><code>EmailSenderConfiguration</code>ã«ã‚ˆã‚‹è¨­å®šé§†å‹•</li>
<li><code>EmailSendResult</code>ã«ã‚ˆã‚‹çµæœç®¡ç†</li>
</ul>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/assets/files/AwsEmailSender-280e08ebe67200f8f66a6938b433a05d.java#L29-L82" target="_blank">AwsEmailSender.java:29-82</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£4-ssf-push-deliveryå®Ÿè£…-334-439è¡Œç›®">ä¿®æ­£4: SSF Push Deliveryå®Ÿè£… (334-439è¡Œç›®)<a href="#ä¿®æ­£4-ssf-push-deliveryå®Ÿè£…-334-439è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£4: SSF Push Deliveryå®Ÿè£… (334-439è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£4: SSF Push Deliveryå®Ÿè£… (334-439è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å­˜åœ¨ã—ãªã„ã‚¯ãƒ©ã‚¹<code>SsfPushDelivery</code>ã€<code>JwtCreator</code>ã‚’ä½¿ç”¨</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SsfPushDelivery {  // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JwtCreator jwtCreator = new JwtCreator();  // âŒ å­˜åœ¨ã—ãªã„ï¼ˆplatform.mdã§ç¢ºèªæ¸ˆã¿ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequest request = HttpRequest.builder()...  // âŒ å­˜åœ¨ã—ãªã„API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SsfHookExecutor implements SecurityEventHook {  // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SecurityEventTokenCreator tokenCreator = ...  // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HttpRequest httpRequest = HttpRequest.newBuilder()...  // âœ… Javaæ¨™æº–API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li><code>SecurityEventTokenCreator</code>ã«ã‚ˆã‚‹SETç”Ÿæˆ</li>
<li>OAuthèªè¨¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¯¾å¿œ</li>
<li>Javaæ¨™æº–HttpRequest.newBuilder()</li>
</ul>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/assets/files/SsfHookExecutor-51d5336d11e4e24238156b880032ec40.java#L35-L176" target="_blank">SsfHookExecutor.java:35-176</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£5-retry-mechanism-652-717è¡Œç›®">ä¿®æ­£5: Retry Mechanism (652-717è¡Œç›®)<a href="#ä¿®æ­£5-retry-mechanism-652-717è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£5: Retry Mechanism (652-717è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£5: Retry Mechanism (652-717è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å­˜åœ¨ã—ãªã„ã‚¯ãƒ©ã‚¹<code>SecurityEventHookRetryExecutor</code></p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SecurityEventHookRetryExecutor {  // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public SecurityEventHookResult executeWithRetry(...) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">**é‡è¦**: å°‚ç”¨ã®RetryExecutorã‚¯ãƒ©ã‚¹ã¯å­˜åœ¨ã—ãªã„ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">platformå±¤ã®`HttpRequestExecutor.executeWithRetry()`ã‚’ä½¿ç”¨ã€‚</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li>platformå±¤ã®HttpRequestExecutorãŒãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’æ˜è¨˜</li>
<li><code>HttpRetryConfiguration</code>ã®ä½¿ç”¨æ–¹æ³•</li>
<li>platform.mdã¸ã®ã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</li>
</ul>
<p><strong>æ¤œè¨¼</strong>: platform.mdã€ŒHTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ - ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œã€</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£6-ssf-pull-deliveryå‰Šé™¤">ä¿®æ­£6: SSF Pull Deliveryå‰Šé™¤<a href="#ä¿®æ­£6-ssf-pull-deliveryå‰Šé™¤" class="hash-link" aria-label="ä¿®æ­£6: SSF Pull Deliveryå‰Šé™¤ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£6: SSF Pull Deliveryå‰Šé™¤ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å®Ÿè£…æœªç¢ºèªã®ãŸã‚ã€æƒ³åƒã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤</p>
<p><strong>å‰Šé™¤å†…å®¹</strong>: <code>SsfPullController</code>ã®å®Ÿè£…ä¾‹ï¼ˆå®Ÿè£…ãŒå­˜åœ¨ã™ã‚‹ã‹æœªç¢ºèªï¼‰</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£ã®åŸå‰‡">ä¿®æ­£ã®åŸå‰‡<a href="#ä¿®æ­£ã®åŸå‰‡" class="hash-link" aria-label="ä¿®æ­£ã®åŸå‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£ã®åŸå‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>CLAUDE.mdã€Œæƒ³åƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆé˜²æ­¢ã€ã«åŸºã¥ãä¿®æ­£</strong>:</p>
<ol>
<li><strong>å®Ÿè£…ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ</strong>: å…¨ã¦ã®ã‚¯ãƒ©ã‚¹åãƒ»ãƒ¡ã‚½ãƒƒãƒ‰åã‚’å®Ÿè£…ã‹ã‚‰ç¢ºèª</li>
<li><strong>ã‚¯ãƒ©ã‚¹åã®æ­£ç¢ºæ€§</strong>: FcmNotifier, ApnsNotifier, AwsEmailSenderï¼ˆæƒ³åƒåã‚’æ’é™¤ï¼‰</li>
<li><strong>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ­£ç¢ºæ€§</strong>: AuthenticationDeviceNotifier, EmailSender</li>
<li><strong>APIæ­£ç¢ºæ€§</strong>: Javaæ¨™æº–HttpRequest.newBuilder(), AWS SDK v2</li>
</ol>
<hr>
<p><strong>æƒ…å ±æº</strong>:</p>
<ul>
<li><code>libs/idp-server-notification-*/</code>é…ä¸‹ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰</li>
<li><code>libs/idp-server-email-aws-adapter/</code>é…ä¸‹ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰</li>
<li><code>libs/idp-server-security-event-*/</code>é…ä¸‹ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰</li>
<li><a href="/idp-server/assets/files/FcmNotifier-531966a25cca8b77325c86aedae3befc.java" target="_blank">FcmNotifier.java</a></li>
<li><a href="/idp-server/assets/files/ApnsNotifier-f16796b9aa3dba107a9be02a49690098.java" target="_blank">ApnsNotifier.java</a></li>
<li><a href="/idp-server/assets/files/AwsEmailSender-280e08ebe67200f8f66a6938b433a05d.java" target="_blank">AwsEmailSender.java</a></li>
<li><a href="/idp-server/assets/files/SsfHookExecutor-51d5336d11e4e24238156b880032ec40.java" target="_blank">SsfHookExecutor.java</a></li>
<li><a href="/idp-server/assets/files/WebHookSecurityEventExecutor-b40ce2197091b846bde4c4042fd33830.java" target="_blank">WebHookSecurityEventExecutor.java</a></li>
<li>platform.mdã€ŒHTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ - ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œã€</li>
<li>Issue #398ï¼ˆSecurity Event Hook Retry Mechanismï¼‰</li>
<li><a href="https://openid.net/specs/openid-sse-framework-1_0.html" target="_blank" rel="noopener noreferrer">Shared Signals Framework</a></li>
</ul>
<p><strong>æœ€çµ‚æ›´æ–°</strong>: 2025-10-12
<strong>ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½</strong>: 2025-10-12 - AIé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå“è³ªæ”¹å–„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-50-notification-security-event.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_10_ai_developer/ai-43-federation-oidc"><div class="pagination-nav__sublabel">å‰ã¸</div><div class="pagination-nav__label">idp-server-federation-oidc</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_10_ai_developer/ai-51-notification-fcm"><div class="pagination-nav__sublabel">æ¬¡ã¸</div><div class="pagination-nav__label">idp-server-notification-fcm-adapter</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æ¦‚è¦" class="table-of-contents__link toc-highlight">æ¦‚è¦</a></li><li><a href="#é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«" class="table-of-contents__link toc-highlight">é€šçŸ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a><ul><li><a href="#idp-server-notification-fcm-adapter" class="table-of-contents__link toc-highlight">idp-server-notification-fcm-adapter</a></li><li><a href="#idp-server-notification-apns-adapter" class="table-of-contents__link toc-highlight">idp-server-notification-apns-adapter</a></li><li><a href="#idp-server-email-aws-adapter" class="table-of-contents__link toc-highlight">idp-server-email-aws-adapter</a></li></ul></li><li><a href="#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«" class="table-of-contents__link toc-highlight">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</a><ul><li><a href="#idp-server-security-event-framework" class="table-of-contents__link toc-highlight">idp-server-security-event-framework</a></li><li><a href="#idp-server-security-event-hooks" class="table-of-contents__link toc-highlight">idp-server-security-event-hooks</a></li></ul></li><li><a href="#ã¾ã¨ã‚" class="table-of-contents__link toc-highlight">ã¾ã¨ã‚</a><ul><li><a href="#é€šçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ" class="table-of-contents__link toc-highlight">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ</a></li><li><a href="#å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆ" class="table-of-contents__link toc-highlight">å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Œæˆï¼</a></li></ul></li><li><a href="#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´" class="table-of-contents__link toc-highlight">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´</a><ul><li><a href="#2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£" class="table-of-contents__link toc-highlight">2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£</a></li><li><a href="#ä¿®æ­£ã®åŸå‰‡" class="table-of-contents__link toc-highlight">ä¿®æ­£ã®åŸå‰‡</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>