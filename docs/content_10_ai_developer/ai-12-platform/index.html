<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_10_ai_developer/ai-12-platform" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤ | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-12-platform"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤ | IdP-Server Documentation"><meta data-rh="true" name="description" content="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦"><meta data-rh="true" property="og:description" content="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-12-platform"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-12-platform" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_10_ai_developer/ai-12-platform" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.b1f8384d.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.49a2be9f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—</a></div><nav aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’é–‹ã" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å…ˆé ­ã¸æˆ»ã‚‹" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µã‚¤ãƒ‰ãƒãƒ¼" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">ã¯ã˜ã‚ã«</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">è£½å“ç´¹ä»‹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_03_concepts/foundation/concept-01-multi-tenant">ã‚³ã‚¢æ¦‚å¿µ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">èªè¨¼ãƒ»èªå¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/">How-toï¼ˆè¨­å®šãƒ»é‹ç”¨ãƒ¬ã‚·ãƒ”ï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/">é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_11_learning/identity-basics/identity-management-basics">å­¦ç¿’ï¼ˆLearningï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">é‹ç”¨ï¼ˆOpsï¼‰</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AIé–‹ç™ºè€…å‘ã‘ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-02-lessons-learned">AIé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-10-use-cases">idp-server-use-cases - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ï¼ˆEntryServiceå®Ÿè£…ï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-11-core">idp-server-core - OAuth 2.0/OIDCæº–æ‹ ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-12-platform">idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-13-control-plane">idp-server-control-plane - ç®¡ç†APIå¥‘ç´„å®šç¾©</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-20-adapters">Adapterå±¤ - Repositoryå®Ÿè£…ã¨ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-21-core-adapter">idp-server-core-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-22-database">idp-server-database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-23-springboot-adapter">idp-server-springboot-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-30-extensions">æ‹¡å¼µæ©Ÿèƒ½å±¤ - OAuth/OIDCæ‹¡å¼µä»•æ§˜</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-31-extension-ciba">idp-server-core-extension-ciba - CIBAæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-32-extension-fapi">idp-server-core-extension-fapi - FAPIæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-33-extension-ida">idp-server-core-extension-ida - IDAæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-34-extension-pkce">idp-server-core-extension-pkce - PKCEæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-35-extension-vc">idp-server-core-extension-verifiable-credentials - VCæ‹¡å¼µ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-40-authentication-federation">èªè¨¼ãƒ»é€£æºå±¤ - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-41-authentication">idp-server-authentication-interactors - èªè¨¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚¿ãƒ¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-42-webauthn">idp-server-webauthn4j-adapter - WebAuthn4jãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-43-federation-oidc">idp-server-federation-oidc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event">é€šçŸ¥ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå±¤ - é€šçŸ¥é…ä¿¡ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-51-notification-fcm">idp-server-notification-fcm-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-52-notification-apns">idp-server-notification-apns-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-53-email-aws">idp-server-email-aws-adapter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-54-security-event-framework">idp-server-security-event-framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/ai-55-security-event-hooks">idp-server-security-event-hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_10_ai_developer/external-api-response-handling-investigation">å¤–éƒ¨APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„èª¿æŸ»</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AI</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">ã“ã®ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—</button></div><div class="theme-doc-markdown markdown"><header><h1>idp-server-platform - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åŸºç›¤</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦">ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦<a href="#ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦" class="hash-link" aria-label="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/</code>
<strong>ç¢ºèªæ—¥</strong>: 2025-10-12</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è²¬å‹™">è²¬å‹™<a href="#è²¬å‹™" class="hash-link" aria-label="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è²¬å‹™ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>idp-serverå…¨ä½“ã‚’æ”¯ãˆã‚‹åŸºç›¤æ©Ÿèƒ½ç¾¤ã€‚ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€ãƒ­ã‚°ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã€æš—å·åŒ–ã€JOSE(JWT)ç­‰ã®æ¨ªæ–­çš„é–¢å¿ƒäº‹ã‚’æä¾›ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾å­˜é–¢ä¿‚">ä¾å­˜é–¢ä¿‚<a href="#ä¾å­˜é–¢ä¿‚" class="hash-link" aria-label="ä¾å­˜é–¢ä¿‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¾å­˜é–¢ä¿‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">idp-server-core â†’ idp-server-platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">idp-server-use-cases â†’ idp-server-platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">idp-server-*-adapter â†’ idp-server-platform</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ã™ã¹ã¦ã®ä¸Šä½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä¾å­˜ã™ã‚‹åŸºç›¤ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ<a href="#ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ" class="hash-link" aria-label="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <code>find libs/idp-server-platform/src/main/java/org/idp/server/platform -type d -maxdepth 1</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ-multi_tenancy">ğŸ”· ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ (<code>multi_tenancy/</code>)<a href="#-ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ-multi_tenancy" class="hash-link" aria-label="-ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ-multi_tenancy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="-ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ-multi_tenancy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ã‚µãƒ–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th><th>è²¬å‹™</th></tr></thead><tbody><tr><td><code>tenant/</code></td><td>ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ãƒ»è­˜åˆ¥ãƒ»å±æ€§</td></tr><tr><td><code>organization/</code></td><td>çµ„ç¹”ç®¡ç†ãƒ»ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æš—å·åŒ–">ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æš—å·åŒ–<a href="#-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æš—å·åŒ–" class="hash-link" aria-label="ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æš—å·åŒ– ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æš—å·åŒ– ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th><th>è²¬å‹™</th></tr></thead><tbody><tr><td><code>crypto/</code></td><td>æš—å·åŒ–ãƒ»å¾©å·åŒ–</td></tr><tr><td><code>hash/</code></td><td>ãƒãƒƒã‚·ãƒ¥ç”Ÿæˆï¼ˆSHA-256ç­‰ï¼‰</td></tr><tr><td><code>jose/</code></td><td>JWT/JWS/JWE/JWKå‡¦ç†</td></tr><tr><td><code>x509/</code></td><td>X.509è¨¼æ˜æ›¸ç®¡ç†</td></tr><tr><td><code>random/</code></td><td>ã‚»ã‚­ãƒ¥ã‚¢ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ</td></tr><tr><td><code>uuid/</code></td><td>UUIDç”Ÿæˆ</td></tr><tr><td><code>base64/</code></td><td>Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ">ğŸ”Œ ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ<a href="#-ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ" class="hash-link" aria-label="ğŸ”Œ ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ”Œ ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th><th>è²¬å‹™</th></tr></thead><tbody><tr><td><code>datasource/</code></td><td>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ç®¡ç†ãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</td></tr><tr><td><code>http/</code></td><td>HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</td></tr><tr><td><code>notification/</code></td><td>é€šçŸ¥åŸºç›¤ï¼ˆEmail/Pushï¼‰</td></tr><tr><td><code>proxy/</code></td><td>ãƒ—ãƒ­ã‚­ã‚·è¨­å®š</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ï¸-ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½">ğŸ› ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½<a href="#ï¸-ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½" class="hash-link" aria-label="ğŸ› ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ› ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th><th>è²¬å‹™</th></tr></thead><tbody><tr><td><code>audit/</code></td><td>ç›£æŸ»ãƒ­ã‚°</td></tr><tr><td><code>log/</code></td><td>ãƒ­ã‚®ãƒ³ã‚°</td></tr><tr><td><code>plugin/</code></td><td>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼</td></tr><tr><td><code>dependency/</code></td><td>DIï¼ˆDependency Injectionï¼‰</td></tr><tr><td><code>configuration/</code></td><td>è¨­å®šç®¡ç†</td></tr><tr><td><code>condition/</code></td><td>æ¡ä»¶è©•ä¾¡</td></tr><tr><td><code>exception/</code></td><td>ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£">ğŸ“¦ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£<a href="#-ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£" class="hash-link" aria-label="ğŸ“¦ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ğŸ“¦ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<table><thead><tr><th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th><th>è²¬å‹™</th></tr></thead><tbody><tr><td><code>json/</code></td><td>JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</td></tr><tr><td><code>mapper/</code></td><td>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°</td></tr><tr><td><code>type/</code></td><td>å‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</td></tr><tr><td><code>date/</code></td><td>æ—¥æ™‚å‡¦ç†</td></tr><tr><td><code>resource/</code></td><td>ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†</td></tr><tr><td><code>oauth/</code></td><td>OAuthå…±é€šå‹</td></tr><tr><td><code>security/</code></td><td>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£…">ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£…<a href="#ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£…" class="hash-link" aria-label="ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£… ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tenant---ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«">Tenant - ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«<a href="#tenant---ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«" class="hash-link" aria-label="Tenant - ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Tenant - ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/tenant/</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tenantidentifier---ãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­">TenantIdentifier - ãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­<a href="#tenantidentifier---ãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­" class="hash-link" aria-label="TenantIdentifier - ãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="TenantIdentifier - ãƒ†ãƒŠãƒ³ãƒˆè­˜åˆ¥å­ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TenantIdentifier {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  String value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantIdentifier(String value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.value = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String value() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // equals/hashCodeå®Ÿè£…ï¼ˆå€¤ã«ã‚ˆã‚‹ç­‰ä¾¡æ€§ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦</strong>: <code>String</code>ã§ã¯ãªã<code>TenantIdentifier</code>å‹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§å‹å®‰å…¨æ€§ã‚’æ‹…ä¿ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tenantattributes---ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰è¨­å®š">TenantAttributes - ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰è¨­å®š<a href="#tenantattributes---ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰è¨­å®š" class="hash-link" aria-label="TenantAttributes - ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰è¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="TenantAttributes - ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰è¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/tenant/TenantAttributes.java#L25">TenantAttributes.java:25</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ãƒ†ãƒŠãƒ³ãƒˆå›ºæœ‰ã®è¨­å®šå€¤ã‚’æ ¼ç´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®25-84è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TenantAttributes {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, Object&gt; values;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤  ã‚’æŒ‡å®šã—ã¦Optionalå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String optValueAsString(String key, String defaultValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (containsKey(key)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return (String) values.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return defaultValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean optValueAsBoolean(String key, boolean defaultValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (values == null || values.isEmpty() || !containsKey(key)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return defaultValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (boolean) values.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public List&lt;String&gt; optValueAsStringList(String key, List&lt;String&gt; defaultValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (values == null || values.isEmpty() || !containsKey(key)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return defaultValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (List&lt;String&gt;) values.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãªã—ã®å–å¾—ï¼ˆå­˜åœ¨ç¢ºèªæ¸ˆã¿ã®å ´åˆï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String getValueAsString(String key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (String) values.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean containsKey(String key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (values == null || values.isEmpty()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return values.containsKey(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä½¿ç”¨ä¾‹</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Coreå±¤ã§ã®ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TenantAttributes attributes = tenant.attributes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// PKCEæœ‰åŠ¹åŒ–ãƒã‚§ãƒƒã‚¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boolean enablePKCE = attributes.optValueAsBoolean(&quot;oauth.pkce.enabled&quot;, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚­ãƒ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String customClaimKey = attributes.optValueAsString(&quot;token.custom_claim_key&quot;, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒªã‚¹ãƒˆå–å¾—ï¼ˆè¨±å¯ã‚¹ã‚³ãƒ¼ãƒ—ç­‰ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;String&gt; allowedScopes = attributes.optValueAsStringList(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;oauth.allowed_scopes&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List.of(&quot;openid&quot;, &quot;profile&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æƒ…å ±æº</strong>: CLAUDE.mdã€Œè¨­å®š: TenantAttributes.optValueAsBoolean(key, default) ãƒ‘ã‚¿ãƒ¼ãƒ³ã€</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tenant---ãƒ†ãƒŠãƒ³ãƒˆé›†ç´„ãƒ«ãƒ¼ãƒˆ">Tenant - ãƒ†ãƒŠãƒ³ãƒˆé›†ç´„ãƒ«ãƒ¼ãƒˆ<a href="#tenant---ãƒ†ãƒŠãƒ³ãƒˆé›†ç´„ãƒ«ãƒ¼ãƒˆ" class="hash-link" aria-label="Tenant - ãƒ†ãƒŠãƒ³ãƒˆé›†ç´„ãƒ«ãƒ¼ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Tenant - ãƒ†ãƒŠãƒ³ãƒˆé›†ç´„ãƒ«ãƒ¼ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class Tenant {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TenantIdentifier identifier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TenantName name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TenantType type;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TenantAttributes attributes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TenantFeatures features;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚µãƒ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantIdentifier identifier() { return identifier; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String identifierValue() { return identifier.value(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… å±æ€§ã‚¢ã‚¯ã‚»ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantAttributes attributes() { return attributes; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean isOrganizer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return type.isOrganizer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean hasFeature(String featureName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return features.has(featureName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="organization---çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«">Organization - çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«<a href="#organization---çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«" class="hash-link" aria-label="Organization - çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Organization - çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ« ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/organization/Organization.java#L22">Organization.java:22</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * çµ„ç¹” = è¤‡æ•°ãƒ†ãƒŠãƒ³ãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ä¸Šä½æ¦‚å¿µ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®22-80è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Organization {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OrganizationIdentifier identifier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OrganizationName name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  OrganizationDescription description;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AssignedTenants assignedTenants; // çµ„ç¹”ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Organization updateWithTenant(AssignedTenant assignedTenant) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AssignedTenants addedTenants = assignedTenants.add(assignedTenant);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âœ… Immutableãƒ‘ã‚¿ãƒ¼ãƒ³: æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new Organization(identifier, name, description, addedTenants);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean hasAssignedTenants() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return assignedTenants != null &amp;&amp; assignedTenants.exists();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… toMap(): ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public HashMap&lt;String, Object&gt; toMap() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HashMap&lt;String, Object&gt; result = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.put(&quot;id&quot;, identifier.value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.put(&quot;name&quot;, name.value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.put(&quot;description&quot;, description.value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result.put(&quot;assigned_tenants&quot;, assignedTenants.toMapList());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦</strong>: çµ„ç¹”ãƒ¬ãƒ™ãƒ«APIã§ã¯ã€<code>OrganizationIdentifier</code> â†’ <code>TenantIdentifier</code>ã®é †ã§å¼•æ•°ã‚’æ¸¡ã™ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="organizationrepository---çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª">OrganizationRepository - çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª<a href="#organizationrepository---çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª" class="hash-link" aria-label="OrganizationRepository - çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="OrganizationRepository - çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/organization/OrganizationRepository.java</code></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface OrganizationRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… é‡è¦: OrganizationRepositoryã®ã¿Tenantç¬¬ä¸€å¼•æ•°ã§ã¯ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void register(Organization organization);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void update(Organization organization);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Organization get(OrganizationIdentifier identifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  List&lt;Organization&gt; findList(OrganizationQueries queries);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ³¨æ„</strong>: <code>findMember()</code> ã‚„ <code>findAssignment()</code> ãªã©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ã‚„å‰²ã‚Šå½“ã¦ãƒ†ãƒŠãƒ³ãƒˆã®æ¤œç´¢ã¯ã€å–å¾—ã—ãŸ <code>Organization</code> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰è¡Œã„ã¾ã™ï¼š</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// çµ„ç¹”ã®å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Organization org = organizationRepository.get(orgId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å‰²ã‚Šå½“ã¦ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssignedTenants tenants = org.assignedTenants();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;TenantIdentifier&gt; tenantIds = tenants.tenantIdentifiers();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// çµ„ç¹”ã‚¿ã‚¤ãƒ—ï¼ˆORGANIZERï¼‰ã®ãƒ†ãƒŠãƒ³ãƒˆæ¤œç´¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssignedTenant orgTenant = org.findOrgTenant();  // Organization.java:92</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¾‹å¤–ãƒ«ãƒ¼ãƒ«</strong>:</p>
<ul>
<li>â— <strong>OrganizationRepositoryã®ã¿ä¾‹å¤–</strong>: çµ„ç¹”ã¯ãƒ†ãƒŠãƒ³ãƒˆã‚ˆã‚Šä¸Šä½æ¦‚å¿µã®ãŸã‚ã€Tenantç¬¬ä¸€å¼•æ•°ãƒ«ãƒ¼ãƒ«ã®å¯¾è±¡å¤–</li>
<li>âœ… <strong>ãã®ä»–ã®å…¨Repository</strong>: Tenantç¬¬ä¸€å¼•æ•°å¿…é ˆ</li>
</ul>
<p><strong>æƒ…å ±æº</strong>: CLAUDE.mdã€ŒRepository: å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã§ Tenant ãŒç¬¬ä¸€å¼•æ•°ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ï¼‰ã€‚OrganizationRepositoryã¯é™¤ãã€‚ã€</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="repository-ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°">Repository ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°<a href="#repository-ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°" class="hash-link" aria-label="Repository ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Repository ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="query--command-åˆ†é›¢-cqrs">Query / Command åˆ†é›¢ (CQRS)<a href="#query--command-åˆ†é›¢-cqrs" class="hash-link" aria-label="Query / Command åˆ†é›¢ (CQRS) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Query / Command åˆ†é›¢ (CQRS) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… Query: èª­ã¿å–ã‚Šå°‚ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface TenantQueryRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Tenant get(TenantIdentifier identifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Tenant find(TenantIdentifier identifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  List&lt;Tenant&gt; findList(int limit, int offset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  long count();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… Command: æ›¸ãè¾¼ã¿å°‚ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface TenantCommandRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void register(Tenant tenant);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void update(Tenant tenant);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void delete(TenantIdentifier identifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-vs-find-å‘½åè¦å‰‡">get() vs find() å‘½åè¦å‰‡<a href="#get-vs-find-å‘½åè¦å‰‡" class="hash-link" aria-label="get() vs find() å‘½åè¦å‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="get() vs find() å‘½åè¦å‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… get(): å¿…é ˆå­˜åœ¨ - ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ä¾‹å¤–ã‚¹ãƒ­ãƒ¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tenant tenant = tenantQueryRepository.get(tenantIdentifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ ãƒ‡ãƒ¼ã‚¿ãŒãªã„ â†’ TenantNotFoundException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… find(): ä»»æ„å­˜åœ¨ - ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯null/ç©ºã‚’è¿”å´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tenant tenant = tenantQueryRepository.find(tenantIdentifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ ãƒ‡ãƒ¼ã‚¿ãŒãªã„ â†’ null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… findList(): ãƒªã‚¹ãƒˆå–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Tenant&gt; tenants = tenantQueryRepository.findList(10, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… findTotalCount(): ã‚«ã‚¦ãƒ³ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">long total = tenantQueryRepository.findTotalCount(queries);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æƒ…å ±æº</strong>: CLAUDE.mdã€Œå‘½å: get()å¿…é ˆå­˜åœ¨, find()ä»»æ„å­˜åœ¨, is/has/canåˆ¤å®šãƒ¡ã‚½ãƒƒãƒ‰ã€</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ­ã‚°ç›£æŸ»ãƒ­ã‚°">ãƒ­ã‚°ãƒ»ç›£æŸ»ãƒ­ã‚°<a href="#ãƒ­ã‚°ç›£æŸ»ãƒ­ã‚°" class="hash-link" aria-label="ãƒ­ã‚°ãƒ»ç›£æŸ»ãƒ­ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ­ã‚°ãƒ»ç›£æŸ»ãƒ­ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loggerwrapper---ãƒ­ã‚®ãƒ³ã‚°">LoggerWrapper - ãƒ­ã‚®ãƒ³ã‚°<a href="#loggerwrapper---ãƒ­ã‚®ãƒ³ã‚°" class="hash-link" aria-label="LoggerWrapper - ãƒ­ã‚®ãƒ³ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="LoggerWrapper - ãƒ­ã‚®ãƒ³ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SomeHandler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LoggerWrapper log = LoggerWrapper.getLogger(SomeHandler.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void handle() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.info(&quot;Processing authorization request&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.debug(&quot;Request parameters: {}&quot;, params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.error(&quot;Failed to process request&quot;, exception);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auditlog---ç›£æŸ»ãƒ­ã‚°">AuditLog - ç›£æŸ»ãƒ­ã‚°<a href="#auditlog---ç›£æŸ»ãƒ­ã‚°" class="hash-link" aria-label="AuditLog - ç›£æŸ»ãƒ­ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="AuditLog - ç›£æŸ»ãƒ­ã‚° ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AuditLog auditLog = AuditLog.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .tenantIdentifier(tenant.identifier())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .action(&quot;CREATE_CLIENT&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .subject(user.sub())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .resource(&quot;client_configuration&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .resourceId(clientId.value())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .timestamp(Instant.now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auditLogWriter.write(auditLog);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="jose-jwtjwsjwejwk">JOSE (JWT/JWS/JWE/JWK)<a href="#jose-jwtjwsjwejwk" class="hash-link" aria-label="JOSE (JWT/JWS/JWE/JWK) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JOSE (JWT/JWS/JWE/JWK) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/</code></p>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Nimbus JOSE + JWTãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’æä¾›ã€‚JoseHandlerãŒçµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="josehandler---çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼">JoseHandler - çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼<a href="#josehandler---çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼" class="hash-link" aria-label="JoseHandler - çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JoseHandler - çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JoseHandler.java#L23-L40">JoseHandler.java:23-40</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Plain JWT / JWS / JWE ã‚’è‡ªå‹•åˆ¤å®šã—ã¦å‡¦ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JoseHandler joseHandler = new JoseHandler();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JoseContext context = joseHandler.handle(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    joseString,    // JWT/JWS/JWEæ–‡å­—åˆ—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    publicJwks,    // å…¬é–‹éµï¼ˆJWK Setï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    privateJwks,   // ç§˜å¯†éµï¼ˆJWK Setï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    secret         // å…±é€šéµï¼ˆHMACç”¨ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebTokenClaims claims = context.claims();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jsonwebsignature-jws---ç½²åä»˜ãjwt">JsonWebSignature (JWS) - ç½²åä»˜ãJWT<a href="#jsonwebsignature-jws---ç½²åä»˜ãjwt" class="hash-link" aria-label="JsonWebSignature (JWS) - ç½²åä»˜ãJWT ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JsonWebSignature (JWS) - ç½²åä»˜ãJWT ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JsonWebSignature.java#L28-L100">JsonWebSignature.java:28-100</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// JWSã®ãƒ‘ãƒ¼ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebSignature jws = JsonWebSignature.parse(jwsString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚¯ãƒ¬ãƒ¼ãƒ å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebTokenClaims claims = jws.claims();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String subject = claims.subject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String issuer = claims.issuer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String keyId = jws.keyId();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String algorithm = jws.algorithm();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boolean isSymmetric = jws.isSymmetricType(); // HS256/HS384/HS512åˆ¤å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç½²åæ¤œè¨¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebSignatureVerifier verifier = new JsonWebSignatureVerifier(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jws.header(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    publicKey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">verifier.verify(jws);  // æ¤œè¨¼å¤±æ•—æ™‚ã¯ JoseInvalidException</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jsonwebtoken-plain-jwt">JsonWebToken (Plain JWT)<a href="#jsonwebtoken-plain-jwt" class="hash-link" aria-label="JsonWebToken (Plain JWT) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JsonWebToken (Plain JWT) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JsonWebToken.java#L24-L62">JsonWebToken.java:24-62</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Plain JWTï¼ˆç½²åãªã—ï¼‰ã®ãƒ‘ãƒ¼ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebToken jwt = JsonWebToken.parse(jwtString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚¯ãƒ¬ãƒ¼ãƒ å–å¾—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebTokenClaims claims = jwt.claims();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String serialized = jwt.serialize();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ">HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ<a href="#http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ" class="hash-link" aria-label="HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/http/HttpRequestExecutor.java#L36-L165">HttpRequestExecutor.java:36-165</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="httprequestexecutor---httpå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³">HttpRequestExecutor - HTTPå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³<a href="#httprequestexecutor---httpå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³" class="hash-link" aria-label="HttpRequestExecutor - HTTPå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="HttpRequestExecutor - HTTPå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Javaæ¨™æº–ã® <code>java.net.http.HttpClient</code> ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸé«˜æ©Ÿèƒ½HTTPå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ã‚’æä¾›ã€‚</p>
<p><strong>ä¸»è¦æ©Ÿèƒ½</strong>:</p>
<ul>
<li>OAuth 2.0è‡ªå‹•èªè¨¼</li>
<li>ãƒªãƒˆãƒ©ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆã‚¨ã‚¯ã‚¹ãƒãƒãƒ³ã‚·ãƒ£ãƒ«ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‰</li>
<li>Idempotencyã‚­ãƒ¼ç®¡ç†</li>
<li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°</li>
<li>è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹">åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹<a href="#åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹" class="hash-link" aria-label="åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// HttpClientã¨OAuthãƒªã‚¾ãƒ«ãƒãƒ¼ã®åˆæœŸåŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpClient httpClient = HttpClient.newHttpClient();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthAuthorizationResolvers oauthResolvers = new OAuthAuthorizationResolvers();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// HttpRequestExecutorã®ä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestExecutor executor = new HttpRequestExecutor(httpClient, oauthResolvers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ¨™æº–ã®java.net.http.HttpRequestã‚’ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequest request = HttpRequest.newBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .uri(URI.create(&quot;https://api.example.com/data&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .POST(HttpRequest.BodyPublishers.ofString(jsonBody))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestResult result = executor.execute(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (result.statusCode() == 200) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  String responseBody = result.body();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ">ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ<a href="#ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ" class="hash-link" aria-label="ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒªãƒˆãƒ©ã‚¤è¨­å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRetryConfiguration retryConfig = HttpRetryConfiguration.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .maxRetries(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .retryableStatusCodes(List.of(502, 503, 504))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .backoffDelays(List.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration.ofSeconds(1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration.ofSeconds(2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Duration.ofSeconds(4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .idempotencyRequired(true)  // Idempotency-Keyãƒ˜ãƒƒãƒ€ãƒ¼è‡ªå‹•ä»˜ä¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒªãƒˆãƒ©ã‚¤å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestResult result = executor.executeWithRetry(request, retryConfig);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauthèªè¨¼ä»˜ãå®Ÿè¡Œ">OAuthèªè¨¼ä»˜ãå®Ÿè¡Œ<a href="#oauthèªè¨¼ä»˜ãå®Ÿè¡Œ" class="hash-link" aria-label="OAuthèªè¨¼ä»˜ãå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="OAuthèªè¨¼ä»˜ãå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// OAuthè¨­å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAuthAuthorizationConfiguration oauthConfig = // ... OAuthè¨­å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// OAuth + ãƒªãƒˆãƒ©ã‚¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestResult result = executor.executeWithRetry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oauthConfig,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    retryConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ">è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ<a href="#è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ" class="hash-link" aria-label="è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// HttpRequestExecutionConfigã‚’ä½¿ã£ãŸå‹•çš„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestExecutionConfig config = HttpRequestExecutionConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .url(&quot;https://api.example.com/users/{user_id}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .method(HttpMethod.POST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .authType(HttpRequestAuthType.OAUTH2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .oauthAuthorization(oauthConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .retryConfiguration(retryConfig)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆURLåŸ‹ã‚è¾¼ã¿ãƒ»ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒœãƒ‡ã‚£ã«å‹•çš„ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; params = Map.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;user_id&quot;, &quot;12345&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;, &quot;John Doe&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpRequestResult result = executor.execute(config, params);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="datasourceãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³proxy">Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»Proxy<a href="#datasourceãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³proxy" class="hash-link" aria-label="Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶  ã‚¯ã‚·ãƒ§ãƒ³ãƒ»Proxy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»Proxy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/</code>, <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/proxy/</code></p>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€<strong>ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³é§†å‹•ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</strong>ã‚’æä¾›ã€‚Dynamic Proxyã«ã‚ˆã‚‹è‡ªå‹•ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ¶å¾¡ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦<a href="#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦" class="hash-link" aria-label="ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">EntryService (Interface)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TenantAwareEntryServiceProxy (Dynamic Proxy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“ @Transaction ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¤œå‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“ TransactionManager è‡ªå‹•å‘¼ã³å‡ºã—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“ PostgreSQL RLS è‡ªå‹•è¨­å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EntryService (å®Ÿè£…)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â†“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repository â†’ SqlExecutor â†’ TransactionManager.getConnection()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³">@Transaction ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³<a href="#transaction-ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" class="hash-link" aria-label="@Transaction ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="@Transaction ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/assets/files/Transaction-9762a14680938bcfe674ece2f7473ee3.java#L24-L28" target="_blank">Transaction.java:24-28</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Target({ElementType.METHOD, ElementType.TYPE})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface Transaction {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  boolean readOnly() default false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä½¿ç”¨ä¾‹</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ã‚¯ãƒ©ã‚¹ãƒ¬ãƒ™ãƒ«: å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³é©ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transaction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserManagementEntryService implements UserManagementApi {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // å…¨ãƒ¡ã‚½ãƒƒãƒ‰ãŒè‡ªå‹•çš„ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã•ã‚Œã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ãƒ¡ã‚½ãƒƒãƒ‰ãƒ¬ãƒ™ãƒ«: ç‰¹å®šãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TenantManagementEntryService implements TenantManagementApi {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Transaction(readOnly = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantResponse get(TenantIdentifier tenantIdentifier) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // èª­ã¿å–ã‚Šå°‚ç”¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Transaction  // readOnly = false (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantResponse register(TenantRegistrationRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ›¸ãè¾¼ã¿ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tenantawareentryserviceproxy---dynamic-proxy">TenantAwareEntryServiceProxy - Dynamic Proxy<a href="#tenantawareentryserviceproxy---dynamic-proxy" class="hash-link" aria-label="TenantAwareEntryServiceProxy - Dynamic Proxy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="TenantAwareEntryServiceProxy - Dynamic Proxy ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/proxy/TenantAwareEntryServiceProxy.java#L29-L181">TenantAwareEntryServiceProxy.java:29-181</a></p>
<p>Dynamic ProxyãŒè‡ªå‹•çš„ã«ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š</p>
<ol>
<li><strong>ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¤œå‡º</strong>: <code>@Transaction</code> ã®æœ‰ç„¡ãƒ»readOnlyåˆ¤å®š</li>
<li><strong>TenantIdentifierè§£æ±º</strong>: ãƒ¡ã‚½ãƒƒãƒ‰å¼•æ•°ã‹ã‚‰è‡ªå‹•æŠ½å‡º</li>
<li><strong>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹</strong>: <code>TransactionManager.beginTransaction()</code> ã¾ãŸã¯ <code>createConnection()</code></li>
<li><strong>RLSè¨­å®š</strong>: PostgreSQLã®å ´åˆã€<code>set_config(&#x27;app.tenant_id&#x27;, ?, true)</code> å®Ÿè¡Œ</li>
<li><strong>ãƒ­ã‚°ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</strong>: <code>TenantLoggingContext</code> è¨­å®š</li>
<li><strong>å®Ÿè¡Œ</strong>: å®Ÿéš›ã®ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œ</li>
<li><strong>ã‚³ãƒŸãƒƒãƒˆ/ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</strong>: æˆåŠŸæ™‚commitã€ä¾‹å¤–æ™‚rollback</li>
<li><strong>ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—</strong>: æ¥ç¶šã‚¯ãƒ­ãƒ¼ã‚ºã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¯ãƒªã‚¢</li>
</ol>
<p><strong>Proxyä½œæˆ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// EntryServiceã‚’Proxyã§ãƒ©ãƒƒãƒ—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UserManagementApi userManagementApi = TenantAwareEntryServiceProxy.createProxy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new UserManagementEntryService(...),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserManagementApi.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    applicationDatabaseTypeProvider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã“ã®å¾Œã®APIå‘¼ã³å‡ºã—ã¯å…¨ã¦è‡ªå‹•çš„ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã•ã‚Œã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userManagementApi.register(tenantIdentifier, request);  // è‡ªå‹•ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transactionmanager---threadlocalç®¡ç†">TransactionManager - ThreadLocalç®¡ç†<a href="#transactionmanager---threadlocalç®¡ç†" class="hash-link" aria-label="TransactionManager - ThreadLocalç®¡ç† ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="TransactionManager - ThreadLocalç®¡ç† ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/TransactionManager.java#L25-L149">TransactionManager.java:25-149</a></p>
<p><strong>é‡è¦</strong>: é€šå¸¸ã€é–‹ç™ºè€…ãŒç›´æ¥TransactionManagerã‚’å‘¼ã³å‡ºã™ã“ã¨ã¯ãªã„ã€‚ProxyãŒè‡ªå‹•çš„ã«å‘¼ã³å‡ºã™ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ProxyãŒè‡ªå‹•çš„ã«å®Ÿè¡Œï¼ˆé–‹ç™ºè€…ã¯æ„è­˜ä¸è¦ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TransactionManager.beginTransaction(DatabaseType.POSTGRESQL, tenantIdentifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ set_config(&#x27;app.tenant_id&#x27;, ?, true) è‡ªå‹•å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ commit or rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// â†’ closeConnection()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ ç›´æ¥å‘¼ã³å‡ºã—ã¯éæ¨å¥¨ï¼ˆProxyã‚’ä½¿ç”¨ã™ã¹ãï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TransactionManager.beginTransaction(...);  // é€šå¸¸ã¯ä½¿ã‚ãªã„</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ThreadLocalç®¡ç†ã®ä»•çµ„ã¿</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private static final ThreadLocal&lt;Connection&gt; connectionHolder = new ThreadLocal&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static Connection getConnection() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Connection conn = connectionHolder.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (conn == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new SqlRuntimeException(&quot;No active transaction&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return conn;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sqlexecutor---sqlå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼">SqlExecutor - SQLå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼<a href="#sqlexecutor---sqlå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼" class="hash-link" aria-label="SqlExecutor - SQLå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="SqlExecutor - SQLå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/SqlExecutor.java#L23-L83">SqlExecutor.java:23-83</a></p>
<p>Repositoryå®Ÿè£…ã§ä½¿ç”¨ã™ã‚‹SQLå®Ÿè¡Œãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserRepositoryImpl implements UserQueryRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public User get(Tenant tenant, String userSub) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SqlExecutor executor = new SqlExecutor();  // TransactionManager.getConnection()ã‚’å†…éƒ¨ã§ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String sql = &quot;SELECT * FROM idp_user WHERE tenant_id = ? AND sub = ?&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, String&gt; row = executor.selectOne(sql, List.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tenant.identifierValue(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userSub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return mapToUser(row);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public List&lt;User&gt; findList(Tenant tenant, int limit, int offset) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SqlExecutor executor = new SqlExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String sql = &quot;SELECT * FROM idp_user WHERE tenant_id = ? LIMIT ? OFFSET ?&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Map&lt;String, String&gt;&gt; rows = executor.selectList(sql, List.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tenant.identifierValue(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        limit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return rows.stream().map(this::mapToUser).toList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è‡ªå‹•ä¾‹å¤–ãƒãƒƒãƒ”ãƒ³ã‚°</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  executor.selectOne(sql, params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (SQLException exception) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  switch (SqlErrorClassifier.classify(exception)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case UNIQUE_VIOLATION -&gt; throw new SqlDuplicateKeyException(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case NOT_NULL_VIOLATION, CHECK_VIOLATION -&gt; throw new SqlBadRequestException(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default -&gt; throw new SqlRuntimeException(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="row-level-security-rls-ã®è‡ªå‹•è¨­å®š">Row Level Security (RLS) ã®è‡ªå‹•è¨­å®š<a href="#row-level-security-rls-ã®è‡ªå‹•è¨­å®š" class="hash-link" aria-label="Row Level Security (RLS) ã®è‡ªå‹•è¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Row Level Security (RLS) ã®è‡ªå‹•è¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/TransactionManager.java#L128-L167">TransactionManager.java:128-167</a></p>
<p>PostgreSQLä½¿ç”¨æ™‚ã€ProxyãŒè‡ªå‹•çš„ã«RLSã‚’è¨­å®šï¼š</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- ProxyãŒè‡ªå‹•å®Ÿè¡Œï¼ˆé–‹ç™ºè€…ã¯æ„è­˜ä¸è¦ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> set_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;app.tenant_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">--                                    â†‘ is_local=trueï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«è‡ªå‹•ã‚¯ãƒªã‚¢ï¼‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Issue #672å¯¾ç­–</strong>: ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ä½¿ç”¨ã§SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… å®‰å…¨ãªå®Ÿè£…ï¼ˆIssue #672ã§ä¿®æ­£æ¸ˆã¿ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private static void setTenantId(Connection conn, TenantIdentifier tenantIdentifier) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  try (PreparedStatement stmt = conn.prepareStatement(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;SELECT set_config(&#x27;app.tenant_id&#x27;, ?, true)&quot;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stmt.setString(1, tenantIdentifier.value());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stmt.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚">å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚<a href="#å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚" class="hash-link" aria-label="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>é–‹ç™ºè€…ãŒã™ã¹ãã“ã¨</strong>:</p>
<ol>
<li>âœ… EntryServiceã« <code>@Transaction</code> ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ä¸</li>
<li>âœ… ãƒ¡ã‚½ãƒƒãƒ‰å¼•æ•°ã« <code>TenantIdentifier</code> ã‚’å«ã‚ã‚‹ï¼ˆç¬¬ä¸€å¼•æ•°æ¨å¥¨ï¼‰</li>
<li>âœ… EntryServiceã‚’Proxyã§ãƒ©ãƒƒãƒ—ã—ã¦ä½¿ç”¨</li>
<li>âœ… Repositoryã§SqlExecutorã‚’ä½¿ç”¨</li>
</ol>
<p><strong>é–‹ç™ºè€…ãŒæ„è­˜ã—ãªãã¦ã‚ˆã„ã“ã¨</strong>:</p>
<ol>
<li>âŒ TransactionManagerã®ç›´æ¥å‘¼ã³å‡ºã—ï¼ˆProxyãŒè‡ªå‹•å®Ÿè¡Œï¼‰</li>
<li>âŒ Connectionç®¡ç†ï¼ˆThreadLocalã§è‡ªå‹•ç®¡ç†ï¼‰</li>
<li>âŒ commit/rollbackï¼ˆProxyãŒè‡ªå‹•å®Ÿè¡Œï¼‰</li>
<li>âŒ RLSè¨­å®šï¼ˆProxyãŒè‡ªå‹•å®Ÿè¡Œï¼‰</li>
<li>âŒ ãƒ­ã‚°ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®šï¼ˆProxyãŒè‡ªå‹•å®Ÿè¡Œï¼‰</li>
</ol>
<p><strong>æƒ…å ±æº</strong>: Issue #672ï¼ˆSQL Injectionå¯¾ç­–ï¼‰</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="json-ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º">JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º<a href="#json-ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º" class="hash-link" aria-label="JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jsonconverter---jsonå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£">JsonConverter - JSONå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£<a href="#jsonconverter---jsonå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£" class="hash-link" aria-label="JsonConverter - JSONå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="JsonConverter - JSONå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/json/JsonConverter.java#L33">JsonConverter.java:33</a></p>
<p>Jackson ObjectMapperã®ãƒ©ãƒƒãƒ‘ãƒ¼ã€‚ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹/ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹å¤‰æ›ã‚’ã‚µãƒãƒ¼ãƒˆã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—">ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—<a href="#ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—" class="hash-link" aria-label="ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾— ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾— ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * JsonConverter - 2ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®33-44è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonConverter defaultConverter = JsonConverter.defaultInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonConverter snakeCaseConverter = JsonConverter.snakeCaseInstance();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é‡è¦</strong>:</p>
<ul>
<li><strong>defaultInstance()</strong>: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’ãã®ã¾ã¾ç¶­æŒï¼ˆ<code>clientId</code>ï¼‰</li>
<li><strong>snakeCaseInstance()</strong>: ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ï¼ˆ<code>client_id</code>ï¼‰</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºjava--json">ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJava â†’ JSONï¼‰<a href="#ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºjava--json" class="hash-link" aria-label="ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJava  â†’ JSONï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJava â†’ JSONï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONæ–‡å­—åˆ—ã«å¤‰æ›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClientConfiguration config = ...;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String json = jsonConverter.write(config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Map â†’ JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; map = Map.of(&quot;client_id&quot;, &quot;test-client&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String json = jsonConverter.write(map);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºjson--java">ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJSON â†’ Javaï¼‰<a href="#ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºjson--java" class="hash-link" aria-label="ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJSON â†’ Javaï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºï¼ˆJSON â†’ Javaï¼‰ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// JSONæ–‡å­—åˆ— â†’ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String json = &quot;{\&quot;client_id\&quot;:\&quot;test-client\&quot;,\&quot;client_name\&quot;:\&quot;Test\&quot;}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClientConfiguration config = jsonConverter.read(json, ClientConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Map â†’ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; map = request.toMap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClientConfiguration config = jsonConverter.read(map, ClientConfiguration.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›ã®é‡è¦æ€§">ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›ã®é‡è¦æ€§<a href="#ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›ã®é‡è¦æ€§" class="hash-link" aria-label="ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›ã®é‡è¦æ€§ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›ã®é‡è¦æ€§ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… Context Creatorã§ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ: snake_case â†’ Javaã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: camelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; requestBody = Map.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;client_id&quot;, &quot;test&quot;,        // snake_case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;client_name&quot;, &quot;Test&quot;,      // snake_case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;redirect_uris&quot;, List.of()  // snake_case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClientConfiguration config = jsonConverter.read(requestBody, ClientConfiguration.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// config.clientId() â†’ &quot;test&quot;      // camelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// config.clientName() â†’ &quot;Test&quot;    // camelCase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// config.redirectUris() â†’ []      // camelCase</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä½¿ç”¨ç®‡æ‰€</strong>:</p>
<ul>
<li><strong>Context Creator</strong>: ãƒªã‚¯ã‚¨ã‚¹ãƒˆDTO â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«å¤‰æ›</li>
<li><strong>Repository</strong>: JSONåˆ—ï¼ˆJSONBï¼‰â†’ Javaã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›</li>
<li><strong>Cache</strong>: Redisä¿å­˜æ™‚ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</li>
<li><strong>HTTP</strong>: å¤–éƒ¨APIã¨ã®JSONé€šä¿¡</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jacksonè¨­å®š">Jacksonè¨­å®š<a href="#jacksonè¨­å®š" class="hash-link" aria-label="Jacksonè¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Jacksonè¨­å®š ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆgetterãªã—ã§ã‚‚ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯èƒ½ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectMapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹å¤‰æ›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Java 8 Time APIå¯¾å¿œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectMapper.registerModule(new JavaTimeModule());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç©ºæ–‡å­—åˆ— â†’ null å¤‰æ›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectMapper.coercionConfigFor(LogicalType.Collection)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setCoercion(CoercionInputShape.EmptyString, CoercionAction.AsNull);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/json/JsonConverter.java#L52-L80">JsonConverter.java:52-80</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-injection---diã‚³ãƒ³ãƒ†ãƒŠ">Dependency Injection - DIã‚³ãƒ³ãƒ†ãƒŠ<a href="#dependency-injection---diã‚³ãƒ³ãƒ†ãƒŠ" class="hash-link" aria-label="Dependency Injection - DIã‚³ãƒ³ãƒ†ãƒŠ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Dependency Injection - DIã‚³ãƒ³ãƒ†ãƒŠ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/dependency/</code></p>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€è»½é‡ãªDIã‚³ãƒ³ãƒ†ãƒŠæ©Ÿæ§‹ã‚’æä¾›ã€‚Pluginã®ä¾å­˜é–¢ä¿‚è§£æ±ºã«ä½¿ç”¨ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="applicationcomponentcontainer">ApplicationComponentContainer<a href="#applicationcomponentcontainer" class="hash-link" aria-label="ApplicationComponentContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ApplicationComponentContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/dependency/ApplicationComponentContainer.java#L22">ApplicationComponentContainer.java:22</a></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ã‚·ãƒ³ãƒ—ãƒ«ãªDIã‚³ãƒ³ãƒ†ãƒŠ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¢ºèªæ–¹æ³•: å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®22-41è¡Œç›®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ApplicationComponentContainer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;Class&lt;?&gt;, Object&gt; dependencies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public ApplicationComponentContainer() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.dependencies = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç™»éŒ²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void register(Class&lt;?&gt; type, Object instance) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependencies.put(type, instance);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè§£æ±º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public &lt;T&gt; T resolve(Class&lt;T&gt; type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!dependencies.containsKey(type)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      throw new ApplicationComponentMissionException(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;Missing datasource for type: &quot; + type.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return type.cast(dependencies.get(type));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨ä¾‹-authenticationdependencycontainer">ä½¿ç”¨ä¾‹: AuthenticationDependencyContainer<a href="#ä½¿ç”¨ä¾‹-authenticationdependencycontainer" class="hash-link" aria-label="ä½¿ç”¨ä¾‹: AuthenticationDependencyContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä½¿ç”¨ä¾‹: AuthenticationDependencyContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// DIã‚³ãƒ³ãƒ†ãƒŠã«ä¾å­˜é–¢ä¿‚ã‚’ç™»éŒ²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ApplicationComponentContainer container = new ApplicationComponentContainer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">container.register(UserQueryRepository.class, userQueryRepository);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">container.register(PasswordVerificationDelegation.class, passwordVerificationDelegation);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pluginã§ä¾å­˜é–¢ä¿‚ã‚’è§£æ±º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PasswordAuthenticationInteractorFactory implements AuthenticationInteractorFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public AuthenticationInteractor create(AuthenticationDependencyContainer container) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âœ… ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ä¾å­˜é–¢ä¿‚ã‚’è§£æ±º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PasswordVerificationDelegation delegation =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container.resolve(PasswordVerificationDelegation.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new PasswordAuthenticationInteractor(delegation);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocolcontainer">ProtocolContainer<a href="#protocolcontainer" class="hash-link" aria-label="ProtocolContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ProtocolContainer ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/dependency/protocol/</code></p>
<p>Protocolï¼ˆOAuth/OIDCï¼‰ã®ä¾å­˜é–¢ä¿‚ç®¡ç†ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Protocolã®ä¾å­˜é–¢ä¿‚ã‚³ãƒ³ãƒ†ãƒŠ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProtocolContainer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, ProtocolProvider&gt; providers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public &lt;T&gt; T resolve(String key, Class&lt;T&gt; type) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ProtocolProvider provider = providers.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return type.cast(provider.provide());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ç”¨é€”</strong>:</p>
<ul>
<li>Plugin Factoryã§ã®Repositoryè§£æ±º</li>
<li>AuthenticationInteractorçµ„ã¿ç«‹ã¦</li>
<li>FederationInteractorçµ„ã¿ç«‹ã¦</li>
<li>Protocolå®Ÿè£…ã®ä¾å­˜é–¢ä¿‚ç®¡ç†</li>
</ul>
<p><strong>é‡è¦</strong>: idp-serverã®DIã¯ã€Spring Bootã®DIã¨ã¯<strong>åˆ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼</strong>:</p>
<ul>
<li><strong>Spring Boot</strong>: Controller, Configuration, Beanç®¡ç†</li>
<li><strong>platform dependency</strong>: Plugin, Interactor, Protocolã®ä¾å­˜é–¢ä¿‚ã®ã¿</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-system">Plugin System<a href="#plugin-system" class="hash-link" aria-label="Plugin System ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="Plugin System ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/plugin/PluginLoader.java#L25-L91">PluginLoader.java:25-91</a></p>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Java ServiceLoaderæ©Ÿæ§‹ã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã€‚å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»å¤–éƒ¨JARã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pluginloader---é™çš„ãƒ¡ã‚½ãƒƒãƒ‰api">PluginLoader - é™çš„ãƒ¡ã‚½ãƒƒãƒ‰API<a href="#pluginloader---é™çš„ãƒ¡ã‚½ãƒƒãƒ‰api" class="hash-link" aria-label="PluginLoader - é™çš„ãƒ¡ã‚½ãƒƒãƒ‰API ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="PluginLoader - é™çš„ãƒ¡ã‚½ãƒƒãƒ‰API ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>é‡è¦</strong>: PluginLoaderã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ä¸è¦ã€‚å…¨ã¦é™çš„ãƒ¡ã‚½ãƒƒãƒ‰ã§æä¾›ã€‚</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ï¼ˆMETA-INF/servicesï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; internalCreators =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PluginLoader.loadFromInternalModule(AccessTokenCustomClaimsCreator.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… å¤–éƒ¨JARã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ï¼ˆplugins/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; externalCreators =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PluginLoader.loadFromExternalModule(AccessTokenCustomClaimsCreator.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… ä¸¡æ–¹ã‚’ãƒãƒ¼ã‚¸ã—ã¦ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; allCreators = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allCreators.addAll(internalCreators);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allCreators.addAll(externalCreators);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é©ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (AccessTokenCustomClaimsCreator creator : allCreators) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Map&lt;String, Object&gt; claims = creator.create(context);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  customClaims.putAll(claims);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³">å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³<a href="#å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³" class="hash-link" aria-label="å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>idp-serverå†…éƒ¨ã§ã®æ©Ÿèƒ½æ‹¡å¼µ</strong></p>
<ol>
<li>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.internal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyCustomClaimsCreator implements AccessTokenCustomClaimsCreator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Map&lt;String, Object&gt; create(AccessTokenContext context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Map.of(&quot;custom_claim&quot;, &quot;value&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><code>resources/META-INF/services/</code> ã«ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ãƒ•ã‚¡ã‚¤ãƒ«å: org.idp.server.core.openid.token.plugin.AccessTokenCustomClaimsCreator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å†…å®¹: com.example.internal.MyCustomClaimsCreator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>ãƒ“ãƒ«ãƒ‰å¾Œã€è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤–éƒ¨jarãƒ—ãƒ©ã‚°ã‚¤ãƒ³">å¤–éƒ¨JARãƒ—ãƒ©ã‚°ã‚¤ãƒ³<a href="#å¤–éƒ¨jarãƒ—ãƒ©ã‚°ã‚¤ãƒ³" class="hash-link" aria-label="å¤–éƒ¨JARãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å¤–éƒ¨JARãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã‚‹æ©Ÿèƒ½æ‹¡å¼µ</strong></p>
<ol>
<li>
<p>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…ï¼ˆåŒä¸Šï¼‰</p>
</li>
<li>
<p><code>resources/META-INF/services/</code> ã«ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆåŒä¸Šï¼‰</p>
</li>
<li>
<p>JARã‚’ãƒ“ãƒ«ãƒ‰:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li><code>plugins/</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp build/libs/my-custom-claims-1.0.0.jar /path/to/idp-server/plugins/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>idp-serverå†èµ·å‹•ã§ãƒ­ãƒ¼ãƒ‰</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="urlclassloaderæ©Ÿæ§‹">URLClassLoaderæ©Ÿæ§‹<a href="#urlclassloaderæ©Ÿæ§‹" class="hash-link" aria-label="URLClassLoaderæ©Ÿæ§‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="URLClassLoaderæ©Ÿæ§‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/plugin/PluginLoader.java#L41-L90">PluginLoader.java:41-90</a></p>
<p>å¤–éƒ¨JARã¯å°‚ç”¨ClassLoaderã§åˆ†é›¢ãƒ­ãƒ¼ãƒ‰:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// plugins/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®å…¨JARã‚’æ¤œç´¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File dir = new File(&quot;plugins&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File[] jars = dir.listFiles((d, name) -&gt; name.endsWith(&quot;.jar&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// URLClassLoaderã§å¤–éƒ¨JARã‚’ãƒ­ãƒ¼ãƒ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL[] urls = Arrays.stream(jars).map(f -&gt; f.toURI().toURL()).toArray(URL[]::new);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClassLoader contextClassLoader = PluginLoader.class.getClassLoader();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URLClassLoader loader = new URLClassLoader(urls, contextClassLoader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ServiceLoaderã§å®Ÿè£…ã‚’æ¤œç´¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ServiceLoader&lt;T&gt; serviceLoader = ServiceLoader.load(type, loader);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¤–éƒ¨JARã‹ã‚‰ã®ã¿ãƒ­ãƒ¼ãƒ‰ï¼ˆå†…éƒ¨é‡è¤‡ã‚’å›é¿ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (T impl : serviceLoader) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (impl.getClass().getClassLoader() != contextClassLoader) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions.add(impl);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å°‚ç”¨pluginloader">å°‚ç”¨PluginLoader<a href="#å°‚ç”¨pluginloader" class="hash-link" aria-label="å°‚ç”¨PluginLoader ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å°‚ç”¨PluginLoader ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>æƒ…å ±æº</strong>: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/plugin/</code></p>
<p>ç‰¹å®šç”¨é€”å‘ã‘ã«å°‚ç”¨ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’æä¾›:</p>
<ul>
<li><code>AuditLogWriterPluginLoader</code> - ç›£æŸ»ãƒ­ã‚°ãƒ©ã‚¤ã‚¿ãƒ¼æ‹¡å¼µ</li>
<li><code>EmailSenderPluginLoader</code> - ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</li>
<li><code>SmsSenderPluginLoader</code> - SMSé€ä¿¡ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</li>
<li><code>SecurityEventHooksPluginLoader</code> - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒƒã‚¯</li>
<li><code>AdditionalOAuthAuthorizationResolverPluginLoader</code> - OAuthèªå¯æ‹¡å¼µ</li>
</ul>
<p><strong>æƒ…å ±æº</strong>: <a href="/idp-server/docs/content_01_intro/intro-01-tech-overview#L171-L190">intro-01-tech-overview.md:171-190</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³-value-object">å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ (Value Object)<a href="#å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³-value-object" class="hash-link" aria-label="å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ (Value Object) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ (Value Object) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å…¨è­˜åˆ¥å­ãƒ»å±æ€§ã¯å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å®Ÿè£…ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®Ÿè£…ä¾‹">å®Ÿè£…ä¾‹<a href="#å®Ÿè£…ä¾‹" class="hash-link" aria-label="å®Ÿè£…ä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="å®Ÿè£…ä¾‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: Immutable + å€¤ã«ã‚ˆã‚‹ç­‰ä¾¡æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TenantIdentifier {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final String value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public TenantIdentifier(String value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Objects.requireNonNull(value, &quot;TenantIdentifier cannot be null&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.value = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public String value() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean equals(Object o) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (this == o) return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!(o instanceof TenantIdentifier)) return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TenantIdentifier that = (TenantIdentifier) o;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Objects.equals(value, that.value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public int hashCode() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Objects.hash(value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ¡ãƒªãƒƒãƒˆ">ãƒ¡ãƒªãƒƒãƒˆ<a href="#ãƒ¡ãƒªãƒƒãƒˆ" class="hash-link" aria-label="ãƒ¡ãƒªãƒƒãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ¡ãƒªãƒƒãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ol>
<li><strong>å‹å®‰å…¨æ€§</strong>: <code>TenantIdentifier</code>ã¨<code>OrganizationIdentifier</code>ã‚’é–“é•ãˆã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼</li>
<li><strong>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é›†ç´„</strong>: å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æ¤œè¨¼</li>
<li><strong>æ„å›³æ˜ç¢ºåŒ–</strong>: <code>String</code>ã§ã¯ãªã<code>TenantIdentifier</code>ã§æ„å›³ã‚’è¡¨ç¾</li>
<li><strong>ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®¹æ˜“</strong>: å‹ãŒé•ã†ãŸã‚å¤‰æ›´ç®‡æ‰€ãŒç‰¹å®šã—ã‚„ã™ã„</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³">ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³<a href="#ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³" class="hash-link" aria-label="ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-1-stringæ¿«ç”¨">âŒ 1. Stringæ¿«ç”¨<a href="#-1-stringæ¿«ç”¨" class="hash-link" aria-label="âŒ 1. Stringæ¿«ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="âŒ 1. Stringæ¿«ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ æ‚ªã„ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Tenant findTenant(String tenantId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return tenantRepository.find(tenantId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… è‰¯ã„ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Tenant findTenant(TenantIdentifier tenantIdentifier) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return tenantRepository.find(tenantIdentifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-2-mapæ¿«ç”¨">âŒ 2. Mapæ¿«ç”¨<a href="#-2-mapæ¿«ç”¨" class="hash-link" aria-label="âŒ 2. Mapæ¿«ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="âŒ 2. Mapæ¿«ç”¨ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ æ‚ªã„ä¾‹: è¨­å®šã‚’Mapã§æŒã¡å›ã‚‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void configure(Map&lt;String, Object&gt; config) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  boolean enableFeature = (boolean) config.get(&quot;enable_feature&quot;); // å‹ã‚­ãƒ£ã‚¹ãƒˆãŒå¿…è¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… è‰¯ã„ä¾‹: TenantAttributesã§å‹å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void configure(TenantAttributes attributes) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  boolean enableFeature = attributes.optValueAsBoolean(&quot;enable_feature&quot;, false); // å‹å®‰å…¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-3-platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥">âŒ 3. Platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥<a href="#-3-platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥" class="hash-link" aria-label="âŒ 3. Platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="âŒ 3. Platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ æ‚ªã„ä¾‹: platformã«æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TenantAttributes {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean canAccessPremiumFeatures() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âŒ æ¥­å‹™åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ãŒplatformã«</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return optValueAsBoolean(&quot;is_premium&quot;, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… è‰¯ã„ä¾‹: Core/UseCaseå±¤ã§åˆ¤å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PremiumFeatureVerifier {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public boolean canAccess(Tenant tenant) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // âœ… æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã«</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return tenant.attributes().optValueAsBoolean(&quot;is_premium&quot;, false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &amp;&amp; tenant.hasFeature(&quot;premium_access&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åŸå‰‡</strong>: platformã¯æ±ç”¨çš„ãªåŸºç›¤æ©Ÿèƒ½ã®ã¿ã€æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸Šä½å±¤ã«é…ç½®ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¾ã¨ã‚">ã¾ã¨ã‚<a href="#ã¾ã¨ã‚" class="hash-link" aria-label="ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã¾ã¨ã‚ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idp-server-platform-ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ">idp-server-platform ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ<a href="#idp-server-platform-ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ" class="hash-link" aria-label="idp-server-platform ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="idp-server-platform ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ol>
<li><strong>ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŸºç›¤</strong>: TenantIdentifier/OrganizationIdentifier ã«ã‚ˆã‚‹å®Œå…¨åˆ†é›¢</li>
<li><strong>å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¾¹åº•</strong>: String/Mapæ¿«ç”¨ã‚’é¿ã‘ã€å‹å®‰å…¨ãªè¨­è¨ˆ</li>
<li><strong>TenantAttributes ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: <code>optValueAsBoolean(key, default)</code> ã§è¨­å®šå–å¾—</li>
<li><strong>Repositoryå‘½åè¦å‰‡</strong>: <code>get()</code>å¿…é ˆå­˜åœ¨ã€<code>find()</code>ä»»æ„å­˜åœ¨</li>
<li><strong>Tenantç¬¬ä¸€å¼•æ•°ã®åŸå‰‡</strong>: OrganizationRepositoryä»¥å¤–ã¯å…¨ã¦Tenantç¬¬ä¸€å¼•æ•°</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—<a href="#æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—" class="hash-link" aria-label="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ã¸ã®ç›´  æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<ul>
<li><a href="/idp-server/docs/content_10_ai_developer/ai-10-use-cases">idp-server-use-casesï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ï¼‰</a> - EntryServiceãƒ‘ã‚¿ãƒ¼ãƒ³</li>
<li><a href="/idp-server/docs/content_10_ai_developer/ai-21-core-adapter">idp-server-core-adapterï¼ˆã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å±¤ï¼‰</a> - Repositoryå®Ÿè£…è©³ç´°</li>
<li><a href="/idp-server/docs/content_10_ai_developer/ai-13-control-plane">idp-server-control-planeï¼ˆç®¡ç†APIå¥‘ç´„ï¼‰</a> - Control Planeè¨­è¨ˆ</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´<a href="#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´" class="hash-link" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£">2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£<a href="#2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£" class="hash-link" aria-label="2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£1-organizationrepository-ã®å®Ÿè£…ã«åˆã‚ã›ãŸä¿®æ­£-238-275è¡Œç›®">ä¿®æ­£1: OrganizationRepository ã®å®Ÿè£…ã«åˆã‚ã›ãŸä¿®æ­£ (238-275è¡Œç›®)<a href="#ä¿®æ­£1-organizationrepository-ã®å®Ÿè£…ã«åˆã‚ã›ãŸä¿®æ­£-238-275è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£1: OrganizationRepository ã®å®Ÿè£…ã«åˆã‚ã›ãŸä¿®æ­£ (238-275è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£1: OrganizationRepository ã®å®Ÿè£…ã«åˆã‚ã›ãŸä¿®æ­£ (238-275è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å­˜åœ¨ã—ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ãŸ</p>
<p><strong>ä¿®æ­£å†…å®¹</strong>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- Organization find(OrganizationIdentifier identifier);     // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- OrganizationMember findMember(...);                       // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- AssignedTenant findAssignment(...);                       // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ void register(Organization organization);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ void update(Organization organization);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ Organization get(OrganizationIdentifier identifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ List&lt;Organization&gt; findList(OrganizationQueries queries);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ </strong>: ä»£æ›¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¬æ˜ï¼ˆ<code>org.assignedTenants()</code>, <code>org.findOrgTenant()</code> ã®ä½¿ç”¨æ–¹æ³• ï¼‰</p>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/organization/OrganizationRepository.java#L21-L29">OrganizationRepository.java:21-29</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£2-tenantattributesoptvalueasint-ã®å‰Šé™¤-153-170è¡Œç›®">ä¿®æ­£2: TenantAttributes.optValueAsInt() ã®å‰Šé™¤ (153-170è¡Œç›®)<a href="#ä¿®æ­£2-tenantattributesoptvalueasint-ã®å‰Šé™¤-153-170è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£2: TenantAttributes.optValueAsInt() ã®å‰Šé™¤ (153-170è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£2: TenantAttributes.optValueAsInt() ã®å‰Šé™¤ (153-170è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: å®Ÿè£…ã«å­˜åœ¨ã—ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ä¾‹ã«è¨˜è¼‰</p>
<p><strong>ä¿®æ­£å†…å®¹</strong>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- int tokenLifetime = attributes.optValueAsInt(&quot;token.access_token.lifetime_seconds&quot;, 3600);  // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ List&lt;String&gt; allowedScopes = attributes.optValueAsStringList(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+     &quot;oauth.allowed_scopes&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+     List.of(&quot;openid&quot;, &quot;profile&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ );  // âœ… å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/multi_tenancy/tenant/TenantAttributes.java#L25-L84">TenantAttributes.java:25-84</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£3-jose-jwtjwsjwejwk-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-353-417è¡Œç›®">ä¿®æ­£3: JOSE (JWT/JWS/JWE/JWK) ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (353-417è¡Œç›®)<a href="#ä¿®æ­£3-jose-jwtjwsjwejwk-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-353-417è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£3: JOSE (JWT/JWS/JWE/JWK) ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (353-417è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£3: JOSE (JWT/JWS/JWE/JWK) ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (353-417è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: æƒ³åƒã§æ›¸ã‹ã‚ŒãŸå­˜åœ¨ã—ãªã„ã‚¯ãƒ©ã‚¹ãƒ»API</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JwtCreator jwtCreator = new JwtCreator();            // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JwtVerifier jwtVerifier = new JwtVerifier(...);      // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Jwt jwt = jwtCreator.create(...);                    // âŒ å­˜åœ¨ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Claims claims = jwt.claims();                        // âŒ å­˜åœ¨ã—ãªã„</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JoseHandler joseHandler = new JoseHandler();                                    // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebSignature jws = JsonWebSignature.parse(jwsString);                      // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebSignatureVerifier verifier = new JsonWebSignatureVerifier(...);         // âœ… å®Ÿè£…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JsonWebTokenClaims claims = jws.claims();                                       // âœ… å®Ÿè£…</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ¤œè¨¼</strong>:</p>
<ul>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JoseHandler.java#L23-L40">JoseHandler.java:23-40</a></li>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JsonWebSignature.java#L28-L100">JsonWebSignature.java:28-100</a></li>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/jose/JsonWebToken.java#L24-L62">JsonWebToken.java:24-62</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£4-http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-419-511è¡Œç›®">ä¿®æ­£4: HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (419-511è¡Œç›®)<a href="#ä¿®æ­£4-http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-419-511è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£4: HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (419-511è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£4: HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (419-511è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: ç°¡ç•¥åŒ–ã•ã‚ŒãŸæƒ³åƒAPIã€å®Ÿè£…ã¨ã®ä¹–é›¢</p>
<p><strong>ä¿®æ­£å†…å®¹</strong>:</p>
<ul>
<li>Javaæ¨™æº– <code>java.net.http.HttpClient</code> ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…ã«ä¿®æ­£</li>
<li>OAuth 2.0è‡ªå‹•èªè¨¼ã€ãƒªãƒˆãƒ©ã‚¤ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã€Idempotencyã‚­ãƒ¼ç®¡ç†ã®èª¬æ˜è¿½åŠ </li>
<li>è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ§‹ç¯‰ãƒ‘ã‚¿ãƒ¼ãƒ³è¿½åŠ </li>
</ul>
<p><strong>æ¤œè¨¼</strong>: <a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/http/HttpRequestExecutor.java#L36-L165">HttpRequestExecutor.java:36-165</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£5-datasourceãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-513-723è¡Œç›®">ä¿®æ­£5: Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (513-723è¡Œç›®)<a href="#ä¿®æ­£5-datasourceãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-513-723è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£5: Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (513-723è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£5: Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (513-723è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: æœ€ã‚‚é‡è¦ãªDynamic Proxyæ©Ÿæ§‹ã®èª¬æ˜ãŒæ¬ è½ã€TransactionManagerã®ç›´æ¥ä½¿ç”¨ã‚’æ¨å¥¨ã™ã‚‹èª¤è§£</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ èª¤ã‚Š: é–‹ç™ºè€…ãŒç›´æ¥TransactionManagerã‚’å‘¼ã³å‡ºã™æƒ³å®š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TransactionManager.beginTransaction(DatabaseType.POSTGRESQL, tenantIdentifier);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  clientRepository.register(tenant, clientConfiguration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TransactionManager.commitTransaction();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TransactionManager.rollbackTransaction();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… æ­£ã—ã„: @Transactionã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ + Dynamic Proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transaction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserManagementEntryService implements UserManagementApi {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ProxyãŒè‡ªå‹•çš„ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // é–‹ç™ºè€…ã¯TransactionManagerã‚’æ„è­˜ã—ãªã„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Proxyä½œæˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UserManagementApi api = TenantAwareEntryServiceProxy.createProxy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new UserManagementEntryService(...),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserManagementApi.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    applicationDatabaseTypeProvider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li><code>@Transaction</code> ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®è©³ç´°èª¬æ˜</li>
<li><code>TenantAwareEntryServiceProxy</code> ã®å‹•ä½œãƒ•ãƒ­ãƒ¼ï¼ˆ8ã‚¹ãƒ†ãƒƒãƒ—ï¼‰</li>
<li><code>SqlExecutor</code> ã®ä½¿ç”¨æ–¹æ³•ã¨Repositoryå®Ÿè£…ä¾‹</li>
<li>ã€Œé–‹ç™ºè€…ãŒã™ã¹ãã“ã¨ã€ã€Œæ„è­˜ã—ãªãã¦ã‚ˆã„ã“ã¨ã€ã®æ˜ç¢ºãªåŒºåˆ¥</li>
<li>Proxyãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª¬æ˜ï¼ˆproxy/ï¼‰</li>
</ul>
<p><strong>æ¤œè¨¼</strong>:</p>
<ul>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/Transaction.java#L24-L28">Transaction.java:24-28</a></li>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/proxy/TenantAwareEntryServiceProxy.java#L29-L181">TenantAwareEntryServiceProxy.java:29-181</a></li>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/datasource/SqlExecutor.java#L23-L83">SqlExecutor.java:23-83</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£6-plugin-system-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-725-839è¡Œç›®">ä¿®æ­£6: Plugin System ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (725-839è¡Œç›®)<a href="#ä¿®æ­£6-plugin-system-ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚-725-839è¡Œç›®" class="hash-link" aria-label="ä¿®æ­£6: Plugin System ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (725-839è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£6: Plugin System ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨é¢æ”¹è¨‚ (725-839è¡Œç›®) ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h4>
<p><strong>å•é¡Œ</strong>: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–APIï¼ˆå­˜åœ¨ã—ãªã„ï¼‰ã‚’è¨˜è¼‰ã€é™çš„ãƒ¡ã‚½ãƒƒãƒ‰APIã®èª¬æ˜æ¬ è½</p>
<p><strong>ä¿®æ­£å‰</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âŒ å­˜åœ¨ã—ãªã„API: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ä¸å¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PluginLoader&lt;AccessTokenCustomClaimsCreator&gt; loader =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new PluginLoader&lt;&gt;(AccessTokenCustomClaimsCreator.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; creators = loader.load();  // âŒ load()ãƒ¡ã‚½ãƒƒãƒ‰ã¯å­˜åœ¨ã—ãªã„</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ä¿®æ­£å¾Œ</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// âœ… å®Ÿéš›ã®API: é™çš„ãƒ¡ã‚½ãƒƒãƒ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; internalCreators =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PluginLoader.loadFromInternalModule(AccessTokenCustomClaimsCreator.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;AccessTokenCustomClaimsCreator&gt; externalCreators =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PluginLoader.loadFromExternalModule(AccessTokenCustomClaimsCreator.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è¿½åŠ å†…å®¹</strong>:</p>
<ul>
<li>å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« vs å¤–éƒ¨JARã®åŒºåˆ¥ã¨ä½¿ã„åˆ†ã‘</li>
<li>URLClassLoaderæ©Ÿæ§‹ã®è©³ç´°èª¬æ˜</li>
<li>å°‚ç”¨PluginLoaderä¸€è¦§ï¼ˆAuditLogWriter, EmailSender, SmsSenderç­‰ï¼‰</li>
<li>META-INF/servicesãƒ•ã‚¡ã‚¤ãƒ«ã®å…·ä½“çš„ãªä½œæˆæ‰‹é †</li>
</ul>
<p><strong>æ¤œè¨¼</strong>:</p>
<ul>
<li><a href="/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/plugin/PluginLoader.java#L25-L91">PluginLoader.java:25-91</a></li>
<li>å°‚ç”¨ãƒ­ãƒ¼ãƒ€ãƒ¼: <code>libs/idp-server-platform/src/main/java/org/idp/server/platform/plugin/</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ­£ã®åŸå‰‡">ä¿®æ­£ã®åŸå‰‡<a href="#ä¿®æ­£ã®åŸå‰‡" class="hash-link" aria-label="ä¿®æ­£ã®åŸå‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ä¿®æ­£ã®åŸå‰‡ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p><strong>CLAUDE.mdã€Œæƒ³åƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆé˜²æ­¢ã€ã«åŸºã¥ãä¿®æ­£</strong>:</p>
<ol>
<li><strong>ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®åŸå‰‡</strong>: å¿…ãšã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…ˆã«ç¢ºèª</li>
<li><strong>æƒ…å ±æºè¨˜éŒ²</strong>: å‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»è¡Œç•ªå·ã‚’æ˜è¨˜</li>
<li><strong>æ®µéšçš„ç¢ºèª</strong>: ã‚¯ãƒ©ã‚¹åâ†’ãƒ¡ã‚½ãƒƒãƒ‰åâ†’ã‚·ã‚°ãƒãƒãƒ£ã®é †ã§æ®µéšçš„ã«ç¢ºèª</li>
<li><strong>ä¸æ˜ç‚¹æ˜ç¤º</strong>: æ¨æ¸¬ãƒ»ä»®å®šã‚’æ˜ç¢ºã«åŒºåˆ¥</li>
</ol>
<hr>
<p><strong>æƒ…å ±æº</strong>:</p>
<ul>
<li><code>libs/idp-server-platform/src/main/java/</code>é…ä¸‹ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰</li>
<li>CLAUDE.mdã€Œãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã€ã€Œå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã€ŒRepositoryå‘½åè¦å‰‡ã€ã€Œæƒ³åƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆé˜²æ­¢ã€</li>
<li>Issue #672ï¼ˆSQL Injectionä¿®æ­£ï¼‰</li>
<li>Issue #676ï¼ˆAIé–‹ç™ºè€…å‘ã‘çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã®ä½œæˆãƒ»æ”¹å–„ï¼‰</li>
</ul>
<p><strong>æœ€çµ‚æ›´æ–°</strong>: 2025-10-12
<strong>ç¢ºèªæ–¹æ³•</strong>: <code>find libs/idp-server-platform/src/main/java/org/idp/server/platform -type d -maxdepth 1</code>
<strong>ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½</strong>: 2025-10-12 - AIé–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå“è³ªæ”¹å–„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-12-platform.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_10_ai_developer/ai-11-core"><div class="pagination-nav__sublabel">å‰ã¸</div><div class="pagination-nav__label">idp-server-core - OAuth 2.0/OIDCæº–æ‹ ã‚³ã‚¢ã‚¨ãƒ³ã‚¸ãƒ³</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_10_ai_developer/ai-13-control-plane"><div class="pagination-nav__sublabel">æ¬¡ã¸</div><div class="pagination-nav__label">idp-server-control-plane - ç®¡ç†APIå¥‘ç´„å®šç¾©</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦" class="table-of-contents__link toc-highlight">ãƒ¢ã‚¸ãƒ¥ ãƒ¼ãƒ«æ¦‚è¦</a><ul><li><a href="#è²¬å‹™" class="table-of-contents__link toc-highlight">è²¬å‹™</a></li><li><a href="#ä¾å­˜é–¢ä¿‚" class="table-of-contents__link toc-highlight">ä¾å­˜é–¢ä¿‚</a></li></ul></li><li><a href="#ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ" class="table-of-contents__link toc-highlight">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ</a><ul><li><a href="#-ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ-multi_tenancy" class="table-of-contents__link toc-highlight">ğŸ”· ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ (<code>multi_tenancy/</code>)</a></li><li><a href="#-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æš—å·åŒ–" class="table-of-contents__link toc-highlight">ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æš—å·åŒ–</a></li><li><a href="#-ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ" class="table-of-contents__link toc-highlight">ğŸ”Œ ã‚¤ãƒ³ãƒ•ãƒ©çµ±åˆ</a></li><li><a href="#ï¸-ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½" class="table-of-contents__link toc-highlight">ğŸ› ï¸ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½</a></li><li><a href="#-ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£" class="table-of-contents__link toc-highlight">ğŸ“¦ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</a></li></ul></li><li><a href="#ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£…" class="table-of-contents__link toc-highlight">ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå®Ÿè£…</a><ul><li><a href="#tenant---ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«" class="table-of-contents__link toc-highlight">Tenant - ãƒ†ãƒŠãƒ³ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«</a></li><li><a href="#organization---çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«" class="table-of-contents__link toc-highlight">Organization - çµ„ç¹”ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«</a></li><li><a href="#organizationrepository---çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª" class="table-of-contents__link toc-highlight">OrganizationRepository - çµ„ç¹”ãƒªãƒã‚¸ãƒˆãƒª</a></li></ul></li><li><a href="#repository-ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°" class="table-of-contents__link toc-highlight">Repository ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°</a><ul><li><a href="#query--command-åˆ†é›¢-cqrs" class="table-of-contents__link toc-highlight">Query / Command åˆ†é›¢ (CQRS)</a></li><li><a href="#get-vs-find-å‘½åè¦å‰‡" class="table-of-contents__link toc-highlight">get() vs find() å‘½åè¦å‰‡</a></li></ul></li><li><a href="#ãƒ­ã‚°ç›£æŸ»ãƒ­ã‚°" class="table-of-contents__link toc-highlight">ãƒ­ã‚°ãƒ»ç›£æŸ»ãƒ­ã‚°</a><ul><li><a href="#loggerwrapper---ãƒ­ã‚®ãƒ³ã‚°" class="table-of-contents__link toc-highlight">LoggerWrapper - ãƒ­ã‚®ãƒ³ã‚°</a></li><li><a href="#auditlog---ç›£æŸ»ãƒ­ã‚°" class="table-of-contents__link toc-highlight">AuditLog - ç›£æŸ»ãƒ­ã‚°</a></li></ul></li><li><a href="#jose-jwtjwsjwejwk" class="table-of-contents__link toc-highlight">JOSE (JWT/JWS/JWE/JWK)</a><ul><li><a href="#josehandler---çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼" class="table-of-contents__link toc-highlight">JoseHandler - çµ±åˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼</a></li><li><a href="#jsonwebsignature-jws---ç½²åä»˜ãjwt" class="table-of-contents__link toc-highlight">JsonWebSignature (JWS) - ç½²åä»˜ãJWT</a></li><li><a href="#jsonwebtoken-plain-jwt" class="table-of-contents__link toc-highlight">JsonWebToken (Plain JWT)</a></li></ul></li><li><a href="#http-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ" class="table-of-contents__link toc-highlight">HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</a><ul><li><a href="#httprequestexecutor---httpå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³" class="table-of-contents__link toc-highlight">HttpRequestExecutor - HTTPå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³</a></li><li><a href="#åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹" class="table-of-contents__link toc-highlight">åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹</a></li><li><a href="#ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ" class="table-of-contents__link toc-highlight">ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãå®Ÿè¡Œ</a></li><li><a href="#oauthèªè¨¼ä»˜ãå®Ÿè¡Œ" class="table-of-contents__link toc-highlight">OAuthèªè¨¼ä»˜ãå®Ÿè¡Œ</a></li><li><a href="#è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ" class="table-of-contents__link toc-highlight">è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ</a></li></ul></li><li><a href="#datasourceãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³proxy" class="table-of-contents__link toc-highlight">Datasourceãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ»Proxy</a><ul><li><a href="#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦" class="table-of-contents__link toc-highlight">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦</a></li><li><a href="#transaction-ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" class="table-of-contents__link toc-highlight">@Transaction ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</a></li><li><a href="#tenantawareentryserviceproxy---dynamic-proxy" class="table-of-contents__link toc-highlight">TenantAwareEntryServiceProxy - Dynamic Proxy</a></li><li><a href="#transactionmanager---threadlocalç®¡ç†" class="table-of-contents__link toc-highlight">TransactionManager - ThreadLocalç®¡ç†</a></li><li><a href="#sqlexecutor---sqlå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼" class="table-of-contents__link toc-highlight">SqlExecutor - SQLå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼</a></li><li><a href="#row-level-security-rls-ã®è‡ªå‹•è¨­å®š" class="table-of-contents__link toc-highlight">Row Level Security (RLS) ã®è‡ªå‹•è¨­å®š</a></li><li><a href="#å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚" class="table-of-contents__link toc-highlight">å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚</a></li></ul></li><li><a href="#json-ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º" class="table-of-contents__link toc-highlight">JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ»ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º</a><ul><li><a href="#jsonconverter---jsonå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£" class="table-of-contents__link toc-highlight">JsonConverter - JSONå¤‰æ›ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</a></li></ul></li><li><a href="#dependency-injection---diã‚³ãƒ³ãƒ†ãƒŠ" class="table-of-contents__link toc-highlight">Dependency Injection - DIã‚³ãƒ³ãƒ†ãƒŠ</a><ul><li><a href="#applicationcomponentcontainer" class="table-of-contents__link toc-highlight">ApplicationComponentContainer</a></li><li><a href="#ä½¿ç”¨ä¾‹-authenticationdependencycontainer" class="table-of-contents__link toc-highlight">ä½¿ç”¨ä¾‹: AuthenticationDependencyContainer</a></li><li><a href="#protocolcontainer" class="table-of-contents__link toc-highlight">ProtocolContainer</a></li></ul></li><li><a href="#plugin-system" class="table-of-contents__link toc-highlight">Plugin System</a><ul><li><a href="#pluginloader---é™çš„ãƒ¡ã‚½ãƒƒãƒ‰api" class="table-of-contents__link toc-highlight">PluginLoader - é™çš„ãƒ¡ã‚½ãƒƒãƒ‰API</a></li><li><a href="#å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³" class="table-of-contents__link toc-highlight">å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</a></li><li><a href="#å¤–éƒ¨jarãƒ—ãƒ©ã‚°ã‚¤ãƒ³" class="table-of-contents__link toc-highlight">å¤–éƒ¨JARãƒ—ãƒ©ã‚°ã‚¤ãƒ³</a></li><li><a href="#urlclassloaderæ©Ÿæ§‹" class="table-of-contents__link toc-highlight">URLClassLoaderæ©Ÿæ§‹</a></li><li><a href="#å°‚ç”¨pluginloader" class="table-of-contents__link toc-highlight">å°‚ç”¨PluginLoader</a></li></ul></li><li><a href="#å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³-value-object" class="table-of-contents__link toc-highlight">å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ (Value Object)</a><ul><li><a href="#å®Ÿè£…ä¾‹" class="table-of-contents__link toc-highlight">å®Ÿè£…ä¾‹</a></li><li><a href="#ãƒ¡ãƒªãƒƒãƒˆ" class="table-of-contents__link toc-highlight">ãƒ¡ãƒªãƒƒãƒˆ</a></li></ul></li><li><a href="#ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³" class="table-of-contents__link toc-highlight">ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³</a><ul><li><a href="#-1-stringæ¿«ç”¨" class="table-of-contents__link toc-highlight">âŒ 1. Stringæ¿«ç”¨</a></li><li><a href="#-2-mapæ¿«ç”¨" class="table-of-contents__link toc-highlight">âŒ 2. Mapæ¿«ç”¨</a></li><li><a href="#-3-platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥" class="table-of-contents__link toc-highlight">âŒ 3. Platformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯æ··å…¥</a></li></ul></li><li><a href="#ã¾ã¨ã‚" class="table-of-contents__link toc-highlight">ã¾ã¨ã‚</a><ul><li><a href="#idp-server-platform-ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ" class="table-of-contents__link toc-highlight">idp-server-platform ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®5ã¤ã®ãƒã‚¤ãƒ³ãƒˆ</a></li><li><a href="#æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—" class="table-of-contents__link toc-highlight">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</a></li></ul></li><li><a href="#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´" class="table-of-contents__link toc-highlight">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£å±¥æ­´</a><ul><li><a href="#2025-10-12-å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£" class="table-of-contents__link toc-highlight">2025-10-12: å®Ÿè£…æ¤œè¨¼ã«åŸºã¥ãå¤§è¦æ¨¡ä¿®æ­£</a></li><li><a href="#ä¿®æ­£ã®åŸå‰‡" class="table-of-contents__link toc-highlight">ä¿®æ­£ã®åŸå‰‡</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>