<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">FIDO2・パスキー・Discoverable Credentialの基本 | IdP-Server Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="FIDO2・パスキー・Discoverable Credentialの基本 | IdP-Server Documentation"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/idp-server/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential" hreflang="ja"><link data-rh="true" rel="alternate" href="https://hirokazu-kobayashi-koba-hiro.github.io/idp-server/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/idp-server/blog/rss.xml" title="IdP-Server Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/idp-server/blog/atom.xml" title="IdP-Server Documentation Atom Feed"><link rel="stylesheet" href="/idp-server/assets/css/styles.f434a3d5.css">
<script src="/idp-server/assets/js/runtime~main.aff458ff.js" defer="defer"></script>
<script src="/idp-server/assets/js/main.b847227d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/idp-server/"><div class="navbar__logo"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/idp-server/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IdP-Server</b></a><a class="navbar__item navbar__link" href="/idp-server/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/idp-server/docs/content_07_reference/api-reference">Api Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hirokazu-kobayashi-koba-hiro/idp-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/introduction">はじめに</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/idp-server/docs/document-index">📚 ドキュメント索引</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_01_intro/intro-01-tech-overview">製品紹介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_02_quickstart/quickstart-01-getting-started">クイックスタート</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/idp-server/docs/content_03_concepts/concept-01-multi-tenant">コア概念</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-01-multi-tenant">マルチテナント</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-02-id-management">ID（ユーザー）管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-03-id-verified">身元確認済みID</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-04-enterprise-id">エンタープライズID</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-05-authentication-policy">認証ポリシー</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-06-token-management">トークン管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-07-session-management">セッション管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-08-mfa">多要素認証（MFA）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-09-custom-claims">カスタムクレーム・スコープ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-10-control-plane">コントロールプレーン</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-11-security-events">セキュリティイベント・フック</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-12-authorization">認可</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-13-audit-compliance">監査ログ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-14-grant-management">認可許諾管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-15-operations">運用・保守</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-16-external-service-integration">外部サービス連携</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-17-application-logging">アプリケーションログ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-18-id-token">IDトークン（ID Token）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/concept-19-client">クライアント（Client）</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-01-identity-management-basics">基礎（読み物）</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-01-identity-management-basics">アイデンティティ管理の基礎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-02-identity-management-examples">身近な実例で学ぶID管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-03-identity-trends">eKYC・FIDO・多要素認証の最新トレンド</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-04-modern-web-authz-authn">現代Webに求められる認証・認可</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-05-oauth-oidc-why-needed">なぜOAuth 2.0 / OpenID Connectが必要か</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-06-oauth2-authorization">OAuth 2.0の「認可」の仕組み</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-07-oauth2-roles">OAuth 2.0の詳細</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-08-oauth2-authorization-code-flow">基本フロー：Authorization Code Flow（認可コードグラント）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-09-oauth2-other-flows">その他のOAuth 2.0フロータイプ（PKCE, Client Credentials, Implicit など）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-10-oauth2-token-types">OAuth 2.0のトークンの種類と用途</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-11-oauth-oidc-basics">OAuth 2.0 / OpenID Connectの基礎知識</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-12-openid-connect-detail">OpenID Connectの詳細</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-13-id-token-jwt">IDトークンとJWT（JSON Web Token）について</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-14-oidc-claim-design">OIDCユーザー属性（クレーム）設計</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-15-oidc-discovery-dynamic-registration-standard">OIDC Discovery &amp; Dynamic Registration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-16-fido-webauthn-passwordless">FIDO2・WebAuthn パスワードレス認証</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/idp-server/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential">FIDO2・パスキー・Discoverable Credentialの基本</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow">認可プロトコル</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_05_how-to/index">How-to（設定・運用レシピ）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_06_developer-guide/getting-started/service-overview">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_07_reference/api-reference">リファレンス</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_08_ops/ops-01-test-strategy">運用（Ops）</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_09_project/project-01-faq">プロジェクト</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/idp-server/docs/content_10_ai_developer/ai-01-index">AI</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/idp-server/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">コア概念</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">基礎（読み物）</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">FIDO2・パスキー・Discoverable Credentialの基本</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>FIDO2・パスキー・Discoverable Credentialの基本</h1></header>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=" 概要">概要<a href="#概要" class="hash-link" aria-label="概要 への直接リンク" title="概要 への直接リンク">​</a></h2>
<p>FIDO2におけるパスキーとDiscoverable Credentialは、しばしば混同されがちですが、技術的には異なる概念です。</p>
<p>このドキュメントでは、<strong>パスキーとDiscoverable Credentialの正確な定義</strong>、<strong>認証フローの違い</strong>、<strong>実装時のパラメータ選択</strong>について詳細に解説します。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fido2とは">FIDO2とは<a href="#fido2とは" class="hash-link" aria-label="FIDO2とは への直接リンク" title="FIDO2とは への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fido2の構成要素">FIDO2の構成要素<a href="#fido2の構成要素" class="hash-link" aria-label="FIDO2の構成要素 への直接リンク" title="FIDO2の構成要素 への直接リンク">​</a></h3>
<p>FIDO2は以下の2つの標準で構成されています：</p>
<ul>
<li><strong>WebAuthn (Web Authentication API)</strong>: Webブラウザ向けのAPI仕様</li>
<li><strong>CTAP (Client to Authenticator Protocol)</strong>: 認証器とクライアント間の通信プロトコル</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="パスワードレス認証の実現">パスワードレス認証の実現<a href="#パスワードレス認証の実現" class="hash-link" aria-label="パスワードレス認証の実現 への直接リンク" title="パスワードレス認証の実現 への直接リンク">​</a></h3>
<p>FIDO2により、従来のパスワード認証を以下の方式で置き換えることができます：</p>
<ul>
<li><strong>公開鍵暗号方式</strong>: サーバーに秘密情報を保存しない</li>
<li><strong>生体認証</strong>: 指紋認証、顔認証、PIN等による本人確認</li>
<li><strong>フィッシング耐性</strong>: Origin Bindingによる偽サイト対策</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="パスキーとは">パスキーとは<a href="#パスキーとは" class="hash-link" aria-label="パスキーとは への直接リンク" title="パスキーとは への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技術的定義">技術的定義<a href="#技術的定義" class="hash-link" aria-label="技術的定義 への直接リンク" title="技術的定義 への直接リンク">​</a></h3>
<p>パスキーは、<strong>FIDO2/WebAuthn技術を使用した認証資格情報の総称</strong>です。</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="パスキーの共通特徴">パスキーの共通特徴<a href="#パスキーの共通特徴" class="hash-link" aria-label="パスキーの共通特徴 への直接リンク" title="パスキーの共通特徴 への直接リンク">​</a></h3>
<ul>
<li><strong>公開鍵暗号方式</strong>: サイトごとに異なるキーペアを生成</li>
<li><strong>フィッシング耐性</strong>: 登録したOriginでのみ動作</li>
<li><strong>生体認証対応</strong>: Touch ID、Face ID、Windows Hello等</li>
<li><strong>デバイス間同期</strong>: プラットフォーム提供者による同期機能（Apple ID、Googleアカウント等）</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="discoverable-credentialとは">Discoverable Credentialとは<a href="#discoverable-credentialとは" class="hash-link" aria-label="Discoverable Credentialとは への直接リンク" title="Discoverable Credentialとは への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技術的定義-1">技術的定義<a href="#技術的定義-1" class="hash-link" aria-label="技術的定義 への直接リンク" title="技術的定義 への直接リンク">​</a></h3>
<p>Discoverable Credential（<strong>Resident Key</strong>とも呼ばれる）は、<strong>認証器内にユーザー情報も含めて保存される特別なパスキー</strong>です。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主な特徴">主な特徴<a href="#主な特徴" class="hash-link" aria-label="主な特徴 への直接リンク" title="主な特徴 への直接リンク">​</a></h3>
<ul>
<li><strong>認証器内保存</strong>: ユーザーID、表示名、アカウント情報を認証器に保存</li>
<li><strong>ユーザーID入力不要</strong>: 生体認証のみでログイン可能</li>
<li><strong>アカウント選択</strong>: 複数アカウントがある場合はユーザーが選択</li>
<li><strong>容量制限</strong>: 認証器の保存容量に制限あり</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webauthn仕様におけるパラメータ">WebAuthn仕様におけるパラメータ<a href="#webauthn仕様におけるパラメータ" class="hash-link" aria-label="WebAuthn仕様におけるパラメータ への直接リンク" title="WebAuthn仕様におけるパラメータ への直接リンク">​</a></h3>
<p>WebAuthn仕様では、Discoverable Credentialの制御に以下のパラメータが定義されています：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="標準仕様webauthn-level-2以降">標準仕様（WebAuthn Level 2以降）<a href="#標準仕様webauthn-level-2以降" class="hash-link" aria-label="標準仕様（WebAuthn Level 2以降） への直接リンク" title="標準仕様（WebAuthn Level 2以降） への直接リンク">​</a></h4>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 標準的なresidentKeyパラメータ（WebAuthn Level 2以降）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> publicKeyCredentialCreationOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">authenticatorSelection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">residentKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// 標準パラメータ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">userVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="residentkeyパラメータの値webauthn標準"><code>residentKey</code>パラメータの値（WebAuthn標準）<a href="#residentkeyパラメータの値webauthn標準" class="hash-link" aria-label="residentkeyパラメータの値webauthn標準 への直接リンク" title="residentkeyパラメータの値webauthn標準 への直接リンク">​</a></h4>
<table><thead><tr><th>値</th><th>意味</th><th>動作</th></tr></thead><tbody><tr><td><code>&quot;required&quot;</code></td><td>Discoverable Credential必須</td><td>対応していない認証器では登録失敗</td></tr><tr><td><code>&quot;preferred&quot;</code></td><td>可能ならDiscoverable Credential</td><td>対応していれば作成、未対応でも通常のパスキーとして作成</td></tr><tr><td><code>&quot;discouraged&quot;</code></td><td>通常のパスキー</td><td>Discoverable Credentialは作成しない</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="レガシーパラメータwebauthn-level-1">レガシーパラメータ（WebAuthn Level 1）<a href="#レガシーパラメータwebauthn-level-1" class="hash-link" aria-label="レガシー  パラメータ（WebAuthn Level 1） への直接リンク" title="レガシーパラメータ（WebAuthn Level 1） への直接リンク">​</a></h4>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 後方互換性のためのレガシーパラメータ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> publicKeyCredentialCreationOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">authenticatorSelection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">requireResidentKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// レガシーパラメータ（boolean  型）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">userVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="通常のパスキーとdiscoverable-credentialの違い">通常のパスキーとDiscoverable Credentialの違い<a href="#通常のパスキーとdiscoverable-credentialの違い" class="hash-link" aria-label="通常のパスキーとDiscoverable Credentialの違い への直接リンク" title="通常のパスキーとDiscoverable Credentialの違い への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="認証フロー比較">認証フロー比較<a href="#認証フロー比較" class="hash-link" aria-label="認証フロー比較 への直接リンク" title="認証フロー比較 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="サイドバイサイド比較">サイドバイサイド比較<a href="#サイドバイサイド比較" class="hash-link" aria-label="サイドバイサイド比較 への直接リンク" title="サイドバイサイド比較 への直接リンク">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="詳細シーケンス図">詳細シーケンス図<a href="#詳細シーケンス図" class="hash-link" aria-label="詳細シーケンス図 への直接リンク" title="詳細シーケンス図 への直接リンク">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="通常のパスキーnon-discoverable-credential">通常のパスキー（Non-Discoverable Credential）<a href="#通常のパスキーnon-discoverable-credential" class="hash-link" aria-label="通常のパスキー（Non-Discoverable Credential） への直接リンク" title="通常のパスキー（Non-Discoverable Credential） への直接リンク">​</a></h5>
<!-- -->
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="discoverable-credential">Discoverable Credential<a href="#discoverable-credential" class="hash-link" aria-label="Discoverable Credential への直接リンク" title="Discoverable Credential への直接リンク">​</a></h5>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ユースケース比較表">ユースケース比較表<a href="#ユースケース比較表" class="hash-link" aria-label="ユースケース比較表 への直接リンク" title="ユースケース比較表 への直接リンク">​</a></h3>
<table><thead><tr><th>特徴</th><th>通常のパスキー</th><th>Discoverable Credential</th></tr></thead><tbody><tr><td><strong>ユーザーID入力</strong></td><td>必要</td><td>不要</td></tr><tr><td><strong>UX</strong></td><td>ユーザーID + 生体認証</td><td>生体認証のみ</td></tr><tr><td><strong>認証器の容量</strong></td><td>影響なし</td><td>保存数に制限あり</td></tr><tr><td><strong>適用シーン</strong></td><td>2要素認証の2要素目</td><td>パスワードレスログイン</td></tr><tr><td><strong>実装複雑度</strong></td><td>標準的</td><td>やや複雑（アカウント管理）</td></tr><tr><td><strong>セキュリティ</strong></td><td>高い</td><td>高い</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="実装における注意点">実装における注意点<a href="#実装における注意点" class="hash-link" aria-label="実装における注意点 への直接リンク" title="実装における注意点 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-requireresidentkeyとresidentkeyの関係">1. <code>requireResidentKey</code>と<code>residentKey</code>の関係<a href="#1-requireresidentkeyとresidentkeyの関係" class="hash-link" aria-label="1-requireresidentkeyとresidentkeyの関係 への直接リンク" title="1-requireresidentkeyとresidentkeyの関係 への直接リンク">​</a></h3>
<p>WebAuthn仕様における新旧パラメータの関係：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="webauthn標準における推奨パラメータ">WebAuthn標準における推奨パラメータ<a href="#webauthn標準における推奨パラメータ" class="hash-link" aria-label="WebAuthn標準における推奨パラメータ への直接リンク" title="WebAuthn標準における推奨パラメータ への直接リンク">​</a></h4>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ✅ WebAuthn Level 2以降の標準パラメータ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">authenticatorSelection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">residentKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">userVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="実装における現実的な選択">実装における現実的な選択<a href="#実装における現実的な選択" class="hash-link" aria-label="実装における現実的な選択 への直接リンク" title="実装における現実的な選択 への直接リンク">​</a></h4>
<p>多くの実装（idp-serverを含む）では、まだレガシーパラメータが使用されています：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 現在多くの実装で使用されているレガシーパラメータ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">authenticatorSelection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">requireResidentKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// boolean型で制御</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">userVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>注意</strong>: 実装環境に応じて適切なパラメータを選択してください。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-ユーザー検証user-verification">2. ユーザー検証（User Verification）<a href="#2-ユーザー検証user-verification" class="hash-link" aria-label="2. ユーザー検証（User Verification） への直接リンク" title="2. ユーザー検証（User Verification） への直接リンク">​</a></h3>
<p>Discoverable Credentialでは<strong>ユーザー検証が必須</strong>となることが多い：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">authenticatorSelection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">residentKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">userVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;required&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 必須に設定</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-認証器の容量制限">3. 認証器の容量制限<a href="#3-認証器の容量制限" class="hash-link" aria-label="3. 認証器の容量制限 への直接リンク" title="3. 認証器の容量制限 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="セキュリティキー">セキュリティキー<a href="#セキュリティキー" class="hash-link" aria-label="セキュリティキー への直接リンク" title="セキュリティキー への直接リンク">​</a></h4>
<ul>
<li><strong>容量</strong>: 通常25〜100個程度のDiscoverable Credentialを保存可能</li>
<li><strong>対策</strong>: 企業環境では容量管理が重要</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="プラットフォーム認証器">プラットフォーム認証器<a href="#プラットフォーム認証器" class="hash-link" aria-label="プラットフォーム認証器 への直接リンク" title="プラットフォーム認証器 への直接リンク">​</a></h4>
<ul>
<li><strong>容量</strong>: クラウド同期により実質無制限</li>
<li><strong>例</strong>: iCloudキーチェーン、Google Password Manager</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-ユーザー情報の設定">4. ユーザー情報の設定<a href="#4-ユーザー情報の設定" class="hash-link" aria-label="4. ユーザー情報の設定 への直接リンク" title="4. ユーザー情報の設定 への直接リンク">​</a></h3>
<p>Discoverable Credentialでは、認証器に保存するユーザー情報を適切に設定：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TextEncoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user123&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// ユーザーの一意ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// ユーザー名（メールアドレス等）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">displayName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;田中太郎&quot;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// 表示名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>プライバシー考慮事項</strong>:</p>
<ul>
<li><code>displayName</code>には個人を特定できる情報を含めない（推奨）</li>
<li>必要最小限の情報のみ保存</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="セキュリティ考慮事項">セキュリティ考慮事項<a href="#セキュリティ考慮事項" class="hash-link" aria-label="セキュリティ考慮事項 への直接リンク" title="セキュリティ考慮事項 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="discoverable-credential特有のリスク">Discoverable Credential特有のリスク<a href="#discoverable-credential特有のリスク" class="hash-link" aria-label="Discoverable Credential特有のリスク への直接リンク" title="Discoverable Credential特有のリスク への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-ユーザー列挙攻撃user-enumeration">1. ユーザー列挙攻撃（User Enumeration）<a href="#1-ユーザー列挙攻撃user-enumeration" class="hash-link" aria-label="1. ユーザー列挙攻撃（User Enumeration） への直接リンク" title="1. ユーザー列挙攻撃（User Enumeration） への直接リンク">​</a></h4>
<ul>
<li><strong>リスク</strong>: デバイスに保存されたアカウント一覧からユーザー情報が露出</li>
<li><strong>対策</strong>:<!-- -->
<ul>
<li>表示名に個人識別情報を含めない</li>
<li>匿名化されたユーザーIDの使用</li>
<li>デバイスロック機能の必須化</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-認証器容量制限">2. 認証器容量制限<a href="#2-認証器容量制限" class="hash-link" aria-label="2. 認証器容量制限 への直接リンク" title="2. 認証器容量制限 への直接リンク">​</a></h4>
<ul>
<li><strong>リスク</strong>: セキュリティキーの容量制限（25〜100個程度）によるサービス拒否</li>
<li><strong>対策</strong>:<!-- -->
<ul>
<li>容量監視とアラート機能</li>
<li>不要なクレデンシャルの定期削除</li>
<li>企業環境での容量管理ポリシー</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-認証情報の永続化リスク">3. 認証情報の永続化リスク<a href="#3-認証情報の永続化リスク" class="hash-link" aria-label="3. 認証情報の永続化リスク への直接リンク" title="3. 認証情報の永続化リスク への直接リンク">​</a></h4>
<ul>
<li><strong>リスク</strong>: デバイス内に保存された認証情報  の長期保持</li>
<li><strong>対策</strong>:<!-- -->
<ul>
<li>定期的なクレデンシャル更新</li>
<li>アクセス頻度による自動削除</li>
<li>組織レベルでの認証ポリシー管理</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="デバイス紛失時の対応">デバイス紛失時の対応<a href="#デバイス紛失時の対応" class="hash-link" aria-label="デバイス紛失時の対応 への直接リンク" title="デバイス紛失時の対応 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-クラウド同期有効時">1. クラウド同期有効時<a href="#1-クラウド同期有効時" class="hash-link" aria-label="1. クラウド同期有効時 への直接リンク" title="1. クラウド同期有効時 への直接リンク">​</a></h4>
<ul>
<li><strong>復旧</strong>: 新デバイスでアカウント設定後、自動的にパスキーが復元</li>
<li><strong>対象</strong>: iOS（iCloud）、Android（Google）、サードパーティ（1Password等）</li>
<li><strong>注意</strong>: クラウドアカウント侵害時の影響範囲が大きい</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-クラウド同期無効時セキュリティキー等">2. クラウド同期無効時（セキュリティキー等）<a href="#2-クラウド同期無効時セキュリティキー等" class="hash-link" aria-label="2. クラウド同期無効時（セキュリティキー等） への直接リンク" title="2. クラウド同期無効時（セキュリティキー等） への直接リンク">​</a></h4>
<ul>
<li><strong>復旧不可</strong>: デバイス紛失でパスキーも失われる</li>
<li><strong>対策</strong>: 複数のバックアップ認証手段を事前準備</li>
<li><strong>推奨</strong>: 複数の独立した認証器の登録</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="プライバシー保護">プライバシー保護<a href="#プライバシ ー保護" class="hash-link" aria-label="プライバシー保護 への直接リンク" title="プライバシー保護 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="認証器に保存される情報">認証器に保存される情報<a href="#認証器に保存される情報" class="hash-link" aria-label="認証器に保存される情報 への直接リンク" title="認証器に保存される情報 への直接リンク">​</a></h4>
<ul>
<li>ユーザーID（暗号化された形）</li>
<li>表示名</li>
<li>アイコンURL（任意）</li>
<li>サイト情報（Origin）</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="推奨事項">推奨事項<a href="#推奨事項" class="hash-link" aria-label="推奨事項 への直接リンク" title="推奨事項 への直接リンク">​</a></h4>
<ul>
<li><strong>最小限の情報</strong>: 個人を特定できる情報は避ける</li>
<li><strong>匿名化</strong>: 可能な限り匿名化された識別子を使用</li>
<li><strong>データ最小化</strong>: 必要最小限のユーザー情報のみ保存</li>
<li><strong>プライバシーポリシー</strong>: ユーザーへの適切な情報開示</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ux考慮事項とフォールバック戦略">UX考慮事項とフォールバック戦略<a href="#ux考慮事項とフォールバック戦略" class="hash-link" aria-label="UX考慮事項とフォールバック戦略 への直接リンク" title="UX考慮事項とフォールバック戦略 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ユーザー体験設計">ユーザー体験設計<a href="#ユーザー体験設計" class="hash-link" aria-label="ユーザー体験設計 への直接リンク" title="ユーザー体験設計 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-初回登録時のガイダンス">1. 初回登録時のガイダンス<a href="#1-初回登録時のガイダンス" class="hash-link" aria-label="1. 初回登録時のガイダンス への直接リンク" title="1. 初回登録時のガイダンス への直接リンク">​</a></h4>
<ul>
<li><strong>明確な説明</strong>: Discoverable Credentialの利点とリスクの説明</li>
<li><strong>ステップバイステップ</strong>: 登録プロセスの視覚的なガイド</li>
<li><strong>デバイス選択</strong>: Platform認証器 vs Roaming認証器の選択支援</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-認証失敗時の対応">2. 認証失敗時の対応<a href="#2-認証失敗時の対応" class="hash-link" aria-label="2. 認証失敗時の対応 への直接リンク" title="2. 認証失敗時の対応 への直接リンク">​</a></h4>
<ul>
<li><strong>エラーメッセージ</strong>: わかりやすいエラー説明と対処法</li>
<li><strong>段階的フォールバック</strong>: 複数の認証手段への誘導</li>
<li><strong>ヘルプガイド</strong>: 認証器トラブルシューティング</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-複数アカウント管理">3. 複数アカウント管理<a href="#3-複数アカウント管理" class="hash-link" aria-label="3. 複数アカウント管理 への直接リンク" title="3. 複数アカウント管理 への直接リンク">​</a></h4>
<ul>
<li><strong>アカウント識別</strong>: 明確なアカウント表示（アイコン、名前）</li>
<li><strong>アカウント切り替え</strong>: 直感的なアカウント選択UI</li>
<li><strong>アカウント削除</strong>: 不要なアカウントの安全な削除機能</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="フォールバック戦略">フォールバック戦略<a href="#フォールバック戦略" class="hash-link" aria-label="フォールバック戦略 への直接リンク" title="フォールバック戦略 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="レベル1-代替認証器">レベル1: 代替認証器<a href="#レベル1-代替認証器" class="hash-link" aria-label="レベル1: 代替認証器 への直接リンク" title="レベル1: 代替認証器 への直接リンク">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="レベル2-従来の認証方式">レベル2: 従来の認証方式<a href="#レベル2-従来の認証方式" class="hash-link" aria-label="レベル2: 従来の認証方式 への直接リンク" title="レベル2: 従来の認証方式 への直接リンク">​</a></h4>
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="レベル3-アカウント回復">レベル3: アカウント回復<a href="#レベル3-アカウント回復" class="hash-link" aria-label="レベル3: アカウント回復 への直接リンク" title="レベル3: アカウント回復 への直接リンク">​</a></h4>
<ul>
<li><strong>バックアップコード</strong>: 事前に発行されたワンタイムコード</li>
<li><strong>管理者による回復</strong>: 企業環境でのアカウント回復</li>
<li><strong>身元確認</strong>: 本人確認書類による手動回復</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="認証エラーハンドリング">認証エラーハンドリング<a href="#認証エラーハンドリング" class="hash-link" aria-label="認証エラーハンドリング への直接リンク" title="認証エラーハンドリング への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="一般的なエラーと対処法">一般的なエラーと対処法<a href="#一般的なエラーと対処法" class="hash-link" aria-label="一般的なエラーと対処法 への直接リンク" title="一般的なエラーと対処法 への直接リンク">​</a></h4>
<table><thead><tr><th>エラー</th><th>原因</th><th>ユーザー向け対処法</th><th>システム側対応</th></tr></thead><tbody><tr><td><strong>認証器未  検出</strong></td><td>デバイス未接続</td><td>デバイス接続確認</td><td>接続状態監視</td></tr><tr><td><strong>ユーザー検証失敗</strong></td><td>生体認証失敗</td><td>再試行・PIN入力</td><td>試行回数制限</td></tr><tr><td><strong>タイムアウト</strong></td><td>応答時間超過</td><td>操作の再実行</td><td>タイムアウト延長</td></tr><tr><td><strong>アカウント未登録</strong></td><td>認証器に未保存</td><td>新規登録・代替認証</td><td>登録状態確認</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ブラウザデバイス互換性">ブラウザ・デバイス互換性<a href="#ブラウザデバイス互換性" class="hash-link" aria-label="ブラウザ・デバイス互換性 への直接リンク" title="ブラウザ・デバイス互換性 への直接リンク">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="サポート状況">サポート状況<a href="#サポート状況" class="hash-link" aria-label="サポート状況 への直接リンク" title="サポート状況 への直接リンク">​</a></h4>
<table><thead><tr><th>ブラウザ</th><th>Platform認証器</th><th>Roaming認証器</th><th>制限事項</th></tr></thead><tbody><tr><td><strong>Chrome 67+</strong></td><td>✅ 完全対応</td><td>✅ 完全対応</td><td>なし</td></tr><tr><td><strong>Safari 14+</strong></td><td>✅ Touch ID対応</td><td>✅ 制限あり</td><td>iOSのみ完全対応</td></tr><tr><td><strong>Firefox 60+</strong></td><td>✅ 対応</td><td>✅ 対応</td><td>一部機能制限</td></tr><tr><td><strong>Edge 18+</strong></td><td>✅ Windows Hello</td><td>✅ 対応</td><td>Windows環境推奨</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="osデバイス対応">OS・デバイス対応<a href="#osデバイス対応" class="hash-link" aria-label="OS・デバイス対応 への直接リンク" title="OS・デバイス対応 への直接リンク">​</a></h4>
<table><thead><tr><th>OS</th><th>Platform認証器</th><th>特徴</th><th>制限事項</th></tr></thead><tbody><tr><td><strong>iOS 16+</strong></td><td>Touch ID, Face ID</td><td>iCloud同期</td><td>Safari必須</td></tr><tr><td><strong>Android 9+</strong></td><td>指紋認証, 顔認証</td><td>Google同期</td><td>Chrome推奨</td></tr><tr><td><strong>Windows 10+</strong></td><td>Windows Hello</td><td>Microsoft同期</td><td>Edge/Chrome対応</td></tr><tr><td><strong>macOS</strong></td><td>Touch ID</td><td>iCloud同期</td><td>Safari/Chrome対応</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="非対応環境への対応">非対応環境への対応<a href="#非対応環境への対応" class="hash-link" aria-label="非対応環境への対応 への直接リンク" title="非対応環境への対応 への直接リンク">​</a></h4>
<ol>
<li><strong>機能検出</strong>: WebAuthn API対応の事前チェック</li>
<li><strong>代替認証</strong>: パスワード + SMS認証へのフォールバック</li>
<li><strong>ユーザー通知</strong>: 対応ブラウザ・OSへのアップグレード推奨</li>
<li><strong>段階的移行</strong>: 対応環境から順次パスキー導入</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="idp-serverでのサポート状況">idp-serverでのサポート状況<a href="#idp-serverでのサポート状況" class="hash-link" aria-label="idp-serverでのサポート状況 への直接リンク" title="idp-serverでのサポート状況 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本機能サポート">基本機能サポート<a href="#基本機能サポート" class="hash-link" aria-label="基本機能サポート への直接リンク" title="基本機能サポート への直接リンク">​</a></h3>
<table><thead><tr><th>機能</th><th>サポート状況</th><th>実装方式</th></tr></thead><tbody><tr><td><strong>基本認証フロー</strong></td><td></td><td></td></tr><tr><td>Discoverable Credential登録</td><td>✅ 対応済み</td><td><code>requireResidentKey: true</code></td></tr><tr><td>通常のパスキー登録</td><td>✅ 対応済み</td><td><code>requireResidentKey: false</code></td></tr><tr><td><strong>認証器タイプ</strong></td><td></td><td></td></tr><tr><td>Platform Authenticator</td><td>✅ 対応済み</td><td>ブラウザ対応デバイス</td></tr><tr><td>Roaming Authenticator</td><td>✅ 対応済み</td><td>セキュリティキー対応</td></tr><tr><td><strong>パラメータ制御</strong></td><td></td><td></td></tr><tr><td>requireResidentKeyパラメータ</td><td>✅ 対応済み</td><td>WebAuthn4jConfiguration</td></tr><tr><td>residentKeyパラメータ</td><td>🚧 今後対応予定</td><td>WebAuthn Level 2準拠予定</td></tr><tr><td>userVerification制御</td><td>✅ 対応済み</td><td>認証強度選択可能</td></tr></tbody></table>
<blockquote>
<p><strong>⚠️ 重要</strong>: idp-serverは現在<code>requireResidentKey</code>（boolean型）のみサポート。
WebAuthn標準の<code>residentKey</code>（enum型）は今後のバージョンで対応予定です。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webauthn4j連携">WebAuthn4j連携<a href="#webauthn4j連携" class="hash-link" aria-label="WebAuthn4j連携 への直接リンク" title="WebAuthn4j連携 への直接リンク">​</a></h3>
<p>idp-serverは<a href="https://github.com/webauthn4j/webauthn4j" target="_blank" rel="noopener noreferrer">WebAuthn4j</a>ライブラリを使用してWebAuthn機能を実装：</p>
<ul>
<li><strong>Discoverable Credential対応</strong>: WebAuthn4j 0.9.0以降で完全対応</li>
<li><strong>仕様準拠</strong>: WebAuthn Level 3仕様に準拠</li>
<li><strong>拡張機能</strong>: カスタム認証ロジックのプラグイン対応</li>
</ul>
<blockquote>
<p><strong>📝 実装詳細</strong>: 具体的な設定方法や実装例については、
<a href="/idp-server/docs/content_06_developer-guide/configuration/authn/webauthn">WebAuthn設定ガイド</a>を参照してください。</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="仕様参照">仕様参照<a href="#仕様参照" class="hash-link" aria-label="仕様参照 への直接リンク" title="仕様参照 への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="w3cfido仕様">W3C・FIDO仕様<a href="#w3cfido仕様" class="hash-link" aria-label="W3C・FIDO仕様 への直接リンク" title="W3C・FIDO仕様 への直接リンク">​</a></h3>
<ul>
<li><strong><a href="https://www.w3.org/TR/webauthn-3/" target="_blank" rel="noopener noreferrer">WebAuthn Level 3</a></strong> - W3C WebAuthn最新仕様</li>
<li><strong><a href="https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-residentkey" target="_blank" rel="noopener noreferrer">WebAuthn Level 3 - Resident Key</a></strong> - residentKeyパラメータ詳細</li>
<li><strong><a href="https://fidoalliance.org/specs/fido-v2.1-ps-20210615/fido-client-to-authenticator-protocol-v2.1-ps-errata-20220621.html" target="_blank" rel="noopener noreferrer">FIDO2 Client to Authenticator Protocol</a></strong> - CTAP仕様</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="関連ドキュメント">関連ドキュメント<a href="#関連ドキュメント" class="hash-link" aria-label="関連ドキュメント への直接リンク" title="関連ドキュメント への直接リンク">​</a></h3>
<ul>
<li><strong><a href="/idp-server/docs/content_03_concepts/basic/basic-16-fido-webauthn-passwordless">FIDO2・WebAuthn パスワードレス認証</a></strong> - FIDO2/WebAuthnの基礎概念</li>
<li><strong><a href="/idp-server/docs/content_06_developer-guide/configuration/authn/webauthn">WebAuthn設定</a></strong> - idp-serverでのWebAuthn設定方法</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="まとめ">まとめ<a href="#まとめ" class="hash-link" aria-label="まとめ への直接リンク" title="ま  とめ への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="重要なポイント">重要なポイント<a href="#重要なポイント" class="hash-link" aria-label="重要なポイント への直接リンク" title="重要なポイント への直接リンク">​</a></h3>
<ol>
<li>
<p><strong>定義の違い</strong>:</p>
<ul>
<li><strong>パスキー</strong>: FIDO2を使った認証資格情報の総称</li>
<li><strong>Discoverable Credential</strong>: ユーザーID入力不要のパスキー（認証器内に保存）</li>
</ul>
</li>
<li>
<p><strong>実装の選択</strong>:</p>
<ul>
<li><strong><code>residentKey: &quot;required&quot;</code></strong>: Discoverable Credential必須</li>
<li><strong><code>residentKey: &quot;discouraged&quot;</code></strong>: 通常のパスキー</li>
<li><strong><code>userVerification: &quot;required&quot;</code></strong>: 生体認証必須</li>
</ul>
</li>
<li>
<p><strong>運用上の考慮事項</strong>:</p>
<ul>
<li><strong>容量制限</strong>: セキュリティキーは保存数に制限</li>
<li><strong>バックアップ</strong>: デバイス紛失対策としてバックアップ手段を用意</li>
<li><strong>プライバシー</strong>: 認証器に保存する情報は最小限に</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="実装の判断基準">実装の判断基準<a href="#実装の判断基準" class="hash-link" aria-label="実装の判断基準 への直接リンク" title="実装の判断基準 への直接リンク">​</a></h3>
<table><thead><tr><th>要件</th><th>推奨実装</th><th>理由</th></tr></thead><tbody><tr><td>パスワード完全廃止</td><td>Discoverable Credential</td><td>ユーザーID入力不要</td></tr><tr><td>2要素認証の2要素目</td><td>通常のパスキー</td><td>既存ID管理システムとの親和性</td></tr><tr><td>企業セキュリティキー</td><td>通常のパスキー</td><td>容量制限回避</td></tr><tr><td>個人デバイス</td><td>Discoverable Credential</td><td>UX向上</td></tr></tbody></table>
<hr>
<blockquote>
<p>パスキーとDiscoverable Credentialの違いを理解し、適切な実装選択により、
セキュアで使いやすいパスワードレス認証システムを構築しましょう！</p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_03_concepts/basic/basic-17-fido2-passkey-discoverable-credential.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/idp-server/docs/content_03_concepts/basic/basic-16-fido-webauthn-passwordless"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">FIDO2・WebAuthn パスワードレス認証</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/idp-server/docs/content_04_protocols/protocol-01-authorization-code-flow"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">認可コードフロー</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概要" class="table-of-contents__link toc-highlight">概要</a></li><li><a href="#fido2とは" class="table-of-contents__link toc-highlight">FIDO2とは</a><ul><li><a href="#fido2の構成要素" class="table-of-contents__link toc-highlight">FIDO2の構成要素</a></li><li><a href="#パスワードレス認証の実現" class="table-of-contents__link toc-highlight">パスワードレス認証の実現</a></li></ul></li><li><a href="#パスキーとは" class="table-of-contents__link toc-highlight">パスキーとは</a><ul><li><a href="#技術的定義" class="table-of-contents__link toc-highlight">技術的定義</a></li><li><a href="#パスキーの共通特徴" class="table-of-contents__link toc-highlight">パスキーの共通特徴</a></li></ul></li><li><a href="#discoverable-credentialとは" class="table-of-contents__link toc-highlight">Discoverable Credentialとは</a><ul><li><a href="#技術的定義-1" class="table-of-contents__link toc-highlight">技術的定義</a></li><li><a href="#主な特徴" class="table-of-contents__link toc-highlight">主な特徴</a></li><li><a href="#webauthn仕様におけるパラメータ" class="table-of-contents__link toc-highlight">WebAuthn仕様におけるパラメータ</a></li></ul></li><li><a href="#通常のパスキーとdiscoverable-credentialの違い" class="table-of-contents__link toc-highlight">通常のパスキーとDiscoverable Credentialの違い</a><ul><li><a href="#認証フロー比較" class="table-of-contents__link toc-highlight">認証フロー比較</a></li><li><a href="#ユースケース比較表" class="table-of-contents__link toc-highlight">ユースケース比較表</a></li></ul></li><li><a href="#実装における注意点" class="table-of-contents__link toc-highlight">実装における注意点</a><ul><li><a href="#1-requireresidentkeyとresidentkeyの関係" class="table-of-contents__link toc-highlight">1. <code>requireResidentKey</code>と<code>residentKey</code>の関係</a></li><li><a href="#2-ユーザー検証user-verification" class="table-of-contents__link toc-highlight">2. ユーザー検証（User Verification）</a></li><li><a href="#3-認証器の容量制限" class="table-of-contents__link toc-highlight">3. 認証器の容量制限</a></li><li><a href="#4-ユーザー情報の設定" class="table-of-contents__link toc-highlight">4. ユーザー情報の設定</a></li></ul></li><li><a href="#セキュリティ考慮事項" class="table-of-contents__link toc-highlight">セキュリティ考慮事項</a><ul><li><a href="#discoverable-credential特有のリスク" class="table-of-contents__link toc-highlight">Discoverable Credential特有のリスク</a></li><li><a href="#デバイス紛失時の対応" class="table-of-contents__link toc-highlight">デバイス紛失時の対応</a></li><li><a href="#プライバシー保護" class="table-of-contents__link toc-highlight">プライバシー保護</a></li></ul></li><li><a href="#ux考慮事項とフォールバック戦略" class="table-of-contents__link toc-highlight">UX考慮事項とフォールバック戦略</a><ul><li><a href="#ユーザー体験設計" class="table-of-contents__link toc-highlight">ユーザー体験設計</a></li><li><a href="#フォールバック戦略" class="table-of-contents__link toc-highlight">フォールバック戦略</a></li><li><a href="#認証エラーハンドリング" class="table-of-contents__link toc-highlight">認証エラーハンドリング</a></li><li><a href="#ブラウザデバイス互換性" class="table-of-contents__link toc-highlight">ブラウザ・デバイス互換性</a></li></ul></li><li><a href="#idp-serverでのサポート状況" class="table-of-contents__link toc-highlight">idp-serverでのサポート状況</a><ul><li><a href="#基本機能サポート" class="table-of-contents__link toc-highlight">基本機能サポート</a></li><li><a href="#webauthn4j連携" class="table-of-contents__link toc-highlight">WebAuthn4j連携</a></li></ul></li><li><a href="#仕様参照" class="table-of-contents__link toc-highlight">仕様参照</a><ul><li><a href="#w3cfido仕様" class="table-of-contents__link toc-highlight">W3C・FIDO仕様</a></li><li><a href="#関連ドキュメント" class="table-of-contents__link toc-highlight">関連ドキュメント</a></li></ul></li><li><a href="#まとめ" class="table-of-contents__link toc-highlight">まとめ</a><ul><li><a href="#重要なポイント" class="table-of-contents__link toc-highlight">重要なポイント</a></li><li><a href="#実装の判断基準" class="table-of-contents__link toc-highlight">実装の判断基準</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/idp-server/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>