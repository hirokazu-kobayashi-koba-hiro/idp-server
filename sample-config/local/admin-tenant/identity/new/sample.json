{
  "id": "UUID",
  "type": "sample",
  "external_service": "sample",
  "external_application_id_param": "sample_id",
  "processes": {
    "apply": {
      "request": {
        "schema": {
          "type": "object",
          "required": [
            "email_address",
            "mobile_phone_number"
          ],
          "properties": {
            "email_address": {
              "type": "string",
              "maxLength": 255,
              "pattern": "^[\\w\\.-]+@[\\w\\.-]+\\.[a-zA-Z]{2,}$",
              "store": true
            },
            "mobile_phone_number": {
              "type": "string",
              "maxLength": 11,
              "pattern": "^[0-9]{10,11}$",
              "store": true
            }
          }
        }
      },
      "pre_hooks": {
        "verifications": [
          {
            "type": "user_claim",
            "details": {
              "verification_parameters": [
                {
                  "request_json_path": "$.request_body.email_address",
                  "user_claim_json_path": "email"
                },
                {
                  "request_json_path": "$.request_body.phone_number",
                  "user_claim_json_path": "phone_number"
                }
              ]
            }
          },
          {
            "type": "duplicate_application",
            "details": {
              "available_application": 1,
              "exclude_status": []
            }
          },
          {
            "type": "http_request",
            "details": {
              "url": "http://localhost:4000/apply",
              "method": "POST",
              "static_headers": {
                "Content-Type": "application/json",
                "Authorization": "Bearer dummy-token"
              }
            }
          }
        ],
        "additional_parameters": [
          {
            "type": "http_request",
            "additional_parameter": "external_param",
            "details": {
              "url": "http://localhost:4000/apply",
              "method": "POST",
              "behavior": "passthrough",
              "static_headers": {
                "Content-Type": "application/json",
                "Authorization": "Bearer dummy-token"
              },
              "response_validation_schema": {
                "type": "object",
                "required": [
                  "application_id"
                ],
                "properties": {
                  "application_id": {
                    "type": "string",
                    "store": true
                  }
                },
                "additionalProperties": false
              }
            }
          }
        ]
      },
      "execution": {
        "type": "http_proxy",
        "details": {
          "url": "http://localhost:4000/apply",
          "method": "POST",
          "body_mapping_rules": [
            { "from": "$.request_body", "to": "*" }
          ],
          "static_headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer dummy-token"
          },
          "static_body": {},
          "response_behavior": "passthrough",
          "response_schema": {
            "type": "object",
            "required": [
              "application_id"
            ],
            "properties": {
              "application_id": {
                "type": "string",
                "store": true
              }
            },
            "additionalProperties": false
          }
        }
      },
      "post_hooks": [
        {
          "type": "http_request",
          "details": {
            "url": "http://localhost:4000/token",
            "body_mapping_rules": [
              { "from": "$.request_body", "to": "*" }
            ]
          }
        }
      ],
      "response": {
        "status": 200,
        "body_mapping_rules": [
          { "from": "", "to": "" }
        ]
      }
    }
  }
}