{
  "id": "5ee62e7d-e1f0-4f38-b714-0c5d6a28d8f1",
  "type": "external-token",
  "attributes": {
    "service_name": "mock"
  },
  "metadata": {},
  "interactions": {
    "external-token": {
      "execution": {
        "function": "http_requests",
        "http_requests": [
          {
            "url": "http://localhost:4000/user/overview",
            "method": "POST",
            "header_mapping_rules": [
              { "static_value": "test-client-id", "to": "x-client-id" }
            ],
            "body_mapping_rules": [
              { "from": "$.request_body", "to": "*" }
            ]
          },
          {
            "url": "http://localhost:4000/user/details",
            "method": "POST",
            "header_mapping_rules": [
              { "static_value": "test-client-id", "to": "x-client-id" }
            ],
            "body_mapping_rules": [
              { "from": "$.request_body", "to": "*" }
            ]
          }
        ]
      },
      "result": {
        "user_mapping_rules": [
          { "static_value": "mock-provider", "to": "provider_id" },
          { "from": "$.http_requests[0].response_body.user_id", "to": "external_user_id" },
          { "from": "$.http_requests[0].response_body.email", "to": "email" },
          { "from": "$.http_requests[1].response_body.birthdate", "to": "birthdate" },
          { "from": "$.http_requests[1].response_body.zoneinfo", "to": "zoneinfo" },
          { "from": "$.http_requests[1].response_body.locale", "to": "locale" },
          { "from": "$.http_requests[1].response_body.phone_number", "to": "phone_number" },
          { "from": "$.http_requests[1].response_body.role", "to": "custom_properties.role" }
        ]
      }
    }
  }
}
