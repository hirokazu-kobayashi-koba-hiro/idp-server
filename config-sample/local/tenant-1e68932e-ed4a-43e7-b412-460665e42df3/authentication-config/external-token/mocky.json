{
  "id": "079345e0-71f4-4c94-8a99-56cead1e5dd0",
  "type": "external-token",
  "attributes": {
    "service_name": "mock"
  },
  "metadata": {},
  "interactions": {
    "external-token": {
      "execution": {
        "function": "http_requests",
        "http_requests": [
          {
            "url": "http://localhost:4000/token",
            "method": "GET",
            "header_mapping_rules": [
              { "static_value": "test-client-id", "to": "x-client-id" }
            ],
            "body_mapping_rules": [
              { "from": "$.request_body", "to": "*" }
            ],
            "result_context_path": "authentication_token_result"
          },
          {
            "url": "http://localhost:4000/users",
            "method": "GET",
            "header_mapping_rules": [
              { "static_value": "test-client-id", "to": "x-client-id" }
            ],
            "body_mapping_rules": [
              { "from": "$.request_body", "to": "*" }
            ],
            "result_context_path": "authentication_users_result"
          }
        ]
      },
      "result": {
        "user_mapping_rules": [
          { "static_value": "mock-provider", "to": "provider_id" },
          { "from": "$.authentication_users_result.response_body.sub", "to": "external_user_id" },
          { "from": "$.authentication_users_result.response_body.name", "to": "name" },
          { "from": "$.authentication_users_result.response_body.given_name", "to": "given_name" },
          { "from": "$.authentication_users_result.response_body.family_name", "to": "family_name" },
          { "from": "$.authentication_users_result.response_body.email", "to": "email" },
          { "from": "$.authentication_users_result.response_body.email_verified", "to": "email_verified" },
          { "from": "$.authentication_users_result.response_body.preferred_username", "to": "preferred_username" },
          { "from": "$.authentication_users_result.response_body.roles", "to": "roles" },
          { "from": "$.authentication_users_result.response_body.permissions", "to": "permissions" },
          { "from": "$.authentication_users_result.response_body.address", "to": "address" }
        ]
      }
    }
  }
}