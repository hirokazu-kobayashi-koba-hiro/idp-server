# Flyway official image for database migrations
# Supports both PostgreSQL and MySQL via DB_TYPE environment variable
FROM flyway/flyway:11

# Copy migration SQL files
COPY postgresql /flyway/sql/postgresql
COPY mysql /flyway/sql/mysql

# Copy entrypoint script
COPY entrypoint.sh /entrypoint.sh

# Set executable permission
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
CMD ["migrate"]
