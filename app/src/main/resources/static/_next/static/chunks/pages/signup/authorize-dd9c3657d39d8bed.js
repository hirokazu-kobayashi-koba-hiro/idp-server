(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{5083:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup/authorize",function(){return r(5818)}])},5074:(e,n,r)=>{"use strict";r.d(n,{R:()=>l});var t=r(4848),i=r(2064),a=r(8191),c=r(7330),s=r(6540);let o=e=>new Promise(n=>setTimeout(n,e)),l=()=>((0,s.useEffect)(()=>{(async()=>{await o(1e3)})()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,t.jsx)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,t.jsx)(c.A,{color:"inherit"})})})}))},2050:(e,n,r)=>{"use strict";r.d(n,{y:()=>o});var t=r(4848),i=r(2745),a=r(2124),c=r(389);let s=["Account Info","Email Verification","Confirm"],o=e=>{let{activeStep:n}=e;return(0,t.jsx)(i.A,{activeStep:n,alternativeLabel:!0,children:s.map(e=>(0,t.jsx)(a.A,{children:(0,t.jsx)(c.A,{children:e})},e))})}},5818:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>v});var t=r(4848),i=r(5759),a=r(1703),c=r(3384),s=r(6247),o=r(2064),l=r(2322),d=r(8556),h=r(2035),x=r(4271),u=r(304),p=r(4897),j=r(7848),f=r(6715),y=r(9206),A=r(430),w=r(9643),m=r(2741),_=r(5074),g=r(2050);function v(){let e=(0,f.useRouter)(),{id:n,tenant_id:r}=e.query,{data:v,isPending:b}=(0,y.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:n,tenant_id:r}=e.query,t=await fetch("".concat(A.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/view-data"),{credentials:"include"});if(!t.ok)throw console.error(t),Error(t.status.toString());return await t.json()}}),k=async()=>{let e=await fetch("".concat(A.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)},C=async()=>{let e=await fetch("".concat(A.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/authorize"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"signup"})}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};return b||!v?(0,t.jsx)(_.R,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.A,{maxWidth:"sm",children:(0,t.jsx)(a.A,{sx:{p:3,boxShadow:3},children:(0,t.jsxs)(c.A,{spacing:4,children:[(0,t.jsx)(s.A,{variant:"h5",children:"Sign Up"}),(0,t.jsx)(g.y,{activeStep:2}),(0,t.jsxs)(o.A,{display:"flex",gap:4,alignItems:"center",children:[(0,t.jsx)(l.A,{src:v.logo_uri,sx:{width:80,height:80}}),(0,t.jsx)(s.A,{variant:"h5",children:v.client_name})]}),(0,t.jsx)(s.A,{variant:"h6",children:"request scope"}),(0,t.jsx)(c.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:v.scopes.map(e=>(0,t.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,t.jsxs)(h.A,{sx:{p:0},children:[(0,t.jsxs)(x.Ay,{children:[(0,t.jsx)(u.A,{children:(0,t.jsx)(w.A,{color:"action"})}),(0,t.jsx)(p.A,{primary:(0,t.jsx)("a",{href:v.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,t.jsxs)(x.Ay,{children:[(0,t.jsx)(u.A,{children:(0,t.jsx)(m.A,{color:"action"})}),(0,t.jsx)(p.A,{primary:(0,t.jsx)("a",{href:v.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,t.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(j.A,{variant:"contained",color:"error",onClick:k,sx:{textTransform:"none"},children:"Cancel"}),(0,t.jsx)(j.A,{variant:"contained",color:"primary",onClick:C,sx:{textTransform:"none"},children:"Approve"})]})]})})})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[49,191,231,584,804,636,593,792],()=>n(5083)),_N_E=e.O()}]);