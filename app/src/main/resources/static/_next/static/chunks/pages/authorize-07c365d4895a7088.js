(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{9657:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/authorize",function(){return t(3491)}])},5074:(e,r,t)=>{"use strict";t.d(r,{R:()=>l});var n=t(4848),o=t(2064),i=t(8191),a=t(7330),c=t(6540);let s=e=>new Promise(r=>setTimeout(r,e)),l=()=>((0,c.useEffect)(()=>{(async()=>{await s(1e3)})()},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,n.jsx)(i.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,n.jsx)(a.A,{color:"inherit"})})})}))},3491:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var n=t(4848),o=t(5759),i=t(2064),a=t(6540),c=t(4164),s=t(5659),l=t(3552),d=t(6322),u=t(1703),h=t(8413),x=t(1609);function j(e){return(0,x.Ay)("MuiCard",e)}(0,h.A)("MuiCard",["root"]);let p=e=>{let{classes:r}=e;return(0,s.A)({root:["root"]},j,r)},f=(0,l.Ay)(u.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})({overflow:"hidden"}),w=a.forwardRef(function(e,r){let t=(0,d.b)({props:e,name:"MuiCard"}),{className:o,raised:i=!1,...a}=t,s={...t,raised:i},l=p(s);return(0,n.jsx)(f,{className:(0,c.A)(l.root,o),elevation:i?8:void 0,ref:r,ownerState:s,...a})});var A=t(2322),y=t(6247),m=t(3384),_=t(8556),v=t(2035),g=t(4271),b=t(304),k=t(4897),C=t(7848),z=t(6715),E=t(9206),T=t(430),N=t(9643),R=t(2741),q=t(5074);function P(){let e=(0,z.useRouter)(),{id:r,tenant_id:t}=e.query,{data:a,isPending:c}=(0,E.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:r,tenant_id:t}=e.query,n=await fetch("".concat(T.backendUrl,"/").concat(t,"/api/v1/authorizations/").concat(r,"/view-data"),{credentials:"include"});if(!n.ok)throw console.error(n),Error(n.status.toString());return await n.json()}}),s=async()=>{let e=await fetch("".concat(T.backendUrl,"/").concat(t,"/api/v1/authorizations/").concat(r,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),n=await e.json();console.log(e.status,n),n.redirect_uri&&(window.location.href=n.redirect_uri)},l=async()=>{let e=await fetch("".concat(T.backendUrl,"/").concat(t,"/api/v1/authorizations/").concat(r,"/authorize"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),n=await e.json();console.log(e.status,n),n.redirect_uri&&(window.location.href=n.redirect_uri)};return c||!a?(0,n.jsx)(q.R,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.A,{maxWidth:"xs",children:(0,n.jsx)(i.A,{sx:{mt:6,textAlign:"center"},children:(0,n.jsxs)(w,{variant:"outlined",sx:{p:3,boxShadow:3},children:[(0,n.jsx)(A.A,{src:a.logo_uri,sx:{width:80,height:80,mx:"auto",mb:2}}),(0,n.jsx)(y.A,{variant:"h5",children:a.client_name}),(0,n.jsx)(y.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,n.jsx)(m.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:a.scopes.map(e=>(0,n.jsx)(_.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,n.jsxs)(v.A,{sx:{mt:2},children:[(0,n.jsxs)(g.Ay,{children:[(0,n.jsx)(b.A,{children:(0,n.jsx)(N.A,{color:"action"})}),(0,n.jsx)(k.A,{primary:(0,n.jsx)("a",{href:a.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,n.jsxs)(g.Ay,{children:[(0,n.jsx)(b.A,{children:(0,n.jsx)(R.A,{color:"action"})}),(0,n.jsx)(k.A,{primary:(0,n.jsx)("a",{href:a.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,n.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,n.jsx)(C.A,{variant:"contained",color:"error",onClick:s,children:"cancel"}),(0,n.jsx)(C.A,{variant:"contained",color:"primary",onClick:l,children:"approve"})]})]})})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[49,191,231,804,636,593,792],()=>r(9657)),_N_E=e.O()}]);