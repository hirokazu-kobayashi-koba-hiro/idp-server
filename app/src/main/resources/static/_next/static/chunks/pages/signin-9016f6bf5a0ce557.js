(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{999:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return r(4636)}])},4636:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>v});var a=r(4848),t=r(2064),i=r(5759),o=r(1501),s=r(2322),c=r(6247),l=r(3384),d=r(8556),h=r(3307),u=r(2035),x=r(4271),p=r(304),j=r(4897),y=r(7543),m=r(6540),w=r(6715),_=r(9206),A=r(430),f=r(9643),g=r(2741);function v(){let[e,n]=(0,m.useState)(""),[r,v]=(0,m.useState)(""),b=(0,w.useRouter)(),{id:k,tenant_id:C,session_key:S}=b.query,{data:E,isPending:N}=(0,_.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:e,tenant_id:n}=b.query,r=await fetch("".concat(A.backendUrl,"/").concat(n,"/api/v1/authorizations/").concat(e,"/view-data"));if(!r.ok)throw console.error(r),Error(r.status.toString());return await r.json()}}),T=async()=>{let e=await fetch("".concat(A.backendUrl,"/").concat(C,"/api/v1/authorizations/").concat(k,"/deny"),{method:"POST",headers:{"Content-Type":"application/json"}}),n=await e.json();console.log(e.status,n),n.redirect_uri&&(window.location.href=n.redirect_uri)},q=async()=>{let n=await fetch("".concat(A.backendUrl,"/").concat(C,"/api/v1/authorizations/").concat(k,"/authorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,session_key:S})}),a=await n.json();console.log(n.status,a),a.redirect_uri&&(window.location.href=a.redirect_uri)};return N||!E?(0,a.jsx)(t.A,{children:"Loading"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.A,{maxWidth:"xs",children:(0,a.jsx)(t.A,{sx:{mt:6,textAlign:"center"},children:(0,a.jsxs)(o.A,{variant:"outlined",sx:{p:3,boxShadow:3},children:[(0,a.jsx)(s.A,{src:E.logo_uri,sx:{width:80,height:80,mx:"auto",mb:2}}),(0,a.jsx)(c.A,{variant:"h5",children:E.client_name}),(0,a.jsx)(c.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,a.jsx)(l.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:E.scopes.map(e=>(0,a.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,a.jsxs)(t.A,{mt:2,display:"flex",flexDirection:"column",sx:{gap:2},children:[(0,a.jsx)(h.A,{name:"email",label:"email",placeholder:"test@gmail.com",type:"email",value:e,onChange:e=>{n(e.target.value)}}),(0,a.jsx)(h.A,{name:"password",label:"password",type:"password",value:r,onChange:e=>{v(e.target.value)}})]}),(0,a.jsxs)(u.A,{sx:{mt:2},children:[(0,a.jsxs)(x.Ay,{children:[(0,a.jsx)(p.A,{children:(0,a.jsx)(f.A,{color:"action"})}),(0,a.jsx)(j.A,{primary:(0,a.jsx)("a",{href:E.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,a.jsxs)(x.Ay,{children:[(0,a.jsx)(p.A,{children:(0,a.jsx)(g.A,{color:"action"})}),(0,a.jsx)(j.A,{primary:(0,a.jsx)("a",{href:E.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,a.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,a.jsx)(y.A,{variant:"contained",color:"error",onClick:T,children:"cancel"}),(0,a.jsx)(y.A,{variant:"contained",color:"primary",onClick:q,children:"approve"})]})]})})})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[254,638,636,593,792],()=>n(999)),_N_E=e.O()}]);