(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{9657:(e,r,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/authorize",function(){return n(5115)}])},5074:(e,r,n)=>{"use strict";n.d(r,{R:()=>l});var t=n(4848),i=n(2064),a=n(8191),c=n(7330),o=n(6540);let s=e=>new Promise(r=>setTimeout(r,e)),l=()=>((0,o.useEffect)(()=>{(async()=>{await s(1e3)})()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,t.jsx)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,t.jsx)(c.A,{color:"inherit"})})})}))},5115:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>v});var t=n(4848),i=n(5759),a=n(2064),c=n(1501),o=n(2322),s=n(6247),l=n(3384),d=n(8556),h=n(2035),x=n(4271),u=n(304),j=n(4897),p=n(7848),f=n(6715),w=n(9206),y=n(430),A=n(9643),_=n(2741),m=n(5074);function v(){let e=(0,f.useRouter)(),{id:r,tenant_id:n}=e.query,{data:v,isPending:g}=(0,w.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:r,tenant_id:n}=e.query,t=await fetch("".concat(y.backendUrl,"/").concat(n,"/api/v1/authorizations/").concat(r,"/view-data"),{credentials:"include"});if(!t.ok)throw console.error(t),Error(t.status.toString());return await t.json()}}),k=async()=>{let e=await fetch("".concat(y.backendUrl,"/").concat(n,"/api/v1/authorizations/").concat(r,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)},b=async()=>{let e=await fetch("".concat(y.backendUrl,"/").concat(n,"/api/v1/authorizations/").concat(r,"/authorize"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};return g||!v?(0,t.jsx)(m.R,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.A,{maxWidth:"xs",children:(0,t.jsx)(a.A,{sx:{mt:6,textAlign:"center"},children:(0,t.jsxs)(c.A,{variant:"outlined",sx:{p:3,boxShadow:3},children:[(0,t.jsx)(o.A,{src:v.logo_uri,sx:{width:80,height:80,mx:"auto",mb:2}}),(0,t.jsx)(s.A,{variant:"h5",children:v.client_name}),(0,t.jsx)(s.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,t.jsx)(l.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:v.scopes.map(e=>(0,t.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,t.jsxs)(h.A,{sx:{mt:2},children:[(0,t.jsxs)(x.Ay,{children:[(0,t.jsx)(u.A,{children:(0,t.jsx)(A.A,{color:"action"})}),(0,t.jsx)(j.A,{primary:(0,t.jsx)("a",{href:v.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,t.jsxs)(x.Ay,{children:[(0,t.jsx)(u.A,{children:(0,t.jsx)(_.A,{color:"action"})}),(0,t.jsx)(j.A,{primary:(0,t.jsx)("a",{href:v.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,t.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,t.jsx)(p.A,{variant:"contained",color:"error",onClick:k,children:"cancel"}),(0,t.jsx)(p.A,{variant:"contained",color:"primary",onClick:b,children:"approve"})]})]})})})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[189,884,636,593,792],()=>r(9657)),_N_E=e.O()}]);