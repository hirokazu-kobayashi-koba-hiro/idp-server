(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{999:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n(4636)}])},4414:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7657),i=n(4848);let o=(0,r.A)((0,i.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")},8590:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r,i=n(6540),o=n(4164),a=n(5659),s=n(7306),c=n(6247),l=n(928),d=n(6620),u=n(3552),h=n(186),p=n(6322),x=n(8413),f=n(1609);function m(e){return(0,f.Ay)("MuiInputAdornment",e)}let A=(0,x.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v=n(4848);let g=e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:c}=e,l={root:["root",n&&"disablePointerEvents",i&&"position".concat((0,s.A)(i)),c,r&&"hiddenLabel",o&&"size".concat((0,s.A)(o))]};return(0,a.A)(l,m,t)},w=(0,u.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t["position".concat((0,s.A)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((0,h.A)(e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(A.positionStart,"&:not(.").concat(A.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),y=i.forwardRef(function(e,t){let n=(0,p.b)({props:e,name:"MuiInputAdornment"}),{children:a,className:s,component:u="div",disablePointerEvents:h=!1,disableTypography:x=!1,position:f,variant:m,...A}=n,y=(0,d.A)()||{},b=m;m&&y.variant,y&&!b&&(b=y.variant);let j={...n,hiddenLabel:y.hiddenLabel,size:y.size,disablePointerEvents:h,position:f,variant:b},S=g(j);return(0,v.jsx)(l.A.Provider,{value:null,children:(0,v.jsx)(w,{as:u,ownerState:j,className:(0,o.A)(S.root,s),ref:t,...A,children:"string"!=typeof a||x?(0,v.jsxs)(i.Fragment,{children:["start"===f?r||(r=(0,v.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,a]}):(0,v.jsx)(c.A,{color:"textSecondary",children:a})})})})},4429:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(6540),i=n.t(r,2),o=n(1529),a=n(2578),s=n(5463);let c={...i}.useSyncExternalStore;function l(e={}){let{themeId:t}=e;return function(e,n={}){let i=(0,s.A)();i&&t&&(i=i[t]||i);let l="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:d=!1,matchMedia:u=l?window.matchMedia:null,ssrMatchMedia:h=null,noSsr:p=!1}=(0,a.A)({name:"MuiUseMediaQuery",props:n,theme:i}),x="function"==typeof e?e(i):e;return(void 0!==c?function(e,t,n,i,o){let a=r.useCallback(()=>t,[t]),s=r.useMemo(()=>{if(o&&n)return()=>n(e).matches;if(null!==i){let{matches:t}=i(e);return()=>t}return a},[a,e,i,o,n]),[l,d]=r.useMemo(()=>{if(null===n)return[a,()=>()=>{}];let t=n(e);return[()=>t.matches,e=>(t.addEventListener("change",e),()=>{t.removeEventListener("change",e)})]},[a,n,e]);return c(d,l,s)}:function(e,t,n,i,a){let[s,c]=r.useState(()=>a&&n?n(e).matches:i?i(e).matches:t);return(0,o.A)(()=>{if(!n)return;let t=n(e),r=()=>{c(t.matches)};return r(),t.addEventListener("change",r),()=>{t.removeEventListener("change",r)}},[e,n]),s})(x=x.replace(/^@media( ?)/m,""),d,u,h,p)}}l();let d=l({themeId:n(8720).A})},5074:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var r=n(4848),i=n(2064),o=n(8191),a=n(7330),s=n(6540);let c=e=>new Promise(t=>setTimeout(t,e)),l=()=>((0,s.useEffect)(()=>{(async()=>{await c(1e3)})()},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,r.jsx)(o.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,r.jsx)(a.A,{color:"inherit"})})})}))},6137:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(4848),i=n(2907),o=n(4429),a=n(2064),s=n(5759),c=n(1703);let l=e=>{let{children:t}=e,n=(0,i.A)(),l=(0,o.A)(n.breakpoints.down("sm"));return(0,r.jsx)(a.A,{sx:{height:"100vh"},children:(0,r.jsx)(s.A,{maxWidth:"xs",children:l?(0,r.jsx)(a.A,{mt:2,children:t}):(0,r.jsx)(c.A,{sx:{p:3,boxShadow:1,borderRadius:3},children:t})})})}},4636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(4848),i=n(3384),o=n(6247),a=n(2233),s=n(8590),c=n(7848),l=n(429),d=n(3753),u=n(6540),h=n(6715),p=n(9206),x=n(430),f=n(5074),m=n(4745),A=n(4414),v=n(2907),g=n(4429),w=n(6137);function y(){let[e,t]=(0,u.useState)(""),[n,y]=(0,u.useState)(""),b=(0,h.useRouter)(),{id:j,tenant_id:S}=b.query,_=(0,v.A)(),k=(0,g.A)(_.breakpoints.down("sm")),{data:E,isPending:z}=(0,p.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:e,tenant_id:t}=b.query,n=await fetch("".concat(x.backendUrl,"/").concat(t,"/api/v1/authorizations/").concat(e,"/view-data"),{credentials:"include"});if(!n.ok)throw console.error(n),Error(n.status.toString());return await n.json()}}),C=async()=>{let e=await fetch("".concat(x.backendUrl,"/").concat(S,"/api/v1/authorizations/").concat(j,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)},P=async()=>{if((await fetch("".concat(x.backendUrl,"/").concat(S,"/api/v1/authorizations/").concat(j,"/password-authentication"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})})).ok){let e=await fetch("".concat(x.backendUrl,"/").concat(S,"/api/v1/authorizations/").concat(j,"/authorize"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"signin"})}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri);return}};return((0,u.useEffect)(()=>{let e=async()=>{let e=await fetch("".concat(x.backendUrl,"/").concat(S,"/api/v1/authorizations/").concat(j,"/authorize-with-session"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){console.error(e);return}let t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};console.log(E),E&&!0===E.session_enabled&&e()},[E]),z||!E||E&&E.session_enabled)?(0,r.jsx)(f.R,{}):(0,r.jsx)(w.Y,{children:(0,r.jsxs)(i.A,{spacing:k?2:3,alignItems:"center",children:[(0,r.jsx)(o.A,{variant:"subtitle1",fontWeight:"medium",children:"IdP Server"}),(0,r.jsxs)(i.A,{spacing:2,width:"100%",children:[(0,r.jsx)(a.A,{placeholder:"Your email",inputMode:"email",fullWidth:!0,required:!0,InputProps:{disableUnderline:!0,sx:{height:48,fontSize:17,px:2,backgroundColor:"transparent"},startAdornment:(0,r.jsx)(s.A,{position:"start",children:(0,r.jsx)(m.A,{sx:{color:"gray"}})})},onChange:e=>t(e.target.value)}),(0,r.jsx)(a.A,{placeholder:"Your password",type:"password",fullWidth:!0,required:!0,InputProps:{disableUnderline:!0,sx:{height:48,fontSize:17,px:2,backgroundColor:"transparent"},startAdornment:(0,r.jsx)(s.A,{position:"start",children:(0,r.jsx)(A.A,{sx:{color:"gray"}})})},onChange:e=>{navigator.credentials.preventSilentAccess(),y(e.target.value)}})]}),(0,r.jsxs)(i.A,{spacing:1,width:"100%",children:[(0,r.jsx)(c.A,{variant:"contained",disabled:!e||!n,onClick:P,fullWidth:!0,sx:{textTransform:"none",borderRadius:8,height:44,fontSize:16,fontWeight:"bold",backgroundColor:"#007AFF",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)","&:hover":{opacity:.8}},children:"Next"}),E.show_cancel&&(0,r.jsx)(c.A,{variant:"outlined",onClick:C,sx:{textTransform:"none",fontSize:16,fontWeight:"medium",color:"#505050",borderColor:"rgba(0, 0, 0, 0.2)"},children:"Cancel"})]}),(0,r.jsxs)(o.A,{variant:"caption",color:"text.secondary",textAlign:"center",sx:{mt:2},children:["By signing in, you agree to our",(0,r.jsx)(l.A,{href:E.tos_uri,sx:{fontWeight:"bold",mx:.5},children:"Terms of Use"}),"and",(0,r.jsx)(l.A,{href:E.policy_uri,sx:{fontWeight:"bold",mx:.5},children:"Privacy Policy"})]}),(0,r.jsx)(d.A,{}),(0,r.jsxs)(i.A,{spacing:1,direction:"row",justifyContent:"center",sx:{mt:3},children:[(0,r.jsx)(o.A,{variant:"body2",children:"Don't have an account?"}),(0,r.jsx)(l.A,{onClick:()=>b.push("/signup?id=".concat(j,"&tenant_id=").concat(S)),sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main",fontSize:16},children:"Sign Up"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[49,191,231,433,573,636,593,792],()=>t(999)),_N_E=e.O()}]);