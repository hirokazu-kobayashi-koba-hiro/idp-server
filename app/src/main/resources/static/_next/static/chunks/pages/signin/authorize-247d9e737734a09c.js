(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{1771:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin/authorize",function(){return r(2644)}])},5074:(e,n,r)=>{"use strict";r.d(n,{R:()=>l});var i=r(4848),t=r(2064),a=r(8191),c=r(7330),s=r(6540);let o=e=>new Promise(n=>setTimeout(n,e)),l=()=>((0,s.useEffect)(()=>{(async()=>{await o(1e3)})()},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(t.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,i.jsx)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,i.jsx)(c.A,{color:"inherit"})})})}))},2644:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>g});var i=r(4848),t=r(5759),a=r(1703),c=r(3384),s=r(6247),o=r(2064),l=r(2322),d=r(8556),h=r(2035),x=r(4271),u=r(304),p=r(4897),j=r(7848),f=r(6715),y=r(9206),w=r(430),A=r(9643),_=r(2741),m=r(5074);function g(){let e=(0,f.useRouter)(),{id:n,tenant_id:r}=e.query,{data:g,isPending:v}=(0,y.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:n,tenant_id:r}=e.query,i=await fetch("".concat(w.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/view-data"),{credentials:"include"});if(!i.ok)throw console.error(i),Error(i.status.toString());return await i.json()}}),k=async()=>{let e=await fetch("".concat(w.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await e.json();console.log(e.status,i),i.redirect_uri&&(window.location.href=i.redirect_uri)},b=async()=>{let e=await fetch("".concat(w.backendUrl,"/").concat(r,"/api/v1/authorizations/").concat(n,"/authorize"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"signin"})}),i=await e.json();console.log(e.status,i),i.redirect_uri&&(window.location.href=i.redirect_uri)};return v||!g?(0,i.jsx)(m.R,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(t.A,{maxWidth:"sm",children:(0,i.jsx)(a.A,{sx:{m:4,p:4,boxShadow:3},children:(0,i.jsxs)(c.A,{spacing:4,children:[(0,i.jsx)(s.A,{variant:"h5",children:"Sign In"}),(0,i.jsxs)(o.A,{display:"flex",gap:4,alignItems:"center",children:[(0,i.jsx)(l.A,{src:g.logo_uri,sx:{width:80,height:80}}),(0,i.jsx)(s.A,{variant:"h5",children:g.client_name})]}),(0,i.jsx)(s.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,i.jsx)(c.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:g.scopes.map(e=>(0,i.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,i.jsxs)(h.A,{sx:{p:0},children:[(0,i.jsxs)(x.Ay,{children:[(0,i.jsx)(u.A,{children:(0,i.jsx)(A.A,{color:"action"})}),(0,i.jsx)(p.A,{primary:(0,i.jsx)("a",{href:g.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,i.jsxs)(x.Ay,{children:[(0,i.jsx)(u.A,{children:(0,i.jsx)(_.A,{color:"action"})}),(0,i.jsx)(p.A,{primary:(0,i.jsx)("a",{href:g.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,i.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(j.A,{variant:"contained",color:"error",onClick:k,children:"cancel"}),(0,i.jsx)(j.A,{variant:"contained",color:"primary",onClick:b,children:"approve"})]})]})})})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[49,191,231,804,636,593,792],()=>n(1771)),_N_E=e.O()}]);