(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{999:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return r(8272)}])},5074:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var n=r(4848),i=r(2064),a=r(8191),o=r(7330),l=r(6540);let s=e=>new Promise(t=>setTimeout(t,e)),c=()=>((0,l.useEffect)(()=>{(async()=>{await s(1e3)})()},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,n.jsx)(a.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,n.jsx)(o.A,{color:"inherit"})})})}))},8272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var n=r(4848),i=r(5759),a=r(2064),o=r(1501),l=r(2322),s=r(6247),c=r(3384),d=r(8556),p=r(3952),u=r(2035),h=r(4271),x=r(304),v=r(4897),y=r(7848),g=r(6540),f=r(4164),m=r(5659),b=r(4136),w=r(3552),A=r(186),j=r(6322),C=r(8413),k=r(1609);function _(e){return(0,k.Ay)("MuiDivider",e)}(0,C.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);let S=e=>{let{absolute:t,children:r,classes:n,flexItem:i,light:a,orientation:o,textAlign:l,variant:s}=e;return(0,m.A)({root:["root",t&&"absolute",s,a&&"light","vertical"===o&&"vertical",i&&"flexItem",r&&"withChildren",r&&"vertical"===o&&"withChildrenVertical","right"===l&&"vertical"!==o&&"textAlignRight","left"===l&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]},_,n)},L=(0,w.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((0,A.A)(e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,b.X4)(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}})),D=(0,w.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((0,A.A)(e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}})),R=g.forwardRef(function(e,t){let r=(0,j.b)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:a,className:o,orientation:l="horizontal",component:s=a||"vertical"===l?"div":"hr",flexItem:c=!1,light:d=!1,role:p="hr"!==s?"separator":void 0,textAlign:u="center",variant:h="fullWidth",...x}=r,v={...r,absolute:i,component:s,flexItem:c,light:d,orientation:l,role:p,textAlign:u,variant:h},y=S(v);return(0,n.jsx)(L,{as:s,className:(0,f.A)(y.root,o),role:p,ref:t,ownerState:v,"aria-orientation":"separator"===p&&("hr"!==s||"vertical"===l)?l:void 0,...x,children:a?(0,n.jsx)(D,{className:y.wrapper,ownerState:v,children:a}):null})});R&&(R.muiSkipListHighlight=!0);var T=r(4899),z=r(7306),N=r(2907),M=r(172);function V(e){return(0,k.Ay)("MuiLink",e)}let W=(0,C.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var I=r(3539);let E=e=>{let{theme:t,ownerState:r}=e,n=r.color,i=(0,I.Yn)(t,"palette.".concat(n,".main"),!1)||(0,I.Yn)(t,"palette.".concat(n),!1)||r.color,a=(0,I.Yn)(t,"palette.".concat(n,".mainChannel"))||(0,I.Yn)(t,"palette.".concat(n,"Channel"));return"vars"in t&&a?"rgba(".concat(a," / 0.4)"):(0,b.X4)(i,.4)},P={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},O=e=>{let{classes:t,component:r,focusVisible:n,underline:i}=e,a={root:["root","underline".concat((0,z.A)(i)),"button"===r&&"button",n&&"focusVisible"]};return(0,m.A)(a,V,t)},X=(0,w.Ay)(s.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t["underline".concat((0,z.A)(r.underline))],"button"===r.component&&t.button]}})((0,A.A)(e=>{let{theme:t}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:t,ownerState:r}=e;return"always"===t&&"inherit"!==r.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter((0,M.A)()).map(e=>{let[r]=e;return{props:{underline:"always",color:r},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.4)"):(0,b.X4)(t.palette[r].main,.4)}}}),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):(0,b.X4)(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.secondaryChannel," / 0.4)"):(0,b.X4)(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(W.focusVisible)]:{outline:"auto"}}}]}})),q=g.forwardRef(function(e,t){let r=(0,j.b)({props:e,name:"MuiLink"}),i=(0,N.A)(),{className:a,color:o="primary",component:l="a",onBlur:s,onFocus:c,TypographyClasses:d,underline:p="always",variant:u="inherit",sx:h,...x}=r,[v,y]=g.useState(!1),m={...r,color:o,component:l,focusVisible:v,underline:p,variant:u},b=O(m);return(0,n.jsx)(X,{color:o,className:(0,f.A)(b.root,a),classes:d,component:l,onBlur:e=>{(0,T.A)(e.target)||y(!1),s&&s(e)},onFocus:e=>{(0,T.A)(e.target)&&y(!0),c&&c(e)},ref:t,ownerState:m,variant:u,...x,sx:[...void 0===P[o]?[{color:o}]:[],...Array.isArray(h)?h:[h]],style:{...x.style,..."always"===p&&"inherit"!==o&&!P[o]&&{"--Link-underlineColor":E({theme:i,ownerState:m})}}})});var B=r(6715),U=r(9206),F=r(430),Y=r(9643),H=r(2741),J=r(5074);function K(){let[e,t]=(0,g.useState)(""),[r,f]=(0,g.useState)(""),m=(0,B.useRouter)(),{id:b,tenant_id:w}=m.query,{data:A,isPending:j}=(0,U.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:e,tenant_id:t}=m.query,r=await fetch("".concat(F.backendUrl,"/").concat(t,"/api/v1/authorizations/").concat(e,"/view-data"),{credentials:"include"});if(!r.ok)throw console.error(r),Error(r.status.toString());return await r.json()}}),C=async()=>{let e=await fetch("".concat(F.backendUrl,"/").concat(w,"/api/v1/authorizations/").concat(b,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)},k=async()=>{(await fetch("".concat(F.backendUrl,"/").concat(w,"/api/v1/authorizations/").concat(b,"/password-authentication"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})})).ok&&m.push("/authorize?id=".concat(b,"&tenant_id=").concat(w))};return((0,g.useEffect)(()=>{let e=async()=>{let e=await fetch("".concat(F.backendUrl,"/").concat(w,"/api/v1/authorizations/").concat(b,"/authorize-with-session"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){console.error(e);return}let t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};console.log(A),A&&!0===A.session_enabled&&e()},[A]),j||!A||A&&A.session_enabled)?(0,n.jsx)(J.R,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.A,{maxWidth:"xs",children:(0,n.jsx)(a.A,{sx:{mt:6,textAlign:"center"},children:(0,n.jsxs)(o.A,{variant:"outlined",sx:{p:3,boxShadow:3},children:[(0,n.jsx)(l.A,{src:A.logo_uri,sx:{width:80,height:80,mx:"auto",mb:2}}),(0,n.jsx)(s.A,{variant:"h5",children:A.client_name}),(0,n.jsx)(s.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,n.jsx)(c.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:A.scopes.map(e=>(0,n.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,n.jsxs)(a.A,{mt:2,display:"flex",flexDirection:"column",sx:{gap:2},children:[(0,n.jsx)(p.A,{name:"email",label:"email",placeholder:"test@gmail.com",type:"email",value:e,onChange:e=>{t(e.target.value)}}),(0,n.jsx)(p.A,{name:"password",label:"password",type:"password",value:r,onChange:e=>{f(e.target.value)}})]}),(0,n.jsxs)(u.A,{sx:{mt:2},children:[(0,n.jsxs)(h.Ay,{children:[(0,n.jsx)(x.A,{children:(0,n.jsx)(Y.A,{color:"action"})}),(0,n.jsx)(v.A,{primary:(0,n.jsx)("a",{href:A.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,n.jsxs)(h.Ay,{children:[(0,n.jsx)(x.A,{children:(0,n.jsx)(H.A,{color:"action"})}),(0,n.jsx)(v.A,{primary:(0,n.jsx)("a",{href:A.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,n.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,n.jsx)(y.A,{variant:"contained",color:"error",onClick:C,children:"Cancel"}),(0,n.jsx)(y.A,{variant:"contained",color:"primary",onClick:k,children:"Next"})]}),(0,n.jsx)(a.A,{sx:{mt:2},children:(0,n.jsx)(R,{})}),(0,n.jsxs)(a.A,{sx:{mt:2,gap:2},display:"flex",children:[(0,n.jsx)(s.A,{children:"Dont have an account?"}),(0,n.jsx)(q,{onClick:()=>{m.push("/signup?id=".concat(b,"&tenant_id=").concat(w))},children:"Sign Up"})]})]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[189,952,884,636,593,792],()=>t(999)),_N_E=e.O()}]);