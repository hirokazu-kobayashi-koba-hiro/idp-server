(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{999:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return r(262)}])},262:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>E});var t=r(4848),a=r(5759),i=r(2064),s=r(1501),o=r(2322),c=r(6247),l=r(3384),d=r(8556),h=r(3952),x=r(2035),u=r(4271),p=r(304),j=r(4897),m=r(7848),y=r(6540),f=r(6715),w=r(9206),A=r(430),_=r(9643),g=r(2741),v=r(8191),b=r(7330);let k=e=>new Promise(n=>setTimeout(n,e)),C=()=>((0,y.useEffect)(()=>{(async()=>{await k(1e3)})()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,t.jsx)(v.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,t.jsx)(b.A,{color:"inherit"})})})}));function E(){let[e,n]=(0,y.useState)(""),[r,v]=(0,y.useState)(""),b=(0,f.useRouter)(),{id:k,tenant_id:E,session_key:S}=b.query,{data:T,isPending:z}=(0,w.I)({queryKey:["fetchViewData"],queryFn:async()=>{let{id:e,tenant_id:n}=b.query,r=await fetch("".concat(A.backendUrl,"/").concat(n,"/api/v1/authorizations/").concat(e,"/view-data"));if(!r.ok)throw console.error(r),Error(r.status.toString());return await r.json()}}),N=async()=>{let e=await fetch("".concat(A.backendUrl,"/").concat(E,"/api/v1/authorizations/").concat(k,"/deny"),{method:"POST",headers:{"Content-Type":"application/json"}}),n=await e.json();console.log(e.status,n),n.redirect_uri&&(window.location.href=n.redirect_uri)},q=async()=>{let n=await fetch("".concat(A.backendUrl,"/").concat(E,"/api/v1/authorizations/").concat(k,"/authorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,session_key:S})}),t=await n.json();console.log(n.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};return z||!T?(0,t.jsx)(C,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.A,{maxWidth:"xs",children:(0,t.jsx)(i.A,{sx:{mt:6,textAlign:"center"},children:(0,t.jsxs)(s.A,{variant:"outlined",sx:{p:3,boxShadow:3},children:[(0,t.jsx)(o.A,{src:T.logo_uri,sx:{width:80,height:80,mx:"auto",mb:2}}),(0,t.jsx)(c.A,{variant:"h5",children:T.client_name}),(0,t.jsx)(c.A,{variant:"h6",sx:{mt:4},children:"request scope"}),(0,t.jsx)(l.A,{direction:"row",spacing:1,justifyContent:"center",sx:{mt:2},children:T.scopes.map(e=>(0,t.jsx)(d.A,{label:e,color:"primary",variant:"outlined"},e))}),(0,t.jsxs)(i.A,{mt:2,display:"flex",flexDirection:"column",sx:{gap:2},children:[(0,t.jsx)(h.A,{name:"email",label:"email",placeholder:"test@gmail.com",type:"email",value:e,onChange:e=>{n(e.target.value)}}),(0,t.jsx)(h.A,{name:"password",label:"password",type:"password",value:r,onChange:e=>{v(e.target.value)}})]}),(0,t.jsxs)(x.A,{sx:{mt:2},children:[(0,t.jsxs)(u.Ay,{children:[(0,t.jsx)(p.A,{children:(0,t.jsx)(_.A,{color:"action"})}),(0,t.jsx)(j.A,{primary:(0,t.jsx)("a",{href:T.tos_uri,target:"_blank",rel:"noopener noreferrer",children:"term of use"})})]}),(0,t.jsxs)(u.Ay,{children:[(0,t.jsx)(p.A,{children:(0,t.jsx)(g.A,{color:"action"})}),(0,t.jsx)(j.A,{primary:(0,t.jsx)("a",{href:T.policy_uri,target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})})]})]}),(0,t.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,t.jsx)(m.A,{variant:"contained",color:"error",onClick:N,children:"cancel"}),(0,t.jsx)(m.A,{variant:"contained",color:"primary",onClick:q,children:"approve"})]})]})})})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[182,638,636,593,792],()=>n(999)),_N_E=e.O()}]);