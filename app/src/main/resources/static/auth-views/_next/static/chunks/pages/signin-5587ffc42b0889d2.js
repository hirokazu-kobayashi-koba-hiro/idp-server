(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{999:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n(8564)}])},4414:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(7657),o=n(4848);let r=(0,i.A)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")},5074:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var i=n(4848),o=n(8191),r=n(7330),a=n(2413),s=n(6540);let c=e=>new Promise(t=>setTimeout(t,e)),l=()=>((0,s.useEffect)(()=>{(async()=>{await c(500)})()},[]),(0,i.jsxs)(o.A,{open:!0,sx:{zIndex:e=>e.zIndex.drawer+2,backgroundColor:"rgba(255, 255, 255, 0.75)",color:"#1c1c1e",flexDirection:"column"},children:[(0,i.jsx)(r.A,{size:48,thickness:4,sx:{color:"#007aff",mb:2}}),(0,i.jsx)(a.A,{variant:"body2",sx:{fontWeight:500,letterSpacing:.5,color:"#1c1c1e"},children:"Loading, please wait..."})]}))},6137:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var i=n(4848),o=n(2907),r=n(4429),a=n(2064),s=n(5759),c=n(1703);let l=e=>{let{children:t}=e,n=(0,o.A)(),l=(0,r.A)(n.breakpoints.down("sm"));return(0,i.jsx)(a.A,{sx:{height:"100vh"},children:(0,i.jsx)(s.A,{maxWidth:"xs",children:l?(0,i.jsx)(a.A,{mt:2,children:t}):(0,i.jsx)(c.A,{sx:{p:3,boxShadow:1,borderRadius:3},children:t})})})}},423:(e,t,n)=>{"use strict";n.d(t,{r:()=>g});var i=n(4848),o=n(3384),r=n(1917),a=n(2413),s=n(9965),c=n.n(s),l=n(430),d=n(6540),h=n(4843),u=n(6420);let x=[{type:"oidc",name:"google",label:"Google",logo:"/auth-views/logos/google.svg"}],g=()=>{let[e]=(0,h.fp)(u.D),[t]=(0,h.fp)(u.x),[n,s]=(0,d.useState)(""),g=async(n,i)=>{let o=await fetch("".concat(l.backendUrl,"/").concat(t,"/v1/authorizations/").concat(e,"/federations/").concat(n,"/").concat(i),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(o.ok){let e=await o.json();if(e.redirect_uri){window.location.href=e.redirect_uri;return}}s("Failed SSO. System error occurred")};return(0,i.jsxs)(o.A,{spacing:1,children:[x.map((e,t)=>{let{type:n,name:o,label:a,logo:s}=e;return(0,i.jsxs)(r.A,{variant:"outlined",color:"inherit",sx:{textTransform:"none",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"8px 16px",borderColor:"#9e9e9e"},fullWidth:!0,onClick:()=>g(n,o),children:[(0,i.jsx)(c(),{src:s,alt:"".concat(o," logo"),width:24,height:24,style:{marginRight:8}}),"Sign in with ",a]},t)}),n&&(0,i.jsx)(a.A,{variant:"caption",color:"error",children:n})]})}},8564:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var i=n(4848),o=n(3384),r=n(2413),a=n(541),s=n(8590),c=n(1917),l=n(429),d=n(3753),h=n(6540),u=n(6715),x=n(9206),g=n(430),p=n(5074),f=n(4745),w=n(4414),A=n(2907),j=n(4429),m=n(6137);let y=async e=>e.userAgentData?await e.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion"]):null,v=e=>{let t="Unknown OS",n="Unknown Browser",i="Unknown Device";return/Windows/i.test(e)&&(t="Windows"),/Macintosh|Mac OS/i.test(e)&&(t="Mac"),/Android/i.test(e)&&(t="Android"),/iPhone|iPad|iPod/i.test(e)&&(t="iOS"),/Chrome/i.test(e)&&(n="Chrome"),/Safari/i.test(e)&&!/Chrome/i.test(e)&&(n="Safari"),/Firefox/i.test(e)&&(n="Firefox"),/Edge/i.test(e)&&(n="Edge"),/Mobile|Android|iPhone/i.test(e)&&(i="Mobile"),/Mac|Windows/i.test(e)&&(i="PC"),{os:t,browser:n,deviceType:i}};var b=n(423),S=n(4843),k=n(6420);function _(){let[,e]=(0,S.fp)(k.D),[,t]=(0,S.fp)(k.x),[n,_]=(0,h.useState)(""),[C,P]=(0,h.useState)(""),z=(0,u.useRouter)(),{id:T,tenant_id:W}=z.query,O=(0,A.A)(),U=(0,j.A)(O.breakpoints.down("sm")),{data:I,isPending:E}=(0,x.I)({queryKey:["fetchViewData",z.query],queryFn:async()=>{if(!z.isReady||0===Object.keys(z.query).length)return;let{id:n,tenant_id:i}=z.query;"string"==typeof n&&e(n),"string"==typeof i&&t(i),console.log(await y(navigator),v(navigator.userAgent));let o=await fetch("".concat(g.backendUrl,"/").concat(i,"/v1/authorizations/").concat(n,"/view-data"),{credentials:"include"});if(!o.ok)throw console.error(o),Error(o.status.toString());return await o.json()}}),D=async()=>{let e=await fetch("".concat(g.backendUrl,"/").concat(W,"/v1/authorizations/").concat(T,"/deny"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)},q=async()=>{(await fetch("".concat(g.backendUrl,"/").concat(W,"/v1/authorizations/").concat(T,"/password-authentication"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:C})})).ok&&z.push("/signin/authorize?id=".concat(T,"&tenant_id=").concat(W))};return((0,h.useEffect)(()=>{let e=async()=>{let e=await fetch("".concat(g.backendUrl,"/").concat(W,"/v1/authorizations/").concat(T,"/authorize-with-session"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){console.error(e);return}let t=await e.json();console.log(e.status,t),t.redirect_uri&&(window.location.href=t.redirect_uri)};console.log(I),I&&!0===I.session_enabled&&e()},[I]),E||!I||I&&I.session_enabled)?(0,i.jsx)(p.R,{}):(0,i.jsx)(m.Y,{children:(0,i.jsxs)(o.A,{spacing:U?2:3,alignItems:"center",children:[(0,i.jsx)(r.A,{variant:"subtitle1",fontWeight:"medium",children:"IdP Server"}),(0,i.jsxs)(o.A,{spacing:2,width:"100%",children:[(0,i.jsx)(a.A,{placeholder:"Your email",inputMode:"email",fullWidth:!0,required:!0,InputProps:{disableUnderline:!0,sx:{height:48,fontSize:17,px:2,backgroundColor:"transparent"},startAdornment:(0,i.jsx)(s.A,{position:"start",children:(0,i.jsx)(f.A,{sx:{color:"gray"}})})},onChange:e=>_(e.target.value)}),(0,i.jsx)(a.A,{placeholder:"Your password",type:"password",fullWidth:!0,required:!0,InputProps:{disableUnderline:!0,sx:{height:48,fontSize:17,px:2,backgroundColor:"transparent"},startAdornment:(0,i.jsx)(s.A,{position:"start",children:(0,i.jsx)(w.A,{sx:{color:"gray"}})})},onChange:e=>{navigator.credentials.preventSilentAccess(),P(e.target.value)}})]}),(0,i.jsxs)(o.A,{spacing:1,width:"100%",children:[(0,i.jsx)(c.A,{variant:"contained",disabled:!n||!C,onClick:q,fullWidth:!0,sx:{textTransform:"none",borderRadius:8,height:44,fontSize:16,fontWeight:"bold",backgroundColor:"#007AFF",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)","&:hover":{opacity:.8}},children:"Next"}),I.show_cancel&&(0,i.jsx)(c.A,{variant:"outlined",onClick:D,sx:{textTransform:"none",fontSize:16,fontWeight:"medium",color:"#505050",borderColor:"rgba(0, 0, 0, 0.2)"},children:"Cancel"})]}),(0,i.jsxs)(o.A,{spacing:1,direction:"row",justifyContent:"center",sx:{mt:3},children:[(0,i.jsx)(r.A,{variant:"body2",children:"Don't have an account?"}),(0,i.jsx)(l.A,{onClick:()=>z.push("/signup?id=".concat(T,"&tenant_id=").concat(W)),sx:{fontWeight:"bold",cursor:"pointer",color:"primary.main",fontSize:16},children:"Sign Up"})]}),(0,i.jsxs)(o.A,{spacing:2,sx:{width:"100%"},children:[(0,i.jsx)(d.A,{variant:"fullWidth"}),(0,i.jsx)(b.r,{})]}),(0,i.jsxs)(r.A,{variant:"caption",color:"text.secondary",textAlign:"center",sx:{mt:2},children:["By signing in, you agree to our",(0,i.jsx)(l.A,{href:null==I?void 0:I.tos_uri,sx:{fontWeight:"bold",mx:.5},children:"Terms of Use"}),"and",(0,i.jsx)(l.A,{href:null==I?void 0:I.policy_uri,sx:{fontWeight:"bold",mx:.5},children:"Privacy Policy"})]})]})})}},6420:(e,t,n)=>{"use strict";n.d(t,{D:()=>r,x:()=>a});var i=n(4929);let o=(0,i.KU)(()=>window.sessionStorage),r=(0,i.tG)("authSessionId","",o,{getOnInit:!0}),a=(0,i.tG)("authSessionTenantId","",o,{getOnInit:!0})}},e=>{var t=t=>e(e.s=t);e.O(0,[72,571,191,917,206,573,918,615,636,593,792],()=>t(999)),_N_E=e.O()}]);