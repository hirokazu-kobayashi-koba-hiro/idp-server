"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4592],{37345:(n,e,E)=>{E.r(e),E.d(e,{assets:()=>N,contentTitle:()=>i,default:()=>l,frontMatter:()=>r,metadata:()=>s,toc:()=>A});const s=JSON.parse('{"id":"content_11_learning/postgresql/dev-02-table-design","title":"PostgreSQL \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u3067\u306e\u52b9\u679c\u7684\u306a\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002","source":"@site/docs/content_11_learning/11-postgresql/dev-02-table-design.md","sourceDirName":"content_11_learning/11-postgresql","slug":"/content_11_learning/postgresql/dev-02-table-design","permalink":"/idp-server/docs/content_11_learning/postgresql/dev-02-table-design","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/11-postgresql/dev-02-table-design.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"PostgreSQL SQL\u57fa\u790e\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dev-01-sql-basics"},"next":{"title":"PostgreSQL \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u8a2d\u8a08\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dev-03-indexes"}}');var d=E(74848),T=E(28453);const r={},i="PostgreSQL \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9",N={},A=[{value:"\u76ee\u6b21",id:"\u76ee\u6b21",level:2},{value:"1. \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247",id:"1-\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247",level:2},{value:"1.1 \u826f\u3044\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u7279\u5fb4",id:"11-\u826f\u3044\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u7279\u5fb4",level:3},{value:"1.2 \u547d\u540d\u898f\u5247",id:"12-\u547d\u540d\u898f\u5247",level:3},{value:"2. \u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e",id:"2-\u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e",level:2},{value:"2.1 \u6570\u5024\u578b",id:"21-\u6570\u5024\u578b",level:3},{value:"2.2 \u6587\u5b57\u5217\u578b",id:"22-\u6587\u5b57\u5217\u578b",level:3},{value:"2.3 \u65e5\u4ed8\u30fb\u6642\u523b\u578b",id:"23-\u65e5\u4ed8\u6642\u523b\u578b",level:3},{value:"2.4 \u305d\u306e\u4ed6\u306e\u578b",id:"24-\u305d\u306e\u4ed6\u306e\u578b",level:3},{value:"3. \u4e3b\u30ad\u30fc\u306e\u8a2d\u8a08",id:"3-\u4e3b\u30ad\u30fc\u306e\u8a2d\u8a08",level:2},{value:"3.1 \u4e3b\u30ad\u30fc\u306e\u7a2e\u985e",id:"31-\u4e3b\u30ad\u30fc\u306e\u7a2e\u985e",level:3},{value:"3.2 IDENTITY\uff08\u63a8\u5968\uff09",id:"32-identity\u63a8\u5968",level:3},{value:"3.3 UUID",id:"33-uuid",level:3},{value:"3.4 \u8907\u5408\u4e3b\u30ad\u30fc",id:"34-\u8907\u5408\u4e3b\u30ad\u30fc",level:3},{value:"4. \u6b63\u898f\u5316",id:"4-\u6b63\u898f\u5316",level:2},{value:"4.1 \u6b63\u898f\u5316\u306e\u76ee\u7684",id:"41-\u6b63\u898f\u5316\u306e\u76ee\u7684",level:3},{value:"4.2 \u6b63\u898f\u5316\u306e\u6bb5\u968e",id:"42-\u6b63\u898f\u5316\u306e\u6bb5\u968e",level:3},{value:"4.3 \u6b63\u898f\u5316\u306e\u4f8b",id:"43-\u6b63\u898f\u5316\u306e\u4f8b",level:3},{value:"4.4 \u975e\u6b63\u898f\u5316\u306e\u5224\u65ad",id:"44-\u975e\u6b63\u898f\u5316\u306e\u5224\u65ad",level:3},{value:"5. \u5236\u7d04\uff08Constraints\uff09",id:"5-\u5236\u7d04constraints",level:2},{value:"5.1 \u5236\u7d04\u306e\u7a2e\u985e",id:"51-\u5236\u7d04\u306e\u7a2e\u985e",level:3},{value:"5.2 CHECK\u5236\u7d04\u306e\u6d3b\u7528",id:"52-check\u5236\u7d04\u306e\u6d3b\u7528",level:3},{value:"5.3 \u5236\u7d04\u306e\u547d\u540d",id:"53-\u5236\u7d04\u306e\u547d\u540d",level:3},{value:"6. \u5916\u90e8\u30ad\u30fc\u3068\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3",id:"6-\u5916\u90e8\u30ad\u30fc\u3068\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3",level:2},{value:"6.1 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e",id:"61-\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e",level:3},{value:"6.2 \u5916\u90e8\u30ad\u30fc\u306e\u5b9a\u7fa9",id:"62-\u5916\u90e8\u30ad\u30fc\u306e\u5b9a\u7fa9",level:3},{value:"6.3 \u53c2\u7167\u30a2\u30af\u30b7\u30e7\u30f3",id:"63-\u53c2\u7167\u30a2\u30af\u30b7\u30e7\u30f3",level:3},{value:"7. \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u81ea\u52d5\u751f\u6210",id:"7-\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u81ea\u52d5\u751f\u6210",level:2},{value:"7.1 \u30c7\u30d5\u30a9\u30eb\u30c8\u5024",id:"71-\u30c7\u30d5\u30a9\u30eb\u30c8\u5024",level:3},{value:"7.2 \u751f\u6210\u5217\uff08Generated Columns\uff09",id:"72-\u751f\u6210\u5217generated-columns",level:3},{value:"7.3 \u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u66f4\u65b0",id:"73-\u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u66f4\u65b0",level:3},{value:"8. \u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3",id:"8-\u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3",level:2},{value:"8.1 \u76e3\u67fb\u30ab\u30e9\u30e0",id:"81-\u76e3\u67fb\u30ab\u30e9\u30e0",level:3},{value:"8.2 \u30bd\u30d5\u30c8\u30c7\u30ea\u30fc\u30c8",id:"82-\u30bd\u30d5\u30c8\u30c7\u30ea\u30fc\u30c8",level:3},{value:"8.3 \u5c65\u6b74\u30c6\u30fc\u30d6\u30eb",id:"83-\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb",level:3},{value:"8.4 \u591a\u614b\u6027\uff08\u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30ba\u30e0\uff09",id:"84-\u591a\u614b\u6027\u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30ba\u30e0",level:3},{value:"9. \u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",id:"9-\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",level:2},{value:"9.1 \u907f\u3051\u308b\u3079\u304d\u30d1\u30bf\u30fc\u30f3",id:"91-\u907f\u3051\u308b\u3079\u304d\u30d1\u30bf\u30fc\u30f3",level:3},{value:"9.2 \u4fee\u6b63\u4f8b",id:"92-\u4fee\u6b63\u4f8b",level:3},{value:"\u53c2\u8003\u30ea\u30f3\u30af",id:"\u53c2\u8003\u30ea\u30f3\u30af",level:2}];function t(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,T.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"postgresql-\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9",children:"PostgreSQL \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9"})}),"\n",(0,d.jsx)(e.p,{children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u3067\u306e\u52b9\u679c\u7684\u306a\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002\n\u6b63\u898f\u5316\u3001\u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e\u3001\u5236\u7d04\u306e\u6d3b\u7528\u306a\u3069\u3001\u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002"}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"\u76ee\u6b21",children:"\u76ee\u6b21"}),"\n",(0,d.jsxs)(e.ol,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#1-%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E8%A8%AD%E8%A8%88%E3%81%AE%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%89%87",children:"\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#2-%E3%83%87%E3%83%BC%E3%82%BF%E5%9E%8B%E3%81%AE%E9%81%B8%E6%8A%9E",children:"\u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#3-%E4%B8%BB%E3%82%AD%E3%83%BC%E3%81%AE%E8%A8%AD%E8%A8%88",children:"\u4e3b\u30ad\u30fc\u306e\u8a2d\u8a08"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#4-%E6%AD%A3%E8%A6%8F%E5%8C%96",children:"\u6b63\u898f\u5316"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#5-%E5%88%B6%E7%B4%84constraints",children:"\u5236\u7d04\uff08Constraints\uff09"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#6-%E5%A4%96%E9%83%A8%E3%82%AD%E3%83%BC%E3%81%A8%E3%83%AA%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3",children:"\u5916\u90e8\u30ad\u30fc\u3068\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#7-%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E5%80%A4%E3%81%A8%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90",children:"\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u81ea\u52d5\u751f\u6210"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#8-%E5%AE%9F%E8%B7%B5%E7%9A%84%E3%81%AA%E8%A8%AD%E8%A8%88%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3",children:"\u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"#9-%E3%82%A2%E3%83%B3%E3%83%81%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3",children:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"})}),"\n"]}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"1-\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247",children:"1. \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u57fa\u672c\u539f\u5247"}),"\n",(0,d.jsx)(e.h3,{id:"11-\u826f\u3044\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u7279\u5fb4",children:"1.1 \u826f\u3044\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u7279\u5fb4"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  \u826f\u3044\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u306e\u539f\u5247                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u5358\u4e00\u8cac\u4efb\u3011                                                   \u2502\n\u2502  1\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306f1\u3064\u306e\u6982\u5ff5\uff08\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff09\u3092\u8868\u73fe                \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u3011                                             \u2502\n\u2502  \u5236\u7d04\u3092\u4f7f\u3063\u3066\u4e0d\u6b63\u306a\u30c7\u30fc\u30bf\u3092\u9632\u6b62                                 \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u9069\u5207\u306a\u6b63\u898f\u5316\u3011                                               \u2502\n\u2502  \u30c7\u30fc\u30bf\u306e\u91cd\u8907\u3092\u6392\u9664\u3057\u3064\u3064\u3001\u904e\u5ea6\u306a\u6b63\u898f\u5316\u306f\u907f\u3051\u308b                \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u547d\u540d\u898f\u5247\u306e\u7d71\u4e00\u3011                                             \u2502\n\u2502  \u4e00\u8cab\u6027\u306e\u3042\u308b\u547d\u540d\u3067\u30b3\u30fc\u30c9\u306e\u53ef\u8aad\u6027\u5411\u4e0a                          \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u5c06\u6765\u306e\u62e1\u5f35\u6027\u3011                                               \u2502\n\u2502  \u30b9\u30ad\u30fc\u30de\u5909\u66f4\u3092\u8003\u616e\u3057\u305f\u8a2d\u8a08                                    \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"12-\u547d\u540d\u898f\u5247",children:"1.2 \u547d\u540d\u898f\u5247"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u63a8\u5968\u3055\u308c\u308b\u547d\u540d\u898f\u5247\n\n-- \u30c6\u30fc\u30d6\u30eb\u540d: \u8907\u6570\u5f62\u3001\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\nCREATE TABLE users (...);\nCREATE TABLE order_items (...);\nCREATE TABLE user_login_histories (...);\n\n-- \u30ab\u30e9\u30e0\u540d: \u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u3001\u660e\u78ba\u306a\u540d\u524d\nCREATE TABLE users (\n    id BIGINT,\n    first_name VARCHAR(50),      -- \u25cb \u660e\u78ba\n    last_name VARCHAR(50),       -- \u25cb \u660e\u78ba\n    email_address VARCHAR(255),  -- \u25cb \u660e\u78ba\n    created_at TIMESTAMPTZ,\n    updated_at TIMESTAMPTZ\n);\n\n-- \u5916\u90e8\u30ad\u30fc: \u53c2\u7167\u5148\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u5358\u6570\u5f62 + _id\nCREATE TABLE orders (\n    id BIGINT,\n    user_id BIGINT,              -- users\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\n    shipping_address_id BIGINT,  -- addresses\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\n    ...\n);\n\n-- \u30d6\u30fc\u30eb\u578b: is_, has_, can_ \u306a\u3069\u306e\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\nCREATE TABLE users (\n    is_active BOOLEAN,\n    has_verified_email BOOLEAN,\n    can_receive_notifications BOOLEAN\n);\n\n-- \u65e5\u6642: _at \u30b5\u30d5\u30a3\u30c3\u30af\u30b9\nCREATE TABLE orders (\n    ordered_at TIMESTAMPTZ,\n    shipped_at TIMESTAMPTZ,\n    delivered_at TIMESTAMPTZ\n);\n\n-- \u65e5\u4ed8: _on \u307e\u305f\u306f _date \u30b5\u30d5\u30a3\u30c3\u30af\u30b9\nCREATE TABLE subscriptions (\n    start_date DATE,\n    end_date DATE\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"2-\u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e",children:"2. \u30c7\u30fc\u30bf\u578b\u306e\u9078\u629e"}),"\n",(0,d.jsx)(e.h3,{id:"21-\u6570\u5024\u578b",children:"2.1 \u6570\u5024\u578b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        \u6570\u5024\u578b\u4e00\u89a7                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u6574\u6570\u578b\u3011                                                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u578b           \u2502 \u30b5\u30a4\u30ba          \u2502 \u7bc4\u56f2                   \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 SMALLINT     \u2502 2 bytes         \u2502 -32,768 ~ 32,767       \u2502   \u2502\n\u2502  \u2502 INTEGER      \u2502 4 bytes         \u2502 -2.1\u5104 ~ 2.1\u5104         \u2502   \u2502\n\u2502  \u2502 BIGINT       \u2502 8 bytes         \u2502 -922\u4eac ~ 922\u4eac         \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u81ea\u52d5\u63a1\u756a\u3011                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 SERIAL       \u2502 INTEGER + \u30b7\u30fc\u30b1\u30f3\u30b9\uff08\u30ec\u30ac\u30b7\u30fc\uff09        \u2502   \u2502\n\u2502  \u2502 BIGSERIAL    \u2502 BIGINT + \u30b7\u30fc\u30b1\u30f3\u30b9\uff08\u30ec\u30ac\u30b7\u30fc\uff09         \u2502   \u2502\n\u2502  \u2502 IDENTITY     \u2502 \u6a19\u6e96SQL\u6e96\u62e0\uff08PostgreSQL 10+\u3001\u63a8\u5968\uff09     \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u5c0f\u6570\u578b\u3011                                                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 NUMERIC(p,s) \u2502 \u6b63\u78ba\u306a\u5c0f\u6570\uff08\u91d1\u984d\u8a08\u7b97\u306b\u4f7f\u7528\uff09            \u2502   \u2502\n\u2502  \u2502 REAL         \u2502 4 bytes \u6d6e\u52d5\u5c0f\u6570\u70b9\uff08\u8fd1\u4f3c\u5024\uff09            \u2502   \u2502\n\u2502  \u2502 DOUBLE       \u2502 8 bytes \u6d6e\u52d5\u5c0f\u6570\u70b9\uff08\u8fd1\u4f3c\u5024\uff09            \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u63a8\u5968\u3055\u308c\u308b\u4f7f\u3044\u5206\u3051\n\n-- ID: BIGINT\uff08\u5c06\u6765\u306e\u62e1\u5f35\u6027\uff09\nCREATE TABLE users (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY\n);\n\n-- \u6570\u91cf\u3001\u500b\u6570: INTEGER\uff08\u901a\u5e38\u306f\u3053\u308c\u3067\u5341\u5206\uff09\nCREATE TABLE order_items (\n    quantity INTEGER NOT NULL CHECK (quantity > 0)\n);\n\n-- \u91d1\u984d: NUMERIC\uff08\u6b63\u78ba\u306a\u8a08\u7b97\u304c\u5fc5\u8981\uff09\nCREATE TABLE orders (\n    total_amount NUMERIC(12, 2) NOT NULL,  -- \u6700\u592710\u6841.\u5c0f\u65702\u6841\n    tax_amount NUMERIC(12, 2) NOT NULL\n);\n\n-- \u5272\u5408\u3001\u7387: NUMERIC\nCREATE TABLE tax_rates (\n    rate NUMERIC(5, 4) NOT NULL  -- 0.0000 ~ 9.9999 (99.99%)\n);\n\n-- \u79d1\u5b66\u8a08\u7b97\u3001\u5ea7\u6a19: DOUBLE PRECISION\nCREATE TABLE locations (\n    latitude DOUBLE PRECISION,\n    longitude DOUBLE PRECISION\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"22-\u6587\u5b57\u5217\u578b",children:"2.2 \u6587\u5b57\u5217\u578b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       \u6587\u5b57\u5217\u578b\u4e00\u89a7                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u578b           \u2502 \u8aac\u660e                                     \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 CHAR(n)      \u2502 \u56fa\u5b9a\u9577\u3001\u30d1\u30c7\u30a3\u30f3\u30b0\u3042\u308a\uff08\u307b\u307c\u4f7f\u308f\u306a\u3044\uff09   \u2502   \u2502\n\u2502  \u2502 VARCHAR(n)   \u2502 \u53ef\u5909\u9577\u3001\u6700\u5927n\u6587\u5b57                        \u2502   \u2502\n\u2502  \u2502 TEXT         \u2502 \u53ef\u5909\u9577\u3001\u5236\u9650\u306a\u3057                         \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010PostgreSQL\u3067\u306e\u6ce8\u610f\u70b9\u3011                                       \u2502\n\u2502  \u30fbVARCHAR(n)\u3068TEXT\u306f\u5185\u90e8\u7684\u306b\u307b\u307c\u540c\u3058                          \u2502\n\u2502  \u30fb\u9577\u3055\u5236\u9650\u306fCHECK\u5236\u7d04\u3067\u3082\u53ef\u80fd                                 \u2502\n\u2502  \u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5dee\u306f\u306a\u3044                                     \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u63a8\u5968\u3055\u308c\u308b\u4f7f\u3044\u5206\u3051\n\n-- \u77ed\u3044\u56fa\u5b9a\u7684\u306a\u5024\nCREATE TABLE users (\n    -- VARCHAR(n)\u3067\u660e\u793a\u7684\u306b\u5236\u9650\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    email VARCHAR(255) NOT NULL UNIQUE,\n    phone_number VARCHAR(20),\n\n    -- \u56fa\u5b9a\u9577\u30b3\u30fc\u30c9\n    country_code CHAR(2),  -- 'JP', 'US' \u306a\u3069\n    currency_code CHAR(3)  -- 'JPY', 'USD' \u306a\u3069\n);\n\n-- \u9577\u3044\u30c6\u30ad\u30b9\u30c8\nCREATE TABLE articles (\n    title VARCHAR(200) NOT NULL,\n    body TEXT NOT NULL,  -- \u9577\u3055\u5236\u9650\u306a\u3057\n    summary TEXT\n);\n\n-- CHECK\u5236\u7d04\u3067\u5236\u9650\u3059\u308b\u65b9\u6cd5\nCREATE TABLE posts (\n    content TEXT NOT NULL CHECK (length(content) <= 10000)\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"23-\u65e5\u4ed8\u6642\u523b\u578b",children:"2.3 \u65e5\u4ed8\u30fb\u6642\u523b\u578b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     \u65e5\u4ed8\u30fb\u6642\u523b\u578b\u4e00\u89a7                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u578b             \u2502 \u8aac\u660e                                   \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 DATE           \u2502 \u65e5\u4ed8\u306e\u307f\uff082024-03-15\uff09                 \u2502   \u2502\n\u2502  \u2502 TIME           \u2502 \u6642\u523b\u306e\u307f\uff0814:30:00\uff09                   \u2502   \u2502\n\u2502  \u2502 TIMESTAMP      \u2502 \u65e5\u6642\uff08\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306a\u3057\uff09               \u2502   \u2502\n\u2502  \u2502 TIMESTAMPTZ    \u2502 \u65e5\u6642\uff08\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4ed8\u304d\uff09\u2605\u63a8\u5968         \u2502   \u2502\n\u2502  \u2502 INTERVAL       \u2502 \u671f\u9593\uff081 day, 2 hours \u306a\u3069\uff09            \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010TIMESTAMP vs TIMESTAMPTZ\u3011                                   \u2502\n\u2502  \u30fbTIMESTAMP: \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u60c5\u5831\u306a\u3057\u3001\u305d\u306e\u307e\u307e\u4fdd\u5b58               \u2502\n\u2502  \u30fbTIMESTAMPTZ: UTC\u5909\u63db\u3057\u3066\u4fdd\u5b58\u3001\u53d6\u5f97\u6642\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8TZ\u306b\u5909\u63db  \u2502\n\u2502  \u30fbWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f TIMESTAMPTZ \u3092\u63a8\u5968                  \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u63a8\u5968\u3055\u308c\u308b\u4f7f\u3044\u5206\u3051\n\nCREATE TABLE events (\n    -- \u30a4\u30d9\u30f3\u30c8\u767a\u751f\u65e5\u6642: TIMESTAMPTZ\uff08\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u5bfe\u5fdc\uff09\n    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    scheduled_at TIMESTAMPTZ,\n\n    -- \u8a95\u751f\u65e5\u306a\u3069\u65e5\u4ed8\u306e\u307f: DATE\n    birth_date DATE,\n\n    -- \u55b6\u696d\u6642\u9593\u306a\u3069\u6642\u523b\u306e\u307f: TIME\n    opening_time TIME,\n    closing_time TIME,\n\n    -- \u671f\u9593: INTERVAL\n    duration INTERVAL\n);\n\n-- \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u8a2d\u5b9a\nSET timezone = 'Asia/Tokyo';\n\n-- INTERVAL\u306e\u4f7f\u7528\u4f8b\nSELECT\n    now() AS current_time,\n    now() + INTERVAL '1 day' AS tomorrow,\n    now() - INTERVAL '1 week' AS last_week,\n    now() + INTERVAL '2 hours 30 minutes' AS later;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"24-\u305d\u306e\u4ed6\u306e\u578b",children:"2.4 \u305d\u306e\u4ed6\u306e\u578b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u30d6\u30fc\u30eb\u578b\nCREATE TABLE users (\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    has_verified_email BOOLEAN NOT NULL DEFAULT false\n);\n\n-- UUID\u578b\nCREATE TABLE api_keys (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    key_value UUID NOT NULL UNIQUE DEFAULT gen_random_uuid()\n);\n\n-- JSON\u578b\nCREATE TABLE user_preferences (\n    user_id BIGINT PRIMARY KEY,\n    -- JSONB: \u30d0\u30a4\u30ca\u30ea\u5f62\u5f0f\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u53ef\u80fd\u3001\u63a8\u5968\n    settings JSONB NOT NULL DEFAULT '{}',\n    -- JSON: \u30c6\u30ad\u30b9\u30c8\u5f62\u5f0f\u3001\u5165\u529b\u9806\u5e8f\u3092\u4fdd\u6301\n    raw_data JSON\n);\n\n-- \u914d\u5217\u578b\nCREATE TABLE articles (\n    id BIGINT PRIMARY KEY,\n    tags TEXT[] NOT NULL DEFAULT '{}',\n    scores INTEGER[]\n);\n\n-- ENUM\u578b\uff08\u9650\u5b9a\u5024\uff09\nCREATE TYPE order_status AS ENUM ('pending', 'processing', 'completed', 'cancelled');\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    status order_status NOT NULL DEFAULT 'pending'\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"3-\u4e3b\u30ad\u30fc\u306e\u8a2d\u8a08",children:"3. \u4e3b\u30ad\u30fc\u306e\u8a2d\u8a08"}),"\n",(0,d.jsx)(e.h3,{id:"31-\u4e3b\u30ad\u30fc\u306e\u7a2e\u985e",children:"3.1 \u4e3b\u30ad\u30fc\u306e\u7a2e\u985e"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     \u4e3b\u30ad\u30fc\u306e\u7a2e\u985e                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u30b5\u30ed\u30b2\u30fc\u30c8\u30ad\u30fc\uff08\u4ee3\u7406\u30ad\u30fc\uff09\u3011                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u30fb\u30b7\u30b9\u30c6\u30e0\u304c\u81ea\u52d5\u751f\u6210\u3059\u308bID                               \u2502   \u2502\n\u2502  \u2502 \u30fb\u30d3\u30b8\u30cd\u30b9\u7684\u306a\u610f\u5473\u3092\u6301\u305f\u306a\u3044                             \u2502   \u2502\n\u2502  \u2502 \u30fb\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u304c\u306a\u3044                                   \u2502   \u2502\n\u2502  \u2502 \u30fb\u4f8b: SERIAL, UUID, IDENTITY                            \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u30ca\u30c1\u30e5\u30e9\u30eb\u30ad\u30fc\uff08\u81ea\u7136\u30ad\u30fc\uff09\u3011                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u30fb\u30d3\u30b8\u30cd\u30b9\u4e0a\u306e\u8b58\u5225\u5b50                                     \u2502   \u2502\n\u2502  \u2502 \u30fb\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b                                 \u2502   \u2502\n\u2502  \u2502 \u30fb\u4f8b: \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u793e\u54e1\u756a\u53f7\u3001ISBN                     \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u63a8\u5968\u3011\u30b5\u30ed\u30b2\u30fc\u30c8\u30ad\u30fc\u3092\u4e3b\u30ad\u30fc\u306b\u3001                             \u2502\n\u2502         \u30ca\u30c1\u30e5\u30e9\u30eb\u30ad\u30fc\u306f\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u3067                          \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"32-identity\u63a8\u5968",children:"3.2 IDENTITY\uff08\u63a8\u5968\uff09"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- GENERATED ALWAYS AS IDENTITY\uff08PostgreSQL 10+\uff09\nCREATE TABLE users (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    email VARCHAR(255) NOT NULL UNIQUE  -- \u30ca\u30c1\u30e5\u30e9\u30eb\u30ad\u30fc\u306fUNIQUE\n);\n\n-- GENERATED BY DEFAULT\uff08\u5024\u3092\u6307\u5b9a\u53ef\u80fd\uff09\nCREATE TABLE imported_users (\n    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,\n    external_id BIGINT\n);\n\n-- \u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\nCREATE TABLE orders (\n    id BIGINT GENERATED ALWAYS AS IDENTITY (\n        START WITH 1000\n        INCREMENT BY 1\n        MINVALUE 1000\n        MAXVALUE 9999999999\n        CACHE 20\n    ) PRIMARY KEY\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"33-uuid",children:"3.3 UUID"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- UUID\u4e3b\u30ad\u30fc\nCREATE TABLE sessions (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    user_id BIGINT NOT NULL,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT now()\n);\n\n-- UUID\u306e\u5229\u70b9\u3068\u6b20\u70b9\n-- \u25cb \u5206\u6563\u30b7\u30b9\u30c6\u30e0\u3067ID\u885d\u7a81\u306a\u3057\n-- \u25cb ID\u304b\u3089\u60c5\u5831\u304c\u63a8\u6e2c\u3055\u308c\u306b\u304f\u3044\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff09\n-- \u25cb \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u6642\u306b\u4fbf\u5229\n-- \xd7 \u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\uff0816 bytes vs 8 bytes\uff09\n-- \xd7 \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u52b9\u7387\u304c\u3084\u3084\u4f4e\u4e0b\n-- \xd7 \u30bd\u30fc\u30c8\u9806\u304c\u30e9\u30f3\u30c0\u30e0\n"})}),"\n",(0,d.jsx)(e.h3,{id:"34-\u8907\u5408\u4e3b\u30ad\u30fc",children:"3.4 \u8907\u5408\u4e3b\u30ad\u30fc"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\uff08\u591a\u5bfe\u591a\uff09\nCREATE TABLE user_roles (\n    user_id BIGINT NOT NULL REFERENCES users(id),\n    role_id BIGINT NOT NULL REFERENCES roles(id),\n    granted_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    PRIMARY KEY (user_id, role_id)\n);\n\n-- \u30bf\u30a4\u30e0\u30b7\u30ea\u30fc\u30ba\u30c7\u30fc\u30bf\nCREATE TABLE sensor_readings (\n    sensor_id BIGINT NOT NULL,\n    recorded_at TIMESTAMPTZ NOT NULL,\n    value NUMERIC(10, 2) NOT NULL,\n    PRIMARY KEY (sensor_id, recorded_at)\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"4-\u6b63\u898f\u5316",children:"4. \u6b63\u898f\u5316"}),"\n",(0,d.jsx)(e.h3,{id:"41-\u6b63\u898f\u5316\u306e\u76ee\u7684",children:"4.1 \u6b63\u898f\u5316\u306e\u76ee\u7684"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     \u6b63\u898f\u5316\u306e\u76ee\u7684                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u30c7\u30fc\u30bf\u306e\u91cd\u8907\u3092\u6392\u9664\u3011                                         \u2502\n\u2502  \u2192 \u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u7bc0\u7d04                                            \u2502\n\u2502  \u2192 \u66f4\u65b0\u7570\u5e38\u306e\u9632\u6b62                                              \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u66f4\u65b0\u7570\u5e38\u306e\u7a2e\u985e\u3011                                             \u2502\n\u2502  \u30fb\u633f\u5165\u7570\u5e38: \u95a2\u9023\u30c7\u30fc\u30bf\u304c\u306a\u3044\u3068\u633f\u5165\u3067\u304d\u306a\u3044                    \u2502\n\u2502  \u30fb\u66f4\u65b0\u7570\u5e38: \u540c\u3058\u30c7\u30fc\u30bf\u3092\u8907\u6570\u7b87\u6240\u3067\u66f4\u65b0\u304c\u5fc5\u8981                  \u2502\n\u2502  \u30fb\u524a\u9664\u7570\u5e38: \u4ed6\u306e\u30c7\u30fc\u30bf\u3082\u4e00\u7dd2\u306b\u524a\u9664\u3055\u308c\u308b                      \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"42-\u6b63\u898f\u5316\u306e\u6bb5\u968e",children:"4.2 \u6b63\u898f\u5316\u306e\u6bb5\u968e"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u6b63\u898f\u5316\u306e\u6bb5\u968e                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u7b2c1\u6b63\u898f\u5f62 (1NF)\u3011                                            \u2502\n\u2502  \u30fb\u5404\u30ab\u30e9\u30e0\u304c\u539f\u5b50\u5024\uff08\u5206\u5272\u4e0d\u53ef\u80fd\u306a\u5024\uff09                          \u2502\n\u2502  \u30fb\u7e70\u308a\u8fd4\u3057\u30b0\u30eb\u30fc\u30d7\u304c\u306a\u3044                                      \u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u975e\u6b63\u898f\u5f62                                                   \u2502\n\u2502  orders: id, items (\u30ab\u30f3\u30de\u533a\u5207\u308a: "item1, item2, item3")       \u2502\n\u2502                                                                 \u2502\n\u2502  \u2705 \u7b2c1\u6b63\u898f\u5f62                                                  \u2502\n\u2502  orders: id                                                     \u2502\n\u2502  order_items: id, order_id, item_name                          \u2502\n\u2502                                                                 \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u7b2c2\u6b63\u898f\u5f62 (2NF)\u3011                                            \u2502\n\u2502  \u30fb\u7b2c1\u6b63\u898f\u5f62 +                                                  \u2502\n\u2502  \u30fb\u90e8\u5206\u95a2\u6570\u5f93\u5c5e\u306e\u6392\u9664\uff08\u8907\u5408\u30ad\u30fc\u306e\u4e00\u90e8\u306b\u306e\u307f\u4f9d\u5b58\u3059\u308b\u5c5e\u6027\u3092\u5206\u96e2\uff09\u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u7b2c1\u6b63\u898f\u5f62\u3060\u304c\u7b2c2\u6b63\u898f\u5f62\u3067\u306a\u3044                               \u2502\n\u2502  order_items: (order_id, product_id), product_name, quantity   \u2502\n\u2502  \u2192 product_name \u306f product_id \u306e\u307f\u306b\u4f9d\u5b58                       \u2502\n\u2502                                                                 \u2502\n\u2502  \u2705 \u7b2c2\u6b63\u898f\u5f62                                                  \u2502\n\u2502  order_items: (order_id, product_id), quantity                 \u2502\n\u2502  products: product_id, product_name                            \u2502\n\u2502                                                                 \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u7b2c3\u6b63\u898f\u5f62 (3NF)\u3011                                            \u2502\n\u2502  \u30fb\u7b2c2\u6b63\u898f\u5f62 +                                                  \u2502\n\u2502  \u30fb\u63a8\u79fb\u7684\u95a2\u6570\u5f93\u5c5e\u306e\u6392\u9664\uff08\u975e\u30ad\u30fc\u5c5e\u6027\u304c\u4ed6\u306e\u975e\u30ad\u30fc\u5c5e\u6027\u306b\u4f9d\u5b58\u3057\u306a\u3044\uff09\u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u7b2c2\u6b63\u898f\u5f62\u3060\u304c\u7b2c3\u6b63\u898f\u5f62\u3067\u306a\u3044                               \u2502\n\u2502  users: id, department_id, department_name                     \u2502\n\u2502  \u2192 department_name \u306f department_id \u306b\u4f9d\u5b58\uff08\u63a8\u79fb\u7684\u4f9d\u5b58\uff09       \u2502\n\u2502                                                                 \u2502\n\u2502  \u2705 \u7b2c3\u6b63\u898f\u5f62                                                  \u2502\n\u2502  users: id, department_id                                      \u2502\n\u2502  departments: id, name                                         \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,d.jsx)(e.h3,{id:"43-\u6b63\u898f\u5316\u306e\u4f8b",children:"4.3 \u6b63\u898f\u5316\u306e\u4f8b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u274c \u975e\u6b63\u898f\u5316\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE orders_denormalized (\n    order_id BIGINT,\n    customer_name VARCHAR(100),\n    customer_email VARCHAR(255),\n    customer_address TEXT,\n    product_names TEXT,  -- \u30ab\u30f3\u30de\u533a\u5207\u308a\n    product_prices TEXT, -- \u30ab\u30f3\u30de\u533a\u5207\u308a\n    total_amount NUMERIC\n);\n\n-- \u2705 \u6b63\u898f\u5316\u3055\u308c\u305f\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE customers (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) NOT NULL UNIQUE\n);\n\nCREATE TABLE addresses (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    customer_id BIGINT NOT NULL REFERENCES customers(id),\n    address_line TEXT NOT NULL,\n    is_default BOOLEAN NOT NULL DEFAULT false\n);\n\nCREATE TABLE products (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    name VARCHAR(200) NOT NULL,\n    price NUMERIC(10, 2) NOT NULL\n);\n\nCREATE TABLE orders (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    customer_id BIGINT NOT NULL REFERENCES customers(id),\n    shipping_address_id BIGINT REFERENCES addresses(id),\n    total_amount NUMERIC(12, 2) NOT NULL,\n    ordered_at TIMESTAMPTZ NOT NULL DEFAULT now()\n);\n\nCREATE TABLE order_items (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    order_id BIGINT NOT NULL REFERENCES orders(id),\n    product_id BIGINT NOT NULL REFERENCES products(id),\n    quantity INTEGER NOT NULL CHECK (quantity > 0),\n    unit_price NUMERIC(10, 2) NOT NULL  -- \u6ce8\u6587\u6642\u70b9\u306e\u4fa1\u683c\u3092\u4fdd\u5b58\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"44-\u975e\u6b63\u898f\u5316\u306e\u5224\u65ad",children:"4.4 \u975e\u6b63\u898f\u5316\u306e\u5224\u65ad"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  \u975e\u6b63\u898f\u5316\u304c\u8a31\u5bb9\u3055\u308c\u308b\u30b1\u30fc\u30b9                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u91cd\u8981\u306a\u5834\u5408\u3011                                 \u2502\n\u2502  \u30fb\u983b\u7e41\u306b\u7d50\u5408\u3055\u308c\u308b\u30c7\u30fc\u30bf                                      \u2502\n\u2502  \u30fb\u8aad\u307f\u53d6\u308a\u304c\u5727\u5012\u7684\u306b\u591a\u3044\u5834\u5408                                  \u2502\n\u2502  \u2192 \u8a08\u7b97\u6e08\u307f\u306e\u5024\u3084\u30b3\u30d4\u30fc\u3092\u4fdd\u6301                                  \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u5c65\u6b74\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u3011                                           \u2502\n\u2502  \u30fb\u6ce8\u6587\u6642\u70b9\u306e\u5546\u54c1\u540d\u30fb\u4fa1\u683c                                      \u2502\n\u2502  \u30fb\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304c\u5fc5\u8981\u306a\u30c7\u30fc\u30bf                              \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u306e\u91cd\u8907\u3011                                     \u2502\n\u2502  \u30fb\u30de\u30c6\u30ea\u30a2\u30e9\u30a4\u30ba\u30c9\u30d3\u30e5\u30fc                                      \u2502\n\u2502  \u30fb\u96c6\u8a08\u30c6\u30fc\u30d6\u30eb                                                \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u975e\u6b63\u898f\u5316\u306e\u4f8b: \u6ce8\u6587\u6642\u70b9\u306e\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\nCREATE TABLE order_items (\n    id BIGINT PRIMARY KEY,\n    order_id BIGINT NOT NULL,\n    product_id BIGINT NOT NULL,\n    quantity INTEGER NOT NULL,\n    -- \u6b63\u898f\u5316\u306a\u3089 products \u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3059\u308b\u304c\u3001\n    -- \u6ce8\u6587\u6642\u70b9\u306e\u5024\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u975e\u6b63\u898f\u5316\n    product_name VARCHAR(200) NOT NULL,\n    unit_price NUMERIC(10, 2) NOT NULL\n);\n\n-- \u975e\u6b63\u898f\u5316\u306e\u4f8b: \u96c6\u8a08\u5024\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\nCREATE TABLE user_stats (\n    user_id BIGINT PRIMARY KEY REFERENCES users(id),\n    order_count INTEGER NOT NULL DEFAULT 0,\n    total_spent NUMERIC(12, 2) NOT NULL DEFAULT 0,\n    last_order_at TIMESTAMPTZ,\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"5-\u5236\u7d04constraints",children:"5. \u5236\u7d04\uff08Constraints\uff09"}),"\n",(0,d.jsx)(e.h3,{id:"51-\u5236\u7d04\u306e\u7a2e\u985e",children:"5.1 \u5236\u7d04\u306e\u7a2e\u985e"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- NOT NULL: NULL\u5024\u3092\u7981\u6b62\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    email VARCHAR(255) NOT NULL  -- \u5fc5\u9808\u30d5\u30a3\u30fc\u30eb\u30c9\n);\n\n-- UNIQUE: \u4e00\u610f\u6027\u5236\u7d04\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    email VARCHAR(255) NOT NULL UNIQUE,  -- \u5358\u4e00\u30ab\u30e9\u30e0\n    UNIQUE (first_name, last_name)       -- \u8907\u5408\u30e6\u30cb\u30fc\u30af\n);\n\n-- PRIMARY KEY: \u4e3b\u30ad\u30fc\uff08NOT NULL + UNIQUE\uff09\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY\n);\n\n-- FOREIGN KEY: \u5916\u90e8\u30ad\u30fc\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    user_id BIGINT NOT NULL REFERENCES users(id)\n);\n\n-- CHECK: \u5024\u306e\u691c\u8a3c\nCREATE TABLE products (\n    id BIGINT PRIMARY KEY,\n    price NUMERIC(10, 2) NOT NULL CHECK (price >= 0),\n    discount_rate NUMERIC(3, 2) CHECK (discount_rate BETWEEN 0 AND 1),\n    stock INTEGER NOT NULL CHECK (stock >= 0)\n);\n\n-- EXCLUDE: \u6392\u4ed6\u5236\u7d04\uff08\u7bc4\u56f2\u306e\u91cd\u8907\u7981\u6b62\u306a\u3069\uff09\nCREATE TABLE reservations (\n    id BIGINT PRIMARY KEY,\n    room_id BIGINT NOT NULL,\n    reserved_period TSTZRANGE NOT NULL,\n    EXCLUDE USING GIST (room_id WITH =, reserved_period WITH &&)\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"52-check\u5236\u7d04\u306e\u6d3b\u7528",children:"5.2 CHECK\u5236\u7d04\u306e\u6d3b\u7528"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u5024\u306e\u7bc4\u56f2\u5236\u9650\nCREATE TABLE orders (\n    status VARCHAR(20) NOT NULL\n        CHECK (status IN ('pending', 'processing', 'completed', 'cancelled')),\n    quantity INTEGER NOT NULL CHECK (quantity > 0 AND quantity <= 1000),\n    discount_percent NUMERIC(5, 2) CHECK (discount_percent BETWEEN 0 AND 100)\n);\n\n-- \u6761\u4ef6\u4ed8\u304d\u5fc5\u9808\nCREATE TABLE deliveries (\n    id BIGINT PRIMARY KEY,\n    status VARCHAR(20) NOT NULL,\n    delivered_at TIMESTAMPTZ,\n    -- completed \u306e\u5834\u5408\u306f delivered_at \u304c\u5fc5\u9808\n    CHECK (status != 'completed' OR delivered_at IS NOT NULL)\n);\n\n-- \u30ab\u30e9\u30e0\u9593\u306e\u6574\u5408\u6027\nCREATE TABLE date_ranges (\n    id BIGINT PRIMARY KEY,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    CHECK (end_date >= start_date)\n);\n\n-- \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u7c21\u6613\u691c\u8a3c\nCREATE TABLE users (\n    email VARCHAR(255) NOT NULL\n        CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$')\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"53-\u5236\u7d04\u306e\u547d\u540d",children:"5.3 \u5236\u7d04\u306e\u547d\u540d"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u5236\u7d04\u306b\u540d\u524d\u3092\u4ed8\u3051\u308b\uff08\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5206\u304b\u308a\u3084\u3059\u304f\u306a\u308b\uff09\nCREATE TABLE products (\n    id BIGINT PRIMARY KEY,\n    code VARCHAR(20) NOT NULL,\n    price NUMERIC(10, 2) NOT NULL,\n    stock INTEGER NOT NULL,\n\n    CONSTRAINT products_code_unique UNIQUE (code),\n    CONSTRAINT products_price_positive CHECK (price >= 0),\n    CONSTRAINT products_stock_non_negative CHECK (stock >= 0)\n);\n\n-- \u5916\u90e8\u30ad\u30fc\u306b\u3082\u540d\u524d\u3092\u4ed8\u3051\u308b\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    user_id BIGINT NOT NULL,\n\n    CONSTRAINT orders_user_id_fkey\n        FOREIGN KEY (user_id) REFERENCES users(id)\n        ON DELETE RESTRICT\n        ON UPDATE CASCADE\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"6-\u5916\u90e8\u30ad\u30fc\u3068\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3",children:"6. \u5916\u90e8\u30ad\u30fc\u3068\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,d.jsx)(e.h3,{id:"61-\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e",children:"6.1 \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u30101\u5bfe1 (One-to-One)\u3011                                          \u2502\n\u2502  users \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 user_profiles                              \u2502\n\u2502  \u30fb\u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306b1\u3064\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb                             \u2502\n\u2502  \u30fb\u5916\u90e8\u30ad\u30fc + UNIQUE\u5236\u7d04                                        \u2502\n\u2502                                                                 \u2502\n\u2502  \u30101\u5bfe\u591a (One-to-Many)\u3011                                        \u2502\n\u2502  users \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500 orders                                     \u2502\n\u2502                  \u251c\u2500 orders                                     \u2502\n\u2502                  \u2514\u2500 orders                                     \u2502\n\u2502  \u30fb1\u4eba\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u8907\u6570\u306e\u6ce8\u6587                                   \u2502\n\u2502  \u30fb\u6700\u3082\u4e00\u822c\u7684\u306a\u30d1\u30bf\u30fc\u30f3                                        \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u591a\u5bfe\u591a (Many-to-Many)\u3011                                      \u2502\n\u2502  users \u2500\u2500\u252c\u2500\u2500 user_roles \u2500\u2500\u252c\u2500\u2500 roles                            \u2502\n\u2502          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                     \u2502\n\u2502  \u30fb\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3067\u8868\u73fe                                          \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"62-\u5916\u90e8\u30ad\u30fc\u306e\u5b9a\u7fa9",children:"6.2 \u5916\u90e8\u30ad\u30fc\u306e\u5b9a\u7fa9"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- 1\u5bfe1\nCREATE TABLE user_profiles (\n    user_id BIGINT PRIMARY KEY REFERENCES users(id),\n    bio TEXT,\n    avatar_url VARCHAR(500)\n);\n\n-- 1\u5bfe\u591a\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    user_id BIGINT NOT NULL REFERENCES users(id),\n    total_amount NUMERIC(12, 2) NOT NULL\n);\n\n-- \u591a\u5bfe\u591a\nCREATE TABLE user_roles (\n    user_id BIGINT NOT NULL REFERENCES users(id),\n    role_id BIGINT NOT NULL REFERENCES roles(id),\n    PRIMARY KEY (user_id, role_id)\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"63-\u53c2\u7167\u30a2\u30af\u30b7\u30e7\u30f3",children:"6.3 \u53c2\u7167\u30a2\u30af\u30b7\u30e7\u30f3"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- ON DELETE / ON UPDATE \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\n\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    user_id BIGINT NOT NULL,\n\n    CONSTRAINT orders_user_fkey\n        FOREIGN KEY (user_id) REFERENCES users(id)\n        ON DELETE CASCADE      -- \u30e6\u30fc\u30b6\u30fc\u524a\u9664\u6642\u306b\u6ce8\u6587\u3082\u524a\u9664\n        ON UPDATE CASCADE      -- \u30e6\u30fc\u30b6\u30fcID\u5909\u66f4\u6642\u306b\u8ffd\u5f93\n);\n\n-- \u30aa\u30d7\u30b7\u30e7\u30f3\u4e00\u89a7:\n-- RESTRICT: \u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u524a\u9664/\u66f4\u65b0\u3092\u7981\u6b62\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\n-- CASCADE: \u53c2\u7167\u5148\u3082\u4e00\u7dd2\u306b\u524a\u9664/\u66f4\u65b0\n-- SET NULL: NULL\u306b\u8a2d\u5b9a\n-- SET DEFAULT: \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306b\u8a2d\u5b9a\n-- NO ACTION: RESTRICT\u3068\u540c\u69d8\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7d42\u4e86\u6642\u306b\u30c1\u30a7\u30c3\u30af\uff09\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u4f7f\u3044\u5206\u3051\u306e\u4f8b\n\n-- \u30e6\u30fc\u30b6\u30fc\u524a\u9664\u6642\u306b\u95a2\u9023\u30c7\u30fc\u30bf\u3082\u524a\u9664\uff08CASCADE\uff09\nCREATE TABLE sessions (\n    id UUID PRIMARY KEY,\n    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE\n);\n\n-- \u89aa\u30ab\u30c6\u30b4\u30ea\u524a\u9664\u6642\u306f\u7981\u6b62\uff08RESTRICT\uff09\nCREATE TABLE categories (\n    id BIGINT PRIMARY KEY,\n    parent_id BIGINT REFERENCES categories(id) ON DELETE RESTRICT\n);\n\n-- \u62c5\u5f53\u8005\u9000\u8077\u6642\u306fNULL\u306b\uff08SET NULL\uff09\nCREATE TABLE projects (\n    id BIGINT PRIMARY KEY,\n    owner_id BIGINT REFERENCES users(id) ON DELETE SET NULL\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"7-\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u81ea\u52d5\u751f\u6210",children:"7. \u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u81ea\u52d5\u751f\u6210"}),"\n",(0,d.jsx)(e.h3,{id:"71-\u30c7\u30d5\u30a9\u30eb\u30c8\u5024",children:"7.1 \u30c7\u30d5\u30a9\u30eb\u30c8\u5024"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE articles (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n\n    -- \u56fa\u5b9a\u5024\n    status VARCHAR(20) NOT NULL DEFAULT 'draft',\n    is_published BOOLEAN NOT NULL DEFAULT false,\n    view_count INTEGER NOT NULL DEFAULT 0,\n\n    -- \u95a2\u6570\u547c\u3073\u51fa\u3057\n    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n\n    -- UUID\n    public_id UUID NOT NULL DEFAULT gen_random_uuid(),\n\n    -- \u5f0f\n    slug VARCHAR(200) UNIQUE  -- \u901a\u5e38\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u8a2d\u5b9a\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"72-\u751f\u6210\u5217generated-columns",children:"7.2 \u751f\u6210\u5217\uff08Generated Columns\uff09"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- PostgreSQL 12+: STORED\uff08\u4fdd\u5b58\u3055\u308c\u308b\u8a08\u7b97\u5217\uff09\nCREATE TABLE products (\n    id BIGINT PRIMARY KEY,\n    price NUMERIC(10, 2) NOT NULL,\n    tax_rate NUMERIC(3, 2) NOT NULL DEFAULT 0.10,\n\n    -- \u81ea\u52d5\u8a08\u7b97\u3055\u308c\u308b\u5217\n    tax_amount NUMERIC(10, 2)\n        GENERATED ALWAYS AS (price * tax_rate) STORED,\n    total_price NUMERIC(10, 2)\n        GENERATED ALWAYS AS (price * (1 + tax_rate)) STORED\n);\n\n-- \u30d5\u30eb\u30cd\u30fc\u30e0\u306e\u81ea\u52d5\u751f\u6210\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    full_name VARCHAR(101)\n        GENERATED ALWAYS AS (first_name || ' ' || last_name) STORED\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"73-\u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u66f4\u65b0",children:"7.3 \u30c8\u30ea\u30ac\u30fc\u306b\u3088\u308b\u81ea\u52d5\u66f4\u65b0"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- updated_at \u3092\u81ea\u52d5\u66f4\u65b0\u3059\u308b\u30c8\u30ea\u30ac\u30fc\nCREATE OR REPLACE FUNCTION update_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = now();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trigger_update_updated_at\n    BEFORE UPDATE ON articles\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at();\n\n-- \u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306b\u9069\u7528\nCREATE TRIGGER trigger_update_updated_at\n    BEFORE UPDATE ON users\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at();\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"8-\u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3",children:"8. \u5b9f\u8df5\u7684\u306a\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,d.jsx)(e.h3,{id:"81-\u76e3\u67fb\u30ab\u30e9\u30e0",children:"8.1 \u76e3\u67fb\u30ab\u30e9\u30e0"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u5168\u30c6\u30fc\u30d6\u30eb\u306b\u5171\u901a\u306e\u76e3\u67fb\u30ab\u30e9\u30e0\nCREATE TABLE orders (\n    id BIGINT PRIMARY KEY,\n    -- \u30d3\u30b8\u30cd\u30b9\u30ab\u30e9\u30e0\n    user_id BIGINT NOT NULL,\n    total_amount NUMERIC(12, 2) NOT NULL,\n\n    -- \u76e3\u67fb\u30ab\u30e9\u30e0\n    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    created_by BIGINT REFERENCES users(id),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    updated_by BIGINT REFERENCES users(id)\n);\n"})}),"\n",(0,d.jsx)(e.h3,{id:"82-\u30bd\u30d5\u30c8\u30c7\u30ea\u30fc\u30c8",children:"8.2 \u30bd\u30d5\u30c8\u30c7\u30ea\u30fc\u30c8"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u7269\u7406\u524a\u9664\u305b\u305a\u306b\u8ad6\u7406\u524a\u9664\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    email VARCHAR(255) NOT NULL,\n    is_deleted BOOLEAN NOT NULL DEFAULT false,\n    deleted_at TIMESTAMPTZ,\n    deleted_by BIGINT\n);\n\n-- \u30e6\u30cb\u30fc\u30af\u5236\u7d04\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u306a\u3044\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u306b\u9069\u7528\nCREATE UNIQUE INDEX users_email_unique\n    ON users (email)\n    WHERE is_deleted = false;\n\n-- \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u53d6\u5f97\u3059\u308b\u30d3\u30e5\u30fc\nCREATE VIEW active_users AS\n    SELECT * FROM users WHERE is_deleted = false;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"83-\u5c65\u6b74\u30c6\u30fc\u30d6\u30eb",children:"8.3 \u5c65\u6b74\u30c6\u30fc\u30d6\u30eb"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u5909\u66f4\u5c65\u6b74\u3092\u4fdd\u5b58\nCREATE TABLE user_histories (\n    id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,\n    user_id BIGINT NOT NULL,\n    -- \u5909\u66f4\u524d\u306e\u5024\u3092JSONB\u3067\u4fdd\u5b58\n    old_values JSONB,\n    -- \u5909\u66f4\u5f8c\u306e\u5024\n    new_values JSONB,\n    -- \u5909\u66f4\u7a2e\u5225\n    operation VARCHAR(10) NOT NULL CHECK (operation IN ('INSERT', 'UPDATE', 'DELETE')),\n    changed_at TIMESTAMPTZ NOT NULL DEFAULT now(),\n    changed_by BIGINT\n);\n\n-- \u30c8\u30ea\u30ac\u30fc\u3067\u81ea\u52d5\u8a18\u9332\nCREATE OR REPLACE FUNCTION record_user_history()\nRETURNS TRIGGER AS $$\nBEGIN\n    INSERT INTO user_histories (user_id, old_values, new_values, operation)\n    VALUES (\n        COALESCE(NEW.id, OLD.id),\n        CASE WHEN TG_OP = 'INSERT' THEN NULL ELSE to_jsonb(OLD) END,\n        CASE WHEN TG_OP = 'DELETE' THEN NULL ELSE to_jsonb(NEW) END,\n        TG_OP\n    );\n    RETURN COALESCE(NEW, OLD);\nEND;\n$$ LANGUAGE plpgsql;\n"})}),"\n",(0,d.jsx)(e.h3,{id:"84-\u591a\u614b\u6027\u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30ba\u30e0",children:"8.4 \u591a\u614b\u6027\uff08\u30dd\u30ea\u30e2\u30fc\u30d5\u30a3\u30ba\u30e0\uff09"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- STI (Single Table Inheritance)\nCREATE TABLE notifications (\n    id BIGINT PRIMARY KEY,\n    type VARCHAR(50) NOT NULL,  -- 'email', 'sms', 'push'\n    user_id BIGINT NOT NULL,\n    -- \u5171\u901a\u30ab\u30e9\u30e0\n    title VARCHAR(200) NOT NULL,\n    body TEXT NOT NULL,\n    sent_at TIMESTAMPTZ,\n    -- \u30bf\u30a4\u30d7\u56fa\u6709\u306e\u30c7\u30fc\u30bf\n    metadata JSONB NOT NULL DEFAULT '{}'\n);\n\n-- \u307e\u305f\u306f\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u5206\u96e2\nCREATE TABLE notifications (\n    id BIGINT PRIMARY KEY,\n    type VARCHAR(50) NOT NULL,\n    user_id BIGINT NOT NULL,\n    title VARCHAR(200) NOT NULL,\n    body TEXT NOT NULL\n);\n\nCREATE TABLE email_notification_details (\n    notification_id BIGINT PRIMARY KEY REFERENCES notifications(id),\n    email_address VARCHAR(255) NOT NULL,\n    subject VARCHAR(200) NOT NULL\n);\n\nCREATE TABLE sms_notification_details (\n    notification_id BIGINT PRIMARY KEY REFERENCES notifications(id),\n    phone_number VARCHAR(20) NOT NULL\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"9-\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",children:"9. \u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,d.jsx)(e.h3,{id:"91-\u907f\u3051\u308b\u3079\u304d\u30d1\u30bf\u30fc\u30f3",children:"9.1 \u907f\u3051\u308b\u3079\u304d\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u274c EAV (Entity-Attribute-Value)                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 entity_id | attribute   | value                         \u2502   \u2502\n\u2502  \u2502 1         | 'name'      | 'Alice'                       \u2502   \u2502\n\u2502  \u2502 1         | 'email'     | 'alice@example.com'           \u2502   \u2502\n\u2502  \u2502 1         | 'age'       | '30'                          \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502  \u2192 \u30af\u30a8\u30ea\u304c\u8907\u96d1\u3001\u578b\u5b89\u5168\u6027\u306a\u3057\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u52b9\u7387\u60aa\u3044            \u2502\n\u2502  \u2192 JSONB\u30ab\u30e9\u30e0\u307e\u305f\u306f\u9069\u5207\u306a\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u3092\u691c\u8a0e                   \u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u795e\u30c6\u30fc\u30d6\u30eb\uff081\u30c6\u30fc\u30d6\u30eb\u306b\u5168\u3066\u3092\u8a70\u3081\u8fbc\u3080\uff09                    \u2502\n\u2502  \u2192 \u9069\u5207\u306b\u6b63\u898f\u5316\u3059\u308b                                            \u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u30ab\u30f3\u30de\u533a\u5207\u308a\u306e\u5024                                           \u2502\n\u2502  tags = 'java,python,go'                                       \u2502\n\u2502  \u2192 \u914d\u5217\u578b\u307e\u305f\u306f\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528                              \u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u66d6\u6627\u306a\u30ab\u30e9\u30e0\u540d                                             \u2502\n\u2502  data, value, info, flag, type                                 \u2502\n\u2502  \u2192 \u5177\u4f53\u7684\u3067\u8aac\u660e\u7684\u306a\u540d\u524d\u3092\u4f7f\u7528                                  \u2502\n\u2502                                                                 \u2502\n\u2502  \u274c \u4e88\u7d04\u8a9e\u3092\u30ab\u30e9\u30e0\u540d\u306b\u4f7f\u7528                                     \u2502\n\u2502  user, order, table, index                                     \u2502\n\u2502  \u2192 users, orders \u306a\u3069\u8907\u6570\u5f62\u3084\u5225\u540d\u3092\u4f7f\u7528                        \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"92-\u4fee\u6b63\u4f8b",children:"9.2 \u4fee\u6b63\u4f8b"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u274c EAV\uff08\u907f\u3051\u308b\u3079\u304d\uff09\nCREATE TABLE user_attributes (\n    user_id BIGINT,\n    attribute_name VARCHAR(50),\n    attribute_value TEXT\n);\n\n-- \u2705 \u9069\u5207\u306a\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    age INTEGER\n);\n\n-- \u307e\u305f\u306f\u52d5\u7684\u306a\u5c5e\u6027\u304c\u5fc5\u8981\u306a\u5834\u5408\u306fJSONB\nCREATE TABLE users (\n    id BIGINT PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    attributes JSONB NOT NULL DEFAULT '{}'\n);\n\n-- \u274c \u30ab\u30f3\u30de\u533a\u5207\u308a\uff08\u907f\u3051\u308b\u3079\u304d\uff09\nCREATE TABLE articles (\n    id BIGINT PRIMARY KEY,\n    tags VARCHAR(500)  -- 'java,python,go'\n);\n\n-- \u2705 \u914d\u5217\u578b\nCREATE TABLE articles (\n    id BIGINT PRIMARY KEY,\n    tags TEXT[] NOT NULL DEFAULT '{}'\n);\n\n-- \u2705 \u307e\u305f\u306f\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE article_tags (\n    article_id BIGINT REFERENCES articles(id),\n    tag_id BIGINT REFERENCES tags(id),\n    PRIMARY KEY (article_id, tag_id)\n);\n"})}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsx)(e.h2,{id:"\u53c2\u8003\u30ea\u30f3\u30af",children:"\u53c2\u8003\u30ea\u30f3\u30af"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/datatype.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30c7\u30fc\u30bf\u578b"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/ddl-constraints.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u5236\u7d04"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-FK",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u5916\u90e8\u30ad\u30fc"})}),"\n"]})]})}function l(n={}){const{wrapper:e}={...(0,T.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(t,{...n})}):t(n)}},28453:(n,e,E)=>{E.d(e,{R:()=>r,x:()=>i});var s=E(96540);const d={},T=s.createContext(d);function r(n){const e=s.useContext(T);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:r(n.components),s.createElement(T.Provider,{value:e},n.children)}}}]);