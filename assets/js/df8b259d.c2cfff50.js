"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[839],{39034:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"content_09_project/issue-441-phase1-current-state-investigation","title":"Issue #441 Phase 1: \u73fe\u72b6\u628a\u63e1 - \u8a73\u7d30\u8abf\u67fb\u30ec\u30dd\u30fc\u30c8","description":"441 Phase 1: \u73fe\u72b6\u628a\u63e1 - \u8a73\u7d30\u8abf\u67fb\u30ec\u30dd\u30fc\u30c8","source":"@site/docs/content_09_project/issue-441-phase1-current-state-investigation.md","sourceDirName":"content_09_project","slug":"/content_09_project/issue-441-phase1-current-state-investigation","permalink":"/idp-server/docs/content_09_project/issue-441-phase1-current-state-investigation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_09_project/issue-441-phase1-current-state-investigation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Control Plane\u5206\u96e2\u8a2d\u8a08\u63d0\u6848","permalink":"/idp-server/docs/content_09_project/control-plane-separation-design"},"next":{"title":"project-01-faq","permalink":"/idp-server/docs/content_09_project/project-01-faq"}}');var i=s(74848),d=s(28453);const t={},c="Issue #441 Phase 1: \u73fe\u72b6\u628a\u63e1 - \u8a73\u7d30\u8abf\u67fb\u30ec\u30dd\u30fc\u30c8",l={},a=[{value:"\ud83d\udccb \u8abf\u67fb\u76ee\u7684",id:"-\u8abf\u67fb\u76ee\u7684",level:2},{value:"\ud83c\udfaf Executive Summary",id:"-executive-summary",level:2},{value:"\u4e3b\u8981\u767a\u898b",id:"\u4e3b\u8981\u767a\u898b",level:3},{value:"\u7d71\u8a08API\u5b9f\u88c5\u306e\u96e3\u6613\u5ea6",id:"\u7d71\u8a08api\u5b9f\u88c5\u306e\u96e3\u6613\u5ea6",level:3},{value:"1. \u65e2\u5b58\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\u53d6\u5f97\u6a5f\u80fd",id:"1-\u65e2\u5b58\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\u53d6\u5f97\u6a5f\u80fd",level:2},{value:"1.1 Audit Log API\uff08\u7ba1\u7406\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0\uff09",id:"11-audit-log-api\u7ba1\u7406\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0",level:3},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",level:4},{value:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",level:4},{value:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08AuditLogQueries\uff09",id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfauditlogqueries",level:4},{value:"1.2 Security Event API\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\uff09",id:"12-security-event-api\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0",level:3},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi-1",level:4},{value:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi-1",level:4},{value:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08SecurityEventQueries\uff09",id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfsecurityeventqueries",level:4},{value:"1.3 User Management API\uff08\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97\uff09",id:"13-user-management-api\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97",level:3},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi-2",level:4},{value:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi-2",level:4},{value:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08UserQueries\uff09",id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfuserqueries",level:4},{value:"2. \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a73\u7d30",id:"2-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a73\u7d30",level:2},{value:"2.1 AuditLog \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",id:"21-auditlog-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",level:3},{value:"2.2 SecurityEvent \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",id:"22-securityevent-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",level:3},{value:"2.3 User \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",id:"23-user-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",level:3},{value:"3. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u9020",id:"3-\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u9020",level:2},{value:"3.1 audit_log \u30c6\u30fc\u30d6\u30eb",id:"31-audit_log-\u30c6\u30fc\u30d6\u30eb",level:3},{value:"3.2 security_event \u30c6\u30fc\u30d6\u30eb",id:"32-security_event-\u30c6\u30fc\u30d6\u30eb",level:3},{value:"3.3 idp_user \u30c6\u30fc\u30d6\u30eb",id:"33-idp_user-\u30c6\u30fc\u30d6\u30eb",level:3},{value:"3.4 \u305d\u306e\u4ed6\u306e\u7d71\u8a08\u95a2\u9023\u30c6\u30fc\u30d6\u30eb",id:"34-\u305d\u306e\u4ed6\u306e\u7d71\u8a08\u95a2\u9023\u30c6\u30fc\u30d6\u30eb",level:3},{value:"oauth_token \u30c6\u30fc\u30d6\u30eb",id:"oauth_token-\u30c6\u30fc\u30d6\u30eb",level:4},{value:"authentication_transaction \u30c6\u30fc\u30d6\u30eb",id:"authentication_transaction-\u30c6\u30fc\u30d6\u30eb",level:4},{value:"4. Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",id:"4-repository-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",level:2},{value:"4.1 SecurityEventQueryRepository",id:"41-securityeventqueryrepository",level:3},{value:"4.2 AuditLogQueryRepository",id:"42-auditlogqueryrepository",level:3},{value:"4.3 UserQueryRepository",id:"43-userqueryrepository",level:3},{value:"5. \u7d71\u8a08\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u5b9f\u88c5\u53ef\u80fd\u6027\u8a55\u4fa1",id:"5-\u7d71\u8a08\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u5b9f\u88c5\u53ef\u80fd\u6027\u8a55\u4fa1",level:2},{value:"5.1 DAU (Daily Active Users)",id:"51-dau-daily-active-users",level:3},{value:"5.2 MAU (Monthly Active Users)",id:"52-mau-monthly-active-users",level:3},{value:"5.3 \u8a8d\u8a3c\u6210\u529f\u7387",id:"53-\u8a8d\u8a3c\u6210\u529f\u7387",level:3},{value:"5.4 \u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570\uff08grant_type\u5225\uff09",id:"54-\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570grant_type\u5225",level:3},{value:"5.5 \u30e6\u30fc\u30b6\u30fc\u6210\u9577\u30c8\u30ec\u30f3\u30c9",id:"55-\u30e6\u30fc\u30b6\u30fc\u6210\u9577\u30c8\u30ec\u30f3\u30c9",level:3},{value:"5.6 \u7ba1\u7406\u64cd\u4f5c\u7d71\u8a08",id:"56-\u7ba1\u7406\u64cd\u4f5c\u7d71\u8a08",level:3},{value:"6. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\u306e\u63a8\u5968\u4e8b\u9805",id:"6-\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\u306e\u63a8\u5968\u4e8b\u9805",level:2},{value:"6.1 Materialized View \u306e\u6d3b\u7528",id:"61-materialized-view-\u306e\u6d3b\u7528",level:3},{value:"6.2 \u8ffd\u52a0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u691c\u8a0e",id:"62-\u8ffd\u52a0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u691c\u8a0e",level:3},{value:"6.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\uff08\u5c06\u6765\u7684\u691c\u8a0e\uff09",id:"63-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u5c06\u6765\u7684\u691c\u8a0e",level:3},{value:"7. \u65e2\u5b58\u30d1\u30bf\u30fc\u30f3\u306e\u6d3b\u7528\u65b9\u91dd",id:"7-\u65e2\u5b58\u30d1\u30bf\u30fc\u30f3\u306e\u6d3b\u7528\u65b9\u91dd",level:2},{value:"7.1 Handler-Service-Repository \u30d1\u30bf\u30fc\u30f3\u306e\u7d99\u627f",id:"71-handler-service-repository-\u30d1\u30bf\u30fc\u30f3\u306e\u7d99\u627f",level:3},{value:"7.2 EntryService 10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3\u306e\u9069\u7528",id:"72-entryservice-10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3\u306e\u9069\u7528",level:3},{value:"8. \u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u63a8\u5968\u4e8b\u9805",id:"8-\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u63a8\u5968\u4e8b\u9805",level:2},{value:"Phase 2: \u5916\u90e8\u8abf\u67fb\uff08Keycloak/Auth0\uff09",id:"phase-2-\u5916\u90e8\u8abf\u67fbkeycloakauth0",level:3},{value:"Phase 3: API\u4ed5\u69d8\u7b56\u5b9a",id:"phase-3-api\u4ed5\u69d8\u7b56\u5b9a",level:3},{value:"Phase 4: PoC\u5b9f\u88c5",id:"phase-4-poc\u5b9f\u88c5",level:3},{value:"9. \u7d50\u8ad6",id:"9-\u7d50\u8ad6",level:2},{value:"\u2705 \u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5145\u5b9f\u5ea6",id:"-\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5145\u5b9f\u5ea6",level:3},{value:"\ud83d\ude80 \u5b9f\u88c5\u306e\u5bb9\u6613\u6027",id:"-\u5b9f\u88c5\u306e\u5bb9\u6613\u6027",level:3},{value:"\ud83d\udcca \u6700\u91cd\u8981\u30c6\u30fc\u30d6\u30eb",id:"-\u6700\u91cd\u8981\u30c6\u30fc\u30d6\u30eb",level:3},{value:"\u4ed8\u9332A: \u30af\u30a8\u30ea\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u4f8b",id:"\u4ed8\u9332a-\u30af\u30a8\u30ea\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u4f8b",level:2},{value:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9: DAU\u8a08\u7b97",id:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9-dau\u8a08\u7b97",level:3},{value:"\u4ed8\u9332B: \u53c2\u8003\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7",id:"\u4ed8\u9332b-\u53c2\u8003\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7",level:2},{value:"EntryService",id:"entryservice",level:3},{value:"Repository",id:"repository",level:3},{value:"Handler",id:"handler",level:3},{value:"DDL",id:"ddl",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"issue-441-phase-1-\u73fe\u72b6\u628a\u63e1---\u8a73\u7d30\u8abf\u67fb\u30ec\u30dd\u30fc\u30c8",children:"Issue #441 Phase 1: \u73fe\u72b6\u628a\u63e1 - \u8a73\u7d30\u8abf\u67fb\u30ec\u30dd\u30fc\u30c8"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/hirokazu-kobayashi-koba-hiro/idp-server/issues/441",children:"#441 \u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u30c7\u30fc\u30bf\u53ce\u96c6\u30fb\u5206\u6790\u6a5f\u80fd"}),"\n",(0,i.jsx)(n.strong,{children:"\u8abf\u67fb\u65e5"}),": 2025-11-23\n",(0,i.jsx)(n.strong,{children:"\u8abf\u67fb\u8005"}),": AI Assistant (Claude Code)\n",(0,i.jsx)(n.strong,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9"}),": Phase 1\u5b8c\u4e86"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u8abf\u67fb\u76ee\u7684",children:"\ud83d\udccb \u8abf\u67fb\u76ee\u7684"}),"\n",(0,i.jsx)(n.p,{children:"\u7d71\u8a08\u30fb\u5206\u6790\u6a5f\u80fd\u306e\u5b9f\u88c5\u306b\u5411\u3051\u3066\u3001\u65e2\u5b58\u306e\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\u53d6\u5f97\u6a5f\u80fd\u3001\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u6a5f\u80fd\u3001\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u5b8c\u5168\u306b\u68da\u5378\u3057\u3057\u3001\u7d71\u8a08API\u306e\u5b9f\u88c5\u53ef\u80fd\u6027\u3092\u8a55\u4fa1\u3059\u308b\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-executive-summary",children:"\ud83c\udfaf Executive Summary"}),"\n",(0,i.jsx)(n.h3,{id:"\u4e3b\u8981\u767a\u898b",children:"\u4e3b\u8981\u767a\u898b"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5145\u5b9f\u5ea6"}),": \u7d71\u8a08\u6a5f\u80fd\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306f\u65e2\u306b\u5b8c\u5168\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\n\u2705 ",(0,i.jsx)(n.strong,{children:"\u512a\u308c\u305f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u8a2d\u8a08"}),": \u6642\u7cfb\u5217\u96c6\u8a08\u306b\u6700\u9069\u306a\u8907\u5408\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u6574\u5099\u6e08\u307f\n\u2705 ",(0,i.jsx)(n.strong,{children:"Repository \u30d1\u30bf\u30fc\u30f3\u6574\u5099"}),": ",(0,i.jsx)(n.code,{children:"findTotalCount()"})," \u7b49\u306e\u96c6\u8a08\u7528\u30e1\u30bd\u30c3\u30c9\u304c\u65e2\u306b\u5b9f\u88c5\u6e08\u307f\n\u2705 ",(0,i.jsx)(n.strong,{children:"\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"}),": RLS + \u30c6\u30ca\u30f3\u30c8\u7b2c\u4e00\u5f15\u6570\u30d1\u30bf\u30fc\u30f3\u3067\u5b8c\u5168\u5206\u96e2"]}),"\n",(0,i.jsx)(n.h3,{id:"\u7d71\u8a08api\u5b9f\u88c5\u306e\u96e3\u6613\u5ea6",children:"\u7d71\u8a08API\u5b9f\u88c5\u306e\u96e3\u6613\u5ea6"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u57fa\u672c\u7d71\u8a08\uff08DAU/MAU/\u6210\u529f\u7387\u7b49\uff09"}),": ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"})," - \u65e2\u5b58Repository\u30d1\u30bf\u30fc\u30f3\u3067\u5373\u5b9f\u88c5\u53ef\u80fd\n\ud83d\udfe1 ",(0,i.jsx)(n.strong,{children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u7d71\u8a08"}),": ",(0,i.jsx)(n.strong,{children:"\u4e2d\u7a0b\u5ea6"})," - Materialized View \u307e\u305f\u306f\u5c02\u7528\u96c6\u8a08\u30c6\u30fc\u30d6\u30eb\u63a8\u5968\n\ud83d\udd34 ",(0,i.jsx)(n.strong,{children:"\u4e88\u6e2c\u5206\u6790\u30fb\u7570\u5e38\u691c\u77e5"}),": ",(0,i.jsx)(n.strong,{children:"\u9ad8\u5ea6"})," - ML\u57fa\u76e4\u3068\u306e\u7d71\u5408\u304c\u5fc5\u8981"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-\u65e2\u5b58\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\u53d6\u5f97\u6a5f\u80fd",children:"1. \u65e2\u5b58\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\u53d6\u5f97\u6a5f\u80fd"}),"\n",(0,i.jsx)(n.h3,{id:"11-audit-log-api\u7ba1\u7406\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0",children:"1.1 Audit Log API\uff08\u7ba1\u7406\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0\uff09"}),"\n",(0,i.jsx)(n.h4,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"AuditLogManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/system_manager/AuditLogManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/tenants/{tenant-id}/audit-logs\nGET /v1/management/tenants/{tenant-id}/audit-logs/{id}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u30e1\u30bd\u30c3\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"findList(AdminAuthenticationContext, TenantIdentifier, AuditLogQueries, RequestAttributes)\nget(AdminAuthenticationContext, TenantIdentifier, AuditLogIdentifier, RequestAttributes)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"OrgAuditLogManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/organization_manager/OrgAuditLogManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/organizations/{organizationId}/tenants/{tenantId}/audit-logs\nGET /v1/management/organizations/{organizationId}/tenants/{tenantId}/audit-logs/{auditLogId}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfauditlogqueries",children:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08AuditLogQueries\uff09"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,i.jsx)(n.th,{children:"\u578b"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"from"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u958b\u59cb\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"to"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u7d42\u4e86\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"Audit Log ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.td,{children:"String (\u30ab\u30f3\u30de\u533a\u5207\u308a)"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8\u7a2e\u5225"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"description"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u8aac\u660e\u30d5\u30a3\u30eb\u30bf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"target_resource"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u5bfe\u8c61\u30ea\u30bd\u30fc\u30b9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"target_resource_action"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30a2\u30af\u30b7\u30e7\u30f3 (create/update/delete)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"client_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"external_user_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u5916\u90e8\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"outcome_result"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u7d50\u679c (success/failure)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"target_tenant_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u5bfe\u8c61\u30c6\u30ca\u30f3\u30c8ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dry_run"})}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsx)(n.td,{children:"\u30c9\u30e9\u30a4\u30e9\u30f3\u5b9f\u884c\u30d5\u30e9\u30b0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"attributes.*"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\u30d5\u30a3\u30eb\u30bf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30da\u30fc\u30b8\u30b5\u30a4\u30ba (\u30c7\u30d5\u30a9\u30eb\u30c8: 20)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"offset"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30aa\u30d5\u30bb\u30c3\u30c8 (\u30c7\u30d5\u30a9\u30eb\u30c8: 0)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"12-security-event-api\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0",children:"1.2 Security Event API\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\uff09"}),"\n",(0,i.jsx)(n.h4,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi-1",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"SecurityEventManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/system_manager/SecurityEventManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/tenants/{tenant-id}/security-events\nGET /v1/management/tenants/{tenant-id}/security-events/{event-id}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi-1",children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"OrgSecurityEventManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/organization_manager/OrgSecurityEventManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/organizations/{organizationId}/tenants/{tenantId}/security-events\nGET /v1/management/organizations/{organizationId}/tenants/{tenantId}/security-events/{eventId}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfsecurityeventqueries",children:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08SecurityEventQueries\uff09"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,i.jsx)(n.th,{children:"\u578b"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"from"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u958b\u59cb\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"to"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u7d42\u4e86\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"event_type"})}),(0,i.jsx)(n.td,{children:"String (\u30ab\u30f3\u30de\u533a\u5207\u308a)"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8\u7a2e\u5225 (TOKEN_ISSUED, USER_AUTHENTICATED\u7b49)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"client_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"external_user_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u5916\u90e8\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"details.*"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"JSONB\u8a73\u7d30\u30d5\u30a3\u30eb\u30bf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30da\u30fc\u30b8\u30b5\u30a4\u30ba (\u30c7\u30d5\u30a9\u30eb\u30c8: 20)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"offset"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30aa\u30d5\u30bb\u30c3\u30c8 (\u30c7\u30d5\u30a9\u30eb\u30c8: 0)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"13-user-management-api\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97",children:"1.3 User Management API\uff08\u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97\uff09"}),"\n",(0,i.jsx)(n.h4,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi-2",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"UserManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/system_manager/UserManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/tenants/{tenant-id}/users\nGET /v1/management/tenants/{tenant-id}/users/{user-id}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi-2",children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EntryService"}),": ",(0,i.jsx)(n.code,{children:"OrgUserManagementEntryService"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/organization_manager/OrgUserManagementEntryService.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REST Endpoint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/organizations/{organizationId}/tenants/{tenantId}/users\nGET /v1/management/organizations/{organizationId}/tenants/{tenantId}/users/{userId}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bfuserqueries",children:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\uff08UserQueries\uff09"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,i.jsx)(n.th,{children:"\u578b"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"from"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u958b\u59cb\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"to"})}),(0,i.jsx)(n.td,{children:"LocalDateTime"}),(0,i.jsx)(n.td,{children:"\u7d42\u4e86\u65e5\u6642"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fcID\u30d5\u30a3\u30eb\u30bf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"external_user_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u5916\u90e8\u30e6\u30fc\u30b6\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"provider_id"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30d7\u30ed\u30d0\u30a4\u30c0\u30fcID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"name"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u6c0f\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"given_name"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"family_name"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u59d3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"middle_name"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30df\u30c9\u30eb\u30cd\u30fc\u30e0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"nickname"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"preferred_username"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fc\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"status"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9 (ACTIVE/INACTIVE/DELETED)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"phone_number"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u96fb\u8a71\u756a\u53f7"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tenant_id"})}),(0,i.jsx)(n.td,{children:"UUID"}),(0,i.jsx)(n.td,{children:"\u30c6\u30ca\u30f3\u30c8ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"role"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30ed\u30fc\u30eb"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"permission"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u6a29\u9650"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"details.*"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"\u30ab\u30b9\u30bf\u30e0\u8a73\u7d30\u30d5\u30a3\u30eb\u30bf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30da\u30fc\u30b8\u30b5\u30a4\u30ba (\u30c7\u30d5\u30a9\u30eb\u30c8: 20)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"offset"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"\u30aa\u30d5\u30bb\u30c3\u30c8 (\u30c7\u30d5\u30a9\u30eb\u30c8: 0)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a73\u7d30",children:"2. \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\u8a73\u7d30"}),"\n",(0,i.jsx)(n.h3,{id:"21-auditlog-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",children:"2.1 AuditLog \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/audit/AuditLog.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"UUID id                      // \u76e3\u67fb\u30ed\u30b0ID\nString type                  // \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\nString description           // \u8aac\u660e\nUUID tenantId                // \u30c6\u30ca\u30f3\u30c8ID\nString clientId              // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\nUUID userId                  // \u30e6\u30fc\u30b6\u30fcID\nString externalUserId        // \u5916\u90e8\u30e6\u30fc\u30b6\u30fcID\nJSONB userPayload            // \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\nString targetResource        // \u5bfe\u8c61\u30ea\u30bd\u30fc\u30b9\nString targetResourceAction  // \u30a2\u30af\u30b7\u30e7\u30f3 (create/update/delete)\nJSONB request                // \u30ea\u30af\u30a8\u30b9\u30c8\u8a73\u7d30\nJSONB before                 // \u5909\u66f4\u524d\u72b6\u614b\nJSONB after                  // \u5909\u66f4\u5f8c\u72b6\u614b\nString outcomeResult         // \u7d50\u679c (success/failure)\nString outcomeReason         // \u5931\u6557\u7406\u7531\nString targetTenantId        // \u5bfe\u8c61\u30c6\u30ca\u30f3\u30c8ID\nString ipAddress             // IP\u30a2\u30c9\u30ec\u30b9\nString userAgent             // \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\nJSONB attributes             // \u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\nBoolean dryRun               // \u30c9\u30e9\u30a4\u30e9\u30f3\u30d5\u30e9\u30b0\nTimestamp createdAt          // \u4f5c\u6210\u65e5\u6642 \u2605\u7d71\u8a08\u7528\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u306b\u4f7f\u3048\u308b\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"type"})," - \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u3054\u3068\u306e\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"outcomeResult"})," - \u6210\u529f/\u5931\u6557\u7387"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"createdAt"})," - \u6642\u7cfb\u5217\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"targetResourceAction"})," - \u30a2\u30af\u30b7\u30e7\u30f3\u7a2e\u5225\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"userId"})," - \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"clientId"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3054\u3068\u306e\u4f7f\u7528\u72b6\u6cc1"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"dryRun"})," - \u30c6\u30b9\u30c8\u5b9f\u884c vs \u672c\u756a\u5b9f\u884c\u306e\u6bd4\u7387"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"22-securityevent-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",children:"2.2 SecurityEvent \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/security/SecurityEvent.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"UUID identifier              // \u30a4\u30d9\u30f3\u30c8ID\nSecurityEventType type       // \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225 (TOKEN_ISSUED, USER_AUTHENTICATED\u7b49)\nString description           // \u8aac\u660e\nSecurityEventTenant tenant   // \u30c6\u30ca\u30f3\u30c8\u60c5\u5831 (id, issuer)\nSecurityEventClient client   // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u60c5\u5831 (id, clientId)\nSecurityEventUser user       // \u30e6\u30fc\u30b6\u30fc\u60c5\u5831 (sub, externalUserId)\nIpAddress ipAddress          // IP\u30a2\u30c9\u30ec\u30b9\nUserAgent userAgent          // \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\nJSONB detail                 // \u30a4\u30d9\u30f3\u30c8\u8a73\u7d30\nTimestamp createdAt          // \u4f5c\u6210\u65e5\u6642 \u2605\u7d71\u8a08\u7528\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u306b\u4f7f\u3048\u308b\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"type"})," - \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u96c6\u8a08 (\u8a8d\u8a3c\u6210\u529f/\u5931\u6557\u3001\u30c8\u30fc\u30af\u30f3\u767a\u884c\u7b49)"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"createdAt"})," - \u6642\u7cfb\u5217\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"user.sub"})," - \u30e6\u30cb\u30fc\u30af\u30e6\u30fc\u30b6\u30fc\u6570 (DAU/MAU)"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"client.clientId"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5225\u4f7f\u7528\u72b6\u6cc1"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"ipAddress"})," - \u5730\u7406\u7684\u5206\u5e03\u5206\u6790"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"userAgent"})," - \u30c7\u30d0\u30a4\u30b9/\u30d6\u30e9\u30a6\u30b6\u5206\u6790"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"detail"})," (JSONB) - \u67d4\u8edf\u306a\u30ab\u30c6\u30b4\u30ea\u5206\u6790"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"23-user-\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",children:"2.3 User \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/User.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"UUID sub                     // \u30e6\u30fc\u30b6\u30fcID\nString providerId            // \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\nString externalUserId        // \u5916\u90e8\u30e6\u30fc\u30b6\u30fcID\nString preferredUsername     // \u30e6\u30fc\u30b6\u30fc\u540d\nString email                 // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\nBoolean emailVerified        // \u30e1\u30fc\u30eb\u691c\u8a3c\u6e08\u307f\nString phoneNumber           // \u96fb\u8a71\u756a\u53f7\nBoolean phoneNumberVerified  // \u96fb\u8a71\u756a\u53f7\u691c\u8a3c\u6e08\u307f\nJSONB authenticationDevices  // \u8a8d\u8a3c\u30c7\u30d0\u30a4\u30b9 (WebAuthn/FIDO2)\nJSONB verifiedClaims         // \u691c\u8a3c\u6e08\u307f\u30af\u30ec\u30fc\u30e0\nUserStatus status            // \u30b9\u30c6\u30fc\u30bf\u30b9 (ACTIVE/INACTIVE/DELETED)\nTimestamp createdAt          // \u4f5c\u6210\u65e5\u6642 \u2605\u7d71\u8a08\u7528\nTimestamp updatedAt          // \u66f4\u65b0\u65e5\u6642 \u2605\u7d71\u8a08\u7528\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u306b\u4f7f\u3048\u308b\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"status"})," - \u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"createdAt"})," - \u30e6\u30fc\u30b6\u30fc\u6210\u9577\u30c8\u30ec\u30f3\u30c9"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"providerId"})," - \u8a8d\u8a3c\u65b9\u6cd5\u306e\u5206\u5e03"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"emailVerified"})," / ",(0,i.jsx)(n.code,{children:"phoneNumberVerified"})," - \u691c\u8a3c\u7387"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"authenticationDevices"})," - FIDO2/WebAuthn\u63a1\u7528\u7387"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u9020",children:"3. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u9020"}),"\n",(0,i.jsx)(n.h3,{id:"31-audit_log-\u30c6\u30fc\u30d6\u30eb",children:"3.1 audit_log \u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDL\u30d5\u30a1\u30a4\u30eb"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-database/postgresql/V0_9_0__init_lib.sql:956-998"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE audit_log (\n    id UUID PRIMARY KEY,\n    type VARCHAR(255) NOT NULL,\n    description VARCHAR(255) NOT NULL,\n    tenant_id UUID NOT NULL,\n    client_id VARCHAR(255) NOT NULL,\n    user_id UUID NOT NULL,\n    external_user_id VARCHAR(255),\n    user_payload JSONB NOT NULL,\n    target_tenant_id VARCHAR(255),\n    target_resource TEXT NOT NULL,\n    target_resource_action TEXT NOT NULL,\n    request_payload JSONB,\n    before_payload JSONB,\n    after_payload JSONB,\n    outcome_result VARCHAR(20) DEFAULT 'unknown',\n    outcome_reason VARCHAR(255),\n    ip_address TEXT,\n    user_agent TEXT,\n    dry_run BOOLEAN,\n    attributes JSONB,\n    created_at TIMESTAMP DEFAULT now()\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff0810\u500b\uff09"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE INDEX idx_audit_log_tenant_id ON audit_log (tenant_id);\nCREATE INDEX idx_audit_log_client_id ON audit_log (client_id);\nCREATE INDEX idx_audit_log_user_id ON audit_log (user_id);\nCREATE INDEX idx_audit_log_external_user_id ON audit_log (external_user_id);\nCREATE INDEX idx_audit_log_created_at ON audit_log (created_at);\nCREATE INDEX idx_audit_log_tenant_created_at ON audit_log (tenant_id, created_at); -- \u8907\u5408 \u2605\u91cd\u8981\nCREATE INDEX idx_audit_log_attributes ON audit_log USING GIN (attributes);\nCREATE INDEX idx_audit_log_outcome ON audit_log (outcome_result);\nCREATE INDEX idx_audit_log_type_created ON audit_log (type, created_at DESC); -- \u8907\u5408 \u2605\u91cd\u8981\nCREATE INDEX idx_audit_log_target_tenant ON audit_log (target_tenant_id, created_at DESC);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"RLS \u30dd\u30ea\u30b7\u30fc"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER TABLE audit_log ENABLE ROW LEVEL SECURITY;\nCREATE POLICY tenant_isolation_policy ON audit_log\n  USING (tenant_id = current_setting('app.tenant_id')::uuid);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"32-security_event-\u30c6\u30fc\u30d6\u30eb",children:"3.2 security_event \u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDL\u30d5\u30a1\u30a4\u30eb"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-database/postgresql/V0_9_0__init_lib.sql:595-629"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE security_event (\n    id UUID PRIMARY KEY,\n    type VARCHAR(255) NOT NULL,\n    description VARCHAR(255) NOT NULL,\n    tenant_id UUID NOT NULL,\n    tenant_name VARCHAR(255) NOT NULL,\n    client_id VARCHAR(255) NOT NULL,\n    client_name VARCHAR(255) NOT NULL,\n    user_id UUID,\n    user_name VARCHAR(255),\n    external_user_id VARCHAR(255),\n    ip_address INET,\n    user_agent TEXT,\n    detail JSONB NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff088\u500b\uff09"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE INDEX idx_events_type ON security_event (type);\nCREATE INDEX idx_events_tenant ON security_event (tenant_id);\nCREATE INDEX idx_events_client ON security_event (client_id);\nCREATE INDEX idx_events_user ON security_event (user_id);\nCREATE INDEX idx_events_external_user_id ON security_event (external_user_id);\nCREATE INDEX idx_events_created_at ON security_event (created_at);\nCREATE INDEX idx_events_detail_jsonb ON security_event USING GIN (detail); -- JSONB \u2605\u67d4\u8edf\nCREATE INDEX idx_events_tenant_created_at ON security_event (tenant_id, created_at); -- \u8907\u5408 \u2605\u91cd\u8981\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"RLS \u30dd\u30ea\u30b7\u30fc"}),": \u540c\u69d8\u306b\u9069\u7528"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u2b50 \u7d71\u8a08\u306b\u6700\u9069\u306a\u7406\u7531"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8907\u5408\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": ",(0,i.jsx)(n.code,{children:"(tenant_id, created_at)"})," \u3067\u6642\u7cfb\u5217\u96c6\u8a08\u304c\u9ad8\u901f"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"JSONB GIN \u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": \u8a73\u7d30\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u304c\u53ef\u80fd"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u578b\u7a2e\u5225\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u3054\u3068\u306e\u96c6\u8a08\u304c\u9ad8\u901f"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"33-idp_user-\u30c6\u30fc\u30d6\u30eb",children:"3.3 idp_user \u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDL\u30d5\u30a1\u30a4\u30eb"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-database/postgresql/V0_9_0__init_lib.sql:175-230"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE idp_user (\n    id UUID PRIMARY KEY,\n    tenant_id UUID NOT NULL,\n    provider_id VARCHAR(255) NOT NULL,\n    external_user_id VARCHAR(255),\n    external_user_original_payload JSONB,\n    name VARCHAR(255),\n    given_name VARCHAR(255),\n    family_name VARCHAR(255),\n    middle_name VARCHAR(255),\n    nickname VARCHAR(255),\n    preferred_username VARCHAR(255) NOT NULL,\n    profile TEXT,\n    picture TEXT,\n    website TEXT,\n    email VARCHAR(255),\n    email_verified BOOLEAN,\n    gender VARCHAR(255),\n    birthdate VARCHAR(255),\n    zoneinfo VARCHAR(255),\n    locale VARCHAR(255),\n    phone_number VARCHAR(255),\n    phone_number_verified BOOLEAN,\n    address JSONB,\n    custom_properties JSONB,\n    credentials JSONB,\n    hashed_password TEXT,\n    authentication_devices JSONB,\n    verified_claims JSONB,\n    status VARCHAR(255) NOT NULL,\n    created_at TIMESTAMP DEFAULT now(),\n    updated_at TIMESTAMP DEFAULT now()\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE INDEX idx_idp_external_user_id ON idp_user (tenant_id, provider_id, external_user_id);\nCREATE INDEX idx_idp_user_tenant_email ON idp_user (tenant_id, email);\nCREATE INDEX idx_idp_user_tenant_phone ON idp_user (tenant_id, phone_number);\nCREATE INDEX idx_user_devices_gin_path_ops ON idp_user USING GIN (authentication_devices);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"34-\u305d\u306e\u4ed6\u306e\u7d71\u8a08\u95a2\u9023\u30c6\u30fc\u30d6\u30eb",children:"3.4 \u305d\u306e\u4ed6\u306e\u7d71\u8a08\u95a2\u9023\u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsx)(n.h4,{id:"oauth_token-\u30c6\u30fc\u30d6\u30eb",children:"oauth_token \u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDL\u30d5\u30a1\u30a4\u30eb"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-database/postgresql/V0_9_0__init_lib.sql:442-493"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u7528\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"grant_type VARCHAR(255)           -- authorization_code, refresh_token, client_credentials\ntoken_type VARCHAR(20)            -- Bearer, DPoP\nuser_id UUID                      -- \u30c8\u30fc\u30af\u30f3\u6240\u6709\u8005\nclient_id VARCHAR(255)            -- \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\nscopes TEXT                       -- \u30b9\u30b3\u30fc\u30d7\ncreated_at TIMESTAMP              -- \u767a\u884c\u65e5\u6642 \u2605\u7d71\u8a08\u7528\naccess_token_expires_at TIMESTAMP -- \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\nrefresh_token_expires_at TIMESTAMP -- \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u4f8b"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570\uff08\u65e5\u6b21/grant_type\u5225\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u30a2\u30af\u30c6\u30a3\u30d6\u30c8\u30fc\u30af\u30f3\u6570"}),"\n",(0,i.jsx)(n.li,{children:"\u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u983b\u5ea6"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"authentication_transaction-\u30c6\u30fc\u30d6\u30eb",children:"authentication_transaction \u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"DDL\u30d5\u30a1\u30a4\u30eb"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-database/postgresql/V0_9_0__init_lib.sql:789-826"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u7528\u30d5\u30a3\u30fc\u30eb\u30c9"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"flow VARCHAR(255)                 -- \u8a8d\u8a3c\u30d5\u30ed\u30fc\u7a2e\u5225 (password, mfa, biometric)\nuser_id UUID                      -- \u30e6\u30fc\u30b6\u30fcID\nclient_id VARCHAR(255)            -- \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\ncreated_at TIMESTAMP              -- \u4f5c\u6210\u65e5\u6642 \u2605\u7d71\u8a08\u7528\nexpires_at TIMESTAMP              -- \u6709\u52b9\u671f\u9650\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7d71\u8a08\u4f8b"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8a8d\u8a3c\u30d5\u30ed\u30fc\u5225\u4f7f\u7528\u72b6\u6cc1"}),"\n",(0,i.jsx)(n.li,{children:"\u8a8d\u8a3c\u30bb\u30c3\u30b7\u30e7\u30f3\u7d99\u7d9a\u6642\u9593"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-repository-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",children:"4. Repository \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"}),"\n",(0,i.jsx)(n.h3,{id:"41-securityeventqueryrepository",children:"4.1 SecurityEventQueryRepository"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/security/repository/SecurityEventQueryRepository.java"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface SecurityEventQueryRepository {\n    long findTotalCount(Tenant tenant, SecurityEventQueries queries);\n    List<SecurityEvent> findList(Tenant tenant, SecurityEventQueries queries);\n    SecurityEvent find(Tenant tenant, SecurityEventIdentifier identifier);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u30af\u30e9\u30b9"}),": ",(0,i.jsx)(n.code,{children:"PostgresqlExecutor"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource/security/event/query/PostgresqlExecutor.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30af\u30a8\u30ea"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 \u65e5\u6642\u7bc4\u56f2\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"hasFrom()"})," / ",(0,i.jsx)(n.code,{children:"hasTo()"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"hasEventType()"})," - IN\u53e5\u5bfe\u5fdc)"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"hasClientId()"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30e6\u30fc\u30b6\u30fc\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"hasUserId()"})," / ",(0,i.jsx)(n.code,{children:"hasExternalUserId()"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 JSONB\u8a73\u7d30\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"hasDetails()"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u4ef6\u6570\u53d6\u5f97 (",(0,i.jsx)(n.code,{children:"findTotalCount()"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3 (",(0,i.jsx)(n.code,{children:"limit"})," / ",(0,i.jsx)(n.code,{children:"offset"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"42-auditlogqueryrepository",children:"4.2 AuditLogQueryRepository"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-platform/src/main/java/org/idp/server/platform/audit/AuditLogQueryRepository.java"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface AuditLogQueryRepository {\n    long findTotalCount(Tenant tenant, AuditLogQueries queries);\n    List<AuditLog> findList(Tenant tenant, AuditLogQueries queries);\n    AuditLog find(Tenant tenant, AuditLogIdentifier identifier);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u30af\u30e9\u30b9"}),": ",(0,i.jsx)(n.code,{children:"PostgresqlExecutor"}),"\n",(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource/audit/query/PostgresqlExecutor.java"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30af\u30a8\u30ea"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 \u65e5\u6642\u7bc4\u56f2\u30d5\u30a3\u30eb\u30bf"}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u7d50\u679c\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"outcomeResult"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30ea\u30bd\u30fc\u30b9\u7a2e\u5225\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"targetResource"})," / ",(0,i.jsx)(n.code,{children:"targetResourceAction"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 JSONB\u5c5e\u6027\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"attributes"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"43-userqueryrepository",children:"4.3 UserQueryRepository"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9"}),": ",(0,i.jsx)(n.code,{children:"/Users/hirokazu.kobayashi/work/idp-server/libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/repository/UserQueryRepository.java"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface UserQueryRepository {\n    User get(Tenant tenant, UserIdentifier userIdentifier);\n    long findTotalCount(Tenant tenant, UserQueries queries);\n    List<User> findList(Tenant tenant, UserQueries queries);\n    User findByEmail(Tenant tenant, String hint, String providerId);\n    User findByPhone(Tenant tenant, String hint, String providerId);\n    User findByPreferredUsername(Tenant tenant, String providerId, String preferredUsername);\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30af\u30a8\u30ea"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"status"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u30d5\u30a3\u30eb\u30bf (",(0,i.jsx)(n.code,{children:"providerId"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 \u65e5\u6642\u7bc4\u56f2\u30d5\u30a3\u30eb\u30bf"}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 \u4ef6\u6570\u53d6\u5f97 (",(0,i.jsx)(n.code,{children:"findTotalCount()"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-\u7d71\u8a08\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u5b9f\u88c5\u53ef\u80fd\u6027\u8a55\u4fa1",children:"5. \u7d71\u8a08\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u5b9f\u88c5\u53ef\u80fd\u6027\u8a55\u4fa1"}),"\n",(0,i.jsx)(n.h3,{id:"51-dau-daily-active-users",children:"5.1 DAU (Daily Active Users)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"security_event"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT DATE(created_at) as date, COUNT(DISTINCT user_id) as dau\nFROM security_event\nWHERE tenant_id = ?\n  AND type = 'login_success'\n  AND created_at >= ?\n  AND created_at < ?\nGROUP BY DATE(created_at)\nORDER BY date DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"}),"\n",(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": ",(0,i.jsx)(n.code,{children:"idx_events_tenant_created_at"}),", ",(0,i.jsx)(n.code,{children:"idx_events_type"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"52-mau-monthly-active-users",children:"5.2 MAU (Monthly Active Users)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"security_event"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT COUNT(DISTINCT user_id) as mau\nFROM security_event\nWHERE tenant_id = ?\n  AND type = 'login_success'\n  AND created_at >= DATE_TRUNC('month', CURRENT_DATE)\n  AND created_at < DATE_TRUNC('month', CURRENT_DATE) + INTERVAL '1 month';\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"53-\u8a8d\u8a3c\u6210\u529f\u7387",children:"5.3 \u8a8d\u8a3c\u6210\u529f\u7387"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"security_event"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT\n  DATE(created_at) as date,\n  COUNT(*) FILTER (WHERE type = 'login_success') as success_count,\n  COUNT(*) FILTER (WHERE type = 'login_failure') as failure_count,\n  ROUND(\n    100.0 * COUNT(*) FILTER (WHERE type = 'login_success') / COUNT(*),\n    2\n  ) as success_rate_percent\nFROM security_event\nWHERE tenant_id = ?\n  AND type IN ('login_success', 'login_failure')\n  AND created_at >= ?\n  AND created_at < ?\nGROUP BY DATE(created_at)\nORDER BY date DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"54-\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570grant_type\u5225",children:"5.4 \u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570\uff08grant_type\u5225\uff09"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"oauth_token"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT\n  grant_type,\n  DATE(created_at) as date,\n  COUNT(*) as count\nFROM oauth_token\nWHERE tenant_id = ?\n  AND created_at >= ?\n  AND created_at < ?\nGROUP BY grant_type, DATE(created_at)\nORDER BY date DESC, grant_type;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"}),"\n",(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": ",(0,i.jsx)(n.code,{children:"idx_oauth_token_expires_at"})," (tenant_id, expires_at)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"55-\u30e6\u30fc\u30b6\u30fc\u6210\u9577\u30c8\u30ec\u30f3\u30c9",children:"5.5 \u30e6\u30fc\u30b6\u30fc\u6210\u9577\u30c8\u30ec\u30f3\u30c9"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"idp_user"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT\n  DATE(created_at) as date,\n  COUNT(*) as new_users,\n  SUM(COUNT(*)) OVER (ORDER BY DATE(created_at)) as cumulative_users\nFROM idp_user\nWHERE tenant_id = ?\n  AND created_at >= ?\n  AND created_at < ?\nGROUP BY DATE(created_at)\nORDER BY date DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"56-\u7ba1\u7406\u64cd\u4f5c\u7d71\u8a08",children:"5.6 \u7ba1\u7406\u64cd\u4f5c\u7d71\u8a08"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9"}),": ",(0,i.jsx)(n.code,{children:"audit_log"})," \u30c6\u30fc\u30d6\u30eb"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SQL\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT\n  type,\n  target_resource_action,\n  outcome_result,\n  COUNT(*) as count\nFROM audit_log\nWHERE tenant_id = ?\n  AND created_at >= ?\n  AND created_at < ?\nGROUP BY type, target_resource_action, outcome_result\nORDER BY count DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u5b9f\u88c5\u96e3\u6613\u5ea6"}),": \ud83d\udfe2 ",(0,i.jsx)(n.strong,{children:"\u7c21\u5358"}),"\n",(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"}),": ",(0,i.jsx)(n.code,{children:"idx_audit_log_type_created"}),", ",(0,i.jsx)(n.code,{children:"idx_audit_log_outcome"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\u306e\u63a8\u5968\u4e8b\u9805",children:"6. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\u306e\u63a8\u5968\u4e8b\u9805"}),"\n",(0,i.jsx)(n.h3,{id:"61-materialized-view-\u306e\u6d3b\u7528",children:"6.1 Materialized View \u306e\u6d3b\u7528"}),"\n",(0,i.jsx)(n.p,{children:"\u5927\u91cf\u30c7\u30fc\u30bf\uff08\u5104\u5358\u4f4d\uff09\u3067\u306e\u96c6\u8a08\u9ad8\u901f\u5316\u306e\u305f\u3081\u3001\u65e5\u6b21\u96c6\u8a08\u7528Materialized View\u3092\u63a8\u5968\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE MATERIALIZED VIEW security_event_daily_summary AS\nSELECT\n  tenant_id,\n  DATE(created_at) as event_date,\n  type,\n  COUNT(*) as event_count,\n  COUNT(DISTINCT user_id) as unique_users,\n  COUNT(DISTINCT client_id) as unique_clients\nFROM security_event\nGROUP BY tenant_id, DATE(created_at), type;\n\nCREATE INDEX idx_summary_tenant_date ON security_event_daily_summary (tenant_id, event_date);\n\n-- \u65e5\u6b21\u66f4\u65b0\uff08Cron Job\uff09\nREFRESH MATERIALIZED VIEW CONCURRENTLY security_event_daily_summary;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"62-\u8ffd\u52a0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u691c\u8a0e",children:"6.2 \u8ffd\u52a0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u691c\u8a0e"}),"\n",(0,i.jsx)(n.p,{children:"\u6642\u7cfb\u5217\u96c6\u8a08\u306e\u66f4\u306a\u308b\u9ad8\u901f\u5316\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- oauth_token \u30c6\u30fc\u30d6\u30eb\nCREATE INDEX idx_oauth_token_created_grant\n  ON oauth_token (tenant_id, created_at, grant_type);\n\n-- idp_user \u30c6\u30fc\u30d6\u30eb\nCREATE INDEX idx_idp_user_created_status\n  ON idp_user (tenant_id, created_at, status);\n\n-- security_event \u30c6\u30fc\u30d6\u30eb\nCREATE INDEX idx_security_event_type_created\n  ON security_event (tenant_id, type, created_at);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"63-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u5c06\u6765\u7684\u691c\u8a0e",children:"6.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\uff08\u5c06\u6765\u7684\u691c\u8a0e\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u30c6\u30fc\u30d6\u30eb\u30b5\u30a4\u30ba\u304c10GB\u8d85\u306e\u5834\u5408\u3001\u6708\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3092\u691c\u8a0e\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE security_event_partitioned (\n    LIKE security_event\n) PARTITION BY RANGE (created_at);\n\nCREATE TABLE security_event_2025_01 PARTITION OF security_event_partitioned\n  FOR VALUES FROM ('2025-01-01') TO ('2025-02-01');\n\nCREATE TABLE security_event_2025_02 PARTITION OF security_event_partitioned\n  FOR VALUES FROM ('2025-02-01') TO ('2025-03-01');\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-\u65e2\u5b58\u30d1\u30bf\u30fc\u30f3\u306e\u6d3b\u7528\u65b9\u91dd",children:"7. \u65e2\u5b58\u30d1\u30bf\u30fc\u30f3\u306e\u6d3b\u7528\u65b9\u91dd"}),"\n",(0,i.jsx)(n.h3,{id:"71-handler-service-repository-\u30d1\u30bf\u30fc\u30f3\u306e\u7d99\u627f",children:"7.1 Handler-Service-Repository \u30d1\u30bf\u30fc\u30f3\u306e\u7d99\u627f"}),"\n",(0,i.jsx)(n.p,{children:"\u7d71\u8a08API\u3082\u65e2\u5b58\u30d1\u30bf\u30fc\u30f3\u306b\u6e96\u62e0\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Handler\u5c64\npublic class TenantStatisticsHandler {\n    public TenantStatisticsResult handle(Tenant tenant, StatisticsQueries queries) {\n        // \u30b5\u30fc\u30d3\u30b9\u547c\u3073\u51fa\u3057\n    }\n}\n\n// Service\u5c64\npublic class TenantStatisticsFindService {\n    public TenantStatistics execute(Tenant tenant, StatisticsQueries queries) {\n        long dau = securityEventQueryRepository.findDAU(tenant, queries);\n        long mau = securityEventQueryRepository.findMAU(tenant, queries);\n        // ...\n    }\n}\n\n// Repository\u5c64\npublic interface TenantStatisticsQueryRepository {\n    long findDAU(Tenant tenant, StatisticsQueries queries);\n    long findMAU(Tenant tenant, StatisticsQueries queries);\n    Map<String, Long> findEventCountByType(Tenant tenant, StatisticsQueries queries);\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"72-entryservice-10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3\u306e\u9069\u7528",children:"7.2 EntryService 10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3\u306e\u9069\u7528"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class TenantStatisticsManagementEntryService {\n\n    public TenantStatisticsManagementResponse findDashboard(\n        AdminAuthenticationContext context,\n        TenantIdentifier tenantIdentifier,\n        StatisticsQueries queries,\n        RequestAttributes attributes\n    ) {\n        // Phase 1: \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u78ba\u8a8d\n        // Phase 2: Tenant\u53d6\u5f97\n        Tenant tenant = tenantRepository.get(tenantIdentifier);\n\n        // Phase 3: \u6a29\u9650\u691c\u8a3c\n        // Phase 4: Handler\u5b9f\u884c\n        TenantStatisticsResult result = handler.handle(tenant, queries);\n\n        // Phase 5: AuditLog\u8a18\u9332\n        // Phase 6: Response\u5909\u63db\n        return result.toResponse();\n    }\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"8-\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u63a8\u5968\u4e8b\u9805",children:"8. \u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306e\u63a8\u5968\u4e8b\u9805"}),"\n",(0,i.jsx)(n.h3,{id:"phase-2-\u5916\u90e8\u8abf\u67fbkeycloakauth0",children:"Phase 2: \u5916\u90e8\u8abf\u67fb\uff08Keycloak/Auth0\uff09"}),"\n",(0,i.jsxs)(n.p,{children:["\u65e2\u5b58\u306e\u8a2d\u8a08\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 ",(0,i.jsx)(n.code,{children:"analytics-statistics-design.md"})," \u3067\u65e2\u306b\u30ab\u30d0\u30fc\u6e08\u307f\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keycloak\u306e\u7d71\u8a08\u6a5f\u80fd\uff08Prometheus\u9023\u643a\uff09"}),"\n",(0,i.jsx)(n.li,{children:"Auth0\u306eAnalytics API"}),"\n",(0,i.jsx)(n.li,{children:"\u696d\u754c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"phase-3-api\u4ed5\u69d8\u7b56\u5b9a",children:"Phase 3: API\u4ed5\u69d8\u7b56\u5b9a"}),"\n",(0,i.jsx)(n.p,{children:"\u57fa\u672c\u7d71\u8a08API\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u8a08\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/management/tenants/{tenant-id}/statistics/dashboard\nGET /v1/management/tenants/{tenant-id}/statistics/summary\nGET /v1/management/tenants/{tenant-id}/statistics/time-series\nGET /v1/management/tenants/{tenant-id}/statistics/users\nGET /v1/management/tenants/{tenant-id}/statistics/tokens\nGET /v1/management/tenants/{tenant-id}/statistics/authentication\n"})}),"\n",(0,i.jsx)(n.h3,{id:"phase-4-poc\u5b9f\u88c5",children:"Phase 4: PoC\u5b9f\u88c5"}),"\n",(0,i.jsx)(n.p,{children:"\u6700\u5c0f\u9650\u306e\u7d71\u8a08API\uff081\u9031\u9593\u3067\u5b9f\u88c5\u53ef\u80fd\uff09\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DAU/MAU API"}),": ",(0,i.jsx)(n.code,{children:"security_event"})," \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8a8d\u8a3c\u6210\u529f\u7387 API"}),": ",(0,i.jsx)(n.code,{children:"security_event"})," \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u96c6\u8a08"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30e6\u30fc\u30b6\u30fc\u6210\u9577 API"}),": ",(0,i.jsx)(n.code,{children:"idp_user"})," \u30c6\u30fc\u30d6\u30eb\u304b\u3089\u96c6\u8a08"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"9-\u7d50\u8ad6",children:"9. \u7d50\u8ad6"}),"\n",(0,i.jsx)(n.h3,{id:"-\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5145\u5b9f\u5ea6",children:"\u2705 \u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u5145\u5b9f\u5ea6"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9805\u76ee"}),(0,i.jsx)(n.th,{children:"\u8a55\u4fa1"}),(0,i.jsx)(n.th,{children:"\u8a73\u7d30"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7"})}),(0,i.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,i.jsxs)(n.td,{children:["\u5168\u30c6\u30fc\u30d6\u30eb\u306b ",(0,i.jsx)(n.code,{children:"created_at"})," \u5b8c\u5099"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"})}),(0,i.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,i.jsx)(n.td,{children:"\u8907\u5408\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u6642\u7cfb\u5217\u96c6\u8a08\u6700\u9069\u5316\u6e08\u307f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"})}),(0,i.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,i.jsx)(n.td,{children:"RLS + \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u5b8c\u5168\u5206\u96e2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u67d4\u8edf\u6027"})}),(0,i.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,i.jsx)(n.td,{children:"JSONB GIN\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u8a73\u7d30\u30d5\u30a3\u30eb\u30bf\u5bfe\u5fdc"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Repository"})}),(0,i.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"findTotalCount()"})," \u7b49\u306e\u96c6\u8a08\u30e1\u30bd\u30c3\u30c9\u5b9f\u88c5\u6e08\u307f"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"-\u5b9f\u88c5\u306e\u5bb9\u6613\u6027",children:"\ud83d\ude80 \u5b9f\u88c5\u306e\u5bb9\u6613\u6027"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30e1\u30c8\u30ea\u30af\u30b9"}),(0,i.jsx)(n.th,{children:"\u96e3\u6613\u5ea6"}),(0,i.jsx)(n.th,{children:"\u671f\u9593\u898b\u7a4d"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"DAU/MAU"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe2 \u7c21\u5358"}),(0,i.jsx)(n.td,{children:"1-2\u65e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u8a8d\u8a3c\u6210\u529f\u7387"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe2 \u7c21\u5358"}),(0,i.jsx)(n.td,{children:"1\u65e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe2 \u7c21\u5358"}),(0,i.jsx)(n.td,{children:"1\u65e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30e6\u30fc\u30b6\u30fc\u6210\u9577"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe2 \u7c21\u5358"}),(0,i.jsx)(n.td,{children:"1\u65e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u7ba1\u7406\u64cd\u4f5c\u7d71\u8a08"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe2 \u7c21\u5358"}),(0,i.jsx)(n.td,{children:"1\u65e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u7d71\u8a08"})}),(0,i.jsx)(n.td,{children:"\ud83d\udfe1 \u4e2d\u7a0b\u5ea6"}),(0,i.jsx)(n.td,{children:"1\u9031\u9593"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u7570\u5e38\u691c\u77e5"})}),(0,i.jsx)(n.td,{children:"\ud83d\udd34 \u9ad8\u5ea6"}),(0,i.jsx)(n.td,{children:"2-3\u9031\u9593"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"-\u6700\u91cd\u8981\u30c6\u30fc\u30d6\u30eb",children:"\ud83d\udcca \u6700\u91cd\u8981\u30c6\u30fc\u30d6\u30eb"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"security_event"})})," - \u8a8d\u8a3c/\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\uff08\u6700\u512a\u5148\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"audit_log"})})," - \u7ba1\u7406\u64cd\u4f5c\u76e3\u67fb"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"oauth_token"})})," - \u30c8\u30fc\u30af\u30f3\u767a\u884c\u5c65\u6b74"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"idp_user"})})," - \u30e6\u30fc\u30b6\u30fc\u30d9\u30fc\u30b9\u6210\u9577"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"authentication_transaction"})})," - \u8a8d\u8a3c\u30d5\u30ed\u30fc\u5206\u6790"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u4ed8\u9332a-\u30af\u30a8\u30ea\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u4f8b",children:"\u4ed8\u9332A: \u30af\u30a8\u30ea\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30c6\u30b9\u30c8\u4f8b"}),"\n",(0,i.jsx)(n.h3,{id:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9-dau\u8a08\u7b97",children:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9: DAU\u8a08\u7b97"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"EXPLAIN ANALYZE\nSELECT DATE(created_at) as date, COUNT(DISTINCT user_id) as dau\nFROM security_event\nWHERE tenant_id = '67e7eae6-62b0-4500-9eff-87459f63fc66'\n  AND type = 'login_success'\n  AND created_at >= '2025-01-01'\n  AND created_at < '2025-02-01'\nGROUP BY DATE(created_at);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u671f\u5f85\u3055\u308c\u308b\u5b9f\u884c\u8a08\u753b"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 Index Scan on ",(0,i.jsx)(n.code,{children:"idx_events_tenant_created_at"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Filter on ",(0,i.jsx)(n.code,{children:"type"})," using ",(0,i.jsx)(n.code,{children:"idx_events_type"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u4ed8\u9332b-\u53c2\u8003\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7",children:"\u4ed8\u9332B: \u53c2\u8003\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7"}),"\n",(0,i.jsx)(n.h3,{id:"entryservice",children:"EntryService"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"AuditLogManagementEntryService.java:45"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SecurityEventManagementEntryService.java:38"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"UserManagementEntryService.java:52"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"repository",children:"Repository"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SecurityEventQueryRepository.java:12"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"AuditLogQueryRepository.java:10"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"UserQueryRepository.java:15"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"handler",children:"Handler"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"AuditLogFindListService.java:23"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ddl",children:"DDL"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"V0_9_0__init_lib.sql:595-629"})," (security_event)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"V0_9_0__init_lib.sql:956-998"})," (audit_log)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"V0_9_0__init_lib.sql:175-230"})," (idp_user)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3"}),": Phase 2\uff08\u5916\u90e8\u8abf\u67fb\uff09\u307e\u305f\u306fPoC\u5b9f\u88c5\u306e\u9078\u629e\u3092\u63a8\u5968"]})]})}function o(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(96540);const i={},d=r.createContext(i);function t(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);