"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7848],{11466:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"content_11_learning/os-fundamentals/io-models","title":"I/O \u30e2\u30c7\u30eb","description":"\u6240\u8981\u6642\u9593: 40\u5206","source":"@site/docs/content_11_learning/21-os-fundamentals/io-models.md","sourceDirName":"content_11_learning/21-os-fundamentals","slug":"/content_11_learning/os-fundamentals/io-models","permalink":"/idp-server/docs/content_11_learning/os-fundamentals/io-models","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/21-os-fundamentals/io-models.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf","permalink":"/idp-server/docs/content_11_learning/os-fundamentals/file-descriptors"},"next":{"title":"\u30b7\u30b0\u30ca\u30eb","permalink":"/idp-server/docs/content_11_learning/os-fundamentals/signals"}}');var r=l(74848),s=l(28453);const d={},o="I/O \u30e2\u30c7\u30eb",c={},t=[{value:"\u3053\u306e\u7ae0\u3067\u7b54\u3048\u308b\u7591\u554f",id:"\u3053\u306e\u7ae0\u3067\u7b54\u3048\u308b\u7591\u554f",level:2},{value:"1. I/O \u3068\u306f",id:"1-io-\u3068\u306f",level:2},{value:"1.1 I/O \u306e\u7a2e\u985e",id:"11-io-\u306e\u7a2e\u985e",level:3},{value:"1.2 I/O \u5f85\u3061\u306e\u554f\u984c",id:"12-io-\u5f85\u3061\u306e\u554f\u984c",level:3},{value:"2. Blocking I/O \u3068 Non-blocking I/O",id:"2-blocking-io-\u3068-non-blocking-io",level:2},{value:"2.1 Blocking I/O",id:"21-blocking-io",level:3},{value:"2.2 Non-blocking I/O",id:"22-non-blocking-io",level:3},{value:"2.3 \u8a2d\u5b9a\u65b9\u6cd5",id:"23-\u8a2d\u5b9a\u65b9\u6cd5",level:3},{value:"3. \u540c\u671f vs \u975e\u540c\u671f",id:"3-\u540c\u671f-vs-\u975e\u540c\u671f",level:2},{value:"3.1 \u7528\u8a9e\u306e\u6574\u7406",id:"31-\u7528\u8a9e\u306e\u6574\u7406",level:3},{value:"4. I/O \u591a\u91cd\u5316",id:"4-io-\u591a\u91cd\u5316",level:2},{value:"4.1 \u554f\u984c: \u8907\u6570\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u76e3\u8996\u3057\u305f\u3044",id:"41-\u554f\u984c-\u8907\u6570\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u76e3\u8996\u3057\u305f\u3044",level:3},{value:"4.2 select",id:"42-select",level:3},{value:"4.3 poll",id:"43-poll",level:3},{value:"4.4 epoll (Linux)",id:"44-epoll-linux",level:3},{value:"4.5 \u6bd4\u8f03",id:"45-\u6bd4\u8f03",level:3},{value:"4.6 \u4ed6\u306e OS",id:"46-\u4ed6\u306e-os",level:3},{value:"5. \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb",id:"5-\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb",level:2},{value:"5.1 Reactor \u30d1\u30bf\u30fc\u30f3",id:"51-reactor-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"5.2 Node.js \u306e\u4ed5\u7d44\u307f",id:"52-nodejs-\u306e\u4ed5\u7d44\u307f",level:3},{value:"5.3 Nginx \u306e\u4ed5\u7d44\u307f",id:"53-nginx-\u306e\u4ed5\u7d44\u307f",level:3},{value:"6. Linux \u3067\u306e\u78ba\u8a8d",id:"6-linux-\u3067\u306e\u78ba\u8a8d",level:2},{value:"6.1 strace \u3067 I/O \u3092\u78ba\u8a8d",id:"61-strace-\u3067-io-\u3092\u78ba\u8a8d",level:3},{value:"6.2 \u30d7\u30ed\u30bb\u30b9\u306e I/O \u30e2\u30c7\u30eb\u3092\u78ba\u8a8d",id:"62-\u30d7\u30ed\u30bb\u30b9\u306e-io-\u30e2\u30c7\u30eb\u3092\u78ba\u8a8d",level:3},{value:"7. Java \u306e I/O \u30e2\u30c7\u30eb",id:"7-java-\u306e-io-\u30e2\u30c7\u30eb",level:2},{value:"7.1 Java NIO",id:"71-java-nio",level:3},{value:"7.2 Virtual Thread \u3068\u306e\u95a2\u4fc2",id:"72-virtual-thread-\u3068\u306e\u95a2\u4fc2",level:3},{value:"8. \u307e\u3068\u3081",id:"8-\u307e\u3068\u3081",level:2},{value:"\u78ba\u8a8d\u554f\u984c",id:"\u78ba\u8a8d\u554f\u984c",level:2},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:2}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"io-\u30e2\u30c7\u30eb",children:"I/O \u30e2\u30c7\u30eb"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6240\u8981\u6642\u9593"}),": 40\u5206"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u524d\u63d0\u77e5\u8b58"}),": \u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3001\u30bd\u30b1\u30c3\u30c8\u306e\u57fa\u790e"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5b66\u3079\u308b\u3053\u3068"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Blocking I/O vs Non-blocking I/O"}),"\n",(0,r.jsx)(e.li,{children:"\u540c\u671f vs \u975e\u540c\u671f"}),"\n",(0,r.jsx)(e.li,{children:"select, poll, epoll \u306e\u9055\u3044"}),"\n",(0,r.jsx)(e.li,{children:"\u306a\u305c Node.js \u3084 Nginx \u304c\u901f\u3044\u306e\u304b"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\u3053\u306e\u7ae0\u3067\u7b54\u3048\u308b\u7591\u554f",children:"\u3053\u306e\u7ae0\u3067\u7b54\u3048\u308b\u7591\u554f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u300c\u540c\u671f\u3068\u975e\u540c\u671f\u306e\u9055\u3044\u306f\uff1f\u300d\n\u300cBlocking \u3068 Non-blocking \u306e\u9055\u3044\u306f\uff1f\u300d\n\u300cepoll \u3063\u3066\u4f55\uff1f\u300d\n\u300c\u306a\u305c Node.js \u3084 Nginx \u306f\u5c11\u306a\u3044\u30b9\u30ec\u30c3\u30c9\u3067\u9ad8\u6027\u80fd\uff1f\u300d\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"1-io-\u3068\u306f",children:"1. I/O \u3068\u306f"}),"\n",(0,r.jsx)(e.h3,{id:"11-io-\u306e\u7a2e\u985e",children:"1.1 I/O \u306e\u7a2e\u985e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    I/O (Input/Output)                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u30d5\u30a1\u30a4\u30eb I/O:                                                       \u2502\n\u2502  \u251c\u2500\u2500 \u30c7\u30a3\u30b9\u30af\u304b\u3089\u306e\u8aad\u307f\u8fbc\u307f                                        \u2502\n\u2502  \u2514\u2500\u2500 \u30c7\u30a3\u30b9\u30af\u3078\u306e\u66f8\u304d\u8fbc\u307f                                          \u2502\n\u2502                                                                      \u2502\n\u2502  \u30cd\u30c3\u30c8\u30ef\u30fc\u30af I/O:                                                   \u2502\n\u2502  \u251c\u2500\u2500 \u30bd\u30b1\u30c3\u30c8\u304b\u3089\u306e\u30c7\u30fc\u30bf\u53d7\u4fe1                                      \u2502\n\u2502  \u2514\u2500\u2500 \u30bd\u30b1\u30c3\u30c8\u3078\u306e\u30c7\u30fc\u30bf\u9001\u4fe1                                        \u2502\n\u2502                                                                      \u2502\n\u2502  \u5171\u901a\u70b9:                                                             \u2502\n\u2502  \u2514\u2500\u2500 CPU \u304b\u3089\u898b\u308b\u3068\u300c\u5f85\u3061\u6642\u9593\u300d\u304c\u767a\u751f\u3059\u308b                          \u2502\n\u2502                                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502              \u901f\u5ea6\u306e\u9055\u3044\uff08\u6982\u7b97\uff09                               \u2502    \u2502\n\u2502  \u2502                                                              \u2502    \u2502\n\u2502  \u2502  CPU\u6f14\u7b97        :     1 ns                                   \u2502    \u2502\n\u2502  \u2502  L1\u30ad\u30e3\u30c3\u30b7\u30e5   :     1 ns                                   \u2502    \u2502\n\u2502  \u2502  L2\u30ad\u30e3\u30c3\u30b7\u30e5   :     4 ns                                   \u2502    \u2502\n\u2502  \u2502  \u30e1\u30e2\u30ea         :   100 ns                                   \u2502    \u2502\n\u2502  \u2502  SSD            : 100,000 ns (0.1 ms)                        \u2502    \u2502\n\u2502  \u2502  HDD            : 10,000,000 ns (10 ms)                      \u2502    \u2502\n\u2502  \u2502  \u30cd\u30c3\u30c8\u30ef\u30fc\u30af   : 1,000,000\u301c100,000,000 ns (1ms\u301c100ms)     \u2502    \u2502\n\u2502  \u2502                                                              \u2502    \u2502\n\u2502  \u2502  \u2192 I/O \u306f CPU \u306e 10\u4e07\u301c1\u5104\u500d\u9045\u3044                            \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"12-io-\u5f85\u3061\u306e\u554f\u984c",children:"1.2 I/O \u5f85\u3061\u306e\u554f\u984c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    I/O \u5f85\u3061\u306e\u7121\u99c4                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  DB \u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408:                                           \u2502\n\u2502                                                                      \u2502\n\u2502  \u6642\u9593\u8ef8 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192        \u2502\n\u2502                                                                      \u2502\n\u2502  CPU  \u2502\u2588\u2588\u2502                                      \u2502\u2588\u2588\u2502                \u2502\n\u2502       \u2502\u51e6\u2502                                      \u2502\u7d50\u2502                \u2502\n\u2502       \u2502\u7406\u2502         \u5f85\u3061\u6642\u9593\uff08\u7121\u99c4\uff09              \u2502\u679c\u2502                \u2502\n\u2502       \u2514\u2500\u2500\u2518                                      \u2514\u2500\u2500\u2518                \u2502\n\u2502           \u2193                                      \u2193                  \u2502\n\u2502        \u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1                       \u30ec\u30b9\u30dd\u30f3\u30b9\u53d7\u4fe1           \u2502\n\u2502                                                                      \u2502\n\u2502  \u554f\u984c: CPU \u306f I/O \u5b8c\u4e86\u3092\u5f85\u3063\u3066\u3044\u308b\u9593\u3001\u4f55\u3082\u3057\u3066\u3044\u306a\u3044                \u2502\n\u2502  \u2192 \u3053\u306e\u5f85\u3061\u6642\u9593\u3092\u6709\u52b9\u6d3b\u7528\u3057\u305f\u3044                                     \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"2-blocking-io-\u3068-non-blocking-io",children:"2. Blocking I/O \u3068 Non-blocking I/O"}),"\n",(0,r.jsx)(e.h3,{id:"21-blocking-io",children:"2.1 Blocking I/O"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Blocking I/O\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  read() \u3092\u547c\u3076\u3068\u3001\u30c7\u30fc\u30bf\u304c\u5c4a\u304f\u307e\u3067\u30b9\u30ec\u30c3\u30c9\u304c\u6b62\u307e\u308b                  \u2502\n\u2502                                                                      \u2502\n\u2502  \u30b9\u30ec\u30c3\u30c9        \u30ab\u30fc\u30cd\u30eb          \u30cd\u30c3\u30c8\u30ef\u30fc\u30af                      \u2502\n\u2502     \u2502                                   \u2502                            \u2502\n\u2502     \u2502 read(fd)                          \u2502                            \u2502\n\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502                   \u2502                            \u2502\n\u2502     \u2502               \u2502 \u30c7\u30fc\u30bf\u5f85\u3061        \u2502                            \u2502\n\u2502     \u2502   (\u30d6\u30ed\u30c3\u30af)  \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u30c7\u30fc\u30bf\u5230\u7740                 \u2502\n\u2502     \u2502               \u2502 \u30b3\u30d4\u30fc            \u2502                            \u2502\n\u2502     \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                   \u2502                            \u2502\n\u2502     \u2502 \u30c7\u30fc\u30bf\u8fd4\u5374                        \u2502                            \u2502\n\u2502     \u25bc                                   \u2502                            \u2502\n\u2502                                                                      \u2502\n\u2502  \u7279\u5fb4:                                                               \u2502\n\u2502  \u251c\u2500\u2500 \u5b9f\u88c5\u304c\u7c21\u5358\uff08\u9806\u756a\u306b\u66f8\u304f\u3060\u3051\uff09                                  \u2502\n\u2502  \u251c\u2500\u2500 \u30c7\u30fc\u30bf\u304c\u5c4a\u304f\u307e\u3067\u30b9\u30ec\u30c3\u30c9\u304c\u6b62\u307e\u308b                              \u2502\n\u2502  \u2514\u2500\u2500 \u591a\u6570\u306e\u63a5\u7d9a\u3092\u6271\u3046\u306b\u306f\u591a\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u5fc5\u8981                      \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"22-non-blocking-io",children:"2.2 Non-blocking I/O"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Non-blocking I/O                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  read() \u3092\u547c\u3093\u3067\u3082\u30d6\u30ed\u30c3\u30af\u305b\u305a\u3001\u3059\u3050\u306b\u623b\u308b                          \u2502\n\u2502                                                                      \u2502\n\u2502  \u30b9\u30ec\u30c3\u30c9        \u30ab\u30fc\u30cd\u30eb          \u30cd\u30c3\u30c8\u30ef\u30fc\u30af                      \u2502\n\u2502     \u2502                                   \u2502                            \u2502\n\u2502     \u2502 read(fd)                          \u2502                            \u2502\n\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502                   \u2502                            \u2502\n\u2502     \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 EWOULDBLOCK       \u2502  \u2190 \u30c7\u30fc\u30bf\u304c\u306a\u3044           \u2502\n\u2502     \u2502               \u2502                   \u2502                            \u2502\n\u2502     \u2502 \u4ed6\u306e\u51e6\u7406      \u2502                   \u2502                            \u2502\n\u2502     \u2502               \u2502                   \u2502                            \u2502\n\u2502     \u2502 read(fd)      \u2502                   \u2502                            \u2502\n\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502                   \u2502                            \u2502\n\u2502     \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 EWOULDBLOCK       \u2502  \u2190 \u307e\u3060\u306a\u3044               \u2502\n\u2502     \u2502               \u2502                   \u2502                            \u2502\n\u2502     \u2502 \u4ed6\u306e\u51e6\u7406      \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u30c7\u30fc\u30bf\u5230\u7740                 \u2502\n\u2502     \u2502               \u2502                   \u2502                            \u2502\n\u2502     \u2502 read(fd)      \u2502                   \u2502                            \u2502\n\u2502     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\u2502                   \u2502                            \u2502\n\u2502     \u2502\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 \u30c7\u30fc\u30bf            \u2502  \u2190 \u4eca\u5ea6\u306f\u3042\u308b             \u2502\n\u2502     \u25bc                                                                \u2502\n\u2502                                                                      \u2502\n\u2502  \u7279\u5fb4:                                                               \u2502\n\u2502  \u251c\u2500\u2500 \u30d6\u30ed\u30c3\u30af\u3057\u306a\u3044\u306e\u3067\u4ed6\u306e\u51e6\u7406\u304c\u3067\u304d\u308b                            \u2502\n\u2502  \u251c\u2500\u2500 \u30dd\u30fc\u30ea\u30f3\u30b0\uff08\u4f55\u5ea6\u3082\u78ba\u8a8d\uff09\u304c\u5fc5\u8981                                \u2502\n\u2502  \u2514\u2500\u2500 CPU \u3092\u7121\u99c4\u306b\u4f7f\u3046\u53ef\u80fd\u6027                                        \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"23-\u8a2d\u5b9a\u65b9\u6cd5",children:"2.3 \u8a2d\u5b9a\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"// Non-blocking \u306b\u8a2d\u5b9a\nint flags = fcntl(fd, F_GETFL, 0);\nfcntl(fd, F_SETFL, flags | O_NONBLOCK);\n\n// read() \u306e\u7d50\u679c\nssize_t n = read(fd, buf, sizeof(buf));\nif (n == -1) {\n    if (errno == EAGAIN || errno == EWOULDBLOCK) {\n        // \u30c7\u30fc\u30bf\u304c\u307e\u3060\u306a\u3044\uff08\u30a8\u30e9\u30fc\u3067\u306f\u306a\u3044\uff09\n    } else {\n        // \u672c\u5f53\u306e\u30a8\u30e9\u30fc\n    }\n}\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"3-\u540c\u671f-vs-\u975e\u540c\u671f",children:"3. \u540c\u671f vs \u975e\u540c\u671f"}),"\n",(0,r.jsx)(e.h3,{id:"31-\u7528\u8a9e\u306e\u6574\u7406",children:"3.1 \u7528\u8a9e\u306e\u6574\u7406"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Blocking/Non-blocking \u3068 Sync/Async              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u3053\u306e2\u3064\u306f\u5225\u306e\u6982\u5ff5:                                                 \u2502\n\u2502                                                                      \u2502\n\u2502  Blocking / Non-blocking:                                            \u2502\n\u2502  \u2514\u2500\u2500 I/O \u64cd\u4f5c\u3092\u547c\u3093\u3060\u3068\u304d\u306b\u30b9\u30ec\u30c3\u30c9\u304c\u6b62\u307e\u308b\u304b\u3069\u3046\u304b                \u2502\n\u2502                                                                      \u2502\n\u2502  Synchronous / Asynchronous:                                         \u2502\n\u2502  \u2514\u2500\u2500 \u30c7\u30fc\u30bf\u306e\u6e96\u5099\u304c\u3067\u304d\u305f\u3053\u3068\u3092\u8ab0\u304c\u901a\u77e5\u3059\u308b\u304b                      \u2502\n\u2502      \u251c\u2500\u2500 Sync: \u30a2\u30d7\u30ea\u304c\u78ba\u8a8d\u3057\u306b\u884c\u304f\uff08polling\uff09                     \u2502\n\u2502      \u2514\u2500\u2500 Async: \u30ab\u30fc\u30cd\u30eb\u304c\u901a\u77e5\u3057\u3066\u304f\u308b\uff08callback/event\uff09           \u2502\n\u2502                                                                      \u2502\n\u2502  \u7d44\u307f\u5408\u308f\u305b:                                                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502                \u2502 Blocking           \u2502 Non-blocking        \u2502      \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524      \u2502\n\u2502  \u2502 Synchronous    \u2502 \u5f93\u6765\u306e read/write  \u2502 \u30dd\u30fc\u30ea\u30f3\u30b0          \u2502      \u2502\n\u2502  \u2502                \u2502 (\u4e00\u822c\u7684)           \u2502                     \u2502      \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524      \u2502\n\u2502  \u2502 Asynchronous   \u2502 (\u5b58\u5728\u3057\u306a\u3044)       \u2502 epoll, kqueue       \u2502      \u2502\n\u2502  \u2502                \u2502                    \u2502 io_uring, IOCP      \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"4-io-\u591a\u91cd\u5316",children:"4. I/O \u591a\u91cd\u5316"}),"\n",(0,r.jsx)(e.h3,{id:"41-\u554f\u984c-\u8907\u6570\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u76e3\u8996\u3057\u305f\u3044",children:"4.1 \u554f\u984c: \u8907\u6570\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u76e3\u8996\u3057\u305f\u3044"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u8907\u6570\u63a5\u7d9a\u306e\u51e6\u7406                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u30b5\u30fc\u30d0\u30fc\u306f\u8907\u6570\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3092\u53d7\u3051\u308b:                      \u2502\n\u2502                                                                      \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8A \u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                            \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8B \u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u2502   \u30b5\u30fc\u30d0\u30fc    \u2502                            \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8C \u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u2502               \u2502                            \u2502\n\u2502  ...                   \u2502 FD: 4, 5, 6...\u2502                            \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8N \u2500\u2500\u2500\u2500\u2500\u2500\u2192 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                            \u2502\n\u2502                                                                      \u2502\n\u2502  \u65b9\u6cd51: \u30b9\u30ec\u30c3\u30c9\u3092\u8907\u6570\u4f5c\u308b                                          \u2502\n\u2502  \u251c\u2500\u2500 1\u63a5\u7d9a = 1\u30b9\u30ec\u30c3\u30c9                                             \u2502\n\u2502  \u251c\u2500\u2500 Blocking I/O \u3067\u3082 OK                                          \u2502\n\u2502  \u2514\u2500\u2500 \u554f\u984c: 10,000 \u63a5\u7d9a = 10,000 \u30b9\u30ec\u30c3\u30c9\uff08\u91cd\u3044\uff09                   \u2502\n\u2502                                                                      \u2502\n\u2502  \u65b9\u6cd52: I/O \u591a\u91cd\u5316                                                  \u2502\n\u2502  \u251c\u2500\u2500 1\u30b9\u30ec\u30c3\u30c9\u3067\u8907\u6570\u306e FD \u3092\u76e3\u8996                                   \u2502\n\u2502  \u251c\u2500\u2500 \u3069\u308c\u304b\u306e FD \u304c ready \u306b\u306a\u3063\u305f\u3089\u51e6\u7406                           \u2502\n\u2502  \u2514\u2500\u2500 \u5c11\u306a\u3044\u30b9\u30ec\u30c3\u30c9\u3067\u5927\u91cf\u306e\u63a5\u7d9a\u3092\u51e6\u7406                              \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"42-select",children:"4.2 select"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    select (\u53e4\u3044\u65b9\u5f0f)                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u4f7f\u3044\u65b9:                                                             \u2502\n\u2502  1. \u76e3\u8996\u3057\u305f\u3044 FD \u3092\u30bb\u30c3\u30c8\u306b\u767b\u9332                                    \u2502\n\u2502  2. select() \u3092\u547c\u3076\uff08\u30d6\u30ed\u30c3\u30af\uff09                                     \u2502\n\u2502  3. \u3069\u308c\u304b\u306e FD \u304c ready \u306b\u306a\u3063\u305f\u3089\u623b\u308b                             \u2502\n\u2502  4. \u3069\u306e FD \u304c ready \u304b\u5168\u90e8\u30c1\u30a7\u30c3\u30af                                 \u2502\n\u2502                                                                      \u2502\n\u2502  fd_set readfds;                                                     \u2502\n\u2502  FD_ZERO(&readfds);                                                  \u2502\n\u2502  FD_SET(fd1, &readfds);                                              \u2502\n\u2502  FD_SET(fd2, &readfds);                                              \u2502\n\u2502  FD_SET(fd3, &readfds);                                              \u2502\n\u2502                                                                      \u2502\n\u2502  select(maxfd + 1, &readfds, NULL, NULL, NULL);                      \u2502\n\u2502                                                                      \u2502\n\u2502  // \u3069\u308c\u304c ready \u304b\u5168\u90e8\u30c1\u30a7\u30c3\u30af                                      \u2502\n\u2502  if (FD_ISSET(fd1, &readfds)) { ... }                                \u2502\n\u2502  if (FD_ISSET(fd2, &readfds)) { ... }                                \u2502\n\u2502  if (FD_ISSET(fd3, &readfds)) { ... }                                \u2502\n\u2502                                                                      \u2502\n\u2502  \u554f\u984c:                                                               \u2502\n\u2502  \u251c\u2500\u2500 FD \u6570\u306e\u4e0a\u9650\u304c 1024\uff08FD_SETSIZE\uff09                              \u2502\n\u2502  \u251c\u2500\u2500 \u6bce\u56de\u5168\u90e8\u306e FD \u3092\u30ab\u30fc\u30cd\u30eb\u306b\u30b3\u30d4\u30fc                              \u2502\n\u2502  \u251c\u2500\u2500 \u623b\u3063\u3066\u304d\u305f\u3089\u5168\u90e8\u306e FD \u3092\u30c1\u30a7\u30c3\u30af: O(n)                        \u2502\n\u2502  \u2514\u2500\u2500 FD \u6570\u304c\u5897\u3048\u308b\u3068\u975e\u5e38\u306b\u9045\u304f\u306a\u308b                                 \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"43-poll",children:"4.3 poll"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    poll (select \u306e\u6539\u826f\u7248)                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  struct pollfd fds[3];                                               \u2502\n\u2502  fds[0].fd = fd1; fds[0].events = POLLIN;                            \u2502\n\u2502  fds[1].fd = fd2; fds[1].events = POLLIN;                            \u2502\n\u2502  fds[2].fd = fd3; fds[2].events = POLLIN;                            \u2502\n\u2502                                                                      \u2502\n\u2502  poll(fds, 3, -1);  // -1 = \u7121\u9650\u306b\u5f85\u3064                               \u2502\n\u2502                                                                      \u2502\n\u2502  if (fds[0].revents & POLLIN) { ... }                                \u2502\n\u2502  if (fds[1].revents & POLLIN) { ... }                                \u2502\n\u2502  if (fds[2].revents & POLLIN) { ... }                                \u2502\n\u2502                                                                      \u2502\n\u2502  \u6539\u5584\u70b9:                                                             \u2502\n\u2502  \u251c\u2500\u2500 FD \u6570\u306e\u4e0a\u9650\u304c\u306a\u3044                                             \u2502\n\u2502  \u2514\u2500\u2500 \u30d3\u30c3\u30c8\u30de\u30b9\u30af\u3067\u306f\u306a\u304f\u914d\u5217\u3067\u7ba1\u7406                                \u2502\n\u2502                                                                      \u2502\n\u2502  \u6b8b\u308b\u554f\u984c:                                                           \u2502\n\u2502  \u251c\u2500\u2500 \u6bce\u56de\u5168\u90e8\u306e FD \u3092\u30ab\u30fc\u30cd\u30eb\u306b\u30b3\u30d4\u30fc                              \u2502\n\u2502  \u2514\u2500\u2500 \u623b\u3063\u3066\u304d\u305f\u3089\u5168\u90e8\u306e FD \u3092\u30c1\u30a7\u30c3\u30af: O(n)                        \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"44-epoll-linux",children:"4.4 epoll (Linux)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    epoll (Linux \u306e\u9ad8\u6027\u80fd I/O \u591a\u91cd\u5316)                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  // 1. epoll \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210                                      \u2502\n\u2502  int epfd = epoll_create1(0);                                        \u2502\n\u2502                                                                      \u2502\n\u2502  // 2. \u76e3\u8996\u3059\u308b FD \u3092\u767b\u9332\uff081\u56de\u3060\u3051\uff09                                \u2502\n\u2502  struct epoll_event ev;                                              \u2502\n\u2502  ev.events = EPOLLIN;                                                \u2502\n\u2502  ev.data.fd = fd1;                                                   \u2502\n\u2502  epoll_ctl(epfd, EPOLL_CTL_ADD, fd1, &ev);                           \u2502\n\u2502  // fd2, fd3 \u3082\u540c\u69d8\u306b\u767b\u9332                                            \u2502\n\u2502                                                                      \u2502\n\u2502  // 3. \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u3064                                                \u2502\n\u2502  struct epoll_event events[10];                                      \u2502\n\u2502  int n = epoll_wait(epfd, events, 10, -1);                           \u2502\n\u2502                                                                      \u2502\n\u2502  // 4. ready \u306a FD \u3060\u3051\u304c\u8fd4\u3055\u308c\u308b                                    \u2502\n\u2502  for (int i = 0; i < n; i++) {                                       \u2502\n\u2502      int fd = events[i].data.fd;                                     \u2502\n\u2502      // \u3053\u306e fd \u306f\u5fc5\u305a ready                                         \u2502\n\u2502  }                                                                   \u2502\n\u2502                                                                      \u2502\n\u2502  \u5229\u70b9:                                                               \u2502\n\u2502  \u251c\u2500\u2500 FD \u306e\u767b\u9332\u306f1\u56de\u3060\u3051\uff08\u6bce\u56de\u30b3\u30d4\u30fc\u3057\u306a\u3044\uff09                        \u2502\n\u2502  \u251c\u2500\u2500 ready \u306a FD \u3060\u3051\u304c\u8fd4\u3055\u308c\u308b: O(1) per ready FD                 \u2502\n\u2502  \u251c\u2500\u2500 \u6570\u4e07\u306e\u63a5\u7d9a\u3067\u3082\u52b9\u7387\u7684                                          \u2502\n\u2502  \u2514\u2500\u2500 Edge Triggered / Level Triggered \u3092\u9078\u3079\u308b                     \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"45-\u6bd4\u8f03",children:"4.5 \u6bd4\u8f03"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    select / poll / epoll \u306e\u6bd4\u8f03                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502           \u2502 select     \u2502 poll       \u2502 epoll      \u2502               \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524               \u2502\n\u2502  \u2502 FD\u4e0a\u9650    \u2502 1024       \u2502 \u306a\u3057       \u2502 \u306a\u3057       \u2502               \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524               \u2502\n\u2502  \u2502 \u6bce\u56de\u306e    \u2502 O(n)       \u2502 O(n)       \u2502 O(1)       \u2502               \u2502\n\u2502  \u2502 FD\u30b3\u30d4\u30fc  \u2502 \u5168FD\u30b3\u30d4\u30fc \u2502 \u5168FD\u30b3\u30d4\u30fc \u2502 \u4e0d\u8981       \u2502               \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524               \u2502\n\u2502  \u2502 \u623b\u308a\u5024\u306e  \u2502 O(n)       \u2502 O(n)       \u2502 O(ready)   \u2502               \u2502\n\u2502  \u2502 \u78ba\u8a8d      \u2502 \u5168FD\u30c1\u30a7\u30c3\u30af\u2502 \u5168FD\u30c1\u30a7\u30c3\u30af\u2502 ready\u3060\u3051  \u2502               \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524               \u2502\n\u2502  \u2502 \u8a08\u7b97\u91cf    \u2502 O(n)       \u2502 O(n)       \u2502 O(1)       \u2502               \u2502\n\u2502  \u2502 (per wait)\u2502            \u2502            \u2502            \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502                                                                      \u2502\n\u2502  n = \u76e3\u8996\u3057\u3066\u3044\u308b FD \u306e\u6570                                           \u2502\n\u2502  ready = \u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3057\u305f FD \u306e\u6570                                 \u2502\n\u2502                                                                      \u2502\n\u2502  10,000 \u63a5\u7d9a\u3067 10 \u4ef6\u306e ready:                                       \u2502\n\u2502  \u251c\u2500\u2500 select/poll: 10,000 \u56de\u306e\u30c1\u30a7\u30c3\u30af                              \u2502\n\u2502  \u2514\u2500\u2500 epoll: 10 \u56de\u306e\u30c1\u30a7\u30c3\u30af                                        \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"46-\u4ed6\u306e-os",children:"4.6 \u4ed6\u306e OS"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    OS \u3054\u3068\u306e I/O \u591a\u91cd\u5316                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Linux   : epoll                                                     \u2502\n\u2502  BSD/Mac : kqueue                                                    \u2502\n\u2502  Windows : IOCP (I/O Completion Ports)                               \u2502\n\u2502  Linux   : io_uring (\u65b0\u3057\u3044\u3001\u3055\u3089\u306b\u9ad8\u6027\u80fd)                          \u2502\n\u2502                                                                      \u2502\n\u2502  \u591a\u304f\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3053\u308c\u3089\u3092\u62bd\u8c61\u5316:                              \u2502\n\u2502  \u251c\u2500\u2500 libuv (Node.js)                                               \u2502\n\u2502  \u251c\u2500\u2500 libevent                                                       \u2502\n\u2502  \u251c\u2500\u2500 libev                                                          \u2502\n\u2502  \u2514\u2500\u2500 Netty (Java)                                                   \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"5-\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb",children:"5. \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb"}),"\n",(0,r.jsx)(e.h3,{id:"51-reactor-\u30d1\u30bf\u30fc\u30f3",children:"5.1 Reactor \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Reactor \u30d1\u30bf\u30fc\u30f3                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  1\u3064\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3092\u56de\u3059:                               \u2502\n\u2502                                                                      \u2502\n\u2502  while (true) {                                                      \u2502\n\u2502      // 1. \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u3064\uff08epoll_wait\uff09                             \u2502\n\u2502      events = wait_for_events();                                     \u2502\n\u2502                                                                      \u2502\n\u2502      // 2. \u5404\u30a4\u30d9\u30f3\u30c8\u3092\u51e6\u7406                                         \u2502\n\u2502      for (event in events) {                                         \u2502\n\u2502          if (event.type == ACCEPT) {                                 \u2502\n\u2502              // \u65b0\u3057\u3044\u63a5\u7d9a\u3092\u53d7\u3051\u5165\u308c                                 \u2502\n\u2502              new_fd = accept(listen_fd);                             \u2502\n\u2502              register(new_fd);                                       \u2502\n\u2502          }                                                           \u2502\n\u2502          else if (event.type == READ) {                              \u2502\n\u2502              // \u30c7\u30fc\u30bf\u3092\u8aad\u3093\u3067\u51e6\u7406                                   \u2502\n\u2502              data = read(event.fd);                                  \u2502\n\u2502              process(data);                                          \u2502\n\u2502          }                                                           \u2502\n\u2502          else if (event.type == WRITE) {                             \u2502\n\u2502              // \u30c7\u30fc\u30bf\u3092\u66f8\u304d\u8fbc\u307f                                     \u2502\n\u2502              write(event.fd, response);                              \u2502\n\u2502          }                                                           \u2502\n\u2502      }                                                               \u2502\n\u2502  }                                                                   \u2502\n\u2502                                                                      \u2502\n\u2502  \u4f7f\u7528\u4f8b: Node.js, Redis, Nginx (worker)                             \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"52-nodejs-\u306e\u4ed5\u7d44\u307f",children:"5.2 Node.js \u306e\u4ed5\u7d44\u307f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Node.js \u306e\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9 + \u975e\u540c\u671f I/O:                                     \u2502\n\u2502                                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502                    \u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9                            \u2502    \u2502\n\u2502  \u2502                                                              \u2502    \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502    \u2502\n\u2502  \u2502  \u2502              \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7 (libuv)                 \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502                                                      \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502  1. timers        (setTimeout, setInterval)         \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502  2. pending       (I/O \u30b3\u30fc\u30eb\u30d0\u30c3\u30af)                \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502  3. poll          (I/O \u30a4\u30d9\u30f3\u30c8\u3092\u5f85\u3064)              \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502  4. check         (setImmediate)                    \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502  5. close         (close \u30a4\u30d9\u30f3\u30c8)                  \u2502    \u2502    \u2502\n\u2502  \u2502  \u2502                                                      \u2502    \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502    \u2502\n\u2502  \u2502                                                              \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                            \u2502                                         \u2502\n\u2502                            \u2502 I/O \u64cd\u4f5c\u306f OS \u306b\u59d4\u8b72                   \u2502\n\u2502                            \u25bc                                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502                    libuv / OS                                \u2502    \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502    \u2502\n\u2502  \u2502  \u2502  epoll    \u2502  \u2502   DNS     \u2502  \u2502   File    \u2502               \u2502    \u2502\n\u2502  \u2502  \u2502 (network) \u2502  \u2502  (\u5225\u30b9\u30ec\u30c3\u30c9)\u2502  \u2502 (\u5225\u30b9\u30ec\u30c3\u30c9) \u2502               \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                                      \u2502\n\u2502  \u306a\u305c\u901f\u3044\uff1f                                                          \u2502\n\u2502  \u251c\u2500\u2500 I/O \u5f85\u3061\u3067\u30d6\u30ed\u30c3\u30af\u3057\u306a\u3044                                      \u2502\n\u2502  \u251c\u2500\u2500 1\u30b9\u30ec\u30c3\u30c9\u306a\u306e\u3067\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306a\u3057                       \u2502\n\u2502  \u2514\u2500\u2500 epoll \u3067\u52b9\u7387\u7684\u306b\u30a4\u30d9\u30f3\u30c8\u3092\u51e6\u7406                                \u2502\n\u2502                                                                      \u2502\n\u2502  \u6ce8\u610f\u70b9:                                                             \u2502\n\u2502  \u251c\u2500\u2500 CPU\u96c6\u7d04\u7684\u306a\u51e6\u7406\u306f\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3092\u30d6\u30ed\u30c3\u30af                     \u2502\n\u2502  \u2514\u2500\u2500 Worker Threads \u3067\u5225\u30b9\u30ec\u30c3\u30c9\u306b\u9003\u304c\u3059\u5fc5\u8981\u3042\u308a                   \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.h3,{id:"53-nginx-\u306e\u4ed5\u7d44\u307f",children:"5.3 Nginx \u306e\u4ed5\u7d44\u307f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Nginx \u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u30de\u30b9\u30bf\u30fc + \u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9:                                        \u2502\n\u2502                                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502                    Master Process                            \u2502    \u2502\n\u2502  \u2502  \u251c\u2500\u2500 \u8a2d\u5b9a\u306e\u8aad\u307f\u8fbc\u307f                                         \u2502    \u2502\n\u2502  \u2502  \u251c\u2500\u2500 \u30ef\u30fc\u30ab\u30fc\u306e\u7ba1\u7406                                         \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500 \u30b7\u30b0\u30ca\u30eb\u51e6\u7406                                           \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                            \u2502                                         \u2502\n\u2502            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                        \u2502\n\u2502            \u25bc               \u25bc               \u25bc                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u2502\n\u2502  \u2502  Worker 1   \u2502  \u2502  Worker 2   \u2502  \u2502  Worker N   \u2502                  \u2502\n\u2502  \u2502             \u2502  \u2502             \u2502  \u2502             \u2502                  \u2502\n\u2502  \u2502 \u30a4\u30d9\u30f3\u30c8    \u2502  \u2502 \u30a4\u30d9\u30f3\u30c8    \u2502  \u2502 \u30a4\u30d9\u30f3\u30c8    \u2502                  \u2502\n\u2502  \u2502 \u30eb\u30fc\u30d7      \u2502  \u2502 \u30eb\u30fc\u30d7      \u2502  \u2502 \u30eb\u30fc\u30d7      \u2502                  \u2502\n\u2502  \u2502 (epoll)     \u2502  \u2502 (epoll)     \u2502  \u2502 (epoll)     \u2502                  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2502\n\u2502                                                                      \u2502\n\u2502  worker_processes = CPU\u30b3\u30a2\u6570                                        \u2502\n\u2502                                                                      \u2502\n\u2502  \u5404\u30ef\u30fc\u30ab\u30fc\u304c\u6570\u5343\u301c\u6570\u4e07\u306e\u63a5\u7d9a\u3092\u51e6\u7406\u53ef\u80fd:                            \u2502\n\u2502  \u251c\u2500\u2500 \u975e\u540c\u671f I/O + epoll                                            \u2502\n\u2502  \u251c\u2500\u2500 \u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9\uff08\u30ef\u30fc\u30ab\u30fc\u5185\uff09                                \u2502\n\u2502  \u2514\u2500\u2500 \u30b9\u30ec\u30c3\u30c9\u9593\u306e\u7af6\u5408\u306a\u3057                                          \u2502\n\u2502                                                                      \u2502\n\u2502  Apache (prefork) \u3068\u306e\u9055\u3044:                                          \u2502\n\u2502  \u251c\u2500\u2500 Apache: 1\u63a5\u7d9a = 1\u30d7\u30ed\u30bb\u30b9                                     \u2502\n\u2502  \u2514\u2500\u2500 Nginx: 1\u30ef\u30fc\u30ab\u30fc = \u6570\u5343\u63a5\u7d9a                                   \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"6-linux-\u3067\u306e\u78ba\u8a8d",children:"6. Linux \u3067\u306e\u78ba\u8a8d"}),"\n",(0,r.jsx)(e.h3,{id:"61-strace-\u3067-io-\u3092\u78ba\u8a8d",children:"6.1 strace \u3067 I/O \u3092\u78ba\u8a8d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u30c8\u30ec\u30fc\u30b9\n$ strace -e read,write,epoll_wait curl http://example.com\n\nepoll_wait(3, [{EPOLLIN, {u32=3, u64=3}}], 1, 0) = 1\nread(3, "HTTP/1.1 200 OK\\r\\nContent-Type: "..., 16384) = 1256\nwrite(1, "<!DOCTYPE html>\\n<html>\\n<head>\\n  "..., 1256) = 1256\n\n# -c \u3067\u7d71\u8a08\u60c5\u5831\n$ strace -c curl http://example.com 2>&1 | grep -E "^%|epoll|read|write"\n% time     seconds  usecs/call     calls    errors syscall\n------ ----------- ----------- --------- --------- ----------------\n 45.12    0.000234          11        21           read\n 32.45    0.000168           8        21           write\n 12.34    0.000064          16         4           epoll_wait\n'})}),"\n",(0,r.jsx)(e.h3,{id:"62-\u30d7\u30ed\u30bb\u30b9\u306e-io-\u30e2\u30c7\u30eb\u3092\u78ba\u8a8d",children:"6.2 \u30d7\u30ed\u30bb\u30b9\u306e I/O \u30e2\u30c7\u30eb\u3092\u78ba\u8a8d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# epoll \u3092\u4f7f\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ lsof -p $(pgrep nginx) | grep -E "eventpoll|epoll"\nnginx   12345 root    3u  a]_eventpoll  0,13  0t0  12345 [eventfd]\n\n# /proc \u3067\u78ba\u8a8d\n$ ls -la /proc/$(pgrep nginx)/fd | grep eventpoll\nlrwx------ 1 root root 64 Jan  1 12:00 3 -> anon_inode:[eventpoll]\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"7-java-\u306e-io-\u30e2\u30c7\u30eb",children:"7. Java \u306e I/O \u30e2\u30c7\u30eb"}),"\n",(0,r.jsx)(e.h3,{id:"71-java-nio",children:"7.1 Java NIO"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"// Java NIO (Non-blocking I/O)\nSelector selector = Selector.open();\n\nServerSocketChannel serverChannel = ServerSocketChannel.open();\nserverChannel.configureBlocking(false);  // Non-blocking\nserverChannel.register(selector, SelectionKey.OP_ACCEPT);\n\nwhile (true) {\n    selector.select();  // epoll_wait \u76f8\u5f53\n\n    Set<SelectionKey> keys = selector.selectedKeys();\n    for (SelectionKey key : keys) {\n        if (key.isAcceptable()) {\n            // \u65b0\u3057\u3044\u63a5\u7d9a\n        } else if (key.isReadable()) {\n            // \u30c7\u30fc\u30bf\u53d7\u4fe1\u53ef\u80fd\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"72-virtual-thread-\u3068\u306e\u95a2\u4fc2",children:"7.2 Virtual Thread \u3068\u306e\u95a2\u4fc2"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Virtual Thread \u3068 I/O                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Virtual Thread \u306f Blocking I/O \u3092\u66f8\u304d\u306a\u304c\u3089 Non-blocking \u306e       \u2502\n\u2502  \u30e1\u30ea\u30c3\u30c8\u3092\u5f97\u3089\u308c\u308b:                                                 \u2502\n\u2502                                                                      \u2502\n\u2502  // \u30b3\u30fc\u30c9\u306f Blocking I/O \u306e\u3088\u3046\u306b\u66f8\u304f                               \u2502\n\u2502  Thread.startVirtualThread(() -> {                                   \u2502\n\u2502      InputStream in = socket.getInputStream();                       \u2502\n\u2502      byte[] data = in.readAllBytes();  // \u30d6\u30ed\u30c3\u30af\u3059\u308b\u3088\u3046\u306b\u898b\u3048\u308b  \u2502\n\u2502      process(data);                                                  \u2502\n\u2502  });                                                                 \u2502\n\u2502                                                                      \u2502\n\u2502  // \u5185\u90e8\u3067\u306f:                                                        \u2502\n\u2502  // 1. read() \u304c OS Thread \u3092\u30d6\u30ed\u30c3\u30af\u3057\u3088\u3046\u3068\u3059\u308b                   \u2502\n\u2502  // 2. JVM \u304c Virtual Thread \u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8                         \u2502\n\u2502  // 3. OS Thread \u306f\u4ed6\u306e Virtual Thread \u3092\u5b9f\u884c                       \u2502\n\u2502  // 4. \u30c7\u30fc\u30bf\u304c\u5c4a\u3044\u305f\u3089 Virtual Thread \u3092\u30ea\u30de\u30a6\u30f3\u30c8                 \u2502\n\u2502                                                                      \u2502\n\u2502  \u5229\u70b9:                                                               \u2502\n\u2502  \u251c\u2500\u2500 \u30b7\u30f3\u30d7\u30eb\u306a Blocking \u30b9\u30bf\u30a4\u30eb\u306e\u30b3\u30fc\u30c9                          \u2502\n\u2502  \u251c\u2500\u2500 \u5185\u90e8\u7684\u306b\u306f Non-blocking \u306e\u52b9\u7387\u6027                              \u2502\n\u2502  \u2514\u2500\u2500 NIO \u306e\u8907\u96d1\u3055\u3092\u907f\u3051\u3089\u308c\u308b                                      \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"8-\u307e\u3068\u3081",children:"8. \u307e\u3068\u3081"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u3053\u306e\u7ae0\u3067\u5b66\u3093\u3060\u3053\u3068                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  1. Blocking vs Non-blocking                                        \u2502\n\u2502     \u251c\u2500\u2500 Blocking: read/write \u3067\u30b9\u30ec\u30c3\u30c9\u304c\u6b62\u307e\u308b                    \u2502\n\u2502     \u2514\u2500\u2500 Non-blocking: \u3059\u3050\u623b\u308b\u3001\u30c7\u30fc\u30bf\u304c\u306a\u3051\u308c\u3070 EWOULDBLOCK        \u2502\n\u2502                                                                      \u2502\n\u2502  2. \u540c\u671f vs \u975e\u540c\u671f                                                   \u2502\n\u2502     \u251c\u2500\u2500 \u540c\u671f: \u30a2\u30d7\u30ea\u304c\u30c7\u30fc\u30bf\u306e\u6e96\u5099\u3092\u78ba\u8a8d                           \u2502\n\u2502     \u2514\u2500\u2500 \u975e\u540c\u671f: \u30ab\u30fc\u30cd\u30eb\u304c\u901a\u77e5                                     \u2502\n\u2502                                                                      \u2502\n\u2502  3. I/O \u591a\u91cd\u5316                                                       \u2502\n\u2502     \u251c\u2500\u2500 select/poll: O(n)\u3001\u9045\u3044                                    \u2502\n\u2502     \u2514\u2500\u2500 epoll: O(1)\u3001\u9ad8\u6027\u80fd                                        \u2502\n\u2502                                                                      \u2502\n\u2502  4. \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30e2\u30c7\u30eb                                               \u2502\n\u2502     \u251c\u2500\u2500 1\u30b9\u30ec\u30c3\u30c9\u3067\u591a\u6570\u306e\u63a5\u7d9a\u3092\u51e6\u7406                                \u2502\n\u2502     \u2514\u2500\u2500 Node.js, Nginx \u304c\u63a1\u7528                                      \u2502\n\u2502                                                                      \u2502\n\u2502  5. Java                                                             \u2502\n\u2502     \u251c\u2500\u2500 NIO: Selector \u3067 epoll \u76f8\u5f53                                \u2502\n\u2502     \u2514\u2500\u2500 Virtual Thread: Blocking \u30b9\u30bf\u30a4\u30eb\u3067 Non-blocking \u306e\u52b9\u7387    \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\u78ba\u8a8d\u554f\u984c",children:"\u78ba\u8a8d\u554f\u984c"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Blocking I/O \u3068 Non-blocking I/O \u306e\u9055\u3044\u306f\uff1f"}),"\n",(0,r.jsx)(e.li,{children:"select \u3068 epoll \u306e\u6027\u80fd\u5dee\u306e\u7406\u7531\u306f\uff1f"}),"\n",(0,r.jsx)(e.li,{children:"Node.js \u304c\u30b7\u30f3\u30b0\u30eb\u30b9\u30ec\u30c3\u30c9\u3067\u9ad8\u6027\u80fd\u306a\u7406\u7531\u306f\uff1f"}),"\n",(0,r.jsx)(e.li,{children:"Nginx \u3068 Apache \u306e\u9055\u3044\u3092 I/O \u306e\u89b3\u70b9\u304b\u3089\u8aac\u660e\u3057\u3066\u304f\u3060\u3055\u3044"}),"\n",(0,r.jsx)(e.li,{children:"Virtual Thread \u304c Blocking I/O \u3067\u3082\u52b9\u7387\u7684\u306a\u7406\u7531\u306f\uff1f"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/os-fundamentals/signals",children:"\u30b7\u30b0\u30ca\u30eb"})," - \u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/os-fundamentals/synchronization",children:"\u540c\u671f\u30d7\u30ea\u30df\u30c6\u30a3\u30d6"})," - \u4e26\u884c\u51e6\u7406\u306e\u5236\u5fa1"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,l)=>{l.d(e,{R:()=>d,x:()=>o});var i=l(96540);const r={},s=i.createContext(r);function d(n){const e=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);