"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[6588],{56303:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"content_08_ops/performance/test-environment","title":"\u30c6\u30b9\u30c8\u74b0\u5883","description":"\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001\u6027\u80fd\u691c\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30c6\u30b9\u30c8\u74b0\u5883\u306e\u69cb\u6210\u3068\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3002","source":"@site/docs/content_08_ops/performance/01-test-environment.md","sourceDirName":"content_08_ops/performance","slug":"/content_08_ops/performance/test-environment","permalink":"/idp-server/docs/content_08_ops/performance/test-environment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_08_ops/performance/01-test-environment.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"docs","previous":{"title":"\u6027\u80fd\u30c6\u30b9\u30c8\u65b9\u91dd","permalink":"/idp-server/docs/content_08_ops/performance/test-strategy"},"next":{"title":"\u30b9\u30c8\u30ec\u30b9\u30c6\u30b9\u30c8\u7d50\u679c","permalink":"/idp-server/docs/content_08_ops/performance/stress-test-results"}}');var d=s(74848),t=s(28453);const l={},i="\u30c6\u30b9\u30c8\u74b0\u5883",c={},h=[{value:"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210",id:"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210",level:2},{value:"\u691c\u8a3c\u7528\u30de\u30b7\u30f3",id:"\u691c\u8a3c\u7528\u30de\u30b7\u30f3",level:3},{value:"\u672c\u756a\u60f3\u5b9a\u69cb\u6210",id:"\u672c\u756a\u60f3\u5b9a\u69cb\u6210",level:3},{value:"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u69cb\u6210",id:"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u69cb\u6210",level:2},{value:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",id:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",level:3},{value:"JVM\u8a2d\u5b9a",id:"jvm\u8a2d\u5b9a",level:4},{value:"Tomcat\u8a2d\u5b9a",id:"tomcat\u8a2d\u5b9a",level:4},{value:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a",id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a",level:3},{value:"PostgreSQL",id:"postgresql",level:4},{value:"MySQL",id:"mysql",level:4},{value:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",level:3},{value:"Redis",id:"redis",level:4},{value:"Docker Compose\u69cb\u6210",id:"docker-compose\u69cb\u6210",level:2},{value:"\u57fa\u672c\u69cb\u6210",id:"\u57fa\u672c\u69cb\u6210",level:3},{value:"\u30ea\u30bd\u30fc\u30b9\u5236\u9650",id:"\u30ea\u30bd\u30fc\u30b9\u5236\u9650",level:3},{value:"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf",id:"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf",level:2},{value:"\u8ca0\u8377\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb",id:"\u8ca0\u8377\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb",level:2},{value:"k6",id:"k6",level:3},{value:"\u74b0\u5883\u5909\u6570",id:"\u74b0\u5883\u5909\u6570",level:3},{value:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",id:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",level:2},{value:"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996",id:"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996",level:3},{value:"PostgreSQL \u30af\u30a8\u30ea\u7d71\u8a08",id:"postgresql-\u30af\u30a8\u30ea\u7d71\u8a08",level:3},{value:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0",id:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0",level:3},{value:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u30c6\u30b9\u30c8\u74b0\u5883",children:"\u30c6\u30b9\u30c8\u74b0\u5883"})}),"\n",(0,d.jsx)(n.p,{children:"\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001\u6027\u80fd\u691c\u8a3c\u306b\u4f7f\u7528\u3059\u308b\u30c6\u30b9\u30c8\u74b0\u5883\u306e\u69cb\u6210\u3068\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3002"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210",children:"\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u69cb\u6210"}),"\n",(0,d.jsx)(n.h3,{id:"\u691c\u8a3c\u7528\u30de\u30b7\u30f3",children:"\u691c\u8a3c\u7528\u30de\u30b7\u30f3"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u9805\u76ee"}),(0,d.jsx)(n.th,{children:"\u30b9\u30da\u30c3\u30af"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u30e2\u30c7\u30eb"}),(0,d.jsx)(n.td,{children:"MacBook Pro 14\u30a4\u30f3\u30c1 (2023)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u30c1\u30c3\u30d7"}),(0,d.jsx)(n.td,{children:"Apple M2 Max"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u30e1\u30e2\u30ea"}),(0,d.jsx)(n.td,{children:"64 GB"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"OS"}),(0,d.jsx)(n.td,{children:"macOS 15.0.1 (24A348)"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u672c\u756a\u60f3\u5b9a\u69cb\u6210",children:"\u672c\u756a\u60f3\u5b9a\u69cb\u6210"}),"\n",(0,d.jsx)(n.p,{children:"\u4e2d\u898f\u6a21\uff08\u301c1,000 req/s\uff09\u3092\u60f3\u5b9a\u3057\u305f\u63a8\u5968\u69cb\u6210\uff1a"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"}),(0,d.jsx)(n.th,{children:"\u30b9\u30da\u30c3\u30af"}),(0,d.jsx)(n.th,{children:"\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"idp-server"}),(0,d.jsx)(n.td,{children:"2 vCPU, 4GB RAM"}),(0,d.jsx)(n.td,{children:"2-4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PostgreSQL"}),(0,d.jsx)(n.td,{children:"4 vCPU, 8GB RAM"}),(0,d.jsx)(n.td,{children:"1 (Primary)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Redis"}),(0,d.jsx)(n.td,{children:"2 vCPU, 4GB RAM"}),(0,d.jsx)(n.td,{children:"1"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u69cb\u6210",children:"\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u69cb\u6210"}),"\n",(0,d.jsx)(n.h3,{id:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a",children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a"}),"\n",(0,d.jsx)(n.h4,{id:"jvm\u8a2d\u5b9a",children:"JVM\u8a2d\u5b9a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"JAVA_TOOL_OPTIONS: >-\n  -Xms512m\n  -Xmx2g\n  -XX:+UseG1GC\n  -XX:MaxGCPauseMillis=100\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,d.jsx)(n.th,{children:"\u5024"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-Xms"}),(0,d.jsx)(n.td,{children:"512m"}),(0,d.jsx)(n.td,{children:"\u521d\u671f\u30d2\u30fc\u30d7\u30b5\u30a4\u30ba"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-Xmx"}),(0,d.jsx)(n.td,{children:"2g"}),(0,d.jsx)(n.td,{children:"\u6700\u5927\u30d2\u30fc\u30d7\u30b5\u30a4\u30ba"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"-XX:+UseG1GC"}),(0,d.jsx)(n.td,{children:"\u6709\u52b9"}),(0,d.jsx)(n.td,{children:"G1\u30ac\u30d9\u30fc\u30b8\u30b3\u30ec\u30af\u30bf\u4f7f\u7528"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:["-XX",":MaxGCPauseMillis"]}),(0,d.jsx)(n.td,{children:"100"}),(0,d.jsx)(n.td,{children:"\u6700\u5927GC\u505c\u6b62\u6642\u9593"})]})]})]}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsx)(n.p,{children:"G1GC\u3092OFF\u306b\u3057\u305f\u5834\u5408\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593\u306e\u77ed\u7e2e\u304c\u78ba\u8a8d\u3055\u308c\u3066\u3044\u308b\u3002\u672c\u756a\u74b0\u5883\u3067\u306f\u8981\u691c\u8a0e\u3002"})}),"\n",(0,d.jsx)(n.h4,{id:"tomcat\u8a2d\u5b9a",children:"Tomcat\u8a2d\u5b9a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"server:\n  tomcat:\n    threads:\n      max: 300\n      min-spare: 50\n    connection-timeout: 20000\n    accept-count: 100\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,d.jsx)(n.th,{children:"\u5024"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"maxThreads"}),(0,d.jsx)(n.td,{children:"300"}),(0,d.jsx)(n.td,{children:"\u6700\u5927\u30ef\u30fc\u30ab\u30fc\u30b9\u30ec\u30c3\u30c9\u6570"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"minSpareThreads"}),(0,d.jsx)(n.td,{children:"50"}),(0,d.jsx)(n.td,{children:"\u6700\u5c0f\u5f85\u6a5f\u30b9\u30ec\u30c3\u30c9\u6570"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"connectionTimeout"}),(0,d.jsx)(n.td,{children:"20000"}),(0,d.jsx)(n.td,{children:"\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8(ms)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"acceptCount"}),(0,d.jsx)(n.td,{children:"100"}),(0,d.jsx)(n.td,{children:"\u63a5\u7d9a\u30ad\u30e5\u30fc\u30b5\u30a4\u30ba"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a",children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a"}),"\n",(0,d.jsx)(n.h4,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'services:\n  postgresql:\n    image: postgres:16\n    command:\n      - "postgres"\n      - "-c"\n      - "shared_preload_libraries=pg_stat_statements"\n      - "-c"\n      - "max_connections=200"\n      - "-c"\n      - "shared_buffers=256MB"\n'})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,d.jsx)(n.th,{children:"\u5024"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"max_connections"}),(0,d.jsx)(n.td,{children:"200"}),(0,d.jsx)(n.td,{children:"\u6700\u5927\u63a5\u7d9a\u6570"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"shared_buffers"}),(0,d.jsx)(n.td,{children:"256MB"}),(0,d.jsx)(n.td,{children:"\u5171\u6709\u30d0\u30c3\u30d5\u30a1\u30b5\u30a4\u30ba"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"pg_stat_statements"}),(0,d.jsx)(n.td,{children:"\u6709\u52b9"}),(0,d.jsx)(n.td,{children:"\u30af\u30a8\u30ea\u7d71\u8a08\u53ce\u96c6"})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"mysql",children:"MySQL"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'services:\n  mysql:\n    image: mysql:8.0\n    command:\n      - "--max_connections=200"\n      - "--innodb_buffer_pool_size=256M"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a"}),"\n",(0,d.jsx)(n.h4,{id:"redis",children:"Redis"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"environment:\n  CACHE_ENABLE: true\n  CACHE_TTL: 300\n  REDIS_HOST: redis\n  REDIS_PORT: 6379\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,d.jsx)(n.th,{children:"\u5024"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"CACHE_ENABLE"}),(0,d.jsx)(n.td,{children:"true"}),(0,d.jsx)(n.td,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u6709\u52b9\u5316"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"CACHE_TTL"}),(0,d.jsx)(n.td,{children:"300"}),(0,d.jsx)(n.td,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5TTL(\u79d2)"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"docker-compose\u69cb\u6210",children:"Docker Compose\u69cb\u6210"}),"\n",(0,d.jsx)(n.h3,{id:"\u57fa\u672c\u69cb\u6210",children:"\u57fa\u672c\u69cb\u6210"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'services:\n  nginx:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    depends_on:\n      - idp-server-1\n      - idp-server-2\n\n  idp-server-1:\n    image: idp-server:latest\n    deploy:\n      resources:\n        limits:\n          cpus: \'2\'\n          memory: 2G\n\n  idp-server-2:\n    image: idp-server:latest\n    deploy:\n      resources:\n        limits:\n          cpus: \'2\'\n          memory: 2G\n\n  postgresql:\n    image: postgres:16\n    command: ["postgres", "-c", "shared_preload_libraries=pg_stat_statements"]\n\n  redis:\n    image: redis:7-alpine\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u30ea\u30bd\u30fc\u30b9\u5236\u9650",children:"\u30ea\u30bd\u30fc\u30b9\u5236\u9650"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30b3\u30f3\u30c6\u30ca"}),(0,d.jsx)(n.th,{children:"CPU"}),(0,d.jsx)(n.th,{children:"\u30e1\u30e2\u30ea"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"idp-server"}),(0,d.jsx)(n.td,{children:"2\u30b3\u30a2"}),(0,d.jsx)(n.td,{children:"2GB"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"postgresql"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"-"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"redis"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"-"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"nginx"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf",children:"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf"}),"\n",(0,d.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u6e96\u5099\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./06-test-execution-guide",children:"\u30c6\u30b9\u30c8\u5b9f\u884c\u30ac\u30a4\u30c9"})," - \u30c7\u30fc\u30bf\u751f\u6210\u30fb\u6295\u5165\u624b\u9806"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"../../../../performance-test/README.md",children:"performance-test/README.md"})," - \u30b9\u30af\u30ea\u30d7\u30c8\u8a73\u7d30"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u8ca0\u8377\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb",children:"\u8ca0\u8377\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb"}),"\n",(0,d.jsx)(n.h3,{id:"k6",children:"k6"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbrew install k6\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\nk6 version\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u74b0\u5883\u5909\u6570",children:"\u74b0\u5883\u5909\u6570"}),"\n",(0,d.jsxs)(n.p,{children:["\u30ed\u30fc\u30c9\u30c6\u30b9\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u306f",(0,d.jsx)(n.code,{children:"performance-test-tenant.json"}),"\u304b\u3089\u8a2d\u5b9a\u3092\u81ea\u52d5\u8aad\u307f\u8fbc\u307f\u3059\u308b\u305f\u3081\u3001\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u306f\u6700\u5c0f\u9650\u3067\u6e08\u3080\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# BASE_URL\u306e\u307f\u5fc5\u8981\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u3001\u30c7\u30d5\u30a9\u30eb\u30c8: http://localhost:8080\uff09\nexport BASE_URL=http://localhost:8080\n"})}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:["\u30b9\u30c8\u30ec\u30b9\u30c6\u30b9\u30c8\u306f\u5f15\u304d\u7d9a\u304d\u74b0\u5883\u5909\u6570\u304c\u5fc5\u8981\u3067\u3059\u3002\u8a73\u7d30\u306f",(0,d.jsx)(n.a,{href:"/idp-server/docs/content_08_ops/performance/test-execution-guide",children:"\u30c6\u30b9\u30c8\u5b9f\u884c\u30ac\u30a4\u30c9"}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",children:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0"}),"\n",(0,d.jsx)(n.h3,{id:"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996",children:"\u30ea\u30bd\u30fc\u30b9\u76e3\u8996"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Docker Stats\ndocker stats $(docker compose ps -q idp-server)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"postgresql-\u30af\u30a8\u30ea\u7d71\u8a08",children:"PostgreSQL \u30af\u30a8\u30ea\u7d71\u8a08"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- pg_stat_statements\u6709\u52b9\u5316\nCREATE EXTENSION pg_stat_statements;\n\n-- \u7d71\u8a08\u30ea\u30bb\u30c3\u30c8\nSELECT pg_stat_statements_reset();\n\n-- \u4e0a\u4f4d\u30af\u30a8\u30ea\u53d6\u5f97\nSELECT query, calls, total_exec_time, mean_exec_time, rows\nFROM pg_stat_statements\nORDER BY total_exec_time DESC\nLIMIT 20;\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0",children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b0"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'logging:\n  level:\n    root: info\n    web: info\n  file:\n    name: logs/idp-server.log\n    pattern:\n      file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"../../../../performance-test/README.md",children:"performance-test/README.md"})," - k6\u30c6\u30b9\u30c8\u5b9f\u884c\u30ac\u30a4\u30c9"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"../../../../performance-test/README-mysql.md",children:"performance-test/README-mysql.md"})," - MySQL\u74b0\u5883\u5411\u3051\u30ac\u30a4\u30c9"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(x,{...e})}):x(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var r=s(96540);const d={},t=r.createContext(d);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);