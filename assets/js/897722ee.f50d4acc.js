"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[20302],{49514:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"content_03_concepts/authentication-authorization/concept-03-session-management-security","title":"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5206\u6790","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u306e\u73fe\u72b6\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002","source":"@site/docs/content_03_concepts/03-authentication-authorization/concept-03-session-management-security.md","sourceDirName":"content_03_concepts/03-authentication-authorization","slug":"/content_03_concepts/authentication-authorization/concept-03-session-management-security","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-03-session-management-security","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_03_concepts/03-authentication-authorization/concept-03-session-management-security.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-03-session-management"},"next":{"title":"\u8a8d\u53ef","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-04-authorization"}}');var d=s(74848),t=s(28453);const r={},c="\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5206\u6790",l={},h=[{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u6982\u8981",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u6982\u8981",level:2},{value:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc",id:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7a2e\u985e\u3068\u5f79\u5272",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7a2e\u985e\u3068\u5f79\u5272",level:3},{value:"SSO\u6642\u306e\u691c\u8a3c",id:"sso\u6642\u306e\u691c\u8a3c",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",level:2},{value:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc\u8a73\u7d30",id:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc\u8a73\u7d30",level:3},{value:"SSO\u6642\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",id:"sso\u6642\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",level:3},{value:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",id:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",level:3},{value:"Cookie\u4e00\u89a7",id:"cookie\u4e00\u89a7",level:2},{value:"\u653b\u6483\u3068\u5bfe\u7b56\u30de\u30c8\u30ea\u30af\u30b9",id:"\u653b\u6483\u3068\u5bfe\u7b56\u30de\u30c8\u30ea\u30af\u30b9",level:2},{value:"\u5bfe\u7b56\uff1a\u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af",id:"\u5bfe\u7b56\u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af",level:2},{value:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa",id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa",level:3},{value:"\u5bfe\u7b56",id:"\u5bfe\u7b56",level:3},{value:"\u7d50\u679c",id:"\u7d50\u679c",level:3},{value:"\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u308b\u5236\u5fa1",id:"\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u308b\u5236\u5fa1",level:3},{value:"\u5bfe\u7b56\uff1aACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483",id:"\u5bfe\u7b56acr\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483",level:2},{value:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa",id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa-1",level:3},{value:"\u5bfe\u7b56",id:"\u5bfe\u7b56-1",level:3},{value:"\u7d50\u679c",id:"\u7d50\u679c-1",level:3},{value:"\u5bfe\u7b56\uff1a\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483",id:"\u5bfe\u7b56\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483",level:2},{value:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa",id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa-2",level:3},{value:"\u5bfe\u7b56",id:"\u5bfe\u7b56-2",level:3},{value:"\u7d50\u679c",id:"\u7d50\u679c-2",level:3},{value:"ACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483\u3068\u306e\u9055\u3044",id:"acr\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483\u3068\u306e\u9055\u3044",level:3},{value:"\u5bfe\u7b56\uff1a\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc",id:"\u5bfe\u7b56\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc",level:2},{value:"\u6982\u8981",id:"\u6982\u8981",level:3},{value:"\u30dd\u30ea\u30b7\u30fc",id:"\u30dd\u30ea\u30b7\u30fc",level:3},{value:"\u52d5\u4f5c\u30d5\u30ed\u30fc",id:"\u52d5\u4f5c\u30d5\u30ed\u30fc",level:3},{value:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u8003\u616e",id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u8003\u616e",level:3},{value:"\u30c6\u30ca\u30f3\u30c8\u8a2d\u5b9a",id:"\u30c6\u30ca\u30f3\u30c8\u8a2d\u5b9a",level:3},{value:"E2E\u30c6\u30b9\u30c8",id:"e2e\u30c6\u30b9\u30c8",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5206\u6790",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5206\u6790"})}),"\n",(0,d.jsx)(e.p,{children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u306e\u73fe\u72b6\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002"}),"\n",(0,d.jsx)(e.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u6982\u8981",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u6982\u8981"}),"\n",(0,d.jsx)(e.h3,{id:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc",children:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8 \u2500\u2500\u2500\u2500\u2192 \u8a8d\u8a3c\u5b8c\u4e86 \u2500\u2500\u2500\u2500\u2192 \u8a8d\u53ef\u5b8c\u4e86 \u2500\u2500\u2500\u2500\u2192 SSO\u53ef\u80fd\n      \u2502                \u2502              \u2502              \u2502\n      \u25bc                \u25bc              \u25bc              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502AuthSession\u2502   \u2502 OPSession \u2502   \u2502ClientSession\u2502  \u2502  \u518d\u5229\u7528    \u2502\n\u2502  Cookie   \u2502   \u2502  Cookie   \u2502   \u2502  \u4f5c\u6210      \u2502   \u2502  \u53ef\u80fd     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7a2e\u985e\u3068\u5f79\u5272",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7a2e\u985e\u3068\u5f79\u5272"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3"}),(0,d.jsx)(e.th,{children:"Cookie"}),(0,d.jsx)(e.th,{children:"\u5f79\u5272"}),(0,d.jsx)(e.th,{children:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"AuthenticationTransaction"}),(0,d.jsx)(e.td,{children:"AUTH_SESSION"}),(0,d.jsx)(e.td,{children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u306e\u4fdd\u8b77"}),(0,d.jsx)(e.td,{children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u301c\u8a8d\u53ef\u5b8c\u4e86"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"OPSession"}),(0,d.jsx)(e.td,{children:"IDP_IDENTITY"}),(0,d.jsx)(e.td,{children:"SSO"}),(0,d.jsx)(e.td,{children:"\u8a8d\u8a3c\u5b8c\u4e86\u301c\u30ed\u30b0\u30a2\u30a6\u30c8/\u671f\u9650\u5207\u308c"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ClientSession"}),(0,d.jsx)(e.td,{children:"-"}),(0,d.jsx)(e.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5225\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"}),(0,d.jsx)(e.td,{children:"\u8a8d\u53ef\u5b8c\u4e86\u301c\u30ed\u30b0\u30a2\u30a6\u30c8/\u671f\u9650\u5207\u308c"})]})]})]}),"\n",(0,d.jsx)(e.h3,{id:"sso\u6642\u306e\u691c\u8a3c",children:"SSO\u6642\u306e\u691c\u8a3c"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"SSO\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8 \u2500\u2500\u2500\u2500\u2192 \u30bb\u30c3\u30b7\u30e7\u30f3\u691c\u8a3c \u2500\u2500\u2500\u2500\u2192 \u30dd\u30ea\u30b7\u30fc\u691c\u8a3c \u2500\u2500\u2500\u2500\u2192 \u8a8d\u53ef\n        \u2502                     \u2502                   \u2502\n        \u25bc                     \u25bc                   \u25bc\n   AUTH_SESSION          OPSession\u6709\u52b9?      \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\n     + OPSession          acr\u4e00\u81f4?          \u6761\u4ef6\u3092\u6e80\u305f\u3059?\n"})}),"\n",(0,d.jsx)(e.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30"}),"\n",(0,d.jsx)(e.h3,{id:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc\u8a73\u7d30",children:"\u521d\u56de\u8a8d\u8a3c\u30d5\u30ed\u30fc\u8a73\u7d30"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          \u30bb\u30c3\u30b7\u30e7\u30f3\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010\u30d5\u30a7\u30fc\u30ba1: \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u958b\u59cb\u3011                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 GET /authorizations \u2502                                                    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502  \u2502 AuthSession       \u2502     \u2502 Authentication    \u2502                             \u2502\n\u2502  \u2502 Cookie\u751f\u6210        \u2502     \u2502 Transaction\u4f5c\u6210   \u2502                             \u2502\n\u2502  \u2502 (CSRF\u5bfe\u7b56)        \u2502     \u2502 (\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8   \u2502                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502  \u306b\u7d10\u4ed8\u304f)        \u2502                             \u2502\n\u2502                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                             \u2502\n\u2502                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010\u30d5\u30a7\u30fc\u30ba2: \u8a8d\u8a3c\u5b8c\u4e86\u3011                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502 POST /password-authentication (+ TOTP\u7b49)                     \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 validateAuthSession() \u2502  \u2190 AUTH_SESSION Cookie\u691c\u8a3c                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 Authentication    \u2502  \u8a8d\u8a3c\u60c5\u5831\u3092\u66f4\u65b0                                      \u2502\n\u2502  \u2502 Transaction\u66f4\u65b0   \u2502  - user, acr, amr, authTime                         \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502  \u2502 OPSession\u4f5c\u6210     \u2502     \u2502 IDP_IDENTITY      \u2502                             \u2502\n\u2502  \u2502 (SSO\u7528)          \u2502     \u2502 IDP_SESSION       \u2502                             \u2502\n\u2502  \u2502 acr, amr, authTime\u2502     \u2502 Cookie\u8a2d\u5b9a        \u2502                             \u2502\n\u2502  \u2502 interactionResults\u2502     \u2502                   \u2502                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                             \u2502\n\u2502                                                                             \u2502\n\u2502  \u203b \u8a8d\u8a3c\u6210\u529f\u6642\u306bOPSession\u3092\u4f5c\u6210\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc\u9069\u7528\uff09                \u2502\n\u2502  \u203b \u540c\u4e00\u30e6\u30fc\u30b6\u30fc\u518d\u8a8d\u8a3c\u6642\u306f\u65e2\u5b58\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u518d\u5229\u7528                              \u2502\n\u2502  \u203b MFA\u9014\u4e2d\u96e2\u8131\u306e\u5834\u5408\u3001OPSession\u306f\u4f5c\u6210\u3055\u308c\u306a\u3044                               \u2502\n\u2502                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010\u30d5\u30a7\u30fc\u30ba3: \u8a8d\u53ef\u5b8c\u4e86\u3011                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 POST /authorize   \u2502                                                      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 validateAuthSession() \u2502  \u2190 AUTH_SESSION Cookie\u691c\u8a3c                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 ClientSession\u4f5c\u6210 \u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u56fa\u6709\u306e\u30bb\u30c3\u30b7\u30e7\u30f3                         \u2502\n\u2502  \u2502 (per-client)     \u2502  sid for ID Token                                    \u2502\n\u2502  \u2502 scope, claims    \u2502  OPSession\u306b\u7d10\u4ed8\u304f                                   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"sso\u6642\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30",children:"SSO\u6642\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u8a73\u7d30"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          SSO\u6642\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010\u524d\u63d0: OPSession \u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u3011                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 IDP_IDENTITY      \u2502  \u65e2\u5b58\u306eOPSession ID                                  \u2502\n\u2502  \u2502 Cookie \u3042\u308a       \u2502                                                      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010SSO\u65b9\u5f0f1: prompt=none\u3011                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 GET /authorizations \u2502  prompt=none                                       \u2502\n\u2502  \u2502                    \u2502  + IDP_IDENTITY Cookie                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 OPSession\u691c\u8a3c     \u2502  - \u6709\u52b9\u671f\u9650\u30c1\u30a7\u30c3\u30af                                  \u2502\n\u2502  \u2502                   \u2502  - max_age\u30c1\u30a7\u30c3\u30af                                  \u2502\n\u2502  \u2502                   \u2502  - AuthorizationGranted\u30c1\u30a7\u30c3\u30af                     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 302 Redirect      \u2502  \u8a8d\u53ef\u30b3\u30fc\u30c9\u76f4\u63a5\u767a\u884c                                  \u2502\n\u2502  \u2502 + \u8a8d\u53ef\u30b3\u30fc\u30c9      \u2502  \uff08\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u753b\u9762\u30b9\u30ad\u30c3\u30d7\uff09                          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u3010SSO\u65b9\u5f0f2: authorize-with-session\u3011                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 GET /authorizations \u2502  prompt\u6307\u5b9a\u306a\u3057                                    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502  \u2502 AuthSession       \u2502     \u2502 Authentication    \u2502                             \u2502\n\u2502  \u2502 Cookie\u751f\u6210        \u2502     \u2502 Transaction\u4f5c\u6210   \u2502                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                             \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 GET /view-data    \u2502  session_enabled: true \u3092\u8fd4\u3059                        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                   \u2502\n\u2502  \u2502 POST /authorize-with-session         \u2502                                   \u2502\n\u2502  \u2502 + AUTH_SESSION Cookie               \u2502                                   \u2502\n\u2502  \u2502 + IDP_IDENTITY Cookie               \u2502                                   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                   \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                             \u2502\n\u2502  \u2502 validateAuthSession() \u2502  \u2502 OPSession\u691c\u8a3c     \u2502                             \u2502\n\u2502  \u2502 AUTH_SESSION\u691c\u8a3c  \u2502     \u2502 IDP_IDENTITY\u691c\u8a3c  \u2502                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                             \u2502\n\u2502         \u2502                                                                   \u2502\n\u2502         \u25bc                                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                      \u2502\n\u2502  \u2502 OPSession\u306e\u8a8d\u8a3c   \u2502  \u65e2\u5b58OPSession\u306eacr/amr/authTime\u3067\u8a8d\u53ef               \u2502\n\u2502  \u2502 \u60c5\u5831\u3067\u8a8d\u53ef        \u2502                                                      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                      \u2502\n\u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",children:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3"}),"\n",(0,d.jsx)(e.mermaid,{value:"sequenceDiagram\n    participant Browser\n    participant IdP\n    participant Session Store\n\n    Note over Browser,Session Store: \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u958b\u59cb\n    Browser->>IdP: GET /authorizations\n    IdP->>Session Store: AuthenticationTransaction\u4f5c\u6210\n    IdP->>Browser: 302 Redirect + AUTH_SESSION Cookie\n\n    Note over Browser,Session Store: \u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08\u8a8d\u8a3c\u5b8c\u4e86\u6642\u306bOPSession\u4f5c\u6210\uff09\n    Browser->>IdP: POST /password-authentication\n    IdP->>IdP: validateAuthSession()\n    IdP->>Session Store: AuthenticationTransaction\u66f4\u65b0\n    IdP->>Session Store: OPSession\u4f5c\u6210\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc\u9069\u7528\uff09\n    IdP->>Browser: \u8a8d\u8a3c\u7d50\u679c + IDP_IDENTITY Cookie\n\n    Note over Browser,Session Store: \u8a8d\u53ef\u5b8c\u4e86\uff08ClientSession\u4f5c\u6210\uff09\n    Browser->>IdP: POST /authorize\n    IdP->>IdP: validateAuthSession()\n    IdP->>Session Store: ClientSession\u4f5c\u6210\uff08OPSession\u306b\u7d10\u4ed8\u304f\uff09\n    IdP->>Browser: \u8a8d\u53ef\u30b3\u30fc\u30c9"}),"\n",(0,d.jsx)(e.h2,{id:"cookie\u4e00\u89a7",children:"Cookie\u4e00\u89a7"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"Cookie\u540d"}),(0,d.jsx)(e.th,{children:"\u7528\u9014"}),(0,d.jsx)(e.th,{children:"HttpOnly"}),(0,d.jsx)(e.th,{children:"Secure"}),(0,d.jsx)(e.th,{children:"SameSite"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"AUTH_SESSION"}),(0,d.jsx)(e.td,{children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u56fa\u5b9a\u653b\u6483\u5bfe\u7b56"}),(0,d.jsx)(e.td,{children:"Yes"}),(0,d.jsx)(e.td,{children:"Yes"}),(0,d.jsx)(e.td,{children:"Lax"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"IDP_IDENTITY"}),(0,d.jsx)(e.td,{children:"OPSession\u8b58\u5225\uff08SSO\u7528\uff09"}),(0,d.jsx)(e.td,{children:"Yes"}),(0,d.jsx)(e.td,{children:"Yes"}),(0,d.jsx)(e.td,{children:"Lax"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"IDP_SESSION"}),(0,d.jsx)(e.td,{children:"OIDC Session Management iframe\u7528"}),(0,d.jsx)(e.td,{children:"No"}),(0,d.jsx)(e.td,{children:"Yes"}),(0,d.jsx)(e.td,{children:"Lax"})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"\u653b\u6483\u3068\u5bfe\u7b56\u30de\u30c8\u30ea\u30af\u30b9",children:"\u653b\u6483\u3068\u5bfe\u7b56\u30de\u30c8\u30ea\u30af\u30b9"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u653b\u6483"}),(0,d.jsx)(e.th,{children:"\u5bfe\u7b56"}),(0,d.jsx)(e.th,{children:"\u5099\u8003"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u56fa\u5b9a\u653b\u6483 (Session Fixation)"}),(0,d.jsx)(e.td,{children:"AUTH_SESSION Cookie\u691c\u8a3c"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"validateAuthSession()"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af"}),(0,d.jsx)(e.td,{children:"AUTH_SESSION Cookie\u691c\u8a3c\uff08\u8a8d\u8a3c\u6642\uff09"}),(0,d.jsx)(e.td,{children:"\u88ab\u5bb3\u8005\u304c\u8a8d\u8a3c\u3067\u304d\u306a\u3044"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483"}),(0,d.jsx)(e.td,{children:"acr_values\u691c\u8a3c"}),(0,d.jsxs)(e.td,{children:[(0,d.jsx)(e.code,{children:"isSessionEnabled()"}),", ",(0,d.jsx)(e.code,{children:"authorizeWithSession()"})]})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483"}),(0,d.jsx)(e.td,{children:"interactionResults\u691c\u8a3c"}),(0,d.jsxs)(e.td,{children:[(0,d.jsx)(e.code,{children:"authorizeWithSession()"}),"\u3067\u518d\u8a55\u4fa1"]})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"CSRF\u653b\u6483"}),(0,d.jsx)(e.td,{children:"SameSite=Lax + POST only"}),(0,d.jsx)(e.td,{children:"Cookie\u8a2d\u5b9a"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"XSS\u7d4c\u7531\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7a83\u53d6"}),(0,d.jsx)(e.td,{children:"HttpOnly"}),(0,d.jsx)(e.td,{children:"IDP_IDENTITY Cookie"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u5b64\u7acb\u30bb\u30c3\u30b7\u30e7\u30f3\u84c4\u7a4d"}),(0,d.jsx)(e.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc"}),(0,d.jsxs)(e.td,{children:[(0,d.jsx)(e.code,{children:"SWITCH_ALLOWED"}),"\u3067\u540c\u4e00\u30e6\u30fc\u30b6\u30fc\u518d\u8a8d\u8a3c\u6642\u306b\u518d\u5229\u7528"]})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u5225\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u306a\u308a\u3059\u307e\u3057"}),(0,d.jsx)(e.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc"}),(0,d.jsxs)(e.td,{children:[(0,d.jsx)(e.code,{children:"STRICT"}),"\u3067\u5225\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3092\u62d2\u5426"]})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"\u5bfe\u7b56\u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af",children:"\u5bfe\u7b56\uff1a\u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af"}),"\n",(0,d.jsx)(e.h3,{id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa",children:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"1. \u653b\u6483\u8005\u304c\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u958b\u59cb \u2192 id=abc123, AUTH_SESSION=xyz789 \u3092\u53d6\u5f97\n2. \u653b\u6483\u8005\u304cURL (id=abc123) \u3092\u88ab\u5bb3\u8005\u306b\u9001\u4fe1\n3. \u88ab\u5bb3\u8005\u304c\u305d\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u8a8d\u8a3c\u3057\u3088\u3046\u3068\u3059\u308b\n4. \u88ab\u5bb3\u8005\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u306fAUTH_SESSION Cookie\u304c\u306a\u3044\uff08\u307e\u305f\u306f\u5225\u306e\u5024\uff09\n5. \u8a8d\u8a3c\u6642\u306b validateAuthSession() \u304c\u5931\u6557\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u5bfe\u7b56",children:"\u5bfe\u7b56"}),"\n",(0,d.jsxs)(e.p,{children:["\u8a8d\u8a3c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08POST /password-authentication \u7b49\uff09\u3067 ",(0,d.jsx)(e.code,{children:"validateAuthSession()"})," \u3092\u5b9f\u884c\u3002AUTH_SESSION Cookie\u304cAuthenticationTransaction\u306eauthSessionId\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u691c\u8a3c\u3002"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"\u691c\u8a3c\u30bf\u30a4\u30df\u30f3\u30b0"}),":"]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"POST /password-authentication\uff08\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\uff09"}),"\n",(0,d.jsx)(e.li,{children:"POST /totp-authentication\uff08TOTP\u8a8d\u8a3c\uff09"}),"\n",(0,d.jsx)(e.li,{children:"POST /authorize\uff08\u8a8d\u53ef\uff09"}),"\n",(0,d.jsx)(e.li,{children:"POST /authorize-with-session\uff08SSO\u8a8d\u53ef\uff09"}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"\u7d50\u679c",children:"\u7d50\u679c"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["AUTH_SESSION Cookie\u6b20\u843d \u2192 401 ",(0,d.jsx)(e.code,{children:"auth_session_mismatch"}),"\uff08\u88ab\u5bb3\u8005\u304c\u8a8d\u8a3c\u3067\u304d\u306a\u3044\uff09"]}),"\n",(0,d.jsxs)(e.li,{children:["AUTH_SESSION Cookie\u4e0d\u4e00\u81f4 \u2192 401 ",(0,d.jsx)(e.code,{children:"auth_session_mismatch"}),"\uff08\u88ab\u5bb3\u8005\u304c\u8a8d\u8a3c\u3067\u304d\u306a\u3044\uff09"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u308b\u5236\u5fa1",children:"\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u308b\u5236\u5fa1"}),"\n",(0,d.jsxs)(e.p,{children:["\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u3067 ",(0,d.jsx)(e.code,{children:"auth_session_binding_required"})," \u3092\u8a2d\u5b9a\u53ef\u80fd\uff1a"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "auth_session_binding_required": true  // \u30c7\u30d5\u30a9\u30eb\u30c8: true\uff08\u6709\u52b9\uff09\n}\n'})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"true"}),": AUTH_SESSION\u691c\u8a3c\u3092\u5b9f\u65bd\uff08\u63a8\u5968\uff09"]}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"false"}),": AUTH_SESSION\u691c\u8a3c\u3092\u30b9\u30ad\u30c3\u30d7\uff08\u7279\u6b8a\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5411\u3051\uff09"]}),"\n"]}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"\u6ce8\u610f"}),": CIBA\u7b49\u306enon-browser\u30d5\u30ed\u30fc\u3067\u306f\u81ea\u52d5\u7684\u306b\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,d.jsx)(e.h2,{id:"\u5bfe\u7b56acr\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483",children:"\u5bfe\u7b56\uff1aACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483"}),"\n",(0,d.jsx)(e.h3,{id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa-1",children:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304cloa1\uff08\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u307f\uff09\u3067\u30ed\u30b0\u30a4\u30f3 \u2192 OPSession(acr=loa1)\u4f5c\u6210\n2. \u65b0\u3057\u3044\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\uff08acr_values=loa2, MFA\u5fc5\u8981\uff09\n3. \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u6709\u52b9\u306a\u305f\u3081authorize-with-session\u304c\u4f7f\u7528\u53ef\u80fd\u306b\u898b\u3048\u308b\n4. authorize-with-session \u2192 loa1\u3067\u8a8d\u53ef\u3055\u308c\u308b\uff08MFA\u30d0\u30a4\u30d1\u30b9\uff09\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u5bfe\u7b56-1",children:"\u5bfe\u7b56"}),"\n",(0,d.jsx)(e.p,{children:"acr_values\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306eacr\u306e\u6574\u5408\u6027\u3092\u691c\u8a3c\u3002\u30bb\u30c3\u30b7\u30e7\u30f3\u306eacr\u304c\u8981\u6c42\u3055\u308c\u305facr_values\u306b\u542b\u307e\u308c\u306a\u3044\u5834\u5408\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u518d\u5229\u7528\u3092\u62d2\u5426\u3002"}),"\n",(0,d.jsx)(e.h3,{id:"\u7d50\u679c-1",children:"\u7d50\u679c"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306bacr\u304c\u306a\u3044 \u2192 session_enabled=false, 400\u30a8\u30e9\u30fc"}),"\n",(0,d.jsx)(e.li,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306eacr\u304cacr_values\u306b\u542b\u307e\u308c\u306a\u3044 \u2192 session_enabled=false, 400\u30a8\u30e9\u30fc"}),"\n",(0,d.jsx)(e.li,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306eacr\u304cacr_values\u306b\u542b\u307e\u308c\u308b \u2192 session_enabled=true, \u8a8d\u53ef\u6210\u529f"}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"\u5bfe\u7b56\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483",children:"\u5bfe\u7b56\uff1a\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483"}),"\n",(0,d.jsx)(e.h3,{id:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa-2",children:"\u653b\u6483\u30b7\u30ca\u30ea\u30aa"}),"\n",(0,d.jsxs)(e.p,{children:["ACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483\u3068\u306f\u7570\u306a\u308a\u3001",(0,d.jsx)(e.strong,{children:"\u540c\u3058ACR\u3067\u3082\u7570\u306a\u308b\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc"}),"\u304c\u9069\u7528\u3055\u308c\u308b\u5834\u5408\u306e\u653b\u6483\u3067\u3059\u3002"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u3010\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a\u3011\n- ssoPasswordOnlyClient: acr=loa1, \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc=\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u307f\n- ssoMfaRequiredClient:  acr=loa1, \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc=\u30d1\u30b9\u30ef\u30fc\u30c9+TOTP\u5fc5\u9808\n\n\u3010\u653b\u6483\u30b7\u30ca\u30ea\u30aa\u3011\n1. \u30e6\u30fc\u30b6\u30fc\u304cssoPasswordOnlyClient\u3067\u30ed\u30b0\u30a4\u30f3\n   \u2514\u2500 \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u306e\u307f \u2192 OPSession\u4f5c\u6210\uff08acr=loa1\uff09\n\n2. \u30e6\u30fc\u30b6\u30fc\u304cssoMfaRequiredClient\u306b\u30a2\u30af\u30bb\u30b9\n   \u2514\u2500 OPSession\u304c\u6709\u52b9\u3001acr=loa1\u3067\u4e00\u81f4\n\n3. authorize-with-session \u3092\u5b9f\u884c\n   \u2514\u2500 [\u5bfe\u7b56\u306a\u3057] acr\u4e00\u81f4\u306e\u305f\u3081MFA\u3092\u30d0\u30a4\u30d1\u30b9\u3057\u3066\u8a8d\u53ef\u3055\u308c\u308b \u274c\n   \u2514\u2500 [\u5bfe\u7b56\u3042\u308a] \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306esuccessConditions\u3092\u518d\u8a55\u4fa1\u3057\u3066\u62d2\u5426 \u2713\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u5bfe\u7b56-2",children:"\u5bfe\u7b56"}),"\n",(0,d.jsx)(e.p,{children:"OPSession\u306b\u8a8d\u8a3c\u7d50\u679c\uff08interactionResults\uff09\u3092\u4fdd\u5b58\u3057\u3001authorize-with-session\u6642\u306b\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306esuccessConditions\u3092\u518d\u8a55\u4fa1\u3002"}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"\u4ed5\u7d44\u307f"}),":"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 OPSession                                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 id: "op-session-123"                                         \u2502\n\u2502 acr: "loa1"                                                  \u2502\n\u2502 amr: ["password"]                                            \u2502\n\u2502 interactionResults: {                                        \u2502\n\u2502   "password": { "status": "success", ... },                  \u2502\n\u2502   // TOTP\u306e\u7d50\u679c\u304c\u306a\u3044 = MFA\u672a\u5b9f\u65bd                            \u2502\n\u2502 }                                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502\n                          \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 authorize-with-session                                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1. OPSession\u53d6\u5f97\uff08acr, amr, interactionResults\uff09            \u2502\n\u2502 2. \u73fe\u5728\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u3092\u53d6\u5f97                      \u2502\n\u2502 3. successConditions \u3092 interactionResults \u3067\u8a55\u4fa1            \u2502\n\u2502 4. \u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u5834\u5408 \u2192 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u767a\u884c\u3001\u62d2\u5426     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,d.jsx)(e.h3,{id:"\u7d50\u679c-2",children:"\u7d50\u679c"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306esuccessConditions\u3092\u6e80\u305f\u3059 \u2192 \u8a8d\u53ef\u6210\u529f"}),"\n",(0,d.jsxs)(e.li,{children:["\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306esuccessConditions\u3092\u6e80\u305f\u3055\u306a\u3044 \u2192 400\u30a8\u30e9\u30fc + \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8 ",(0,d.jsx)(e.code,{children:"AUTHENTICATION_POLICY_MISMATCH"})]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"acr\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483\u3068\u306e\u9055\u3044",children:"ACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483\u3068\u306e\u9055\u3044"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u89b3\u70b9"}),(0,d.jsx)(e.th,{children:"ACR\u30c0\u30a6\u30f3\u30b0\u30ec\u30fc\u30c9\u653b\u6483"}),(0,d.jsx)(e.th,{children:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u30d0\u30a4\u30d1\u30b9\u653b\u6483"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ACR"}),(0,d.jsx)(e.td,{children:"\u7570\u306a\u308b\uff08loa1 vs loa2\uff09"}),(0,d.jsx)(e.td,{children:"\u540c\u3058\uff08loa1 = loa1\uff09"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u691c\u8a3c\u5bfe\u8c61"}),(0,d.jsx)(e.td,{children:"acr_values"}),(0,d.jsx)(e.td,{children:"successConditions"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u691c\u8a3c\u30bf\u30a4\u30df\u30f3\u30b0"}),(0,d.jsx)(e.td,{children:"isSessionEnabled()"}),(0,d.jsx)(e.td,{children:"authorizeWithSession()"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u4fdd\u5b58\u30c7\u30fc\u30bf"}),(0,d.jsx)(e.td,{children:"OPSession.acr"}),(0,d.jsx)(e.td,{children:"OPSession.interactionResults"})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"\u5bfe\u7b56\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc",children:"\u5bfe\u7b56\uff1a\u30bb\u30c3\u30b7\u30e7\u30f3\u5207\u66ff\u30dd\u30ea\u30b7\u30fc"}),"\n",(0,d.jsx)(e.h3,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,d.jsx)(e.p,{children:"\u540c\u4e00\u30d6\u30e9\u30a6\u30b6\u3067\u5225\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\u3057\u3088\u3046\u3068\u3057\u305f\u5834\u5408\u306e\u52d5\u4f5c\u3092\u5236\u5fa1\u3057\u307e\u3059\u3002"}),"\n",(0,d.jsx)(e.h3,{id:"\u30dd\u30ea\u30b7\u30fc",children:"\u30dd\u30ea\u30b7\u30fc"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u30dd\u30ea\u30b7\u30fc"}),(0,d.jsx)(e.th,{children:"\u52d5\u4f5c"}),(0,d.jsx)(e.th,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ec\u30d9\u30eb"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"STRICT"})}),(0,d.jsx)(e.td,{children:"\u30a8\u30e9\u30fc\u3092\u8fd4\u3059\uff08\u30ed\u30b0\u30a2\u30a6\u30c8\u5fc5\u9808\uff09"}),(0,d.jsx)(e.td,{children:"\u9ad8"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"SWITCH_ALLOWED"})}),(0,d.jsx)(e.td,{children:"\u53e4\u3044\u30bb\u30c3\u30b7\u30e7\u30f3\u524a\u9664\u2192\u65b0\u898f\u4f5c\u6210 (\u30c7\u30d5\u30a9\u30eb\u30c8)"}),(0,d.jsx)(e.td,{children:"\u4e2d"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"MULTI_SESSION"})}),(0,d.jsx)(e.td,{children:"\u65b0\u898f\u4f5c\u6210\uff08\u53e4\u3044\u306e\u306f\u6b8b\u308b\uff09"}),(0,d.jsx)(e.td,{children:"\u4f4e"})]})]})]}),"\n",(0,d.jsx)(e.h3,{id:"\u52d5\u4f5c\u30d5\u30ed\u30fc",children:"\u52d5\u4f5c\u30d5\u30ed\u30fc"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"\u540c\u4e00\u30e6\u30fc\u30b6\u30fc\u304c\u518d\u8a8d\u8a3c\n\u2514\u2500\u2500 \u65e2\u5b58\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u518d\u5229\u7528\uff08lastAccessedAt\u66f4\u65b0\uff09\n    \u2192 \u5b64\u7acb\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u9632\u6b62\n\n\u5225\u30e6\u30fc\u30b6\u30fc\u304c\u8a8d\u8a3c\uff08\u65e2\u5b58\u30bb\u30c3\u30b7\u30e7\u30f3\u3042\u308a\uff09\n\u251c\u2500\u2500 STRICT         \u2192 DifferentUserAuthenticatedException\uff08403\uff09\n\u251c\u2500\u2500 SWITCH_ALLOWED \u2192 \u53e4\u3044\u30bb\u30c3\u30b7\u30e7\u30f3\u7d42\u4e86\uff08USER_SWITCH\uff09\u2192 \u65b0\u898f\u4f5c\u6210\n\u2514\u2500\u2500 MULTI_SESSION  \u2192 \u65b0\u898f\u4f5c\u6210\uff08\u53e4\u3044\u306e\u306fTTL\u6e80\u4e86\u307e\u3067\u6b8b\u5b58\uff09\n"})}),"\n",(0,d.jsx)(e.h3,{id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u8003\u616e",children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u8003\u616e"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u89b3\u70b9"}),(0,d.jsx)(e.th,{children:"STRICT"}),(0,d.jsx)(e.th,{children:"SWITCH_ALLOWED"}),(0,d.jsx)(e.th,{children:"MULTI_SESSION"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u5b64\u7acb\u30bb\u30c3\u30b7\u30e7\u30f3"}),(0,d.jsx)(e.td,{children:"\u306a\u3057"}),(0,d.jsx)(e.td,{children:"\u306a\u3057"}),(0,d.jsx)(e.td,{children:"\u3042\u308a"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u5171\u6709PC\u5bfe\u5fdc"}),(0,d.jsx)(e.td,{children:"\xd7"}),(0,d.jsx)(e.td,{children:"\u25cb"}),(0,d.jsx)(e.td,{children:"\u25cb"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"}),(0,d.jsx)(e.td,{children:"\u53b3\u683c"}),(0,d.jsx)(e.td,{children:"\u30d0\u30e9\u30f3\u30b9"}),(0,d.jsx)(e.td,{children:"\u7de9\u3044"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"\u63a8\u5968\u74b0\u5883"}),(0,d.jsx)(e.td,{children:"\u91d1\u878d\u3001\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba"}),(0,d.jsx)(e.td,{children:"\u4e00\u822cWeb\u30a2\u30d7\u30ea"}),(0,d.jsx)(e.td,{children:"\u5f8c\u65b9\u4e92\u63db\u6027"})]})]})]}),"\n",(0,d.jsx)(e.h3,{id:"\u30c6\u30ca\u30f3\u30c8\u8a2d\u5b9a",children:"\u30c6\u30ca\u30f3\u30c8\u8a2d\u5b9a"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-json",children:'{\n  "session": {\n    "timeout_seconds": 3600,\n    "switch_policy": "STRICT"\n  }\n}\n'})}),"\n",(0,d.jsx)(e.h2,{id:"e2e\u30c6\u30b9\u30c8",children:"E2E\u30c6\u30b9\u30c8"}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u30c6\u30b9\u30c8"}),(0,d.jsx)(e.th,{children:"\u30d5\u30a1\u30a4\u30eb"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"AUTH_SESSION Cookie missing"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"AUTH_SESSION Cookie mismatch"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ACR downgrade prevention (reject)"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ACR match (allow)"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"Authentication policy bypass prevention (reject)"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"Same policy SSO (allow)"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"Same user re-authentication (session reuse)"}),(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"scenario-13-sso-session-management.test.js"})})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://openid.net/specs/openid-connect-session-1_0.html",children:"OIDC Session Management"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.keycloak.org/docs/latest/server_admin/#_user-session-management",children:"Keycloak Session Management"})}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(o,{...n})}):o(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>c});var i=s(96540);const d={},t=i.createContext(d);function r(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:r(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);