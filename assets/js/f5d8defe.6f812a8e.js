"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3402],{9587:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"content_11_learning/networking/api-gateway-networking","title":"API Gateway\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0","description":"\u6240\u8981\u6642\u9593","source":"@site/docs/content_11_learning/15-networking/05-api-gateway-networking.md","sourceDirName":"content_11_learning/15-networking","slug":"/content_11_learning/networking/api-gateway-networking","permalink":"/idp-server/docs/content_11_learning/networking/api-gateway-networking","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/15-networking/05-api-gateway-networking.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"SSL/TLS\u8a3c\u660e\u66f8\u7ba1\u7406","permalink":"/idp-server/docs/content_11_learning/networking/ssl-tls-certificates"},"next":{"title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","permalink":"/idp-server/docs/content_11_learning/networking/network-troubleshooting"}}');var i=a(74848),r=a(28453);const s={},o="API Gateway\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0",l={},c=[{value:"\u6240\u8981\u6642\u9593",id:"\u6240\u8981\u6642\u9593",level:2},{value:"\u5b66\u3079\u308b\u3053\u3068",id:"\u5b66\u3079\u308b\u3053\u3068",level:2},{value:"\u524d\u63d0\u77e5\u8b58",id:"\u524d\u63d0\u77e5\u8b58",level:2},{value:"1. API Gateway\u306e\u57fa\u790e",id:"1-api-gateway\u306e\u57fa\u790e",level:2},{value:"1.1 API Gateway\u3068\u306f",id:"11-api-gateway\u3068\u306f",level:3},{value:"1.2 API Gateway\u306e\u7a2e\u985e",id:"12-api-gateway\u306e\u7a2e\u985e",level:3},{value:"2. API Gateway\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d71\u5408",id:"2-api-gateway\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d71\u5408",level:2},{value:"2.1 \u7d71\u5408\u30bf\u30a4\u30d7",id:"21-\u7d71\u5408\u30bf\u30a4\u30d7",level:3},{value:"2.2 VPC\u7d71\u5408\uff08VPC Link\uff09",id:"22-vpc\u7d71\u5408vpc-link",level:3},{value:"REST API\u7528 VPC Link\u4f5c\u6210",id:"rest-api\u7528-vpc-link\u4f5c\u6210",level:4},{value:"HTTP API\u7528 VPC Link\u4f5c\u6210",id:"http-api\u7528-vpc-link\u4f5c\u6210",level:4},{value:"2.3 \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API",id:"23-\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8api",level:3},{value:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API\u4f5c\u6210\u4f8b",id:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8api\u4f5c\u6210\u4f8b",level:4},{value:"3. \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068SSL/TLS",id:"3-\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068ssltls",level:2},{value:"3.1 \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a",id:"31-\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a",level:3},{value:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u4f5c\u6210\u624b\u9806",id:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u4f5c\u6210\u624b\u9806",level:4},{value:"3.2 \u30a8\u30c3\u30b8\u6700\u9069\u5316 vs \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb",id:"32-\u30a8\u30c3\u30b8\u6700\u9069\u5316-vs-\u30ea\u30fc\u30b8\u30e7\u30ca\u30eb",level:3},{value:"4. \u8a8d\u8a3c\u30fb\u8a8d\u53ef",id:"4-\u8a8d\u8a3c\u8a8d\u53ef",level:2},{value:"4.1 \u8a8d\u8a3c\u65b9\u5f0f\u306e\u7a2e\u985e",id:"41-\u8a8d\u8a3c\u65b9\u5f0f\u306e\u7a2e\u985e",level:3},{value:"4.2 Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u5b9f\u88c5\u4f8b",id:"42-lambda-\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u5b9f\u88c5\u4f8b",level:3},{value:"Lambda\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u8a2d\u5b9a\uff08AWS CLI\uff09",id:"lambda\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u8a2d\u5b9aaws-cli",level:4},{value:"4.3 HTTP API JWT\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc",id:"43-http-api-jwt\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc",level:3},{value:"5. \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3001CORS",id:"5-\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0cors",level:2},{value:"5.1 \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff08\u30ec\u30fc\u30c8\u5236\u9650\uff09",id:"51-\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8\u5236\u9650",level:3},{value:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a",id:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a",level:4},{value:"5.2 \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0",id:"52-\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0",level:3},{value:"\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u8a2d\u5b9a",id:"\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u8a2d\u5b9a",level:4},{value:"5.3 CORS\u8a2d\u5b9a",id:"53-cors\u8a2d\u5b9a",level:3},{value:"CORS\u8a2d\u5b9a\uff08REST API\uff09",id:"cors\u8a2d\u5b9arest-api",level:4},{value:"CORS\u8a2d\u5b9a\uff08HTTP API - \u7c21\u5358\uff09",id:"cors\u8a2d\u5b9ahttp-api---\u7c21\u5358",level:4},{value:"6. CloudFront\u3068\u306e\u9023\u643a",id:"6-cloudfront\u3068\u306e\u9023\u643a",level:2},{value:"6.1 CloudFront + API Gateway \u30d1\u30bf\u30fc\u30f3",id:"61-cloudfront--api-gateway-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"CloudFront\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\u4f8b",id:"cloudfront\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\u4f8b",level:4},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"\u5b66\u3093\u3060\u3053\u3068",id:"\u5b66\u3093\u3060\u3053\u3068",level:3},{value:"\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8",id:"\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:3},{value:"\u53c2\u8003\u30ea\u30f3\u30af",id:"\u53c2\u8003\u30ea\u30f3\u30af",level:3}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"api-gateway\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0",children:"API Gateway\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0"})}),"\n",(0,i.jsx)(e.h2,{id:"\u6240\u8981\u6642\u9593",children:"\u6240\u8981\u6642\u9593"}),"\n",(0,i.jsx)(e.p,{children:"\u7d0445\u5206"}),"\n",(0,i.jsx)(e.h2,{id:"\u5b66\u3079\u308b\u3053\u3068",children:"\u5b66\u3079\u308b\u3053\u3068"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"API Gateway\u306e\u57fa\u672c\u6982\u5ff5\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d71\u5408"}),"\n",(0,i.jsx)(e.li,{children:"REST API\u3001HTTP API\u3001WebSocket API\u306e\u9055\u3044"}),"\n",(0,i.jsx)(e.li,{children:"VPC\u7d71\u5408\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API"}),"\n",(0,i.jsx)(e.li,{children:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068SSL/TLS\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3001\u8a8d\u8a3c"}),"\n",(0,i.jsx)(e.li,{children:"CloudFront\u3068\u306e\u9023\u643a\u30d1\u30bf\u30fc\u30f3"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u524d\u63d0\u77e5\u8b58",children:"\u524d\u63d0\u77e5\u8b58"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/networking/dns-fundamentals",children:"01-dns-fundamentals.md"})," - DNS\u57fa\u790e"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/networking/load-balancing",children:"03-load-balancing.md"})," - \u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b7\u30f3\u30b0"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/networking/ssl-tls-certificates",children:"04-ssl-tls-certificates.md"})," - SSL/TLS\u8a3c\u660e\u66f8"]}),"\n",(0,i.jsx)(e.li,{children:"HTTP/REST\u306e\u57fa\u672c"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"1-api-gateway\u306e\u57fa\u790e",children:"1. API Gateway\u306e\u57fa\u790e"}),"\n",(0,i.jsx)(e.h3,{id:"11-api-gateway\u3068\u306f",children:"1.1 API Gateway\u3068\u306f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Amazon API Gateway"}),"\u306f\u3001\u3042\u3089\u3086\u308b\u898f\u6a21\u306eREST\u3001HTTP\u3001WebSocket API\u3092\u4f5c\u6210\u3001\u516c\u958b\u3001\u4fdd\u5b88\u3001\u76e3\u8996\u3001\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306e\u30d5\u30eb\u30de\u30cd\u30fc\u30b8\u30c9\u578b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              API Gateway \u306e\u5f79\u5272                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08\u30e2\u30d0\u30a4\u30eb\u3001Web\u3001IoT\u7b49\uff09                         \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 HTTPS \u30ea\u30af\u30a8\u30b9\u30c8                                     \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502           API Gateway                                \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502 1. \u8a8d\u8a3c\u30fb\u8a8d\u53ef\uff08IAM\u3001Cognito\u3001Lambda\uff09          \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 2. \u30ea\u30af\u30a8\u30b9\u30c8\u691c\u8a3c                              \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 3. \u30ec\u30fc\u30c8\u5236\u9650\uff08\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff09                 \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 4. \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0                                \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 5. \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u5909\u63db                   \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 6. \u30ed\u30ae\u30f3\u30b0\u30fb\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0                      \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u251c\u2500\u2500\u2500\u25ba Lambda\u95a2\u6570                                      \u2502\n\u2502      \u251c\u2500\u2500\u2500\u25ba EC2/ECS\uff08VPC\u7d71\u5408\uff09                              \u2502\n\u2502      \u251c\u2500\u2500\u2500\u25ba DynamoDB\u3001S3                                    \u2502\n\u2502      \u2514\u2500\u2500\u2500\u25ba \u5916\u90e8HTTP \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                          \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h3,{id:"12-api-gateway\u306e\u7a2e\u985e",children:"1.2 API Gateway\u306e\u7a2e\u985e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          REST API vs HTTP API vs WebSocket API              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  REST API                                                    \u2502\n\u2502  - \u6700\u3082\u6a5f\u80fd\u8c4a\u5bcc                                              \u2502\n\u2502  - API \u30ad\u30fc\u3001\u4f7f\u7528\u91cf\u30d7\u30e9\u30f3\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u691c\u8a3c                    \u2502\n\u2502  - \u30e2\u30c3\u30af\u30ec\u30b9\u30dd\u30f3\u30b9\u3001SDK\u30b8\u30a7\u30cd\u30ec\u30fc\u30b7\u30e7\u30f3                     \u2502\n\u2502  - \u4fa1\u683c: \u9ad8\u3081                                                \u2502\n\u2502  \u7528\u9014: \u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3                      \u2502\n\u2502                                                              \u2502\n\u2502  HTTP API                                                    \u2502\n\u2502  - \u30b7\u30f3\u30d7\u30eb\u3001\u4f4e\u30b3\u30b9\u30c8\uff08REST API\u306e70%\u5b89\uff09                     \u2502\n\u2502  - JWT\u8a8d\u8a3c\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8                                 \u2502\n\u2502  - OIDC/OAuth 2.0\u7d71\u5408                                       \u2502\n\u2502  - \u4fa1\u683c: \u4f4e\u3044                                                \u2502\n\u2502  \u7528\u9014: \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3001OAuth/OIDC\u8a8d\u8a3cAPI                   \u2502\n\u2502                                                              \u2502\n\u2502  WebSocket API                                               \u2502\n\u2502  - \u53cc\u65b9\u5411\u901a\u4fe1                                                \u2502\n\u2502  - \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3                              \u2502\n\u2502  - \u63a5\u7d9a\u7ba1\u7406\uff08@connections\uff09                                 \u2502\n\u2502  \u7528\u9014: \u30c1\u30e3\u30c3\u30c8\u3001\u30b2\u30fc\u30e0\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9          \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"2-api-gateway\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d71\u5408",children:"2. API Gateway\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d71\u5408"}),"\n",(0,i.jsx)(e.h3,{id:"21-\u7d71\u5408\u30bf\u30a4\u30d7",children:"2.1 \u7d71\u5408\u30bf\u30a4\u30d7"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              API Gateway \u7d71\u5408\u30bf\u30a4\u30d7                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  1. Lambda\u7d71\u5408\uff08LAMBDA / LAMBDA_PROXY\uff09                     \u2502\n\u2502     API Gateway \u2192 Lambda\u95a2\u6570                                \u2502\n\u2502                                                              \u2502\n\u2502  2. HTTP\u7d71\u5408\uff08HTTP / HTTP_PROXY\uff09                           \u2502\n\u2502     API Gateway \u2192 \u5916\u90e8HTTP\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                    \u2502\n\u2502                                                              \u2502\n\u2502  3. AWS\u7d71\u5408\uff08AWS\uff09                                          \u2502\n\u2502     API Gateway \u2192 AWS\u30b5\u30fc\u30d3\u30b9\uff08DynamoDB\u3001S3\u7b49\uff09             \u2502\n\u2502                                                              \u2502\n\u2502  4. VPC Link\u7d71\u5408                                             \u2502\n\u2502     API Gateway \u2192 \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30bd\u30fc\u30b9\uff08NLB\u7d4c\u7531\uff09           \u2502\n\u2502                                                              \u2502\n\u2502  5. \u30e2\u30c3\u30af\u7d71\u5408\uff08MOCK\uff09                                      \u2502\n\u2502     API Gateway \u2192 \u56fa\u5b9a\u30ec\u30b9\u30dd\u30f3\u30b9\uff08\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306a\u3057\uff09        \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h3,{id:"22-vpc\u7d71\u5408vpc-link",children:"2.2 VPC\u7d71\u5408\uff08VPC Link\uff09"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"VPC Link"}),"\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001API Gateway\u304b\u3089VPC\u5185\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              VPC Link \u306e\u4ed5\u7d44\u307f                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8                                              \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 HTTPS                                                \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                       \u2502\n\u2502  \u2502  API Gateway     \u2502 (\u30d1\u30d6\u30ea\u30c3\u30af)                          \u2502\n\u2502  \u2502  (REST API)      \u2502                                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                       \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 VPC Link (REST API\u7528)                                \u2502\n\u2502      \u2502 \u307e\u305f\u306f                                                \u2502\n\u2502      \u2502 VPC Link (HTTP API\u7528)                                \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  VPC                                                  \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502  Network Load Balancer (NLB)                   \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2502      \u2502                                                \u2502  \u2502\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25ba EC2 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9 (10.0.1.10)               \u2502  \u2502\n\u2502  \u2502      \u251c\u2500\u2500\u2500\u25ba ECS \u30bf\u30b9\u30af (10.0.1.20)                     \u2502  \u2502\n\u2502  \u2502      \u2514\u2500\u2500\u2500\u25ba Lambda (VPC\u5185)                             \u2502  \u2502\n\u2502  \u2502                                                        \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"rest-api\u7528-vpc-link\u4f5c\u6210",children:"REST API\u7528 VPC Link\u4f5c\u6210"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# 1. NLB\u4f5c\u6210\uff08VPC\u5185\uff09\naws elbv2 create-load-balancer \\\n  --name internal-nlb \\\n  --subnets subnet-12345678 subnet-87654321 \\\n  --scheme internal \\\n  --type network\n\n# 2. \u30bf\u30fc\u30b2\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\naws elbv2 create-target-group \\\n  --name api-targets \\\n  --protocol TCP \\\n  --port 8080 \\\n  --vpc-id vpc-1234567890abcdef0\n\n# 3. \u30ea\u30b9\u30ca\u30fc\u4f5c\u6210\naws elbv2 create-listener \\\n  --load-balancer-arn arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/net/internal-nlb/50dc6c495c0c9188 \\\n  --protocol TCP \\\n  --port 80 \\\n  --default-actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/api-targets/50dc6c495c0c9188\n\n# 4. VPC Link\u4f5c\u6210\uff08REST API\u7528\uff09\naws apigateway create-vpc-link \\\n  --name my-vpc-link \\\n  --target-arns arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/net/internal-nlb/50dc6c495c0c9188\n\n# 5. REST API\u306bVPC Link\u7d71\u5408\u3092\u8a2d\u5b9a\n# API Gateway Console \u307e\u305f\u306f AWS CLI/CloudFormation\u3067\u8a2d\u5b9a\n"})}),"\n",(0,i.jsx)(e.h4,{id:"http-api\u7528-vpc-link\u4f5c\u6210",children:"HTTP API\u7528 VPC Link\u4f5c\u6210"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# HTTP API\u7528\u306eVPC Link\u306f\u7570\u306a\u308b\u30b3\u30de\u30f3\u30c9\naws apigatewayv2 create-vpc-link \\\n  --name my-http-vpc-link \\\n  --subnet-ids subnet-12345678 subnet-87654321 \\\n  --security-group-ids sg-12345678\n"})}),"\n",(0,i.jsx)(e.h3,{id:"23-\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8api",children:"2.3 \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API"}),"\u306f\u3001VPC\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u7d4c\u7531\u3067\u306e\u307f\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306aAPI\u3067\u3059\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API \u306e\u69cb\u6210                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  VPC                                                    \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502  EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9                                  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  (10.0.1.10)                                      \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2502      \u2502                                                  \u2502 \u2502\n\u2502  \u2502      \u2502 HTTPS                                            \u2502 \u2502\n\u2502  \u2502      \u25bc                                                  \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502  VPC\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (execute-api)                  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  vpce-1234567890abcdef0                           \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2502      \u2502                                                  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502         \u2502                                                    \u2502\n\u2502         \u2502 AWS PrivateLink                                   \u2502\n\u2502         \u25bc                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                       \u2502\n\u2502  \u2502  API Gateway     \u2502                                       \u2502\n\u2502  \u2502  (\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API)\u2502                                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                       \u2502\n\u2502                                                              \u2502\n\u2502  \u7279\u5fb4:                                                       \u2502\n\u2502  - \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef                            \u2502\n\u2502  - VPC\u5185\u304b\u3089\u306e\u307f\u30a2\u30af\u30bb\u30b9\u53ef\u80fd                                 \u2502\n\u2502  - \u30ea\u30bd\u30fc\u30b9\u30dd\u30ea\u30b7\u30fc\u3067\u66f4\u306b\u5236\u9650\u53ef\u80fd                            \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8api\u4f5c\u6210\u4f8b",children:"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API\u4f5c\u6210\u4f8b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# 1. VPC\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4f5c\u6210\naws ec2 create-vpc-endpoint \\\n  --vpc-id vpc-1234567890abcdef0 \\\n  --vpc-endpoint-type Interface \\\n  --service-name com.amazonaws.us-east-1.execute-api \\\n  --subnet-ids subnet-12345678 subnet-87654321 \\\n  --security-group-ids sg-12345678\n\n# 2. \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8REST API\u4f5c\u6210\naws apigateway create-rest-api \\\n  --name private-api \\\n  --endpoint-configuration types=PRIVATE\n\n# 3. \u30ea\u30bd\u30fc\u30b9\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\ncat > resource-policy.json <<EOF\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": "*",\n      "Action": "execute-api:Invoke",\n      "Resource": "arn:aws:execute-api:us-east-1:123456789012:api-id/*",\n      "Condition": {\n        "StringEquals": {\n          "aws:SourceVpce": "vpce-1234567890abcdef0"\n        }\n      }\n    }\n  ]\n}\nEOF\n\naws apigateway update-rest-api \\\n  --rest-api-id api-id \\\n  --patch-operations op=replace,path=/policy,value=file://resource-policy.json\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"3-\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068ssltls",children:"3. \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068SSL/TLS"}),"\n",(0,i.jsx)(e.h3,{id:"31-\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a",children:"3.1 \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a"}),"\n",(0,i.jsxs)(e.p,{children:["\u30c7\u30d5\u30a9\u30eb\u30c8\u306eAPI Gateway\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff08\u4f8b\uff1a",(0,i.jsx)(e.code,{children:"https://api-id.execute-api.us-east-1.amazonaws.com"}),"\uff09\u3092\u3001\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\uff08\u4f8b\uff1a",(0,i.jsx)(e.code,{children:"https://api.example.com"}),"\uff09\u306b\u5909\u66f4\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u306e\u69cb\u6210                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8                                                \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 https://api.example.com/prod/users                   \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                       \u2502\n\u2502  \u2502  Route 53        \u2502                                       \u2502\n\u2502  \u2502  api.example.com \u2502                                       \u2502\n\u2502  \u2502  \u2193 ALIAS         \u2502                                       \u2502\n\u2502  \u2502  d-xxxx.execute-api.us-east-1.amazonaws.com             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                       \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  CloudFront \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3                    \u2502  \u2502\n\u2502  \u2502  (API Gateway \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u304c\u81ea\u52d5\u4f5c\u6210)             \u2502  \u2502\n\u2502  \u2502  \u8a3c\u660e\u66f8: ACM (us-east-1)                              \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                       \u2502\n\u2502  \u2502  API Gateway     \u2502                                       \u2502\n\u2502  \u2502  \u30b9\u30c6\u30fc\u30b8: prod   \u2502                                       \u2502\n\u2502  \u2502  \u30d1\u30b9: /users     \u2502                                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                       \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u4f5c\u6210\u624b\u9806",children:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u4f5c\u6210\u624b\u9806"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# 1. ACM\u8a3c\u660e\u66f8\u4f5c\u6210\uff08us-east-1\u30ea\u30fc\u30b8\u30e7\u30f3\u5fc5\u9808 - \u30a8\u30c3\u30b8\u6700\u9069\u5316\u306e\u5834\u5408\uff09\naws acm request-certificate \\\n  --domain-name api.example.com \\\n  --validation-method DNS \\\n  --region us-east-1\n\n# 2. DNS\u691c\u8a3c\u5b8c\u4e86\u5f8c\u3001\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u4f5c\u6210\naws apigateway create-domain-name \\\n  --domain-name api.example.com \\\n  --certificate-arn arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012 \\\n  --endpoint-configuration types=EDGE \\\n  --security-policy TLS_1_2\n\n# \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5834\u5408\uff08\u63a8\u5968\uff09\naws apigateway create-domain-name \\\n  --domain-name api.example.com \\\n  --regional-certificate-arn arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012 \\\n  --endpoint-configuration types=REGIONAL \\\n  --security-policy TLS_1_2\n\n# 3. \u30d9\u30fc\u30b9\u30d1\u30b9\u30de\u30c3\u30d4\u30f3\u30b0\u4f5c\u6210\uff08API \u30b9\u30c6\u30fc\u30b8\u3068\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3092\u7d10\u4ed8\u3051\uff09\naws apigateway create-base-path-mapping \\\n  --domain-name api.example.com \\\n  --rest-api-id api123456 \\\n  --stage prod \\\n  --base-path v1\n\n# \u8907\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\u306eAPI\naws apigateway create-base-path-mapping \\\n  --domain-name api.example.com \\\n  --rest-api-id api123456 \\\n  --stage prod \\\n  --base-path v1\n\naws apigateway create-base-path-mapping \\\n  --domain-name api.example.com \\\n  --rest-api-id api789012 \\\n  --stage prod \\\n  --base-path v2\n\n# \u7d50\u679c:\n# https://api.example.com/v1/* \u2192 api123456 (prod \u30b9\u30c6\u30fc\u30b8)\n# https://api.example.com/v2/* \u2192 api789012 (prod \u30b9\u30c6\u30fc\u30b8)\n\n# 4. Route 53\u3067DNS\u30ec\u30b3\u30fc\u30c9\u4f5c\u6210\naws route53 change-resource-record-sets \\\n  --hosted-zone-id Z1234567890ABC \\\n  --change-batch \'{\n    "Changes": [{\n      "Action": "CREATE",\n      "ResourceRecordSet": {\n        "Name": "api.example.com",\n        "Type": "A",\n        "AliasTarget": {\n          "HostedZoneId": "Z2FDTNDATAQYW2",\n          "DNSName": "d-xxxx.execute-api.us-east-1.amazonaws.com",\n          "EvaluateTargetHealth": false\n        }\n      }\n    }]\n  }\'\n'})}),"\n",(0,i.jsx)(e.h3,{id:"32-\u30a8\u30c3\u30b8\u6700\u9069\u5316-vs-\u30ea\u30fc\u30b8\u30e7\u30ca\u30eb",children:"3.2 \u30a8\u30c3\u30b8\u6700\u9069\u5316 vs \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          \u30a8\u30c3\u30b8\u6700\u9069\u5316 vs \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30a8\u30c3\u30b8\u6700\u9069\u5316\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                                  \u2502\n\u2502  - CloudFront\u7d4c\u7531\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u914d\u4fe1                            \u2502\n\u2502  - \u4f4e\u30ec\u30a4\u30c6\u30f3\u30b7\u30fc\uff08\u30a8\u30c3\u30b8\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u6d3b\u7528\uff09                  \u2502\n\u2502  - ACM\u8a3c\u660e\u66f8\u306fus-east-1\u30ea\u30fc\u30b8\u30e7\u30f3\u5fc5\u9808                        \u2502\n\u2502  - \u8ffd\u52a0\u30b3\u30b9\u30c8\u306a\u3057\uff08CloudFront\u7d44\u307f\u8fbc\u307f\uff09                      \u2502\n\u2502  \u7528\u9014: \u30b0\u30ed\u30fc\u30d0\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3                            \u2502\n\u2502                                                              \u2502\n\u2502  \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                                  \u2502\n\u2502  - \u7279\u5b9a\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u30c7\u30d7\u30ed\u30a4                                  \u2502\n\u2502  - CloudFront\u7d71\u5408\u306f\u4efb\u610f\uff08\u624b\u52d5\u8a2d\u5b9a\uff09                          \u2502\n\u2502  - ACM\u8a3c\u660e\u66f8\u306f\u540c\u4e00\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u53d6\u5f97                           \u2502\n\u2502  - VPC Link\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API\u3067\u5fc5\u9808                           \u2502\n\u2502  \u7528\u9014: \u7279\u5b9a\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u307f\u3001VPC\u7d71\u5408\u3001\u72ec\u81eaCloudFront\u8a2d\u5b9a       \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"4-\u8a8d\u8a3c\u8a8d\u53ef",children:"4. \u8a8d\u8a3c\u30fb\u8a8d\u53ef"}),"\n",(0,i.jsx)(e.h3,{id:"41-\u8a8d\u8a3c\u65b9\u5f0f\u306e\u7a2e\u985e",children:"4.1 \u8a8d\u8a3c\u65b9\u5f0f\u306e\u7a2e\u985e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          API Gateway \u8a8d\u8a3c\u65b9\u5f0f                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  1. IAM\u8a8d\u8a3c                                                  \u2502\n\u2502     - AWS\u7f72\u540d\u30d0\u30fc\u30b8\u30e7\u30f34\uff08SigV4\uff09                            \u2502\n\u2502     - AWS\u30b5\u30fc\u30d3\u30b9\u9593\u901a\u4fe1\u306b\u6700\u9069                                \u2502\n\u2502                                                              \u2502\n\u2502  2. Cognito \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc                                   \u2502\n\u2502     - Cognito User Pools\u3067\u8a8d\u8a3c                               \u2502\n\u2502     - OAuth 2.0 / OIDC                                      \u2502\n\u2502                                                              \u2502\n\u2502  3. Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\uff08\u30ab\u30b9\u30bf\u30e0\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\uff09          \u2502\n\u2502     - \u30ab\u30b9\u30bf\u30e0\u8a8d\u8a3c\u30ed\u30b8\u30c3\u30af                                   \u2502\n\u2502     - \u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9 or \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30d9\u30fc\u30b9           \u2502\n\u2502                                                              \u2502\n\u2502  4. API \u30ad\u30fc                                                 \u2502\n\u2502     - \u30b7\u30f3\u30d7\u30eb\u306a\u30a2\u30af\u30bb\u30b9\u5236\u5fa1                                 \u2502\n\u2502     - \u4f7f\u7528\u91cf\u30d7\u30e9\u30f3\u3068\u7d44\u307f\u5408\u308f\u305b                               \u2502\n\u2502                                                              \u2502\n\u2502  5. JWT \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\uff08HTTP API\u5c02\u7528\uff09                       \u2502\n\u2502     - JWT\u30c8\u30fc\u30af\u30f3\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u691c\u8a3c                            \u2502\n\u2502     - OIDC/OAuth 2.0\u7d71\u5408                                    \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h3,{id:"42-lambda-\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u5b9f\u88c5\u4f8b",children:"4.2 Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u5b9f\u88c5\u4f8b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u95a2\u6570\uff08Node.js\uff09\nexports.handler = async (event) => {\n    console.log('Event:', JSON.stringify(event, null, 2));\n\n    // \u30c8\u30fc\u30af\u30f3\u53d6\u5f97\uff08Authorization\u30d8\u30c3\u30c0\u30fc\u304b\u3089\uff09\n    const token = event.authorizationToken;\n\n    try {\n        // \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u30ed\u30b8\u30c3\u30af\uff08\u4f8b: JWT\u30c8\u30fc\u30af\u30f3\u691c\u8a3c\uff09\n        const decoded = verifyJwtToken(token);\n\n        // IAM\u30dd\u30ea\u30b7\u30fc\u751f\u6210\uff08Allow\uff09\n        return generatePolicy(decoded.sub, 'Allow', event.methodArn);\n    } catch (error) {\n        console.error('Authentication failed:', error);\n\n        // IAM\u30dd\u30ea\u30b7\u30fc\u751f\u6210\uff08Deny\uff09\n        return generatePolicy('user', 'Deny', event.methodArn);\n    }\n};\n\nfunction generatePolicy(principalId, effect, resource) {\n    const authResponse = {\n        principalId: principalId\n    };\n\n    if (effect && resource) {\n        const policyDocument = {\n            Version: '2012-10-17',\n            Statement: [{\n                Action: 'execute-api:Invoke',\n                Effect: effect,\n                Resource: resource\n            }]\n        };\n        authResponse.policyDocument = policyDocument;\n    }\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u6e21\u3055\u308c\u308b\u8ffd\u52a0\u60c5\u5831\uff09\n    authResponse.context = {\n        userId: principalId,\n        email: 'user@example.com',\n        role: 'admin'\n    };\n\n    return authResponse;\n}\n\nfunction verifyJwtToken(token) {\n    // JWT\u691c\u8a3c\u30ed\u30b8\u30c3\u30af\uff08jsonwebtoken\u30e9\u30a4\u30d6\u30e9\u30ea\u4f7f\u7528\uff09\n    const jwt = require('jsonwebtoken');\n    const publicKey = process.env.JWT_PUBLIC_KEY;\n\n    return jwt.verify(token, publicKey, {\n        algorithms: ['RS256']\n    });\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"lambda\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u8a2d\u5b9aaws-cli",children:"Lambda\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u8a2d\u5b9a\uff08AWS CLI\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Lambda\u95a2\u6570\u4f5c\u6210\uff08\u7701\u7565\uff09\n\n# REST API\u306b\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u8ffd\u52a0\naws apigateway create-authorizer \\\n  --rest-api-id api123456 \\\n  --name my-lambda-authorizer \\\n  --type TOKEN \\\n  --authorizer-uri arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:my-authorizer/invocations \\\n  --identity-source method.request.header.Authorization \\\n  --authorizer-result-ttl-in-seconds 300\n\n# \u30e1\u30bd\u30c3\u30c9\u306b\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u3092\u9069\u7528\naws apigateway update-method \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method GET \\\n  --patch-operations op=replace,path=/authorizationType,value=CUSTOM \\\n                      op=replace,path=/authorizerId,value=authorizer-id\n"})}),"\n",(0,i.jsx)(e.h3,{id:"43-http-api-jwt\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc",children:"4.3 HTTP API JWT\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc"}),"\n",(0,i.jsx)(e.p,{children:"HTTP API\u3067\u306f\u3001JWT\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u3092\u30cd\u30a4\u30c6\u30a3\u30d6\u306b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# HTTP API\u4f5c\u6210\naws apigatewayv2 create-api \\\n  --name my-http-api \\\n  --protocol-type HTTP \\\n  --target arn:aws:lambda:us-east-1:123456789012:function:my-function\n\n# JWT\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u4f5c\u6210\naws apigatewayv2 create-authorizer \\\n  --api-id api-id \\\n  --name jwt-authorizer \\\n  --authorizer-type JWT \\\n  --identity-source '$request.header.Authorization' \\\n  --jwt-configuration Audience=https://example.com,Issuer=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_XXXXXXXXX\n\n# \u30eb\u30fc\u30c8\u306b\u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u3092\u9069\u7528\naws apigatewayv2 update-route \\\n  --api-id api-id \\\n  --route-id route-id \\\n  --authorization-type JWT \\\n  --authorizer-id authorizer-id\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"5-\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0cors",children:"5. \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3001CORS"}),"\n",(0,i.jsx)(e.h3,{id:"51-\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u30ec\u30fc\u30c8\u5236\u9650",children:"5.1 \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff08\u30ec\u30fc\u30c8\u5236\u9650\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          API Gateway \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u3010\u30c7\u30d5\u30a9\u30eb\u30c8\u5236\u9650\u3011                                          \u2502\n\u2502  - \u30ea\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u5236\u9650:                           \u2502\n\u2502    - \u5b9a\u5e38\u30ec\u30fc\u30c8: 10,000 \u30ea\u30af\u30a8\u30b9\u30c8/\u79d2                        \u2502\n\u2502    - \u30d0\u30fc\u30b9\u30c8: 5,000 \u30ea\u30af\u30a8\u30b9\u30c8                              \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u5236\u9650\u306e\u968e\u5c64\u3011                                              \u2502\n\u2502  1. \u30a2\u30ab\u30a6\u30f3\u30c8\u30ec\u30d9\u30eb\uff08\u30ea\u30fc\u30b8\u30e7\u30f3\u3054\u3068\uff09                       \u2502\n\u2502  2. \u30b9\u30c6\u30fc\u30b8\u30ec\u30d9\u30eb                                           \u2502\n\u2502  3. \u30e1\u30bd\u30c3\u30c9\u30ec\u30d9\u30eb                                           \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u4f7f\u7528\u91cf\u30d7\u30e9\u30f3\u3011                                            \u2502\n\u2502  - API\u30ad\u30fc\u3054\u3068\u306e\u30ec\u30fc\u30c8\u5236\u9650                                   \u2502\n\u2502  - \u30af\u30a9\u30fc\u30bf\uff08\u65e5\u6b21/\u9031\u6b21/\u6708\u6b21\uff09                                \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a",children:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u30b9\u30c6\u30fc\u30b8\u30ec\u30d9\u30eb\u306e\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a\naws apigateway update-stage \\\n  --rest-api-id api123456 \\\n  --stage-name prod \\\n  --patch-operations \\\n    op=replace,path=/throttle/rateLimit,value=1000 \\\n    op=replace,path=/throttle/burstLimit,value=2000\n\n# \u30e1\u30bd\u30c3\u30c9\u30ec\u30d9\u30eb\u306e\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u8a2d\u5b9a\naws apigateway update-stage \\\n  --rest-api-id api123456 \\\n  --stage-name prod \\\n  --patch-operations \\\n    op=replace,path=/*/GET/users/throttle/rateLimit,value=500 \\\n    op=replace,path=/*/GET/users/throttle/burstLimit,value=1000\n\n# \u4f7f\u7528\u91cf\u30d7\u30e9\u30f3\u4f5c\u6210\naws apigateway create-usage-plan \\\n  --name basic-plan \\\n  --throttle rateLimit=100,burstLimit=200 \\\n  --quota limit=10000,period=MONTH \\\n  --api-stages apiId=api123456,stage=prod\n\n# API\u30ad\u30fc\u4f5c\u6210\naws apigateway create-api-key \\\n  --name customer-api-key \\\n  --enabled\n\n# API\u30ad\u30fc\u3092\u4f7f\u7528\u91cf\u30d7\u30e9\u30f3\u306b\u95a2\u9023\u4ed8\u3051\naws apigateway create-usage-plan-key \\\n  --usage-plan-id plan-id \\\n  --key-id api-key-id \\\n  --key-type API_KEY\n"})}),"\n",(0,i.jsx)(e.h3,{id:"52-\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0",children:"5.2 \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          API Gateway \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30ea\u30af\u30a8\u30b9\u30c81 \u2192 API Gateway                                   \u2502\n\u2502               \u2193 \u30ad\u30e3\u30c3\u30b7\u30e5\u30df\u30b9                               \u2502\n\u2502               Lambda\u5b9f\u884c (100ms)                             \u2502\n\u2502               \u2193                                             \u2502\n\u2502               \u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u4fdd\u5b58 (TTL: 300\u79d2)                  \u2502\n\u2502               \u2193                                             \u2502\n\u2502               \u30ec\u30b9\u30dd\u30f3\u30b9                                     \u2502\n\u2502                                                              \u2502\n\u2502  \u30ea\u30af\u30a8\u30b9\u30c82 (\u540c\u3058\u30d1\u30e9\u30e1\u30fc\u30bf) \u2192 API Gateway                  \u2502\n\u2502                                 \u2193 \u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8           \u2502\n\u2502                                 \u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u8fd4\u5374 (1ms)     \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u3011                                          \u2502\n\u2502  - \u30d1\u30b9                                                      \u2502\n\u2502  - \u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf                                          \u2502\n\u2502  - \u30d8\u30c3\u30c0\u30fc\uff08\u8a2d\u5b9a\u53ef\u80fd\uff09                                      \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u8a2d\u5b9a",children:"\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u30b9\u30c6\u30fc\u30b8\u3067\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u6709\u52b9\u5316\naws apigateway update-stage \\\n  --rest-api-id api123456 \\\n  --stage-name prod \\\n  --patch-operations \\\n    op=replace,path=/cacheClusterEnabled,value=true \\\n    op=replace,path=/cacheClusterSize,value=0.5\n\n# \u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba:\n# 0.5GB, 1.6GB, 6.1GB, 13.5GB, 28.4GB, 58.2GB, 118GB, 237GB\n\n# TTL\u8a2d\u5b9a\uff08\u79d2\uff09\naws apigateway update-stage \\\n  --rest-api-id api123456 \\\n  --stage-name prod \\\n  --patch-operations \\\n    op=replace,path=/methodSettings/*/GET~1users/cacheTtlInSeconds,value=300\n\n# \u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u306b\u542b\u3081\u308b\naws apigateway update-method \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method GET \\\n  --patch-operations \\\n    op=replace,path=/requestParameters/method.request.querystring.userId,value=true \\\n    op=replace,path=/cacheKeyParameters,value=method.request.querystring.userId\n"})}),"\n",(0,i.jsx)(e.h3,{id:"53-cors\u8a2d\u5b9a",children:"5.3 CORS\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              CORS (Cross-Origin Resource Sharing)            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30d6\u30e9\u30a6\u30b6 (https://example.com)                              \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 OPTIONS /users (\u30d7\u30ea\u30d5\u30e9\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8)              \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  API Gateway (https://api.example.com)                      \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 \u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u30fc:                                  \u2502\n\u2502      \u2502 Access-Control-Allow-Origin: https://example.com    \u2502\n\u2502      \u2502 Access-Control-Allow-Methods: GET,POST,PUT,DELETE   \u2502\n\u2502      \u2502 Access-Control-Allow-Headers: Content-Type,Authorization \u2502\n\u2502      \u2502 Access-Control-Max-Age: 3600                        \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 200 OK                                               \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u30d6\u30e9\u30a6\u30b6\uff08CORS\u8a31\u53ef\u78ba\u8a8d\uff09                                    \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 \u5b9f\u969b\u306e\u30ea\u30af\u30a8\u30b9\u30c8: GET /users                         \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  API Gateway                                                 \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"cors\u8a2d\u5b9arest-api",children:"CORS\u8a2d\u5b9a\uff08REST API\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# OPTIONS\u30e1\u30bd\u30c3\u30c9\u4f5c\u6210\uff08\u30e2\u30c3\u30af\u7d71\u5408\uff09\naws apigateway put-method \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method OPTIONS \\\n  --authorization-type NONE\n\naws apigateway put-integration \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method OPTIONS \\\n  --type MOCK \\\n  --request-templates \'{"application/json": "{\\"statusCode\\": 200}"}\'\n\naws apigateway put-method-response \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method OPTIONS \\\n  --status-code 200 \\\n  --response-parameters \\\n    method.response.header.Access-Control-Allow-Headers=true \\\n    method.response.header.Access-Control-Allow-Methods=true \\\n    method.response.header.Access-Control-Allow-Origin=true\n\naws apigateway put-integration-response \\\n  --rest-api-id api123456 \\\n  --resource-id abc123 \\\n  --http-method OPTIONS \\\n  --status-code 200 \\\n  --response-parameters \\\n    method.response.header.Access-Control-Allow-Headers="\'Content-Type,Authorization\'" \\\n    method.response.header.Access-Control-Allow-Methods="\'GET,POST,PUT,DELETE\'" \\\n    method.response.header.Access-Control-Allow-Origin="\'https://example.com\'"\n'})}),"\n",(0,i.jsx)(e.h4,{id:"cors\u8a2d\u5b9ahttp-api---\u7c21\u5358",children:"CORS\u8a2d\u5b9a\uff08HTTP API - \u7c21\u5358\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# HTTP API\u306fCORS\u304c\u7c21\u5358\u306b\u8a2d\u5b9a\u53ef\u80fd\naws apigatewayv2 update-api \\\n  --api-id api-id \\\n  --cors-configuration \\\n    AllowOrigins=https://example.com,AllowMethods=GET,POST,PUT,DELETE,AllowHeaders=Content-Type,Authorization,MaxAge=3600\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"6-cloudfront\u3068\u306e\u9023\u643a",children:"6. CloudFront\u3068\u306e\u9023\u643a"}),"\n",(0,i.jsx)(e.h3,{id:"61-cloudfront--api-gateway-\u30d1\u30bf\u30fc\u30f3",children:"6.1 CloudFront + API Gateway \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          CloudFront + API Gateway \u69cb\u6210                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30af\u30e9\u30a4\u30a2\u30f3\u30c8                                                \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u2502 https://example.com                                  \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  CloudFront                                           \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502 \u30d3\u30d8\u30a4\u30d3\u30a21: /api/*                             \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 \u2192 API Gateway (\u30aa\u30ea\u30b8\u30f3)                        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 \u30ad\u30e3\u30c3\u30b7\u30e5: \u7121\u52b9 or \u77ed\u6642\u9593                       \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502 \u30d3\u30d8\u30a4\u30d3\u30a22: /static/*                          \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 \u2192 S3 (\u30aa\u30ea\u30b8\u30f3)                                 \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 \u30ad\u30e3\u30c3\u30b7\u30e5: \u9577\u6642\u9593                               \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502 \u30c7\u30d5\u30a9\u30eb\u30c8\u30d3\u30d8\u30a4\u30d3\u30a2: /*                        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502 \u2192 S3 (SPA)                                      \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                              \u2502\n\u2502  \u5229\u70b9:                                                       \u2502\n\u2502  - \u5358\u4e00\u30c9\u30e1\u30a4\u30f3\u3067API + \u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1                    \u2502\n\u2502  - WAF\u7d71\u5408\uff08DDoS\u5bfe\u7b56\u3001\u30ec\u30fc\u30c8\u5236\u9650\uff09                           \u2502\n\u2502  - \u30b0\u30ed\u30fc\u30d0\u30eb\u30a8\u30c3\u30b8\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0                              \u2502\n\u2502  - \u30ab\u30b9\u30bf\u30e0SSL\u8a3c\u660e\u66f8                                         \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(e.h4,{id:"cloudfront\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\u4f8b",children:"CloudFront\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\u4f8b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'// cloudfront-config.json\n{\n  "CallerReference": "2025-12-26-api-cf",\n  "Aliases": {\n    "Quantity": 1,\n    "Items": ["example.com"]\n  },\n  "DefaultRootObject": "index.html",\n  "Origins": {\n    "Quantity": 2,\n    "Items": [\n      {\n        "Id": "api-gateway",\n        "DomainName": "api123456.execute-api.us-east-1.amazonaws.com",\n        "OriginPath": "/prod",\n        "CustomOriginConfig": {\n          "HTTPPort": 80,\n          "HTTPSPort": 443,\n          "OriginProtocolPolicy": "https-only",\n          "OriginSslProtocols": {\n            "Quantity": 1,\n            "Items": ["TLSv1.2"]\n          }\n        }\n      },\n      {\n        "Id": "s3-static",\n        "DomainName": "my-bucket.s3.amazonaws.com",\n        "S3OriginConfig": {\n          "OriginAccessIdentity": "origin-access-identity/cloudfront/ABCDEFG1234567"\n        }\n      }\n    ]\n  },\n  "DefaultCacheBehavior": {\n    "TargetOriginId": "s3-static",\n    "ViewerProtocolPolicy": "redirect-to-https",\n    "AllowedMethods": {\n      "Quantity": 2,\n      "Items": ["GET", "HEAD"]\n    },\n    "ForwardedValues": {\n      "QueryString": false,\n      "Cookies": {"Forward": "none"}\n    },\n    "MinTTL": 0,\n    "DefaultTTL": 86400,\n    "MaxTTL": 31536000\n  },\n  "CacheBehaviors": {\n    "Quantity": 1,\n    "Items": [\n      {\n        "PathPattern": "/api/*",\n        "TargetOriginId": "api-gateway",\n        "ViewerProtocolPolicy": "https-only",\n        "AllowedMethods": {\n          "Quantity": 7,\n          "Items": ["GET", "HEAD", "OPTIONS", "PUT", "POST", "PATCH", "DELETE"]\n        },\n        "ForwardedValues": {\n          "QueryString": true,\n          "Cookies": {"Forward": "all"},\n          "Headers": {\n            "Quantity": 3,\n            "Items": ["Authorization", "Content-Type", "Accept"]\n          }\n        },\n        "MinTTL": 0,\n        "DefaultTTL": 0,\n        "MaxTTL": 0\n      }\n    ]\n  },\n  "ViewerCertificate": {\n    "ACMCertificateArn": "arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012",\n    "SSLSupportMethod": "sni-only",\n    "MinimumProtocolVersion": "TLSv1.2_2021"\n  },\n  "Comment": "API Gateway + S3 distribution",\n  "Enabled": true\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"aws cloudfront create-distribution \\\n  --distribution-config file://cloudfront-config.json\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,i.jsx)(e.h3,{id:"\u5b66\u3093\u3060\u3053\u3068",children:"\u5b66\u3093\u3060\u3053\u3068"}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u7ae0\u3067\u306f\u3001API Gateway\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u6a5f\u80fd\u3092\u5b66\u3073\u307e\u3057\u305f:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"API Gateway\u306e\u57fa\u672c\u6982\u5ff5\u3068\u7d71\u5408\u30bf\u30a4\u30d7\uff08Lambda\u3001HTTP\u3001VPC Link\uff09"}),"\n",(0,i.jsx)(e.li,{children:"VPC\u7d71\u5408\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8API\u306e\u69cb\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3068SSL/TLS\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"\u8a8d\u8a3c\u30fb\u8a8d\u53ef\uff08IAM\u3001Cognito\u3001Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\u3001JWT\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3001\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3001CORS\u8a2d\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"CloudFront\u3068\u306e\u9023\u643a\u30d1\u30bf\u30fc\u30f3"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8",children:"\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. HTTP API vs REST API \u306e\u9078\u629e\n   - \u30b7\u30f3\u30d7\u30eb\u3001\u4f4e\u30b3\u30b9\u30c8 \u2192 HTTP API\n   - \u8c4a\u5bcc\u306a\u6a5f\u80fd \u2192 REST API\n\n2. VPC\u7d71\u5408\n   - \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\n   - NLB\u7d4c\u7531\u306eVPC Link\n\n3. \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\n   - \u30a8\u30c3\u30b8\u6700\u9069\u5316\uff08\u30b0\u30ed\u30fc\u30d0\u30eb\uff09\n   - \u30ea\u30fc\u30b8\u30e7\u30ca\u30eb\uff08VPC\u7d71\u5408\u3001\u72ec\u81eaCloudFront\uff09\n\n4. \u8a8d\u8a3c\u306e\u9078\u629e\n   - AWS\u5185\u90e8 \u2192 IAM\n   - \u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c \u2192 Cognito / JWT\n   - \u30ab\u30b9\u30bf\u30e0\u30ed\u30b8\u30c3\u30af \u2192 Lambda \u30aa\u30fc\u30bd\u30e9\u30a4\u30b6\u30fc\n\n5. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\n   - \u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\uff08\u9069\u5207\u306aTTL\u8a2d\u5b9a\uff09\n   - \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\uff08\u30ec\u30fc\u30c8\u5236\u9650\uff09\n   - CloudFront\u7d71\u5408\uff08\u30b0\u30ed\u30fc\u30d0\u30eb\u914d\u4fe1\uff09\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u25a1 HTTP API\u3092\u512a\u5148\u691c\u8a0e\uff08\u30b3\u30b9\u30c8\u524a\u6e1b\uff09\n\u25a1 VPC\u5185\u30ea\u30bd\u30fc\u30b9\u306fVPC Link\u7d4c\u7531\n\u25a1 \u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u3067\u30d6\u30e9\u30f3\u30c7\u30a3\u30f3\u30b0\n\u25a1 \u9069\u5207\u306a\u8a8d\u8a3c\u65b9\u5f0f\u306e\u9078\u629e\n\u25a1 \u30b9\u30ed\u30c3\u30c8\u30ea\u30f3\u30b0\u3067\u4fdd\u8b77\n\u25a1 CloudWatch Logs\u3067\u76e3\u8996\n\u25a1 X-Ray\u3067\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\n\u25a1 WAF\u7d71\u5408\uff08CloudFront\u7d4c\u7531\uff09\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"/idp-server/docs/content_11_learning/networking/network-troubleshooting",children:"06-network-troubleshooting.md"})," - API Gateway\u306e\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"../../content_06_developer-guide/03-application-plane/",children:"content_06_developer-guide/03-application-plane/"})," - idp-server\u3067\u306eAPI\u8a2d\u8a08"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u53c2\u8003\u30ea\u30f3\u30af",children:"\u53c2\u8003\u30ea\u30f3\u30af"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.aws.amazon.com/apigateway/",children:"AWS API Gateway Documentation"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-rest-api.html",children:"API Gateway REST API"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api.html",children:"API Gateway HTTP API"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-vpc-links.html",children:"VPC Link"})}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},28453:(n,e,a)=>{a.d(e,{R:()=>s,x:()=>o});var t=a(96540);const i={},r=t.createContext(i);function s(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);