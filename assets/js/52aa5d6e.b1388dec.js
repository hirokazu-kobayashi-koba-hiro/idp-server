"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7860],{87684:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>E,contentTitle:()=>d,default:()=>_,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"content_11_learning/postgresql/dba-07-partitioning","title":"PostgreSQL \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u30ac\u30a4\u30c9","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u306e\u30c6\u30fc\u30d6\u30eb\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u8a2d\u8a08\u3068\u904b\u7528\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002","source":"@site/docs/content_11_learning/11-postgresql/dba-07-partitioning.md","sourceDirName":"content_11_learning/11-postgresql","slug":"/content_11_learning/postgresql/dba-07-partitioning","permalink":"/idp-server/docs/content_11_learning/postgresql/dba-07-partitioning","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/11-postgresql/dba-07-partitioning.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"PostgreSQL \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dba-06-maintenance"},"next":{"title":"PostgreSQL \u30d7\u30e9\u30f3\u30ca\u30fc\u6df1\u6398\u308a\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dba-08-planner"}}');var a=r(74848),s=r(28453);const i={},d="PostgreSQL \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u30ac\u30a4\u30c9",E={},l=[{value:"\u76ee\u6b21",id:"\u76ee\u6b21",level:2},{value:"1. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u6982\u8981",id:"1-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u6982\u8981",level:2},{value:"1.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3068\u306f",id:"11-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3068\u306f",level:3},{value:"1.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u30e1\u30ea\u30c3\u30c8",id:"12-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u30e1\u30ea\u30c3\u30c8",level:3},{value:"1.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u306a\u30b1\u30fc\u30b9",id:"13-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u306a\u30b1\u30fc\u30b9",level:3},{value:"2. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f",id:"2-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f",level:2},{value:"2.1 \u65b9\u5f0f\u306e\u6bd4\u8f03",id:"21-\u65b9\u5f0f\u306e\u6bd4\u8f03",level:3},{value:"2.2 \u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",id:"22-\u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",level:3},{value:"3. \u5ba3\u8a00\u7684\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",id:"3-\u5ba3\u8a00\u7684\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",level:2},{value:"3.1 RANGE\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",id:"31-range\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",level:3},{value:"3.2 LIST\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",id:"32-list\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",level:3},{value:"3.3 HASH\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",id:"33-hash\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",level:3},{value:"3.4 \u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",id:"34-\u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",level:3},{value:"3.5 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u306e\u5236\u7d04",id:"35-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u306e\u5236\u7d04",level:3},{value:"4. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406",id:"4-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406",level:2},{value:"4.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0",id:"41-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0",level:3},{value:"4.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30bf\u30c3\u30c1",id:"42-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30bf\u30c3\u30c1",level:3},{value:"4.3 \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30a2\u30bf\u30c3\u30c1",id:"43-\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30a2\u30bf\u30c3\u30c1",level:3},{value:"4.4 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d",id:"44-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d",level:3},{value:"5. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316",id:"5-\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316",level:2},{value:"5.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0",id:"51-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0",level:3},{value:"5.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30b8\u30e7\u30a4\u30f3",id:"52-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30b8\u30e7\u30a4\u30f3",level:3},{value:"5.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30a2\u30b0\u30ea\u30b2\u30fc\u30c8",id:"53-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30a2\u30b0\u30ea\u30b2\u30fc\u30c8",level:3},{value:"5.4 \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",id:"54-\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",level:3},{value:"6. \u904b\u7528\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9",id:"6-\u904b\u7528\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9",level:2},{value:"6.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u30b9\u30af\u30ea\u30d7\u30c8",id:"61-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u30b9\u30af\u30ea\u30d7\u30c8",level:3},{value:"6.2 \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524a\u9664\u30b9\u30af\u30ea\u30d7\u30c8",id:"62-\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524a\u9664\u30b9\u30af\u30ea\u30d7\u30c8",level:3},{value:"6.3 \u5b9a\u671f\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6",id:"63-\u5b9a\u671f\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6",level:3},{value:"6.4 cron\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb",id:"64-cron\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb",level:3},{value:"7. \u5b9f\u8df5\u30d1\u30bf\u30fc\u30f3",id:"7-\u5b9f\u8df5\u30d1\u30bf\u30fc\u30f3",level:2},{value:"7.1 \u6642\u7cfb\u5217\u30c7\u30fc\u30bf (\u30ed\u30b0\u3001\u30a4\u30d9\u30f3\u30c8)",id:"71-\u6642\u7cfb\u5217\u30c7\u30fc\u30bf-\u30ed\u30b0\u30a4\u30d9\u30f3\u30c8",level:3},{value:"7.2 \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8",id:"72-\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8",level:3},{value:"7.3 \u5730\u7406\u30c7\u30fc\u30bf",id:"73-\u5730\u7406\u30c7\u30fc\u30bf",level:3},{value:"7.4 \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5316",id:"74-\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5316",level:3},{value:"7.5 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996\u30af\u30a8\u30ea",id:"75-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996\u30af\u30a8\u30ea",level:3},{value:"\u53c2\u8003\u30ea\u30f3\u30af",id:"\u53c2\u8003\u30ea\u30f3\u30af",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"postgresql-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u30ac\u30a4\u30c9",children:"PostgreSQL \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u30ac\u30a4\u30c9"})}),"\n",(0,a.jsx)(e.p,{children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u306e\u30c6\u30fc\u30d6\u30eb\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u8a2d\u8a08\u3068\u904b\u7528\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002"}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\u76ee\u6b21",children:"\u76ee\u6b21"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#1-%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AE%E6%A6%82%E8%A6%81",children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u6982\u8981"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#2-%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0%E6%96%B9%E5%BC%8F",children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#3-%E5%AE%A3%E8%A8%80%E7%9A%84%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0",children:"\u5ba3\u8a00\u7684\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#4-%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86",children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#5-%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%9C%80%E9%81%A9%E5%8C%96",children:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#6-%E9%81%8B%E7%94%A8%E3%81%A8%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9",children:"\u904b\u7528\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"#7-%E5%AE%9F%E8%B7%B5%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3",children:"\u5b9f\u8df5\u30d1\u30bf\u30fc\u30f3"})}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"1-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u6982\u8981",children:"1. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u6982\u8981"}),"\n",(0,a.jsx)(e.h3,{id:"11-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3068\u306f",children:"1.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3068\u306f"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3068\u306f                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u5927\u304d\u306a\u30c6\u30fc\u30d6\u30eb\u3092\u8907\u6570\u306e\u5c0f\u3055\u306a\u90e8\u5206\uff08\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff09\u306b        \u2502\n\u2502  \u5206\u5272\u3059\u308b\u6280\u8853                                                \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u975e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3011                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                    orders (10\u5104\u884c)                      \u2502 \u2502\n\u2502  \u2502  \u5168\u30c7\u30fc\u30bf\u304c1\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u683c\u7d0d                          \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                          \u2193                                   \u2502\n\u2502  \u3010\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3011                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                    orders (\u89aa\u30c6\u30fc\u30d6\u30eb)                 \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502            \u2502              \u2502              \u2502                   \u2502\n\u2502            \u25bc              \u25bc              \u25bc                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502 orders_2023  \u2502 \u2502 orders_2024  \u2502 \u2502 orders_2025  \u2502 ...    \u2502\n\u2502  \u2502  (3\u5104\u884c)     \u2502 \u2502  (4\u5104\u884c)     \u2502 \u2502  (3\u5104\u884c)     \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2502                                                              \u2502\n\u2502  \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306f1\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u898b\u3048\u308b                \u2502\n\u2502  \u5185\u90e8\u7684\u306b\u306f\u8907\u6570\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u5206\u6563                        \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.h3,{id:"12-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u30e1\u30ea\u30c3\u30c8",children:"1.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u30e1\u30ea\u30c3\u30c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u30e1\u30ea\u30c3\u30c8                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u3010\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\u3011                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0                            \u2502   \u2502\n\u2502  \u2502 - \u30af\u30a8\u30ea\u6761\u4ef6\u306b\u8a72\u5f53\u3057\u306a\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30b9\u30ad\u30c3\u30d7      \u2502   \u2502\n\u2502  \u2502 - \u4f8b: WHERE created_at >= '2024-01-01'               \u2502   \u2502\n\u2502  \u2502   \u2192 2023\u5e74\u4ee5\u524d\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u8aad\u307e\u306a\u3044             \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u52b9\u7387\u5316\u3011                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 - VACUUM/ANALYZE\u304c\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5358\u4f4d\u3067\u5b9f\u884c\u53ef\u80fd        \u2502   \u2502\n\u2502  \u2502 - \u53e4\u3044\u30c7\u30fc\u30bf\u306eDROP\u304c\u9ad8\u901f (DELETE\u4e0d\u8981)                 \u2502   \u2502\n\u2502  \u2502 - \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u518d\u69cb\u7bc9\u304c\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5358\u4f4d              \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u30c7\u30fc\u30bf\u7ba1\u7406\u3011                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 - \u53e4\u3044\u30c7\u30fc\u30bf\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u304c\u5bb9\u6613                        \u2502   \u2502\n\u2502  \u2502 - \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5358\u4f4d\u3067\u30c6\u30fc\u30d6\u30eb\u30b9\u30da\u30fc\u30b9\u3092\u5206\u96e2\u53ef\u80fd      \u2502   \u2502\n\u2502  \u2502 - \u30c7\u30fc\u30bf\u4fdd\u6301\u30dd\u30ea\u30b7\u30fc\u306e\u5b9f\u88c5\u304c\u5bb9\u6613                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.h3,{id:"13-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u306a\u30b1\u30fc\u30b9",children:"1.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u306a\u30b1\u30fc\u30b9"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u304c\u6709\u52b9\u306a\u30b1\u30fc\u30b9                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u3010\u63a8\u5968\u3011                                                    \u2502\n\u2502  \u2705 \u30c6\u30fc\u30d6\u30eb\u30b5\u30a4\u30ba\u304c\u6570\u5341GB\u4ee5\u4e0a                              \u2502\n\u2502  \u2705 \u6642\u7cfb\u5217\u30c7\u30fc\u30bf (\u30ed\u30b0\u3001\u30a4\u30d9\u30f3\u30c8\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3)          \u2502\n\u2502  \u2705 \u5b9a\u671f\u7684\u306b\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u524a\u9664/\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b                  \u2502\n\u2502  \u2705 \u7279\u5b9a\u306e\u6761\u4ef6\u3067\u306e\u30af\u30a8\u30ea\u304c\u5927\u90e8\u5206                            \u2502\n\u2502  \u2705 \u30c6\u30ca\u30f3\u30c8\u5225\u306e\u30c7\u30fc\u30bf\u5206\u96e2                                   \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u975e\u63a8\u5968\u3011                                                  \u2502\n\u2502  \u274c \u30c6\u30fc\u30d6\u30eb\u30b5\u30a4\u30ba\u304c\u5c0f\u3055\u3044 (\u6570GB\u4ee5\u4e0b)                       \u2502\n\u2502  \u274c \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u3067\u306e\u30d5\u30a3\u30eb\u30bf\u304c\u307b\u3068\u3093\u3069\u306a\u3044             \u2502\n\u2502  \u274c \u5168\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u5e38\u306b\u30b9\u30ad\u30e3\u30f3\u3059\u308b\u30af\u30a8\u30ea\u304c\u591a\u3044           \u2502\n\u2502  \u274c \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u8907\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u307e\u305f\u304c\u308b           \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u76ee\u5b89\u3011                                                    \u2502\n\u2502  - \u6570\u5343\u4e07\u884c\u4ee5\u4e0a\u3067\u691c\u8a0e\u958b\u59cb                                    \u2502\n\u2502  - 1\u5104\u884c\u4ee5\u4e0a\u3067\u5f37\u304f\u63a8\u5968                                       \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"2-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f",children:"2. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f"}),"\n",(0,a.jsx)(e.h3,{id:"21-\u65b9\u5f0f\u306e\u6bd4\u8f03",children:"2.1 \u65b9\u5f0f\u306e\u6bd4\u8f03"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u65b9\u5f0f                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u3010RANGE \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3011                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u5024\u306e\u7bc4\u56f2\u3067\u5206\u5272                                        \u2502   \u2502\n\u2502  \u2502 \u7528\u9014: \u65e5\u4ed8\u3001ID\u7bc4\u56f2\u306a\u3069                                \u2502   \u2502\n\u2502  \u2502                                                       \u2502   \u2502\n\u2502  \u2502 orders_2023: created_at >= '2023-01-01' AND < '2024-01-01'\u2502\n\u2502  \u2502 orders_2024: created_at >= '2024-01-01' AND < '2025-01-01'\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2502  \u3010LIST \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3011                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u7279\u5b9a\u306e\u5024\u306e\u30ea\u30b9\u30c8\u3067\u5206\u5272                                \u2502   \u2502\n\u2502  \u2502 \u7528\u9014: \u30ab\u30c6\u30b4\u30ea\u3001\u30ea\u30fc\u30b8\u30e7\u30f3\u3001\u30c6\u30ca\u30f3\u30c8\u306a\u3069              \u2502   \u2502\n\u2502  \u2502                                                       \u2502   \u2502\n\u2502  \u2502 orders_jp: country = 'JP'                            \u2502   \u2502\n\u2502  \u2502 orders_us: country = 'US'                            \u2502   \u2502\n\u2502  \u2502 orders_eu: country IN ('DE', 'FR', 'GB')             \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2502  \u3010HASH \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3011                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 \u30cf\u30c3\u30b7\u30e5\u5024\u3067\u5747\u7b49\u306b\u5206\u5272                                \u2502   \u2502\n\u2502  \u2502 \u7528\u9014: \u5747\u7b49\u5206\u6563\u304c\u5fc5\u8981\u306a\u5834\u5408                            \u2502   \u2502\n\u2502  \u2502                                                       \u2502   \u2502\n\u2502  \u2502 orders_0: hash(user_id) % 4 = 0                      \u2502   \u2502\n\u2502  \u2502 orders_1: hash(user_id) % 4 = 1                      \u2502   \u2502\n\u2502  \u2502 orders_2: hash(user_id) % 4 = 2                      \u2502   \u2502\n\u2502  \u2502 orders_3: hash(user_id) % 4 = 3                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.h3,{id:"22-\u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",children:"2.2 \u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u8907\u6570\u306e\u30ad\u30fc\u3067\u968e\u5c64\u7684\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0                      \u2502\n\u2502                                                              \u2502\n\u2502                      orders                                  \u2502\n\u2502                         \u2502                                    \u2502\n\u2502         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502\n\u2502         \u2502               \u2502               \u2502                    \u2502\n\u2502         \u25bc               \u25bc               \u25bc                    \u2502\n\u2502  orders_2024_q1   orders_2024_q2   orders_2024_q3           \u2502\n\u2502  (RANGE by date)                                             \u2502\n\u2502         \u2502                                                    \u2502\n\u2502    \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510                                              \u2502\n\u2502    \u25bc         \u25bc                                               \u2502\n\u2502 orders_    orders_                                           \u2502\n\u2502 2024_q1_jp 2024_q1_us                                        \u2502\n\u2502 (LIST by country)                                            \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"3-\u5ba3\u8a00\u7684\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0",children:"3. \u5ba3\u8a00\u7684\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0"}),"\n",(0,a.jsx)(e.h3,{id:"31-range\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",children:"3.1 RANGE\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\nCREATE TABLE orders (\n    id BIGSERIAL,\n    user_id BIGINT NOT NULL,\n    order_date DATE NOT NULL,\n    total_amount NUMERIC(10, 2),\n    status VARCHAR(20),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) PARTITION BY RANGE (order_date);\n\n-- \u6708\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\nCREATE TABLE orders_2024_01 PARTITION OF orders\n    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n\nCREATE TABLE orders_2024_02 PARTITION OF orders\n    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');\n\nCREATE TABLE orders_2024_03 PARTITION OF orders\n    FOR VALUES FROM ('2024-03-01') TO ('2024-04-01');\n\n-- \u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (\u7bc4\u56f2\u5916\u306e\u30c7\u30fc\u30bf\u7528)\nCREATE TABLE orders_default PARTITION OF orders DEFAULT;\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4f5c\u6210 (\u89aa\u30c6\u30fc\u30d6\u30eb\u306b\u4f5c\u6210\u3059\u308b\u3068\u5168\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u9069\u7528)\nCREATE INDEX idx_orders_user_id ON orders (user_id);\nCREATE INDEX idx_orders_created_at ON orders (created_at);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"32-list\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",children:"3.2 LIST\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\nCREATE TABLE customers (\n    id BIGSERIAL,\n    name VARCHAR(100) NOT NULL,\n    region VARCHAR(20) NOT NULL,\n    email VARCHAR(255),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) PARTITION BY LIST (region);\n\n-- \u30ea\u30fc\u30b8\u30e7\u30f3\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\nCREATE TABLE customers_asia PARTITION OF customers\n    FOR VALUES IN ('JP', 'KR', 'CN', 'TW', 'SG');\n\nCREATE TABLE customers_americas PARTITION OF customers\n    FOR VALUES IN ('US', 'CA', 'BR', 'MX');\n\nCREATE TABLE customers_europe PARTITION OF customers\n    FOR VALUES IN ('GB', 'DE', 'FR', 'IT', 'ES');\n\nCREATE TABLE customers_default PARTITION OF customers DEFAULT;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"33-hash\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",children:"3.3 HASH\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u89aa\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\nCREATE TABLE user_activities (\n    id BIGSERIAL,\n    user_id BIGINT NOT NULL,\n    activity_type VARCHAR(50),\n    activity_data JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) PARTITION BY HASH (user_id);\n\n-- 4\u3064\u306e\u30cf\u30c3\u30b7\u30e5\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\nCREATE TABLE user_activities_0 PARTITION OF user_activities\n    FOR VALUES WITH (MODULUS 4, REMAINDER 0);\n\nCREATE TABLE user_activities_1 PARTITION OF user_activities\n    FOR VALUES WITH (MODULUS 4, REMAINDER 1);\n\nCREATE TABLE user_activities_2 PARTITION OF user_activities\n    FOR VALUES WITH (MODULUS 4, REMAINDER 2);\n\nCREATE TABLE user_activities_3 PARTITION OF user_activities\n    FOR VALUES WITH (MODULUS 4, REMAINDER 3);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"34-\u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210",children:"3.4 \u8907\u5408\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u89aa\u30c6\u30fc\u30d6\u30eb (\u5e74\u6708\u3067RANGE)\nCREATE TABLE events (\n    id BIGSERIAL,\n    event_type VARCHAR(50) NOT NULL,\n    event_date DATE NOT NULL,\n    data JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) PARTITION BY RANGE (event_date);\n\n-- \u6708\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (\u3055\u3089\u306b\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u3067LIST)\nCREATE TABLE events_2024_01 PARTITION OF events\n    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01')\n    PARTITION BY LIST (event_type);\n\n-- \u30b5\u30d6\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\nCREATE TABLE events_2024_01_click PARTITION OF events_2024_01\n    FOR VALUES IN ('click', 'impression');\n\nCREATE TABLE events_2024_01_conversion PARTITION OF events_2024_01\n    FOR VALUES IN ('purchase', 'signup');\n\nCREATE TABLE events_2024_01_default PARTITION OF events_2024_01 DEFAULT;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"35-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u306e\u5236\u7d04",children:"3.5 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u306e\u5236\u7d04"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u306e\u5236\u7d04                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u3010\u4e3b\u30ad\u30fc\u30fb\u30e6\u30cb\u30fc\u30af\u5236\u7d04\u3011                                    \u2502\n\u2502  \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u542b\u3080\u5fc5\u8981\u304c\u3042\u308b                          \u2502\n\u2502                                                              \u2502\n\u2502  \u274c \u4e0d\u53ef                                                     \u2502\n\u2502  CREATE TABLE orders (...) PARTITION BY RANGE (order_date); \u2502\n\u2502  ALTER TABLE orders ADD PRIMARY KEY (id);                   \u2502\n\u2502                                                              \u2502\n\u2502  \u2705 \u53ef\u80fd                                                     \u2502\n\u2502  ALTER TABLE orders ADD PRIMARY KEY (id, order_date);       \u2502\n\u2502                                                              \u2502\n\u2502  \u3010\u5916\u90e8\u30ad\u30fc\u3011                                                \u2502\n\u2502  - \u89aa\u30c6\u30fc\u30d6\u30eb\u3078\u306e\u5916\u90e8\u30ad\u30fc\u306f\u53ef\u80fd                              \u2502\n\u2502  - \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3059\u308b\u5916\u90e8\u30ad\u30fc\u306f\u4e0d\u53ef            \u2502\n\u2502    (PostgreSQL 11\u4ee5\u964d\u3067\u5236\u9650\u7de9\u548c)                            \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"4-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406",children:"4. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406"}),"\n",(0,a.jsx)(e.h3,{id:"41-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0",children:"4.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\nCREATE TABLE orders_2024_04 PARTITION OF orders\n    FOR VALUES FROM ('2024-04-01') TO ('2024-05-01');\n\n-- \u30c6\u30fc\u30d6\u30eb\u30b9\u30da\u30fc\u30b9\u3092\u6307\u5b9a\u3057\u3066\u8ffd\u52a0\nCREATE TABLE orders_2024_05 PARTITION OF orders\n    FOR VALUES FROM ('2024-05-01') TO ('2024-06-01')\n    TABLESPACE fast_storage;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"42-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30bf\u30c3\u30c1",children:"4.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30bf\u30c3\u30c1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30c7\u30bf\u30c3\u30c1 (\u30c7\u30fc\u30bf\u306f\u4fdd\u6301)\nALTER TABLE orders DETACH PARTITION orders_2023_01;\n\n-- \u30c7\u30bf\u30c3\u30c1\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306f\u901a\u5e38\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u3057\u3066\u64cd\u4f5c\u53ef\u80fd\nSELECT count(*) FROM orders_2023_01;\n\n-- \u30a2\u30fc\u30ab\u30a4\u30d6\u7528\u30c6\u30fc\u30d6\u30eb\u30b9\u30da\u30fc\u30b9\u306b\u79fb\u52d5\nALTER TABLE orders_2023_01 SET TABLESPACE archive_storage;\n\n-- \u307e\u305f\u306f\u524a\u9664\nDROP TABLE orders_2023_01;\n\n-- CONCURRENTLY \u30aa\u30d7\u30b7\u30e7\u30f3 (PostgreSQL 14+)\n-- \u9577\u6642\u9593\u30ed\u30c3\u30af\u3092\u56de\u907f\nALTER TABLE orders DETACH PARTITION orders_2023_01 CONCURRENTLY;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"43-\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30a2\u30bf\u30c3\u30c1",children:"4.3 \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30a2\u30bf\u30c3\u30c1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u3092\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3068\u3057\u3066\u30a2\u30bf\u30c3\u30c1\n-- \u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u304c\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308b\n\n-- 1. \u5236\u7d04\u3092\u8ffd\u52a0 (\u30a2\u30bf\u30c3\u30c1\u6642\u306e\u691c\u8a3c\u3092\u9ad8\u901f\u5316)\nALTER TABLE orders_2024_06\n    ADD CONSTRAINT orders_2024_06_check\n    CHECK (order_date >= '2024-06-01' AND order_date < '2024-07-01');\n\n-- 2. \u30a2\u30bf\u30c3\u30c1\nALTER TABLE orders ATTACH PARTITION orders_2024_06\n    FOR VALUES FROM ('2024-06-01') TO ('2024-07-01');\n"})}),"\n",(0,a.jsx)(e.h3,{id:"44-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d",children:"4.4 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u78ba\u8a8d"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\nSELECT\n    parent.relname AS parent_table,\n    child.relname AS partition_name,\n    pg_get_expr(child.relpartbound, child.oid) AS partition_bound\nFROM pg_inherits\nJOIN pg_class parent ON pg_inherits.inhparent = parent.oid\nJOIN pg_class child ON pg_inherits.inhrelid = child.oid\nWHERE parent.relname = 'orders'\nORDER BY child.relname;\n\n-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30b5\u30a4\u30ba\nSELECT\n    child.relname AS partition_name,\n    pg_size_pretty(pg_relation_size(child.oid)) AS size,\n    pg_stat_user_tables.n_live_tup AS row_count\nFROM pg_inherits\nJOIN pg_class parent ON pg_inherits.inhparent = parent.oid\nJOIN pg_class child ON pg_inherits.inhrelid = child.oid\nLEFT JOIN pg_stat_user_tables ON child.relname = pg_stat_user_tables.relname\nWHERE parent.relname = 'orders'\nORDER BY child.relname;\n\n-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u60c5\u5831 (\u8a73\u7d30)\nSELECT * FROM pg_partitioned_table WHERE partrelid = 'orders'::regclass;\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"5-\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316",children:"5. \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316"}),"\n",(0,a.jsx)(e.h3,{id:"51-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0",children:"5.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u306e\u78ba\u8a8d\nSET enable_partition_pruning = on;  -- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067on\n\n-- \u5b9f\u884c\u8a08\u753b\u3067\u78ba\u8a8d\nEXPLAIN (ANALYZE, COSTS OFF)\nSELECT * FROM orders WHERE order_date = '2024-03-15';\n\n-- \u7d50\u679c\u4f8b:\n-- Append\n--   ->  Seq Scan on orders_2024_03 orders_1\n--         Filter: (order_date = '2024-03-15'::date)\n--\n-- orders_2024_03 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u307f\u30b9\u30ad\u30e3\u30f3\n\n-- \u8907\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u307e\u305f\u304c\u308b\u5834\u5408\nEXPLAIN (ANALYZE, COSTS OFF)\nSELECT * FROM orders\nWHERE order_date BETWEEN '2024-02-15' AND '2024-03-15';\n\n-- \u7d50\u679c\u4f8b:\n-- Append\n--   ->  Seq Scan on orders_2024_02 orders_1\n--   ->  Seq Scan on orders_2024_03 orders_2\n"})}),"\n",(0,a.jsx)(e.h3,{id:"52-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30b8\u30e7\u30a4\u30f3",children:"5.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30b8\u30e7\u30a4\u30f3"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30b8\u30e7\u30a4\u30f3\u306e\u6709\u52b9\u5316\nSET enable_partitionwise_join = on;  -- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067off\n\n-- \u540c\u3058\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u6301\u3064\u30c6\u30fc\u30d6\u30eb\u540c\u58eb\u306e\u7d50\u5408\u304c\u52b9\u7387\u5316\nEXPLAIN (ANALYZE, COSTS OFF)\nSELECT o.*, oi.*\nFROM orders o\nJOIN order_items oi ON o.id = oi.order_id AND o.order_date = oi.order_date\nWHERE o.order_date = '2024-03-15';\n"})}),"\n",(0,a.jsx)(e.h3,{id:"53-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30a2\u30b0\u30ea\u30b2\u30fc\u30c8",children:"5.3 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30a2\u30b0\u30ea\u30b2\u30fc\u30c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ef\u30a4\u30ba\u30a2\u30b0\u30ea\u30b2\u30fc\u30c8\u306e\u6709\u52b9\u5316\nSET enable_partitionwise_aggregate = on;  -- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067off\n\n-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5358\u4f4d\u3067\u96c6\u8a08\u3057\u3066\u304b\u3089\u30de\u30fc\u30b8\nEXPLAIN (ANALYZE, COSTS OFF)\nSELECT order_date, count(*), sum(total_amount)\nFROM orders\nWHERE order_date >= '2024-01-01'\nGROUP BY order_date;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"54-\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",children:"5.4 \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30b0\u30ed\u30fc\u30d0\u30eb\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 (\u89aa\u30c6\u30fc\u30d6\u30eb\u306b\u4f5c\u6210)\n-- \u5168\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u308b\nCREATE INDEX idx_orders_user_id ON orders (user_id);\n\n-- \u30ed\u30fc\u30ab\u30eb\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 (\u7279\u5b9a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u306e\u307f)\nCREATE INDEX idx_orders_2024_03_status ON orders_2024_03 (status);\n\n-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\u3092\u542b\u3080\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n-- \u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u304c\u3088\u308a\u52b9\u679c\u7684\u306b\nCREATE INDEX idx_orders_date_user ON orders (order_date, user_id);\n\n-- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u78ba\u8a8d\nSELECT\n    schemaname,\n    tablename,\n    indexname,\n    pg_size_pretty(pg_relation_size(indexname::regclass)) AS size\nFROM pg_indexes\nWHERE tablename LIKE 'orders%';\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"6-\u904b\u7528\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9",children:"6. \u904b\u7528\u3068\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9"}),"\n",(0,a.jsx)(e.h3,{id:"61-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u30b9\u30af\u30ea\u30d7\u30c8",children:"6.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u30b9\u30af\u30ea\u30d7\u30c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u6708\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u95a2\u6570\nCREATE OR REPLACE FUNCTION create_monthly_partition(\n    parent_table TEXT,\n    target_date DATE\n) RETURNS VOID AS $$\nDECLARE\n    partition_name TEXT;\n    start_date DATE;\n    end_date DATE;\nBEGIN\n    start_date := date_trunc('month', target_date);\n    end_date := start_date + interval '1 month';\n    partition_name := parent_table || '_' || to_char(start_date, 'YYYY_MM');\n\n    -- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306e\u307f\u4f5c\u6210\n    IF NOT EXISTS (\n        SELECT 1 FROM pg_class WHERE relname = partition_name\n    ) THEN\n        EXECUTE format(\n            'CREATE TABLE %I PARTITION OF %I FOR VALUES FROM (%L) TO (%L)',\n            partition_name, parent_table, start_date, end_date\n        );\n        RAISE NOTICE 'Created partition: %', partition_name;\n    END IF;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- \u4f7f\u7528\u4f8b: \u4eca\u6708\u3068\u6765\u6708\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\nSELECT create_monthly_partition('orders', CURRENT_DATE);\nSELECT create_monthly_partition('orders', CURRENT_DATE + interval '1 month');\n"})}),"\n",(0,a.jsx)(e.h3,{id:"62-\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524a\u9664\u30b9\u30af\u30ea\u30d7\u30c8",children:"6.2 \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524a\u9664\u30b9\u30af\u30ea\u30d7\u30c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u524a\u9664\u95a2\u6570\nCREATE OR REPLACE FUNCTION drop_old_partitions(\n    parent_table TEXT,\n    retention_months INT\n) RETURNS VOID AS $$\nDECLARE\n    partition_record RECORD;\n    cutoff_date DATE;\nBEGIN\n    cutoff_date := date_trunc('month', CURRENT_DATE - (retention_months || ' months')::interval);\n\n    FOR partition_record IN\n        SELECT child.relname AS partition_name\n        FROM pg_inherits\n        JOIN pg_class parent ON pg_inherits.inhparent = parent.oid\n        JOIN pg_class child ON pg_inherits.inhrelid = child.oid\n        WHERE parent.relname = parent_table\n          AND child.relname ~ '_\\d{4}_\\d{2}$'\n          AND to_date(substring(child.relname from '_(\\d{4}_\\d{2})$'), 'YYYY_MM') < cutoff_date\n    LOOP\n        EXECUTE format('ALTER TABLE %I DETACH PARTITION %I', parent_table, partition_record.partition_name);\n        EXECUTE format('DROP TABLE %I', partition_record.partition_name);\n        RAISE NOTICE 'Dropped partition: %', partition_record.partition_name;\n    END LOOP;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- \u4f7f\u7528\u4f8b: 12\u30f6\u6708\u3088\u308a\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u524a\u9664\nSELECT drop_old_partitions('orders', 12);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"63-\u5b9a\u671f\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6",children:"6.3 \u5b9a\u671f\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"#!/bin/bash\n# partition_maintenance.sh\n\nPGHOST=\"${PGHOST:-localhost}\"\nPGUSER=\"${PGUSER:-postgres}\"\nPGDATABASE=\"${PGDATABASE:-mydb}\"\nLOG_FILE=\"/var/log/pg_partition/maintenance_$(date +%Y%m%d).log\"\n\nexec > >(tee -a $LOG_FILE) 2>&1\n\necho \"=== Partition Maintenance Started: $(date) ===\"\n\n# \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210 (2\u30f6\u6708\u5148\u307e\u3067)\npsql -h $PGHOST -U $PGUSER -d $PGDATABASE << 'EOF'\nSELECT create_monthly_partition('orders', CURRENT_DATE);\nSELECT create_monthly_partition('orders', CURRENT_DATE + interval '1 month');\nSELECT create_monthly_partition('orders', CURRENT_DATE + interval '2 months');\nEOF\n\n# \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u524a\u9664 (12\u30f6\u6708\u3088\u308a\u53e4\u3044)\npsql -h $PGHOST -U $PGUSER -d $PGDATABASE << 'EOF'\nSELECT drop_old_partitions('orders', 12);\nEOF\n\n# \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7d71\u8a08\u60c5\u5831\u306e\u66f4\u65b0\npsql -h $PGHOST -U $PGUSER -d $PGDATABASE -c \"ANALYZE orders;\"\n\n# \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\u306e\u78ba\u8a8d\npsql -h $PGHOST -U $PGUSER -d $PGDATABASE << 'EOF'\nSELECT\n    child.relname AS partition_name,\n    pg_size_pretty(pg_relation_size(child.oid)) AS size\nFROM pg_inherits\nJOIN pg_class parent ON pg_inherits.inhparent = parent.oid\nJOIN pg_class child ON pg_inherits.inhrelid = child.oid\nWHERE parent.relname = 'orders'\nORDER BY child.relname;\nEOF\n\necho \"=== Partition Maintenance Completed: $(date) ===\"\n"})}),"\n",(0,a.jsx)(e.h3,{id:"64-cron\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb",children:"6.4 cron\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# /etc/cron.d/pg_partition\n\n# \u6bce\u65e5\u5348\u524d2\u6642\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\n0 2 * * * postgres /opt/scripts/partition_maintenance.sh\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"7-\u5b9f\u8df5\u30d1\u30bf\u30fc\u30f3",children:"7. \u5b9f\u8df5\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,a.jsx)(e.h3,{id:"71-\u6642\u7cfb\u5217\u30c7\u30fc\u30bf-\u30ed\u30b0\u30a4\u30d9\u30f3\u30c8",children:"7.1 \u6642\u7cfb\u5217\u30c7\u30fc\u30bf (\u30ed\u30b0\u3001\u30a4\u30d9\u30f3\u30c8)"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u65e5\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (\u5927\u91cf\u30ed\u30b0\u5411\u3051)\nCREATE TABLE access_logs (\n    id BIGSERIAL,\n    user_id BIGINT,\n    path VARCHAR(500),\n    method VARCHAR(10),\n    status_code INT,\n    response_time_ms INT,\n    created_at TIMESTAMP NOT NULL\n) PARTITION BY RANGE (created_at);\n\n-- \u65e5\u6b21\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u81ea\u52d5\u4f5c\u6210\u95a2\u6570\nCREATE OR REPLACE FUNCTION create_daily_partition(\n    parent_table TEXT,\n    target_date DATE\n) RETURNS VOID AS $$\nDECLARE\n    partition_name TEXT;\nBEGIN\n    partition_name := parent_table || '_' || to_char(target_date, 'YYYYMMDD');\n\n    IF NOT EXISTS (SELECT 1 FROM pg_class WHERE relname = partition_name) THEN\n        EXECUTE format(\n            'CREATE TABLE %I PARTITION OF %I FOR VALUES FROM (%L) TO (%L)',\n            partition_name, parent_table,\n            target_date, target_date + interval '1 day'\n        );\n    END IF;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- INSERT\u30c8\u30ea\u30ac\u30fc\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u81ea\u52d5\u4f5c\u6210\nCREATE OR REPLACE FUNCTION ensure_partition_exists()\nRETURNS TRIGGER AS $$\nBEGIN\n    PERFORM create_daily_partition('access_logs', NEW.created_at::date);\n    RETURN NEW;\nEXCEPTION WHEN duplicate_table THEN\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- \u6ce8\u610f: \u30c8\u30ea\u30ac\u30fc\u306f\u6027\u80fd\u306b\u5f71\u97ff\u3059\u308b\u305f\u3081\u3001\n-- \u4e8b\u524d\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u65b9\u304c\u63a8\u5968\n"})}),"\n",(0,a.jsx)(e.h3,{id:"72-\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8",children:"7.2 \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30c6\u30ca\u30f3\u30c8ID\u3067LIST\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\nCREATE TABLE tenant_data (\n    id BIGSERIAL,\n    tenant_id VARCHAR(50) NOT NULL,\n    data JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n) PARTITION BY LIST (tenant_id);\n\n-- \u30c6\u30ca\u30f3\u30c8\u3054\u3068\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\nCREATE TABLE tenant_data_acme PARTITION OF tenant_data\n    FOR VALUES IN ('acme');\n\nCREATE TABLE tenant_data_globex PARTITION OF tenant_data\n    FOR VALUES IN ('globex');\n\n-- \u65b0\u898f\u30c6\u30ca\u30f3\u30c8\u8ffd\u52a0\u6642\nCREATE TABLE tenant_data_newcorp PARTITION OF tenant_data\n    FOR VALUES IN ('newcorp');\n\n-- \u30c6\u30ca\u30f3\u30c8\u524a\u9664\u6642 (\u30c7\u30fc\u30bf\u3082\u4e00\u7dd2\u306b\u524a\u9664)\nALTER TABLE tenant_data DETACH PARTITION tenant_data_oldcorp;\nDROP TABLE tenant_data_oldcorp;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"73-\u5730\u7406\u30c7\u30fc\u30bf",children:"7.3 \u5730\u7406\u30c7\u30fc\u30bf"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30ea\u30fc\u30b8\u30e7\u30f3\u3067LIST\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 + \u65e5\u4ed8\u3067RANGE\nCREATE TABLE geo_events (\n    id BIGSERIAL,\n    region VARCHAR(20) NOT NULL,\n    event_date DATE NOT NULL,\n    location POINT,\n    data JSONB\n) PARTITION BY LIST (region);\n\n-- \u30ea\u30fc\u30b8\u30e7\u30f3\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\nCREATE TABLE geo_events_apac PARTITION OF geo_events\n    FOR VALUES IN ('JP', 'KR', 'CN', 'AU', 'SG')\n    PARTITION BY RANGE (event_date);\n\nCREATE TABLE geo_events_emea PARTITION OF geo_events\n    FOR VALUES IN ('GB', 'DE', 'FR', 'AE')\n    PARTITION BY RANGE (event_date);\n\n-- \u30b5\u30d6\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 (\u6708\u6b21)\nCREATE TABLE geo_events_apac_2024_01 PARTITION OF geo_events_apac\n    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n"})}),"\n",(0,a.jsx)(e.h3,{id:"74-\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5316",children:"7.4 \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5316"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u3092\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306b\u5909\u63db\n\n-- 1. \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\nCREATE TABLE orders_new (\n    LIKE orders INCLUDING ALL\n) PARTITION BY RANGE (order_date);\n\n-- 2. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\nCREATE TABLE orders_new_2024_01 PARTITION OF orders_new\n    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n-- ... \u4ed6\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3082\u4f5c\u6210\n\n-- 3. \u30c7\u30fc\u30bf\u3092\u79fb\u884c (\u30d0\u30c3\u30c1\u3067)\nINSERT INTO orders_new SELECT * FROM orders WHERE order_date >= '2024-01-01' AND order_date < '2024-02-01';\n\n-- 4. \u30c6\u30fc\u30d6\u30eb\u3092\u5165\u308c\u66ff\u3048 (\u77ed\u6642\u9593\u30ed\u30c3\u30af)\nBEGIN;\nALTER TABLE orders RENAME TO orders_old;\nALTER TABLE orders_new RENAME TO orders;\nCOMMIT;\n\n-- 5. \u65e7\u30c6\u30fc\u30d6\u30eb\u3092\u524a\u9664\nDROP TABLE orders_old;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"75-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996\u30af\u30a8\u30ea",children:"7.5 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996\u30af\u30a8\u30ea"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5225\u30b5\u30a4\u30ba\u3068\u30ec\u30b3\u30fc\u30c9\u6570\nSELECT\n    parent.relname AS parent_table,\n    child.relname AS partition_name,\n    pg_size_pretty(pg_relation_size(child.oid)) AS size,\n    pg_stat_user_tables.n_live_tup AS rows,\n    pg_stat_user_tables.n_dead_tup AS dead_rows,\n    pg_stat_user_tables.last_vacuum,\n    pg_stat_user_tables.last_analyze\nFROM pg_inherits\nJOIN pg_class parent ON pg_inherits.inhparent = parent.oid\nJOIN pg_class child ON pg_inherits.inhrelid = child.oid\nLEFT JOIN pg_stat_user_tables ON child.relname = pg_stat_user_tables.relname\nWHERE parent.relname = 'orders'\nORDER BY child.relname;\n\n-- \u504f\u308a\u306e\u691c\u51fa\nWITH partition_stats AS (\n    SELECT\n        child.relname AS partition_name,\n        pg_relation_size(child.oid) AS size_bytes\n    FROM pg_inherits\n    JOIN pg_class parent ON pg_inherits.inhparent = parent.oid\n    JOIN pg_class child ON pg_inherits.inhrelid = child.oid\n    WHERE parent.relname = 'orders'\n)\nSELECT\n    partition_name,\n    pg_size_pretty(size_bytes) AS size,\n    ROUND(100.0 * size_bytes / SUM(size_bytes) OVER (), 2) AS size_percent\nFROM partition_stats\nORDER BY size_bytes DESC;\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\u53c2\u8003\u30ea\u30f3\u30af",children:"\u53c2\u8003\u30ea\u30f3\u30af"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/ddl-partitioning.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30c6\u30fc\u30d6\u30eb\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/sql-altertable.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://github.com/pgpartman/pg_partman",children:"pg_partman - \u81ea\u52d5\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406\u62e1\u5f35"})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"https://wiki.postgresql.org/wiki/Table_partitioning",children:"PostgreSQL Wiki - Table partitioning"})}),"\n"]})]})}function _(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(o,{...n})}):o(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>d});var t=r(96540);const a={},s=t.createContext(a);function i(n){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);