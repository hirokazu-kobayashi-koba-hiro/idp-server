"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3324],{90709:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"content_10_ai_developer/ai-50-notification-security-event","title":"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64 - \u901a\u77e5\u914d\u4fe1\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8","description":"\u6982\u8981","source":"@site/docs/content_10_ai_developer/ai-50-notification-security-event.md","sourceDirName":"content_10_ai_developer","slug":"/content_10_ai_developer/ai-50-notification-security-event","permalink":"/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-50-notification-security-event.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"idp-server-federation-oidc","permalink":"/idp-server/docs/content_10_ai_developer/ai-43-federation-oidc"},"next":{"title":"idp-server-notification-fcm-adapter","permalink":"/idp-server/docs/content_10_ai_developer/ai-51-notification-fcm"}}');var s=t(74848),r=t(28453);const o={},l="\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64 - \u901a\u77e5\u914d\u4fe1\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8",c={},a=[{value:"\u6982\u8981",id:"\u6982\u8981",level:2},{value:"\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb",id:"\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb",level:2},{value:"idp-server-notification-fcm-adapter",id:"idp-server-notification-fcm-adapter",level:3},{value:"\u8cac\u52d9",id:"\u8cac\u52d9",level:4},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd",level:4},{value:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",level:4},{value:"idp-server-notification-apns-adapter",id:"idp-server-notification-apns-adapter",level:3},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-1",level:4},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd-1",level:4},{value:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-1",level:4},{value:"idp-server-email-aws-adapter",id:"idp-server-email-aws-adapter",level:3},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-2",level:4},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd-2",level:4},{value:"EmailSender \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30fb\u5b9f\u88c5",id:"emailsender-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5",level:4},{value:"Plugin\u767b\u9332",id:"plugin\u767b\u9332",level:4},{value:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb",id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb",level:2},{value:"idp-server-security-event-framework",id:"idp-server-security-event-framework",level:3},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-3",level:4},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd-3",level:4},{value:"SSF Event Types",id:"ssf-event-types",level:4},{value:"SSF Hook Executor - Push Delivery\u5b9f\u88c5",id:"ssf-hook-executor---push-delivery\u5b9f\u88c5",level:4},{value:"idp-server-security-event-hooks",id:"idp-server-security-event-hooks",level:3},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-4",level:4},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd-4",level:4},{value:"SecurityEventHook \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",id:"securityeventhook-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",level:4},{value:"WebHookSecurityEventExecutor - Webhook\u5b9f\u88c5",id:"webhooksecurityeventexecutor---webhook\u5b9f\u88c5",level:4},{value:"SlackSecurityEventHookExecutor - Slack\u5b9f\u88c5",id:"slacksecurityeventhookexecutor---slack\u5b9f\u88c5",level:4},{value:"Retry Mechanism",id:"retry-mechanism",level:4},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",id:"\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u5b8c\u6210\uff01",id:"\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u5b8c\u6210",level:3},{value:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",level:2},{value:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u5927\u898f\u6a21\u4fee\u6b63",id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u5927\u898f\u6a21\u4fee\u6b63",level:3},{value:"\u4fee\u6b631: FCM Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (33-113\u884c\u76ee)",id:"\u4fee\u6b631-fcm-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-33-113\u884c\u76ee",level:4},{value:"\u4fee\u6b632: APNS Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (131-205\u884c\u76ee)",id:"\u4fee\u6b632-apns-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-131-205\u884c\u76ee",level:4},{value:"\u4fee\u6b633: Email AWS Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (224-302\u884c\u76ee)",id:"\u4fee\u6b633-email-aws-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-224-302\u884c\u76ee",level:4},{value:"\u4fee\u6b634: SSF Push Delivery\u5b9f\u88c5 (334-439\u884c\u76ee)",id:"\u4fee\u6b634-ssf-push-delivery\u5b9f\u88c5-334-439\u884c\u76ee",level:4},{value:"\u4fee\u6b635: Retry Mechanism (652-717\u884c\u76ee)",id:"\u4fee\u6b635-retry-mechanism-652-717\u884c\u76ee",level:4},{value:"\u4fee\u6b636: SSF Pull Delivery\u524a\u9664",id:"\u4fee\u6b636-ssf-pull-delivery\u524a\u9664",level:4},{value:"\u4fee\u6b63\u306e\u539f\u5247",id:"\u4fee\u6b63\u306e\u539f\u5247",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\u5c64---\u901a\u77e5\u914d\u4fe1\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8",children:"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64 - \u901a\u77e5\u914d\u4fe1\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,s.jsx)(n.p,{children:"\u30e6\u30fc\u30b6\u30fc\u3078\u306e\u901a\u77e5\u914d\u4fe1\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u7ba1\u7406\u3092\u63d0\u4f9b\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u7fa4\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"5\u3064\u306e\u30e2\u30b8\u30e5\u30fc\u30eb"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"idp-server-notification-fcm-adapter"})," - Firebase Cloud Messaging"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"idp-server-notification-apns-adapter"})," - Apple Push Notification Service"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"idp-server-email-aws-adapter"})," - AWS SES \u30e1\u30fc\u30eb\u9001\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"idp-server-security-event-framework"})," - Shared Signals Framework"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"idp-server-security-event-hooks"})," - \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30d5\u30c3\u30af"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb",children:"\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb"}),"\n",(0,s.jsx)(n.h3,{id:"idp-server-notification-fcm-adapter",children:"idp-server-notification-fcm-adapter"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-notification-fcm-adapter/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8cac\u52d9",children:"\u8cac\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"Firebase Cloud Messaging (FCM) \u306b\u3088\u308b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u4e3b\u8981\u6a5f\u80fd",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Android/iOS/Web"})," \u30d7\u30c3\u30b7\u30e5\u901a\u77e5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u901a\u77e5\u512a\u5148\u5ea6"}),": high/normal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data Payload"}),": \u30ab\u30b9\u30bf\u30e0\u30c7\u30fc\u30bf\u914d\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30c8\u30d4\u30c3\u30af\u914d\u4fe1"}),": \u8907\u6570\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u4e00\u6589\u914d\u4fe1"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",children:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(38166).A+"#L37-L108",children:"FcmNotifier.java:37-108"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * FCM\u901a\u77e5\u5b9f\u88c5\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e37-108\u884c\u76ee\n */\npublic class FcmNotifier implements AuthenticationDeviceNotifier {\n\n  LoggerWrapper log = LoggerWrapper.getLogger(FcmNotifier.class);\n  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();\n  Map<String, FirebaseMessaging> cache = new ConcurrentHashMap<>();  // \u2705 \u30c6\u30ca\u30f3\u30c8\u5225\u30ad\u30e3\u30c3\u30b7\u30e5\n\n  @Override\n  public NotificationChannel chanel() {\n    return new NotificationChannel("fcm");\n  }\n\n  @Override\n  public NotificationResult notify(\n      Tenant tenant,\n      AuthenticationDevice device,\n      AuthenticationExecutionConfig configuration) {\n\n    // 1. FCM\u8a2d\u5b9a\u53d6\u5f97\n    FcmConfiguration fcmConfiguration =\n        jsonConverter.read(configuration.details().get("fcm"), FcmConfiguration.class);\n\n    // 2. FirebaseMessaging\u53d6\u5f97\uff08\u30c6\u30ca\u30f3\u30c8\u5225\u30ad\u30e3\u30c3\u30b7\u30e5\uff09\n    FirebaseMessaging firebaseMessaging = getOrInitFirebaseMessaging(tenant, fcmConfiguration);\n\n    // 3. \u901a\u77e5\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30fb\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\n    NotificationTemplate template = fcmConfiguration.findTemplate("default");\n    String notificationToken = device.notificationToken().value();\n\n    // 4. \u30e1\u30c3\u30bb\u30fc\u30b8\u69cb\u7bc9\uff08Android/iOS\u4e21\u5bfe\u5fdc\uff09\n    Message message =\n        Message.builder()\n            .setToken(notificationToken)\n            .setAndroidConfig(\n                AndroidConfig.builder()\n                    .setPriority(AndroidConfig.Priority.HIGH)\n                    .putData("sender", template.optSender(tenant.identifierValue()))\n                    .putData("title", template.optTitle("Transaction Authentication"))\n                    .putData("body", template.optBody("Please approve..."))\n                    .build())\n            .setApnsConfig(\n                ApnsConfig.builder()\n                    .putHeader("apns-priority", "10")\n                    .setAps(Aps.builder().setContentAvailable(true).build())\n                    .build())\n            .build();\n\n    // 5. \u9001\u4fe1\n    String result = firebaseMessaging.send(message);\n    return NotificationResult.success("fcm", Map.of("result", result));\n  }\n\n  // \u2705 \u30c6\u30ca\u30f3\u30c8\u5225FirebaseMessaging\u521d\u671f\u5316\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\n  FirebaseMessaging getOrInitFirebaseMessaging(Tenant tenant, FcmConfiguration config) {\n    return cache.computeIfAbsent(tenant.identifierValue(), (key) -> {\n      FirebaseOptions options = FirebaseOptions.builder()\n          .setCredentials(GoogleCredentials.fromStream(\n              new ByteArrayInputStream(config.credential().getBytes())))\n          .build();\n      FirebaseApp app = FirebaseApp.initializeApp(options, tenant.identifierValue());\n      return FirebaseMessaging.getInstance(app);\n    });\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"AuthenticationDeviceNotifier"})," \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u30c6\u30ca\u30f3\u30c8\u5225FirebaseMessaging \u30ad\u30e3\u30c3\u30b7\u30e5\uff08\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5bfe\u5fdc\uff09"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"NotificationTemplate"})," \u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Android/iOS\u4e21\u5bfe\u5fdc\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u69cb\u7bc9"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"NotificationResult"})," \u306b\u3088\u308b\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"idp-server-notification-apns-adapter",children:"idp-server-notification-apns-adapter"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-notification-apns-adapter/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8cac\u52d9-1",children:"\u8cac\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"Apple Push Notification Service (APNS) \u306b\u3088\u308b\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u4e3b\u8981\u6a5f\u80fd-1",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"iOS/macOS"})," \u30d7\u30c3\u30b7\u30e5\u901a\u77e5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Badge/Sound/Alert"})," \u8a2d\u5b9a"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Silent Notification"}),": \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u66f4\u65b0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token Authentication"}),": JWT\u8a8d\u8a3c"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-1",children:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(7988).A+"#L42-L134",children:"ApnsNotifier.java:42-134"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * APNS\u901a\u77e5\u5b9f\u88c5\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e42-134\u884c\u76ee\n */\npublic class ApnsNotifier implements AuthenticationDeviceNotifier {\n\n  LoggerWrapper log = LoggerWrapper.getLogger(ApnsNotifier.class);\n  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();\n  Map<String, JwtTokenCache> jwtTokenCache = new ConcurrentHashMap<>();  // \u2705 JWT\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\n  HttpClient httpClient = HttpClient.newBuilder().version(HttpClient.Version.HTTP_2).build();\n\n  private static final String PRODUCTION_URL = "https://api.push.apple.com";\n  private static final String DEVELOPMENT_URL = "https://api.sandbox.push.apple.com";\n\n  @Override\n  public NotificationChannel chanel() {\n    return new NotificationChannel("apns");\n  }\n\n  @Override\n  public NotificationResult notify(\n      Tenant tenant,\n      AuthenticationDevice device,\n      AuthenticationExecutionConfig configuration) {\n\n    // 1. APNS\u8a2d\u5b9a\u53d6\u5f97\n    ApnsConfiguration apnsConfiguration =\n        jsonConverter.read(configuration.details().get("apns"), ApnsConfiguration.class);\n\n    // 2. JWT\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\uff08\u30ad\u30e3\u30c3\u30b7\u30e5\u30011\u6642\u9593\u6709\u52b9\uff09\n    String jwtToken = getOrCreateJwtToken(tenant, apnsConfiguration);\n\n    // 3. \u901a\u77e5\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u53d6\u5f97\n    NotificationTemplate template = apnsConfiguration.findTemplate("default");\n    String notificationToken = device.notificationToken().value();\n\n    // 4. APNs\u30da\u30a4\u30ed\u30fc\u30c9\u69cb\u7bc9\uff08JSON\uff09\n    String payload = createApnsPayload(template, tenant);\n\n    // 5. HTTP/2\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1\n    String apnsUrl = (apnsConfiguration.isProduction() ? PRODUCTION_URL : DEVELOPMENT_URL)\n        + "/3/device/" + notificationToken;\n\n    HttpRequest request =\n        HttpRequest.newBuilder()\n            .uri(URI.create(apnsUrl))\n            .header("Authorization", "bearer " + jwtToken)\n            .header("apns-topic", apnsConfiguration.bundleId())\n            .header("apns-priority", "10")\n            .header("apns-push-type", "alert")\n            .header("Content-Type", "application/json")\n            .POST(HttpRequest.BodyPublishers.ofString(payload))\n            .build();\n\n    HttpResponse<String> response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\n\n    if (response.statusCode() == 200) {\n      return NotificationResult.success("apns", Map.of("status", "sent"));\n    } else {\n      return NotificationResult.failure("apns", "APNs returned: " + response.statusCode());\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 Java\u6a19\u6e96",(0,s.jsx)(n.code,{children:"HttpClient"}),"\uff08HTTP/2\u5bfe\u5fdc\uff09\u3067APNs\u76f4\u63a5\u901a\u4fe1"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 JWT\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u306e\u751f\u6210\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\uff081\u6642\u9593\u6709\u52b9\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Production/Development\u74b0\u5883\u5207\u308a\u66ff\u3048"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"NotificationTemplate"}),"\u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"idp-server-email-aws-adapter",children:"idp-server-email-aws-adapter"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-email-aws-adapter/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8cac\u52d9-2",children:"\u8cac\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"AWS SES (Simple Email Service) \u306b\u3088\u308b\u30e1\u30fc\u30eb\u9001\u4fe1\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u4e3b\u8981\u6a5f\u80fd-2",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"HTML/Text"})," \u30e1\u30fc\u30eb"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb"}),": \u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u9001\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"}),": SES\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f7f\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30d0\u30a6\u30f3\u30b9/\u82e6\u60c5"})," \u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"emailsender-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5",children:"EmailSender \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30fb\u5b9f\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53562).A+"#L29-L82",children:"AwsEmailSender.java:29-82"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * \u30e1\u30fc\u30eb\u9001\u4fe1\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Plugin\uff09\n */\npublic interface EmailSender {\n  String function();\n  EmailSendResult send(EmailSendingRequest request, EmailSenderConfiguration configuration);\n}\n\n/**\n * AWS SES\u5b9f\u88c5\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e29-82\u884c\u76ee\n */\npublic class AwsEmailSender implements EmailSender {\n\n  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();\n\n  @Override\n  public String function() {\n    return "aws_ses";\n  }\n\n  @Override\n  public EmailSendResult send(\n      EmailSendingRequest request,\n      EmailSenderConfiguration configuration) {\n\n    // 1. SES\u8a2d\u5b9a\u53d6\u5f97\n    AwsSesEmailSenderConfig sesConfig =\n        jsonConverter.read(configuration.details(), AwsSesEmailSenderConfig.class);\n\n    // 2. SES\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u4f5c\u6210\uff08AWS SDK v2\uff09\n    Region region = Region.of(sesConfig.regionName());\n    SesClient sesClient =\n        SesClient.builder()\n            .credentialsProvider(\n                StaticCredentialsProvider.create(\n                    AwsBasicCredentials.create(\n                        sesConfig.accessKeyId(), sesConfig.secretAccessKey())))\n            .region(region)\n            .build();\n\n    // 3. \u30e1\u30fc\u30eb\u9001\u4fe1\u30ea\u30af\u30a8\u30b9\u30c8\u69cb\u7bc9\n    Destination destination = Destination.builder().toAddresses(request.to()).build();\n    Content subject = Content.builder().data(request.subject()).charset("UTF-8").build();\n    Content textBody = Content.builder().data(request.body()).charset("UTF-8").build();\n    Body body = Body.builder().text(textBody).build();\n    Message message = Message.builder().subject(subject).body(body).build();\n\n    SendEmailRequest emailRequest =\n        SendEmailRequest.builder()\n            .source(sesConfig.sender())\n            .destination(destination)\n            .message(message)\n            .build();\n\n    // 4. \u9001\u4fe1\n    SendEmailResponse response = sesClient.sendEmail(emailRequest);\n    return new EmailSendResult(true, Map.of("message_id", response.messageId()));\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 AWS SDK v2\u4f7f\u7528\uff08",(0,s.jsx)(n.code,{children:"software.amazon.awssdk"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"EmailSenderConfiguration"}),"\u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"EmailSendResult"}),"\u306b\u3088\u308b\u7d50\u679c\u7ba1\u7406"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u30ea\u30fc\u30b8\u30e7\u30f3\u30fb\u8a8d\u8a3c\u60c5\u5831\u306e\u8a2d\u5b9a\u53ef\u80fd"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"plugin\u767b\u9332",children:"Plugin\u767b\u9332"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# META-INF/services/org.idp.server.platform.notification.email.EmailSender\norg.idp.server.emai.aws.adapter.AwsEmailSender\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb",children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb"}),"\n",(0,s.jsx)(n.h3,{id:"idp-server-security-event-framework",children:"idp-server-security-event-framework"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-security-event-framework/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8cac\u52d9-3",children:"\u8cac\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"Shared Signals Framework (SSF) \u306b\u3088\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u914d\u4fe1\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4ed5\u69d8"}),": ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-sse-framework-1_0.html",children:"Shared Signals Framework"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u4e3b\u8981\u6a5f\u80fd-3",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Push Delivery"}),": Webhook\u914d\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pull Delivery"}),": Polling\u914d\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event Types"}),": ",(0,s.jsx)(n.code,{children:"account-disabled"}),", ",(0,s.jsx)(n.code,{children:"credential-change"}),", ",(0,s.jsx)(n.code,{children:"session-revoked"}),"\u7b49"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Security Event Token (SET)"}),": JWT\u5f62\u5f0f\u306e\u30a4\u30d9\u30f3\u30c8"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"ssf-event-types",children:"SSF Event Types"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event Type"}),(0,s.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://schemas.openid.net/secevent/risc/event-type/account-disabled"})}),(0,s.jsx)(n.td,{children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u7121\u52b9\u5316"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://schemas.openid.net/secevent/risc/event-type/credential-change"})}),(0,s.jsx)(n.td,{children:"\u8a8d\u8a3c\u60c5\u5831\u5909\u66f4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://schemas.openid.net/secevent/risc/event-type/session-revoked"})}),(0,s.jsx)(n.td,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"https://schemas.openid.net/secevent/caep/event-type/token-claims-change"})}),(0,s.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u30af\u30ec\u30fc\u30e0\u5909\u66f4"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"ssf-hook-executor---push-delivery\u5b9f\u88c5",children:"SSF Hook Executor - Push Delivery\u5b9f\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53351).A+"#L35-L176",children:"SsfHookExecutor.java:35-176"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * SSF Hook Executor\uff08Push Delivery\uff09\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e35-176\u884c\u76ee\n */\npublic class SsfHookExecutor implements SecurityEventHook {\n\n  HttpRequestExecutor httpRequestExecutor;\n  JsonConverter jsonConverter;\n\n  @Override\n  public SecurityEventHookType type() {\n    return StandardSecurityEventHookType.SSF.toHookType();\n  }\n\n  @Override\n  public SecurityEventHookResult execute(\n      Tenant tenant,\n      SecurityEvent securityEvent,\n      SecurityEventHookConfiguration hookConfiguration) {\n\n    long startTime = System.currentTimeMillis();\n\n    try {\n      // 1. SSF\u8a2d\u5b9a\u53d6\u5f97\n      SecurityEventConfig securityEventConfig = hookConfiguration.getEvent(securityEvent.type());\n      SharedSignalFrameworkMetadataConfig metadataConfig =\n          jsonConverter.read(hookConfiguration.metadata(), SharedSignalFrameworkMetadataConfig.class);\n      SecurityEventExecutionConfig executionConfig = securityEventConfig.execution();\n      SharedSignalFrameworkTransmissionConfig transmissionConfig =\n          jsonConverter.read(executionConfig.details(), SharedSignalFrameworkTransmissionConfig.class);\n\n      // 2. Security Event Token (SET) \u751f\u6210\n      SecurityEventTokenCreator securityEventTokenCreator =\n          new SecurityEventTokenCreator(securityEvent, metadataConfig, transmissionConfig);\n      SecurityEventToken securityEventToken = securityEventTokenCreator.create();\n\n      // 3. SSF\u9001\u4fe1\n      return send(\n          hookConfiguration,\n          securityEvent,\n          transmissionConfig.url(),\n          securityEventToken,\n          transmissionConfig,\n          startTime);\n\n    } catch (Exception e) {\n      long executionDurationMs = System.currentTimeMillis() - startTime;\n      return SecurityEventHookResult.failureWithContext(\n          hookConfiguration,\n          securityEvent,\n          null,\n          executionDurationMs,\n          e.getClass().getSimpleName(),\n          "SSF hook execution failed: " + e.getMessage());\n    }\n  }\n\n  private SecurityEventHookResult send(\n      SecurityEventHookConfiguration hookConfiguration,\n      SecurityEvent securityEvent,\n      String endpoint,\n      SecurityEventToken securityEventToken,\n      SharedSignalFrameworkTransmissionConfig transmissionConfig,\n      long startTime) {\n\n    // HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u69cb\u7bc9\n    HttpRequest httpRequest = HttpRequest.newBuilder()\n        .uri(new URI(endpoint))\n        .header("Content-Type", "application/secevent+jwt")\n        .POST(HttpRequest.BodyPublishers.ofString(securityEventToken.value()))\n        .build();\n\n    // OAuth\u8a8d\u8a3c\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u8ffd\u52a0\n    HttpRequestResult httpRequestResult =\n        (transmissionConfig.oauthAuthorization() != null)\n            ? httpRequestExecutor.executeWithOAuth(httpRequest, transmissionConfig.oauthAuthorization())\n            : httpRequestExecutor.execute(httpRequest);\n\n    long executionDurationMs = System.currentTimeMillis() - startTime;\n\n    // \u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n    if (httpRequestResult.isSuccess()) {\n      return SecurityEventHookResult.successWithContext(\n          hookConfiguration, securityEvent, executionDetails, executionDurationMs);\n    } else {\n      return SecurityEventHookResult.failureWithContext(\n          hookConfiguration, securityEvent, executionDetails, executionDurationMs,\n          "SSF_ERROR", "SSF transmission failed");\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"SecurityEventHook"})," \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"SecurityEventTokenCreator"}),"\u306b\u3088\u308bSET\u751f\u6210"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 OAuth\u8a8d\u8a3c\u30aa\u30d7\u30b7\u30e7\u30f3\u5bfe\u5fdc"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"SecurityEventHookResult"}),"\u306b\u3088\u308b\u7d50\u679c\u7ba1\u7406"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u5b9f\u884c\u6642\u9593\u8a08\u6e2c\uff08executionDurationMs\uff09"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6ce8\u610f"}),": SSF Pull Delivery\u306e\u5b9f\u88c5\u306f\u73fe\u6642\u70b9\u3067\u672a\u78ba\u8a8d\u3002\u5b9f\u88c5\u304c\u5b58\u5728\u3059\u308b\u304b\u8981\u8abf\u67fb\u3002"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"idp-server-security-event-hooks",children:"idp-server-security-event-hooks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-security-event-hooks/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8cac\u52d9-4",children:"\u8cac\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30d5\u30c3\u30af\uff08Webhook/Slack/Datadog\u9023\u643a\uff09\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u4e3b\u8981\u6a5f\u80fd-4",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Webhook"}),": \u6c4e\u7528Webhook\u914d\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Slack"}),": Slack\u901a\u77e5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Datadog"}),": Datadog\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Retry Mechanism"}),": \u5931\u6557\u6642\u306e\u30ea\u30c8\u30e9\u30a4"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"securityeventhook-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",children:"SecurityEventHook \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(31091).A+"#L23",children:"SecurityEventHook.java:23"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"/**\n * \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30d5\u30c3\u30af\uff08Plugin\uff09\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e23-41\u884c\u76ee\n */\npublic interface SecurityEventHook {\n\n  // \u2705 \u30d5\u30c3\u30af\u30bf\u30a4\u30d7\n  SecurityEventHookType type();\n\n  // \u2705 \u5b9f\u884c\u5224\u5b9a\uff08default\u30e1\u30bd\u30c3\u30c9\uff09\n  default boolean shouldExecute(\n      Tenant tenant,\n      SecurityEvent securityEvent,\n      SecurityEventHookConfiguration hookConfiguration) {\n\n    if (!hookConfiguration.hasEvents()) {\n      return false;\n    }\n\n    return hookConfiguration.containsTrigger(securityEvent.type().value());\n  }\n\n  // \u2705 \u30d5\u30c3\u30af\u5b9f\u884c\uff08Tenant\u7b2c\u4e00\u5f15\u6570\uff09\n  SecurityEventHookResult execute(\n      Tenant tenant,\n      SecurityEvent securityEvent,\n      SecurityEventHookConfiguration configuration);\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"webhooksecurityeventexecutor---webhook\u5b9f\u88c5",children:"WebHookSecurityEventExecutor - Webhook\u5b9f\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(82621).A+"#L35",children:"WebHookSecurityEventExecutor.java:35"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * Webhook\u5b9f\u88c5\uff08RFC 8935\u6e96\u62e0\uff09\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e35-80\u884c\u76ee\n * @see <a href="https://datatracker.ietf.org/doc/html/rfc8935">RFC 8935 - Push-Based SET Delivery</a>\n */\npublic class WebHookSecurityEventExecutor implements SecurityEventHook {\n\n  HttpRequestExecutor httpRequestExecutor;\n  JsonConverter jsonConverter;\n\n  @Override\n  public SecurityEventHookType type() {\n    return StandardSecurityEventHookType.WEBHOOK.toHookType();\n  }\n\n  @Override\n  public SecurityEventHookResult execute(\n      Tenant tenant,\n      SecurityEvent securityEvent,\n      SecurityEventHookConfiguration hookConfiguration) {\n\n    long startTime = System.currentTimeMillis();\n\n    try {\n      // 1. \u8a2d\u5b9a\u53d6\u5f97\n      WebHookConfiguration configuration =\n          jsonConverter.read(hookConfiguration, WebHookConfiguration.class);\n\n      // 2. \u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u5225\u306e\u8a2d\u5b9a\u53d6\u5f97\n      HttpRequestUrl httpRequestUrl = configuration.httpRequestUrl(securityEvent.type());\n      HttpMethod httpMethod = configuration.httpMethod(securityEvent.type());\n      HttpRequestStaticHeaders httpRequestStaticHeaders =\n          configuration.httpRequestHeaders(securityEvent.type());\n      HttpRequestDynamicBodyKeys httpRequestDynamicBodyKeys =\n          configuration.httpRequestDynamicBodyKeys(securityEvent.type());\n      HttpRequestStaticBody httpRequestStaticBody =\n          configuration.httpRequestStaticBody(securityEvent.type());\n\n      // 3. \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u751f\u6210\uff08\u52d5\u7684\u30de\u30c3\u30d4\u30f3\u30b0\uff09\n      HttpRequestBodyCreator requestBodyCreator =\n          new HttpRequestBodyCreator(\n              new HttpRequestBaseParams(securityEvent.toMap()),\n              httpRequestDynamicBodyKeys,\n              httpRequestStaticBody);\n      Map<String, Object> requestBody = requestBodyCreator.create();\n\n      // 4. HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u5b9f\u884c\n      HttpRequest httpRequest = HttpRequest.newBuilder()\n          .uri(new URI(httpRequestUrl.value()))\n          .method(httpMethod.value(), /* body */)\n          .headers(httpRequestStaticHeaders.toArray())\n          .build();\n\n      HttpRequestResult result = httpRequestExecutor.execute(httpRequest);\n\n      long executionDurationMs = System.currentTimeMillis() - startTime;\n\n      if (result.isSuccess()) {\n        return SecurityEventHookResult.success(securityEvent, result, executionDurationMs);\n      } else {\n        return SecurityEventHookResult.failure(securityEvent, result, executionDurationMs);\n      }\n\n    } catch (Exception e) {\n      long executionDurationMs = System.currentTimeMillis() - startTime;\n      return SecurityEventHookResult.error(securityEvent, e, executionDurationMs);\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Tenant\u7b2c\u4e00\u5f15\u6570"}),": \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"\u5b9f\u884c\u6642\u9593\u8a08\u6e2c"}),": ",(0,s.jsx)(n.code,{children:"executionDurationMs"}),"\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u76e3\u8996"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"\u52d5\u7684\u8a2d\u5b9a"}),": \u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7\u5225\u306bURL/\u30e1\u30bd\u30c3\u30c9/\u30d8\u30c3\u30c0\u30fc/\u30dc\u30c7\u30a3\u3092\u8a2d\u5b9a\u53ef\u80fd"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"}),": \u6210\u529f/\u5931\u6557/\u30a8\u30e9\u30fc\u3092\u660e\u78ba\u306b\u533a\u5225"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"slacksecurityeventhookexecutor---slack\u5b9f\u88c5",children:"SlackSecurityEventHookExecutor - Slack\u5b9f\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.code,{children:"libs/idp-server-security-event-hooks/src/main/java/org/idp/server/security/event/hooks/slack/"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'public class SlackSecurityEventHookExecutor implements SecurityEventHook {\n\n  HttpRequestExecutor httpRequestExecutor;\n\n  @Override\n  public SecurityEventHookType type() {\n    return StandardSecurityEventHookType.SLACK.toHookType();\n  }\n\n  @Override\n  public SecurityEventHookResult execute(\n      Tenant tenant,\n      SecurityEvent securityEvent,\n      SecurityEventHookConfiguration hookConfiguration) {\n\n    long startTime = System.currentTimeMillis();\n\n    // 1. Slack Webhook URL\u53d6\u5f97\n    SlackSecurityEventHookConfiguration config =\n        jsonConverter.read(hookConfiguration, SlackSecurityEventHookConfiguration.class);\n\n    // 2. Slack\u30e1\u30c3\u30bb\u30fc\u30b8\u69cb\u7bc9\n    String slackPayload = buildSlackMessage(securityEvent);\n\n    // 3. Webhook\u9001\u4fe1\n    HttpRequest request = HttpRequest.newBuilder()\n        .uri(new URI(config.webhookUrl()))\n        .POST(HttpRequest.BodyPublishers.ofString(slackPayload))\n        .header("Content-Type", "application/json")\n        .build();\n\n    HttpRequestResult result = httpRequestExecutor.execute(request);\n\n    long executionDurationMs = System.currentTimeMillis() - startTime;\n\n    return result.isSuccess()\n        ? SecurityEventHookResult.success(securityEvent, result, executionDurationMs)\n        : SecurityEventHookResult.failure(securityEvent, result, executionDurationMs);\n  }\n\n  private String buildSlackMessage(SecurityEvent event) {\n    return String.format("""\n        {\n          "text": "Security Event: %s",\n          "blocks": [\n            {\n              "type": "header",\n              "text": {\n                "type": "plain_text",\n                "text": "\ud83d\udea8 Security Event"\n              }\n            },\n            {\n              "type": "section",\n              "fields": [\n                {"type": "mrkdwn", "text": "*Type:*\\\\n%s"},\n                {"type": "mrkdwn", "text": "*User:*\\\\n%s"},\n                {"type": "mrkdwn", "text": "*Time:*\\\\n%s"}\n              ]\n            }\n          ]\n        }\n        """,\n        event.type(),\n        event.type().value(),\n        event.userSub(),\n        event.timestamp()\n    );\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"retry-mechanism",children:"Retry Mechanism"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(62100).A+"",children:"HttpRequestExecutor.java"}),"\uff08platform\u5c64\u3067\u63d0\u4f9b\uff09"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981"}),": \u5c02\u7528\u306eRetryExecutor\u30af\u30e9\u30b9\u306f\u5b58\u5728\u3057\u306a\u3044\u3002",(0,s.jsx)(n.code,{children:"HttpRequestExecutor.executeWithRetry()"}),"\u3092\u4f7f\u7528\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'/**\n * \u30ea\u30c8\u30e9\u30a4\u6a5f\u69cb\uff08Issue #398\uff09\n * platform\u5c64\u306eHttpRequestExecutor\u304c\u63d0\u4f9b\n */\n\n// SSF Hook\u5185\u3067HttpRequestExecutor.executeWithRetry()\u3092\u4f7f\u7528\npublic class SsfHookExecutor implements SecurityEventHook {\n\n  HttpRequestExecutor httpRequestExecutor;\n\n  private SecurityEventHookResult send(...) {\n    // HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u69cb\u7bc9\n    HttpRequest httpRequest = HttpRequest.newBuilder()\n        .uri(new URI(endpoint))\n        .header("Content-Type", "application/secevent+jwt")\n        .POST(HttpRequest.BodyPublishers.ofString(securityEventToken.value()))\n        .build();\n\n    // \u2705 \u30ea\u30c8\u30e9\u30a4\u8a2d\u5b9a\uff08\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u53d6\u5f97\uff09\n    HttpRetryConfiguration retryConfig = HttpRetryConfiguration.builder()\n        .maxRetries(3)\n        .retryableStatusCodes(List.of(502, 503, 504))\n        .backoffDelays(List.of(\n            Duration.ofSeconds(1),\n            Duration.ofSeconds(2),\n            Duration.ofSeconds(4)\n        ))\n        .idempotencyRequired(true)\n        .build();\n\n    // \u2705 HttpRequestExecutor.executeWithRetry()\u3067\u30ea\u30c8\u30e9\u30a4\u5b9f\u884c\n    HttpRequestResult httpRequestResult =\n        (transmissionConfig.oauthAuthorization() != null)\n            ? httpRequestExecutor.executeWithRetry(\n                httpRequest,\n                transmissionConfig.oauthAuthorization(),\n                retryConfig)\n            : httpRequestExecutor.executeWithRetry(httpRequest, retryConfig);\n\n    // \u30ec\u30b9\u30dd\u30f3\u30b9\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n    long executionDurationMs = System.currentTimeMillis() - startTime;\n    return httpRequestResult.isSuccess()\n        ? SecurityEventHookResult.successWithContext(...)\n        : SecurityEventHookResult.failureWithContext(...);\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 platform\u5c64\u306e",(0,s.jsx)(n.code,{children:"HttpRequestExecutor"}),"\u304c\u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u3092\u63d0\u4f9b"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:"HttpRetryConfiguration"}),"\u3067\u30ea\u30c8\u30e9\u30a4\u8a2d\u5b9a\u3092\u5b9a\u7fa9"]}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Exponential Backoff\u81ea\u52d5\u5b9f\u884c"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 Idempotency-Key\u30d8\u30c3\u30c0\u30fc\u81ea\u52d5\u4ed8\u4e0e\uff08",(0,s.jsx)(n.code,{children:"idempotencyRequired: true"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["\u274c \u5c02\u7528\u306e",(0,s.jsx)(n.code,{children:"SecurityEventHookRetryExecutor"}),"\u30af\u30e9\u30b9\u306f\u5b58\u5728\u3057\u306a\u3044"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Issue #398\uff08Security Event Hook Retry Mechanism\uff09"}),"\n",(0,s.jsx)(n.li,{children:"platform.md\u300cHTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 - \u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u4ed8\u304d\u5b9f\u884c\u300d"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(62100).A+"",children:"HttpRequestExecutor.java"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,s.jsx)(n.h3,{id:"\u901a\u77e5\u30a4\u30d9\u30f3\u30c8\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",children:"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u591a\u69d8\u306a\u901a\u77e5\u624b\u6bb5"}),": FCM/APNS/Email \u3092Plugin\u5316"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SSF\u6e96\u62e0"}),": Shared Signals Framework\u306b\u3088\u308b\u6a19\u6e96\u30a4\u30d9\u30f3\u30c8\u914d\u4fe1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Push/Pull\u914d\u4fe1"}),": Webhook\u914d\u4fe1\u3068Polling\u914d\u4fe1\u306e\u4e21\u5bfe\u5fdc"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30ea\u30c8\u30e9\u30a4\u6a5f\u69cb"}),": \u5931\u6557\u6642\u306e\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4\u30fbBackoff"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a"}),": Slack/Datadog\u7b49\u3078\u306e\u901a\u77e5"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u5b8c\u6210",children:"\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u5b8c\u6210\uff01"}),"\n",(0,s.jsx)(n.p,{children:"\u3059\u3079\u3066\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-01-index",children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30da\u30fc\u30b8\u306b\u623b\u308b"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",children:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74"}),"\n",(0,s.jsx)(n.h3,{id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u5927\u898f\u6a21\u4fee\u6b63",children:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u5927\u898f\u6a21\u4fee\u6b63"}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b631-fcm-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-33-113\u884c\u76ee",children:"\u4fee\u6b631: FCM Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (33-113\u884c\u76ee)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": \u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9\u540d",(0,s.jsx)(n.code,{children:"FcmNotificationSender"}),"\u3092\u4f7f\u7528"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class FcmNotificationSender {  // \u274c \u5b58\u5728\u3057\u306a\u3044\n  FirebaseApp firebaseApp;\n  public void send(FcmNotificationRequest request) { ... }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class FcmNotifier implements AuthenticationDeviceNotifier {  // \u2705 \u5b9f\u88c5\n  Map<String, FirebaseMessaging> cache = new ConcurrentHashMap<>();  // \u2705 \u30c6\u30ca\u30f3\u30c8\u5225\u30ad\u30e3\u30c3\u30b7\u30e5\n  public NotificationResult notify(Tenant, AuthenticationDevice, ...) { ... }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"AuthenticationDeviceNotifier"}),"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"]}),"\n",(0,s.jsx)(n.li,{children:"\u30c6\u30ca\u30f3\u30c8\u5225FirebaseMessaging\u30ad\u30e3\u30c3\u30b7\u30e5\u6a5f\u69cb"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NotificationTemplate"}),"\u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NotificationResult"}),"\u306b\u3088\u308b\u7d50\u679c\u7ba1\u7406"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(38166).A+"#L37-L108",children:"FcmNotifier.java:37-108"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b632-apns-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-131-205\u884c\u76ee",children:"\u4fee\u6b632: APNS Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (131-205\u884c\u76ee)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": pushy/ApnsClient\u60f3\u5b9a\u306e\u60f3\u50cf\u5b9f\u88c5"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class ApnsNotificationSender {  // \u274c \u5b58\u5728\u3057\u306a\u3044\n  ApnsClient apnsClient;  // \u274c pushy\u4f9d\u5b58\u60f3\u5b9a\n  SimpleApnsPushNotification pushNotification = ...  // \u274c pushy API\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class ApnsNotifier implements AuthenticationDeviceNotifier {  // \u2705 \u5b9f\u88c5\n  HttpClient httpClient = HttpClient.newBuilder().version(HttpClient.Version.HTTP_2).build();  // \u2705 Java\u6a19\u6e96\n  Map<String, JwtTokenCache> jwtTokenCache = ...  // \u2705 JWT\u8a8d\u8a3c\u30ad\u30e3\u30c3\u30b7\u30e5\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Java\u6a19\u6e96HttpClient\uff08HTTP/2\uff09\u306b\u3088\u308bAPNs\u76f4\u63a5\u901a\u4fe1"}),"\n",(0,s.jsx)(n.li,{children:"JWT\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\uff081\u6642\u9593\u6709\u52b9\uff09"}),"\n",(0,s.jsx)(n.li,{children:"Production/Development\u74b0\u5883\u5207\u308a\u66ff\u3048"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(7988).A+"#L42-L134",children:"ApnsNotifier.java:42-134"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b633-email-aws-adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3-224-302\u884c\u76ee",children:"\u4fee\u6b633: Email AWS Adapter\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3 (224-302\u884c\u76ee)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": AWS SDK v1\u60f3\u5b9a\u306e\u53e4\u3044API"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class AwsSesEmailSender implements EmailSender {  // \u274c \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u4e0d\u6b63\u78ba\n  AmazonSimpleEmailService sesClient;  // \u274c AWS SDK v1\n  void send(EmailRequest request) { ... }  // \u274c \u623b\u308a\u5024\u306a\u3057\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class AwsEmailSender implements EmailSender {  // \u2705 \u5b9f\u88c5\n  EmailSendResult send(EmailSendingRequest, EmailSenderConfiguration) { ... }  // \u2705 \u6b63\u78ba\u306a\u30b7\u30b0\u30cd\u30c1\u30e3\n  SesClient sesClient = SesClient.builder()...  // \u2705 AWS SDK v2\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AWS SDK v2\u4f7f\u7528\uff08",(0,s.jsx)(n.code,{children:"software.amazon.awssdk"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EmailSenderConfiguration"}),"\u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EmailSendResult"}),"\u306b\u3088\u308b\u7d50\u679c\u7ba1\u7406"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53562).A+"#L29-L82",children:"AwsEmailSender.java:29-82"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b634-ssf-push-delivery\u5b9f\u88c5-334-439\u884c\u76ee",children:"\u4fee\u6b634: SSF Push Delivery\u5b9f\u88c5 (334-439\u884c\u76ee)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": \u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9",(0,s.jsx)(n.code,{children:"SsfPushDelivery"}),"\u3001",(0,s.jsx)(n.code,{children:"JwtCreator"}),"\u3092\u4f7f\u7528"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class SsfPushDelivery {  // \u274c \u5b58\u5728\u3057\u306a\u3044\n  JwtCreator jwtCreator = new JwtCreator();  // \u274c \u5b58\u5728\u3057\u306a\u3044\uff08platform.md\u3067\u78ba\u8a8d\u6e08\u307f\uff09\n  HttpRequest request = HttpRequest.builder()...  // \u274c \u5b58\u5728\u3057\u306a\u3044API\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class SsfHookExecutor implements SecurityEventHook {  // \u2705 \u5b9f\u88c5\n  SecurityEventTokenCreator tokenCreator = ...  // \u2705 \u5b9f\u88c5\n  HttpRequest httpRequest = HttpRequest.newBuilder()...  // \u2705 Java\u6a19\u6e96API\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SecurityEventTokenCreator"}),"\u306b\u3088\u308bSET\u751f\u6210"]}),"\n",(0,s.jsx)(n.li,{children:"OAuth\u8a8d\u8a3c\u30aa\u30d7\u30b7\u30e7\u30f3\u5bfe\u5fdc"}),"\n",(0,s.jsx)(n.li,{children:"Java\u6a19\u6e96HttpRequest.newBuilder()"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c"}),": ",(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53351).A+"#L35-L176",children:"SsfHookExecutor.java:35-176"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b635-retry-mechanism-652-717\u884c\u76ee",children:"\u4fee\u6b635: Retry Mechanism (652-717\u884c\u76ee)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": \u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9",(0,s.jsx)(n.code,{children:"SecurityEventHookRetryExecutor"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"public class SecurityEventHookRetryExecutor {  // \u274c \u5b58\u5728\u3057\u306a\u3044\n  public SecurityEventHookResult executeWithRetry(...) { ... }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"**\u91cd\u8981**: \u5c02\u7528\u306eRetryExecutor\u30af\u30e9\u30b9\u306f\u5b58\u5728\u3057\u306a\u3044\u3002\nplatform\u5c64\u306e`HttpRequestExecutor.executeWithRetry()`\u3092\u4f7f\u7528\u3002\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"platform\u5c64\u306eHttpRequestExecutor\u304c\u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u660e\u8a18"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"HttpRetryConfiguration"}),"\u306e\u4f7f\u7528\u65b9\u6cd5"]}),"\n",(0,s.jsx)(n.li,{children:"platform.md\u3078\u306e\u30af\u30ed\u30b9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c"}),": platform.md\u300cHTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 - \u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u4ed8\u304d\u5b9f\u884c\u300d"]}),"\n",(0,s.jsx)(n.h4,{id:"\u4fee\u6b636-ssf-pull-delivery\u524a\u9664",children:"\u4fee\u6b636: SSF Pull Delivery\u524a\u9664"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u554f\u984c"}),": \u5b9f\u88c5\u672a\u78ba\u8a8d\u306e\u305f\u3081\u3001\u60f3\u50cf\u30b3\u30fc\u30c9\u3092\u524a\u9664"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u524a\u9664\u5185\u5bb9"}),": ",(0,s.jsx)(n.code,{children:"SsfPullController"}),"\u306e\u5b9f\u88c5\u4f8b\uff08\u5b9f\u88c5\u304c\u5b58\u5728\u3059\u308b\u304b\u672a\u78ba\u8a8d\uff09"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4fee\u6b63\u306e\u539f\u5247",children:"\u4fee\u6b63\u306e\u539f\u5247"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"CLAUDE.md\u300c\u60f3\u50cf\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\u9632\u6b62\u300d\u306b\u57fa\u3065\u304f\u4fee\u6b63"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5b9f\u88c5\u30d5\u30a1\u30fc\u30b9\u30c8"}),": \u5168\u3066\u306e\u30af\u30e9\u30b9\u540d\u30fb\u30e1\u30bd\u30c3\u30c9\u540d\u3092\u5b9f\u88c5\u304b\u3089\u78ba\u8a8d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30af\u30e9\u30b9\u540d\u306e\u6b63\u78ba\u6027"}),": FcmNotifier, ApnsNotifier, AwsEmailSender\uff08\u60f3\u50cf\u540d\u3092\u6392\u9664\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u6b63\u78ba\u6027"}),": AuthenticationDeviceNotifier, EmailSender"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API\u6b63\u78ba\u6027"}),": Java\u6a19\u6e96HttpRequest.newBuilder(), AWS SDK v2"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/idp-server-notification-*/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/idp-server-email-aws-adapter/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"libs/idp-server-security-event-*/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(38166).A+"",children:"FcmNotifier.java"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(7988).A+"",children:"ApnsNotifier.java"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53562).A+"",children:"AwsEmailSender.java"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(53351).A+"",children:"SsfHookExecutor.java"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(82621).A+"",children:"WebHookSecurityEventExecutor.java"})}),"\n",(0,s.jsx)(n.li,{children:"platform.md\u300cHTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 - \u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u4ed8\u304d\u5b9f\u884c\u300d"}),"\n",(0,s.jsx)(n.li,{children:"Issue #398\uff08Security Event Hook Retry Mechanism\uff09"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-sse-framework-1_0.html",children:"Shared Signals Framework"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12\n",(0,s.jsx)(n.strong,{children:"\u30ec\u30d3\u30e5\u30fc\u5b9f\u65bd"}),": 2025-10-12 - AI\u958b\u767a\u8005\u5411\u3051\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u54c1\u8cea\u6539\u5584\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},53562:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/AwsEmailSender-280e08ebe67200f8f66a6938b433a05d.java"},7988:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ApnsNotifier-f16796b9aa3dba107a9be02a49690098.java"},38166:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/FcmNotifier-531966a25cca8b77325c86aedae3befc.java"},62100:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/HttpRequestExecutor-26ad92be45cb77575a4cd668246f532a.java"},31091:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/SecurityEventHook-b3c08fbcbed46611f595336ce6d3e879.java"},53351:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/SsfHookExecutor-51d5336d11e4e24238156b880032ec40.java"},82621:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/WebHookSecurityEventExecutor-b40ce2197091b846bde4c4042fd33830.java"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);