"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3997],{69120:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"content_10_ai_developer/ai-20-adapters","title":"Adapter\u5c64 - Repository\u5b9f\u88c5\u3068\u30a4\u30f3\u30d5\u30e9\u7d71\u5408","description":"\u6982\u8981","source":"@site/docs/content_10_ai_developer/ai-20-adapters.md","sourceDirName":"content_10_ai_developer","slug":"/content_10_ai_developer/ai-20-adapters","permalink":"/idp-server/docs/content_10_ai_developer/ai-20-adapters","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-20-adapters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"idp-server-control-plane - \u7ba1\u7406API\u5951\u7d04\u5b9a\u7fa9","permalink":"/idp-server/docs/content_10_ai_developer/ai-13-control-plane"},"next":{"title":"idp-server-core-adapter","permalink":"/idp-server/docs/content_10_ai_developer/ai-21-core-adapter"}}');var t=r(74848),s=r(28453);const l={},a="Adapter\u5c64 - Repository\u5b9f\u88c5\u3068\u30a4\u30f3\u30d5\u30e9\u7d71\u5408",d={},o=[{value:"\u6982\u8981",id:"\u6982\u8981",level:2},{value:"idp-server-core-adapter - Repository\u5b9f\u88c5",id:"idp-server-core-adapter---repository\u5b9f\u88c5",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9",level:3},{value:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",id:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",level:3},{value:"DataSource - SqlExecutor \u30d1\u30bf\u30fc\u30f3",id:"datasource---sqlexecutor-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"DataSource - Repository\u5b9f\u88c5",id:"datasource---repository\u5b9f\u88c5",level:4},{value:"SqlExecutor - SQL\u5b9f\u884c",id:"sqlexecutor---sql\u5b9f\u884c",level:4},{value:"\u91cd\u8981\u539f\u5247",id:"\u91cd\u8981\u539f\u5247",level:3},{value:"\u274c \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u7981\u6b62",id:"-\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u7981\u6b62",level:4},{value:"\u6697\u53f7\u5316\u30fb\u30cf\u30c3\u30b7\u30e5\u5316",id:"\u6697\u53f7\u5316\u30cf\u30c3\u30b7\u30e5\u5316",level:3},{value:"AesCipher - \u6697\u53f7\u5316",id:"aescipher---\u6697\u53f7\u5316",level:4},{value:"HmacHasher - \u30cf\u30c3\u30b7\u30e5\u5316",id:"hmachasher---\u30cf\u30c3\u30b7\u30e5\u5316",level:4},{value:"Redis Cache\u5b9f\u88c5",id:"redis-cache\u5b9f\u88c5",level:3},{value:"JedisCacheStore - Redis \u30ad\u30e3\u30c3\u30b7\u30e5",id:"jediscachestore---redis-\u30ad\u30e3\u30c3\u30b7\u30e5",level:4},{value:"idp-server-database - \u30b9\u30ad\u30fc\u30de\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",id:"idp-server-database---\u30b9\u30ad\u30fc\u30de\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-1",level:3},{value:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210",id:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210",level:3},{value:"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",id:"flyway-\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",level:3},{value:"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c",id:"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c",level:4},{value:"PostgreSQL \u2192 MySQL DDL\u5909\u63db\u30eb\u30fc\u30eb",id:"postgresql--mysql-ddl\u5909\u63db\u30eb\u30fc\u30eb",level:4},{value:"Docker Flyway Migrator",id:"docker-flyway-migrator",level:4},{value:"\u4e3b\u8981\u30c6\u30fc\u30d6\u30eb",id:"\u4e3b\u8981\u30c6\u30fc\u30d6\u30eb",level:3},{value:"Row Level Security (RLS)",id:"row-level-security-rls",level:3},{value:"idp-server-springboot-adapter - Spring Boot\u7d71\u5408",id:"idp-server-springboot-adapter---spring-boot\u7d71\u5408",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-2",level:3},{value:"Controller \u30d1\u30bf\u30fc\u30f3",id:"controller-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"\u547d\u540d\u898f\u5247: {Domain}ManagementV1Api",id:"\u547d\u540d\u898f\u5247-domainmanagementv1api",level:4},{value:"Configuration",id:"configuration",level:3},{value:"Exception Handler",id:"exception-handler",level:3},{value:"\u30d5\u30a3\u30eb\u30bf\u30fc",id:"\u30d5\u30a3\u30eb\u30bf\u30fc",level:3},{value:"ManagementApiFilter - \u7ba1\u7406API\u8a8d\u8a3c",id:"managementapifilter---\u7ba1\u7406api\u8a8d\u8a3c",level:4},{value:"OrgManagementFilter - \u7d44\u7e54\u7ba1\u7406API\u8a8d\u8a3c",id:"orgmanagementfilter---\u7d44\u7e54\u7ba1\u7406api\u8a8d\u8a3c",level:4},{value:"DynamicCorsFilter - CORS\u52d5\u7684\u8a2d\u5b9a",id:"dynamiccorsfilter---cors\u52d5\u7684\u8a2d\u5b9a",level:4},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"Adapter\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",id:"adapter\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:3},{value:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",level:2},{value:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",level:3},{value:"\u4fee\u6b631: Controller \u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u5168\u9762\u6539\u8a02 (394-464\u884c\u76ee)",id:"\u4fee\u6b631-controller-\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u5168\u9762\u6539\u8a02-394-464\u884c\u76ee",level:4},{value:"\u4fee\u6b632: \u307e\u3068\u3081\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u7528\u8a9e\u4fee\u6b63 (621-629\u884c\u76ee)",id:"\u4fee\u6b632-\u307e\u3068\u3081\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u7528\u8a9e\u4fee\u6b63-621-629\u884c\u76ee",level:4},{value:"\u4fee\u6b63\u306e\u539f\u5247",id:"\u4fee\u6b63\u306e\u539f\u5247",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"adapter\u5c64---repository\u5b9f\u88c5\u3068\u30a4\u30f3\u30d5\u30e9\u7d71\u5408",children:"Adapter\u5c64 - Repository\u5b9f\u88c5\u3068\u30a4\u30f3\u30d5\u30e9\u7d71\u5408"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,t.jsx)(n.p,{children:"Adapter\u5c64\u306f\u3001Core\u5c64\u306eRepository\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\uff08PostgreSQL/Redis\uff09\u3084HTTP/Spring Boot\u3068\u306e\u7d71\u5408\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"3\u3064\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u30e2\u30b8\u30e5\u30fc\u30eb"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"idp-server-core-adapter"})," - Repository\u5b9f\u88c5\uff08PostgreSQL/Redis\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"idp-server-database"})," - \u30b9\u30ad\u30fc\u30de\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"idp-server-springboot-adapter"})," - Spring Boot\u7d71\u5408\u30fbHTTP/REST API"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"idp-server-core-adapter---repository\u5b9f\u88c5",children:"idp-server-core-adapter - Repository\u5b9f\u88c5"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/"}),"\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"Core\u5c64\u306eRepository\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u5b9f\u88c5\u3002\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PostgreSQL/MySQL\u5bfe\u5fdc"}),": Dialect\u5207\u308a\u66ff\u3048"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Redis Cache"}),": \u30bb\u30c3\u30b7\u30e7\u30f3\u30fb\u4e00\u6642\u30c7\u30fc\u30bf"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6697\u53f7\u5316"}),": \u6a5f\u5bc6\u30c7\u30fc\u30bf\u306e\u6697\u53f7\u5316\u30fb\u5fa9\u53f7\u5316"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30cf\u30c3\u30b7\u30e5\u5316"}),": \u30c8\u30fc\u30af\u30f3\u306eHMAC-SHA256\u30cf\u30c3\u30b7\u30e5"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",children:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/\n\u2514\u2500\u2500 datasource/\n    \u251c\u2500\u2500 token/              # \u30c8\u30fc\u30af\u30f3Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 identity/           # \u30e6\u30fc\u30b6\u30fcRepository\u5b9f\u88c5\n    \u251c\u2500\u2500 oidc/               # \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9aRepository\u5b9f\u88c5\n    \u251c\u2500\u2500 grant_management/   # \u30b0\u30e9\u30f3\u30c8\u7ba1\u7406Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 authentication/     # \u8a8d\u8a3cRepository\u5b9f\u88c5\n    \u251c\u2500\u2500 federation/         # \u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 config/             # \u8a2d\u5b9aRepository\u5b9f\u88c5\n    \u251c\u2500\u2500 ciba/               # CIBARepository\u5b9f\u88c5\n    \u251c\u2500\u2500 security/           # \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 verifiable_credentials/ # VC Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 multi_tenancy/      # \u30c6\u30ca\u30f3\u30c8\u30fb\u7d44\u7e54Repository\u5b9f\u88c5\n    \u251c\u2500\u2500 audit/              # \u76e3\u67fb\u30ed\u30b0Repository\u5b9f\u88c5\n    \u2514\u2500\u2500 cache/              # Redis\u30ad\u30e3\u30c3\u30b7\u30e5\u5b9f\u88c5\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"find libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource -type d -maxdepth 2"})]}),"\n",(0,t.jsx)(n.h3,{id:"datasource---sqlexecutor-\u30d1\u30bf\u30fc\u30f3",children:"DataSource - SqlExecutor \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h4,{id:"datasource---repository\u5b9f\u88c5",children:"DataSource - Repository\u5b9f\u88c5"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource/token/command/OAuthTokenCommandDataSource.java#L25",children:"OAuthTokenCommandDataSource.java:25"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * Repository\u5b9f\u88c5 - DataSource\u30d1\u30bf\u30fc\u30f3\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e25-47\u884c\u76ee\n */\npublic class OAuthTokenCommandDataSource implements OAuthTokenCommandRepository {\n\n  OAuthTokenSqlExecutor executor;  // \u2705 SQLExecutor\u306b\u59d4\u8b72\n  AesCipher aesCipher;             // \u2705 \u6697\u53f7\u5316\n  HmacHasher hmacHasher;           // \u2705 \u30cf\u30c3\u30b7\u30e5\u5316\n\n  public OAuthTokenCommandDataSource(\n      OAuthTokenSqlExecutor executor, AesCipher aesCipher, HmacHasher hmacHasher) {\n    this.executor = executor;\n    this.aesCipher = aesCipher;\n    this.hmacHasher = hmacHasher;\n  }\n\n  @Override\n  public void register(Tenant tenant, OAuthToken oAuthToken) {\n    // \u2705 SQLExecutor\u306b\u59d4\u8b72\uff08\u6697\u53f7\u5316\u30fb\u30cf\u30c3\u30b7\u30e5\u5316\u3092\u6e21\u3059\uff09\n    executor.insert(oAuthToken, aesCipher, hmacHasher);\n  }\n\n  @Override\n  public void delete(Tenant tenant, OAuthToken oAuthToken) {\n    executor.delete(oAuthToken, aesCipher, hmacHasher);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"sqlexecutor---sql\u5b9f\u884c",children:"SqlExecutor - SQL\u5b9f\u884c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * SQL\u5b9f\u884c - Dialect\u5225\u306b\u5b9f\u88c5\n */\npublic interface OAuthTokenSqlExecutor {\n  void insert(OAuthToken oAuthToken, AesCipher aesCipher, HmacHasher hmacHasher);\n  void delete(OAuthToken oAuthToken, AesCipher aesCipher, HmacHasher hmacHasher);\n}\n\n// PostgreSQL\u5b9f\u88c5\npublic class PostgresqlExecutor implements OAuthTokenSqlExecutor {\n  @Override\n  public void insert(OAuthToken oAuthToken, AesCipher aesCipher, HmacHasher hmacHasher) {\n    // PostgreSQL\u56fa\u6709\u306eSQL\u5b9f\u884c\n  }\n}\n\n// MySQL\u5b9f\u88c5\npublic class MysqlExecutor implements OAuthTokenSqlExecutor {\n  @Override\n  public void insert(OAuthToken oAuthToken, AesCipher aesCipher, HmacHasher hmacHasher) {\n    // MySQL\u56fa\u6709\u306eSQL\u5b9f\u884c\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u91cd\u8981\u539f\u5247",children:"\u91cd\u8981\u539f\u5247"}),"\n",(0,t.jsx)(n.h4,{id:"-\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u7981\u6b62",children:"\u274c \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u7981\u6b62"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: Repository\u5b9f\u88c5\u3067\u30d3\u30b8\u30cd\u30b9\u5224\u5b9a\npublic class ClientConfigurationDataSource implements ClientConfigurationQueryRepository {\n  @Override\n  public ClientConfiguration get(Tenant tenant, RequestedClientId clientId) {\n    ClientConfiguration config = executor.selectById(clientId);\n\n    // \u274c \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u306b\u6f0f\u308c\u3066\u3044\u308b\n    if ("ORGANIZER".equals(tenant.type())) {\n      config.setSpecialPermissions(true);\n    }\n\n    return config;\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u306e\u307f\npublic class ClientConfigurationDataSource implements ClientConfigurationQueryRepository {\n  @Override\n  public ClientConfiguration get(Tenant tenant, RequestedClientId clientId) {\n    // \u2705 \u30c7\u30fc\u30bf\u53d6\u5f97\u306e\u307f\n    return executor.selectById(clientId);\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539f\u5247"}),": \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64 = SELECT/INSERT/UPDATE/DELETE\u3001\u30c9\u30e1\u30a4\u30f3\u5c64 = \u696d\u52d9\u30eb\u30fc\u30eb"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u26a0\ufe0f \u30ec\u30a4\u30e4\u30fc\u8cac\u4efb\u9055\u53cd\u306e\u91cd\u8981\u6559\u8a13\u300d"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6697\u53f7\u5316\u30cf\u30c3\u30b7\u30e5\u5316",children:"\u6697\u53f7\u5316\u30fb\u30cf\u30c3\u30b7\u30e5\u5316"}),"\n",(0,t.jsx)(n.h4,{id:"aescipher---\u6697\u53f7\u5316",children:"AesCipher - \u6697\u53f7\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u6697\u53f7\u5316\nString encrypted = aesCipher.encrypt(plaintext);\n\n// \u5fa9\u53f7\u5316\nString plaintext = aesCipher.decrypt(encrypted);\n"})}),"\n",(0,t.jsx)(n.h4,{id:"hmachasher---\u30cf\u30c3\u30b7\u30e5\u5316",children:"HmacHasher - \u30cf\u30c3\u30b7\u30e5\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u30cf\u30c3\u30b7\u30e5\u751f\u6210\nString hash = hmacHasher.hash(data);\n\n// \u30cf\u30c3\u30b7\u30e5\u691c\u8a3c\nboolean valid = hmacHasher.verify(data, expectedHash);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u9014"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AesCipher"}),": \u6a5f\u5bc6\u30c7\u30fc\u30bf\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3001\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u7b49\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"HmacHasher"}),": \u30c8\u30fc\u30af\u30f3\u306e\u691c\u7d22\u30ad\u30fc\uff08\u4e00\u65b9\u5411\u30cf\u30c3\u30b7\u30e5\uff09"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"redis-cache\u5b9f\u88c5",children:"Redis Cache\u5b9f\u88c5"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource/cache/JedisCacheStore.java#L28",children:"JedisCacheStore.java:28"})]}),"\n",(0,t.jsx)(n.h4,{id:"jediscachestore---redis-\u30ad\u30e3\u30c3\u30b7\u30e5",children:"JedisCacheStore - Redis \u30ad\u30e3\u30c3\u30b7\u30e5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * Redis Cache\u5b9f\u88c5\uff08Jedis\u4f7f\u7528\uff09\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e28-80\u884c\u76ee\n */\npublic class JedisCacheStore implements CacheStore {\n  JedisPool jedisPool;\n  JsonConverter jsonConverter;\n  int timeToLiveSecond;\n\n  // \u2705 \u30ad\u30e3\u30c3\u30b7\u30e5\u4fdd\u5b58\n  @Override\n  public <T> void put(String key, T value) {\n    try (Jedis resource = jedisPool.getResource()) {\n      String json = jsonConverter.write(value);\n      resource.setex(key, timeToLiveSecond, json);  // TTL\u4ed8\u304d\u4fdd\u5b58\n    }\n  }\n\n  // \u2705 \u30ad\u30e3\u30c3\u30b7\u30e5\u53d6\u5f97\n  @Override\n  public <T> Optional<T> find(String key, Class<T> type) {\n    try (Jedis resource = jedisPool.getResource()) {\n      String json = resource.get(key);\n      if (json == null) {\n        return Optional.empty();\n      }\n      return Optional.of(jsonConverter.read(json, type));\n    }\n  }\n\n  // \u2705 \u30ad\u30e3\u30c3\u30b7\u30e5\u524a\u9664\n  @Override\n  public void delete(String key) {\n    try (Jedis resource = jedisPool.getResource()) {\n      resource.del(key);\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u5bfe\u8c61"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OAuthSession"}),": SSO\u30bb\u30c3\u30b7\u30e7\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AuthorizationRequest"}),": \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\uff08\u4e00\u6642\u4fdd\u5b58\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AuthenticationTransaction"}),": \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"JWKS"}),": \u516c\u958b\u9375\u30bb\u30c3\u30c8\uff08\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\uff09"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8a2d\u5b9a\u4f8b"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"cache.host=localhost\ncache.port=6379\ncache.max.total=100\ncache.max.idle=50\ncache.min.idle=10\ncache.ttl.seconds=3600\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"idp-server-database---\u30b9\u30ad\u30fc\u30de\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",children:"idp-server-database - \u30b9\u30ad\u30fc\u30de\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-database/"}),"\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9-1",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u3068\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\uff08Flyway\uff09\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DDL"}),": ",(0,t.jsx)(n.code,{children:"CREATE TABLE"}),"\u6587"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3"}),": Flyway\u306b\u3088\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u521d\u671f\u30c7\u30fc\u30bf"}),": \u57fa\u672c\u8a2d\u5b9a\u306e\u6295\u5165"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RLS"}),": Row Level Security\uff08PostgreSQL\uff09"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210",children:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"libs/idp-server-database/\n\u251c\u2500\u2500 postgresql/\n\u2502   \u251c\u2500\u2500 V1_0_0__init_lib.sql          # \u521d\u671f\u30b9\u30ad\u30fc\u30de\n\u2502   \u251c\u2500\u2500 V1_0_1__add_column.sql        # \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u4f8b\n\u2502   \u2514\u2500\u2500 operation/\n\u2502       \u2514\u2500\u2500 app_user.sql              # \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n\u251c\u2500\u2500 mysql/\n\u2502   \u2514\u2500\u2500 (PostgreSQL\u3068\u540c\u69d8\u306e\u69cb\u6210)\n\u2514\u2500\u2500 README.md                          # PostgreSQL\u2192MySQL DDL\u5909\u63db\u30eb\u30fc\u30eb\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:'find libs/idp-server-database -name "*.sql"'})]}),"\n",(0,t.jsx)(n.h3,{id:"flyway-\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3",children:"Flyway \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-database/README.md",children:"README.md"})]}),"\n",(0,t.jsx)(n.h4,{id:"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c",children:"\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# PostgreSQL\nDB_TYPE=postgresql ./gradlew flywayClean flywayMigrate\n\n# MySQL\nDB_TYPE=mysql ./gradlew flywayClean flywayMigrate\n\n# \u30ab\u30b9\u30bf\u30e0URL\nDB_TYPE=postgresql DB_URL=jdbc:postgresql://localhost:5432/custom_db ./gradlew flywayMigrate\n"})}),"\n",(0,t.jsx)(n.h4,{id:"postgresql--mysql-ddl\u5909\u63db\u30eb\u30fc\u30eb",children:"PostgreSQL \u2192 MySQL DDL\u5909\u63db\u30eb\u30fc\u30eb"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"PostgreSQL"}),(0,t.jsx)(n.th,{children:"MySQL"}),(0,t.jsx)(n.th,{children:"\u5099\u8003"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BOOLEAN"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TINYINT(1)"})}),(0,t.jsx)(n.td,{children:"1=TRUE, 0=FALSE"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"TIMESTAMP DEFAULT now()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DATETIME DEFAULT CURRENT_TIMESTAMP"})}),(0,t.jsx)(n.td,{children:"\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u30c7\u30d5\u30a9\u30eb\u30c8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"JSONB"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"JSON"})}),(0,t.jsx)(n.td,{children:"MySQL 5.7+"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"INET"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"VARCHAR(45)"})}),(0,t.jsx)(n.td,{children:"IPv6\u5bfe\u5fdcIP\u683c\u7d0d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SERIAL"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"INT AUTO_INCREMENT"})}),(0,t.jsx)(n.td,{children:"\u81ea\u52d5\u5897\u5206"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gen_random_uuid()"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UUID()"})}),(0,t.jsx)(n.td,{children:"UUID\u751f\u6210"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"UUID"})," type"]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"CHAR(36)"})}),(0,t.jsx)(n.td,{children:"\u6587\u5b57\u5217\u3068\u3057\u3066\u683c\u7d0d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UNIQUE (...) WHERE ..."})}),(0,t.jsx)(n.td,{children:"Not supported"}),(0,t.jsx)(n.td,{children:"\u30c8\u30ea\u30ac\u30fc\u3067\u4ee3\u66ff"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-database/README.md#L24-L46",children:"README.md:24-46"})]}),"\n",(0,t.jsx)(n.h4,{id:"docker-flyway-migrator",children:"Docker Flyway Migrator"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Docker \u30a4\u30e1\u30fc\u30b8\u30d3\u30eb\u30c9\ndocker build -f ./Dockerfile-flyway -t idp-flyway-migrator:latest .\n\n# \u30b3\u30f3\u30c6\u30ca\u5b9f\u884c\ndocker run --rm \\\n  -e DB_TYPE=postgresql \\\n  -e DB_URL=jdbc:postgresql://host.docker.internal:5432/idpserver \\\n  -e DB_USER=idp_app_user \\\n  -e DB_PASSWORD=secret \\\n  idp-flyway-migrator:latest migrate\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4e3b\u8981\u30c6\u30fc\u30d6\u30eb",children:"\u4e3b\u8981\u30c6\u30fc\u30d6\u30eb"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- \u30c6\u30ca\u30f3\u30c8\nCREATE TABLE tenant (\n  id UUID PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  type VARCHAR(50) NOT NULL,\n  attributes JSONB\n);\n\n-- \u30e6\u30fc\u30b6\u30fc\nCREATE TABLE idp_user (\n  id UUID PRIMARY KEY,\n  sub VARCHAR(255) NOT NULL,\n  tenant_id UUID NOT NULL REFERENCES tenant(id)\n);\n\n-- \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a\nCREATE TABLE client_configuration (\n  id UUID PRIMARY KEY,\n  client_id VARCHAR(255) NOT NULL,\n  tenant_id UUID NOT NULL REFERENCES tenant(id)\n);\n\n-- \u7d44\u7e54\nCREATE TABLE organization (\n  id UUID PRIMARY KEY,\n  name VARCHAR(255) NOT NULL\n);\n\n-- \u7d44\u7e54-\u30c6\u30ca\u30f3\u30c8\u95a2\u4fc2\nCREATE TABLE organization_tenants (\n  organization_id UUID REFERENCES organization(id),\n  tenant_id UUID REFERENCES tenant(id),\n  PRIMARY KEY (organization_id, tenant_id)\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-database/postgresql/V1_0_0__init_lib.sql"})]}),"\n",(0,t.jsx)(n.h3,{id:"row-level-security-rls",children:"Row Level Security (RLS)"}),"\n",(0,t.jsx)(n.p,{children:"PostgreSQL\u3067\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2\u3092\u5b9f\u73fe\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- RLS\u6709\u52b9\u5316\nALTER TABLE client_configuration ENABLE ROW LEVEL SECURITY;\n\n-- \u30dd\u30ea\u30b7\u30fc\u4f5c\u6210\nCREATE POLICY tenant_isolation ON client_configuration\n  USING (tenant_id = current_setting('app.tenant_id')::UUID);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u52d5\u4f5c"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["TransactionManager\u3067",(0,t.jsx)(n.code,{children:"SET LOCAL app.tenant_id = 'xxx'"}),"\u3092\u5b9f\u884c"]}),"\n",(0,t.jsx)(n.li,{children:"RLS\u30dd\u30ea\u30b7\u30fc\u304c\u81ea\u52d5\u9069\u7528"}),"\n",(0,t.jsx)(n.li,{children:"\u30c6\u30ca\u30f3\u30c8ID\u304c\u4e00\u81f4\u3059\u308b\u884c\u306e\u307f\u30a2\u30af\u30bb\u30b9\u53ef\u80fd"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": Issue #672\uff08SQL Injection\u4fee\u6b63\uff09\u3001",(0,t.jsx)(n.a,{href:"../content_08_ops/ops-02-deployment.md",children:"deployment.md"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"idp-server-springboot-adapter---spring-boot\u7d71\u5408",children:"idp-server-springboot-adapter - Spring Boot\u7d71\u5408"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-springboot-adapter/"}),"\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9-2",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"Spring Boot\u7d71\u5408\u30fbHTTP/REST API\u5b9f\u88c5\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Controller"}),": HTTP \u2192 EntryService\u547c\u3073\u51fa\u3057"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration"}),": Spring Bean\u5b9a\u7fa9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Exception Handler"}),": HTTP \u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u5909\u63db"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Security"}),": Spring Security\u7d71\u5408"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"controller-\u30d1\u30bf\u30fc\u30f3",children:"Controller \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(66449).A+"#L37-L69",children:"ClientManagementV1Api.java:37-69"})]}),"\n",(0,t.jsx)(n.h4,{id:"\u547d\u540d\u898f\u5247-domainmanagementv1api",children:"\u547d\u540d\u898f\u5247: {Domain}ManagementV1Api"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * Management API Controller\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e37-69\u884c\u76ee\n */\n@RestController\n@RequestMapping("/v1/management/tenants/{tenant-id}/clients")\npublic class ClientManagementV1Api implements ParameterTransformable {\n\n  ClientManagementApi clientManagementApi;  // \u2705 control-plane API\n\n  public ClientManagementV1Api(IdpServerApplication idpServerApplication) {\n    this.clientManagementApi = idpServerApplication.clientManagementApi();\n  }\n\n  @PostMapping\n  public ResponseEntity<?> post(\n      @AuthenticationPrincipal OperatorPrincipal operatorPrincipal,  // \u2705 Spring Security\u7d71\u5408\n      @PathVariable("tenant-id") TenantIdentifier tenantIdentifier,  // \u2705 \u578b\u5b89\u5168\n      @RequestBody(required = false) Map<String, Object> body,\n      @RequestParam(value = "dry_run", required = false, defaultValue = "false") boolean dryRun,\n      HttpServletRequest httpServletRequest) {\n\n    // \u2705 Phase 1: RequestAttributes\u5909\u63db\n    RequestAttributes requestAttributes = transform(httpServletRequest);\n\n    // \u2705 Phase 2: Control-Plane API\u547c\u3073\u51fa\u3057\n    ClientManagementResponse response =\n        clientManagementApi.create(\n            tenantIdentifier,\n            operatorPrincipal.getUser(),\n            operatorPrincipal.getOAuthToken(),\n            new ClientRegistrationRequest(body),\n            requestAttributes,\n            dryRun);\n\n    // \u2705 Phase 3: \u30ec\u30b9\u30dd\u30f3\u30b9\u751f\u6210\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.add("content-type", "application/json");\n    return new ResponseEntity<>(\n        response.contents(),\n        httpHeaders,\n        HttpStatus.valueOf(response.statusCode()));\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u547d\u540d\u898f\u5247"}),": ",(0,t.jsx)(n.code,{children:"{'{Domain}ManagementV1Api'}"})," (\u4f8b: ",(0,t.jsx)(n.code,{children:"ClientManagementV1Api"}),", ",(0,t.jsx)(n.code,{children:"UserManagementV1Api"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"implements ParameterTransformable"}),": HttpServletRequest \u2192 RequestAttributes\u5909\u63db"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"@AuthenticationPrincipal OperatorPrincipal"}),": Spring Security\u3067\u8a8d\u8a3c\u6e08\u307f\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u53d6\u5f97"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"TenantIdentifier\u578b"}),": ",(0,t.jsx)(n.code,{children:'@PathVariable("tenant-id")'})," \u3067\u578b\u5b89\u5168\u306a\u30d1\u30b9\u5909\u6570"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Control-Plane API\u547c\u3073\u51fa\u3057"}),": EntryService\u3067\u306f\u306a\u304f\u3001control-plane\u5b9a\u7fa9\u306eAPI\u3092\u4f7f\u7528"]}),"\n",(0,t.jsxs)(n.li,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"\u30ed\u30b8\u30c3\u30af\u7981\u6b62"}),": HTTP \u2192 DTO\u5909\u63db\u306e\u307f\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f\u4e00\u5207\u542b\u307e\u306a\u3044"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9\u306e\u660e\u78ba\u306a\u5206\u96e2"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Controller (V1Api)\n  \u2193 HTTP \u2192 RequestAttributes\u5909\u63db\nControl-Plane API\n  \u2193 EntryService\u547c\u3073\u51fa\u3057\uff08Proxy\u3067\u30e9\u30c3\u30d7\uff09\nEntryService (UseCase\u5c64)\n  \u2193 Handler/Service\u547c\u3073\u51fa\u3057\nCore\u5c64\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Configuration\npublic class DataSourceConfiguration {\n\n  @Bean\n  public ClientConfigurationQueryRepository clientConfigurationQueryRepository(\n      DataSource dataSource) {\n    ClientConfigurationSqlExecutor executor = new PostgresqlExecutor(dataSource);\n    return new ClientConfigurationQueryDataSource(executor);\n  }\n\n  @Bean\n  public ClientConfigurationCommandRepository clientConfigurationCommandRepository(\n      DataSource dataSource) {\n    ClientConfigurationSqlExecutor executor = new PostgresqlExecutor(dataSource);\n    return new ClientConfigurationCommandDataSource(executor);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"exception-handler",children:"Exception Handler"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(86447).A+"#L34",children:"ApiExceptionHandler.java:34"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * \u30b0\u30ed\u30fc\u30d0\u30eb\u4f8b\u5916\u30cf\u30f3\u30c9\u30e9\u30fc\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e34-100\u884c\u76ee\n */\n@ControllerAdvice\npublic class ApiExceptionHandler {\n\n  LoggerWrapper log = LoggerWrapper.getLogger(ApiExceptionHandler.class);\n\n  // \u2705 BadRequestException \u2192 400\n  @ExceptionHandler(BadRequestException.class)\n  public ResponseEntity<?> handleException(BadRequestException exception) {\n    log.warn(exception.getMessage(), exception);\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.BAD_REQUEST);\n  }\n\n  // \u2705 UnauthorizedException \u2192 401\n  @ExceptionHandler(UnauthorizedException.class)\n  public ResponseEntity<?> handleException(UnauthorizedException exception) {\n    log.warn(exception.getMessage());\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.UNAUTHORIZED);\n  }\n\n  // \u2705 ForbiddenException \u2192 403\n  @ExceptionHandler(ForbiddenException.class)\n  public ResponseEntity<?> handleException(ForbiddenException exception) {\n    log.warn(exception.getMessage());\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.FORBIDDEN);\n  }\n\n  // \u2705 NotFoundException \u2192 404\n  @ExceptionHandler(NotFoundException.class)\n  public ResponseEntity<?> handleException(NotFoundException exception) {\n    log.warn(exception.getMessage());\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.NOT_FOUND);\n  }\n\n  // \u2705 ConflictException \u2192 409\n  @ExceptionHandler(ConflictException.class)\n  public ResponseEntity<?> handleException(ConflictException exception) {\n    log.warn(exception.getMessage());\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.CONFLICT);\n  }\n\n  // \u2705 SqlDuplicateKeyException \u2192 409\n  @ExceptionHandler(SqlDuplicateKeyException.class)\n  public ResponseEntity<?> handleException(SqlDuplicateKeyException exception) {\n    log.warn(exception.getMessage());\n    Map<String, String> response =\n        Map.of("error", "duplicate_key", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.CONFLICT);\n  }\n\n  // \u2705 HttpMethodNotSupported \u2192 405\n  @ExceptionHandler(HttpRequestMethodNotSupportedException.class)\n  public ResponseEntity<?> handleException(HttpRequestMethodNotSupportedException exception) {\n    log.warn(exception.getMessage(), exception);\n    Map<String, String> response =\n        Map.of("error", "invalid_request", "error_description", exception.getMessage());\n    return new ResponseEntity<>(response, HttpStatus.METHOD_NOT_ALLOWED);\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4f8b\u5916 \u2192 HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u30de\u30c3\u30d4\u30f3\u30b0"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u4f8b\u5916"}),(0,t.jsx)(n.th,{children:"HTTP\u30b9\u30c6\u30fc\u30bf\u30b9"}),(0,t.jsx)(n.th,{children:"\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"BadRequestException"})}),(0,t.jsx)(n.td,{children:"400 Bad Request"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UnauthorizedException"})}),(0,t.jsx)(n.td,{children:"401 Unauthorized"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ForbiddenException"})}),(0,t.jsx)(n.td,{children:"403 Forbidden"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NotFoundException"})}),(0,t.jsx)(n.td,{children:"404 Not Found"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ConflictException"})}),(0,t.jsx)(n.td,{children:"409 Conflict"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SqlDuplicateKeyException"})}),(0,t.jsx)(n.td,{children:"409 Conflict"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"duplicate_key"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"HttpRequestMethodNotSupportedException"})}),(0,t.jsx)(n.td,{children:"405 Method Not Allowed"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"invalid_request"})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u30d5\u30a3\u30eb\u30bf\u30fc",children:"\u30d5\u30a3\u30eb\u30bf\u30fc"}),"\n",(0,t.jsx)(n.h4,{id:"managementapifilter---\u7ba1\u7406api\u8a8d\u8a3c",children:"ManagementApiFilter - \u7ba1\u7406API\u8a8d\u8a3c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Component\npublic class ManagementApiFilter extends OncePerRequestFilter {\n\n  @Override\n  protected void doFilterInternal(\n      HttpServletRequest request,\n      HttpServletResponse response,\n      FilterChain filterChain) {\n\n    // 1. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u691c\u8a3c\n    String authorization = request.getHeader("Authorization");\n    OAuthToken oAuthToken = validateAccessToken(authorization);\n\n    // 2. \u6a29\u9650\u691c\u8a3c\n    User operator = extractOperator(oAuthToken);\n\n    // 3. \u30ea\u30af\u30a8\u30b9\u30c8\u5c5e\u6027\u306b\u8a2d\u5b9a\n    request.setAttribute("operator", operator);\n    request.setAttribute("oAuthToken", oAuthToken);\n\n    filterChain.doFilter(request, response);\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"orgmanagementfilter---\u7d44\u7e54\u7ba1\u7406api\u8a8d\u8a3c",children:"OrgManagementFilter - \u7d44\u7e54\u7ba1\u7406API\u8a8d\u8a3c"}),"\n",(0,t.jsx)(n.p,{children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI\u306e\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"dynamiccorsfilter---cors\u52d5\u7684\u8a2d\u5b9a",children:"DynamicCorsFilter - CORS\u52d5\u7684\u8a2d\u5b9a"}),"\n",(0,t.jsx)(n.p,{children:"\u30c6\u30ca\u30f3\u30c8\u56fa\u6709\u306eCORS\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u9069\u7528\u3002"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(63686).A+"",children:"DynamicCorsFilter.java"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,t.jsx)(n.h3,{id:"adapter\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",children:"Adapter\u5c64\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DataSource - SqlExecutor \u30d1\u30bf\u30fc\u30f3"}),": Repository\u5b9f\u88c5\u30922\u5c64\u306b\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u7981\u6b62"}),": \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u306f\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u306e\u307f"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6697\u53f7\u5316\u30fb\u30cf\u30c3\u30b7\u30e5\u5316"}),": AesCipher\uff08\u6697\u53f7\u5316\uff09\u3001HmacHasher\uff08\u30cf\u30c3\u30b7\u30e5\u5316\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Row Level Security"}),": PostgreSQL\u3067\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"V1Api = \u5909\u63db\u306e\u307f"}),": HTTP \u2192 RequestAttributes\u5909\u63db\u3001Control-Plane API\u306b\u59d4\u8b72"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-30-extensions",children:"\u62e1\u5f35\u6a5f\u80fd\u5c64\uff08CIBA, FAPI, IDA, PKCE, VC\uff09"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-40-authentication-federation",children:"\u8a8d\u8a3c\u30fb\u9023\u643a\u5c64\uff08Authentication, Federation, WebAuthn\uff09"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event",children:"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64\uff08Notification, Security Event\uff09"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",children:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74"}),"\n",(0,t.jsx)(n.h3,{id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",children:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63"}),"\n",(0,t.jsx)(n.h4,{id:"\u4fee\u6b631-controller-\u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u5168\u9762\u6539\u8a02-394-464\u884c\u76ee",children:"\u4fee\u6b631: Controller \u30d1\u30bf\u30fc\u30f3\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u5168\u9762\u6539\u8a02 (394-464\u884c\u76ee)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u554f\u984c"}),": \u60f3\u50cf\u3067\u66f8\u304b\u308c\u305fController\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3001\u5b9f\u969b\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u306e\u91cd\u5927\u306a\u4e56\u96e2"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u8aa4\u308a: \u5b58\u5728\u3057\u306a\u3044\u30af\u30e9\u30b9\u540d\u30fb\u30d1\u30bf\u30fc\u30f3\n@RestController\n@RequestMapping("/v1/management")\npublic class ClientManagementController {  // \u274c \u547d\u540d\u898f\u5247\u9055\u53cd\n  ClientManagementEntryService entryService;  // \u274c \u76f4\u63a5EntryService\u4f7f\u7528\u306f\u8aa4\u308a\n\n  @PostMapping("/tenants/{tenantId}/clients")\n  public ResponseEntity<Map<String, Object>> create(\n      @PathVariable String tenantId,  // \u274c String\u578b\uff08\u578b\u5b89\u5168\u6027\u306a\u3057\uff09\n      @RequestHeader("Authorization") String authorization,  // \u274c \u624b\u52d5\u30d1\u30fc\u30b9\u60f3\u5b9a\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u2705 \u5b9f\u88c5: \u5b9f\u969b\u306e\u30af\u30e9\u30b9\u540d\u30fb\u30d1\u30bf\u30fc\u30f3\n@RestController\n@RequestMapping("/v1/management/tenants/{tenant-id}/clients")\npublic class ClientManagementV1Api implements ParameterTransformable {  // \u2705 \u547d\u540d\u898f\u5247: *V1Api\n  ClientManagementApi clientManagementApi;  // \u2705 control-plane API\u4f7f\u7528\n\n  @PostMapping\n  public ResponseEntity<?> post(\n      @AuthenticationPrincipal OperatorPrincipal operatorPrincipal,  // \u2705 Spring Security\u7d71\u5408\n      @PathVariable("tenant-id") TenantIdentifier tenantIdentifier,  // \u2705 \u578b\u5b89\u5168\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8ffd\u52a0\u5185\u5bb9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u547d\u540d\u898f\u5247: ",(0,t.jsx)(n.code,{children:"{'{Domain}ManagementV1Api'}"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"implements ParameterTransformable"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@AuthenticationPrincipal OperatorPrincipal"})," \u30d1\u30bf\u30fc\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TenantIdentifier"})," \u578b\u5b89\u5168\u306a\u30d1\u30b9\u5909\u6570"]}),"\n",(0,t.jsx)(n.li,{children:"Controller \u2192 Control-Plane API \u2192 EntryService \u306e\u968e\u5c64\u69cb\u9020"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u691c\u8a3c"}),": ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(66449).A+"#L37-L69",children:"ClientManagementV1Api.java:37-69"})]}),"\n",(0,t.jsx)(n.h4,{id:"\u4fee\u6b632-\u307e\u3068\u3081\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u7528\u8a9e\u4fee\u6b63-621-629\u884c\u76ee",children:"\u4fee\u6b632: \u307e\u3068\u3081\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u7528\u8a9e\u4fee\u6b63 (621-629\u884c\u76ee)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"5. **Controller = \u5909\u63db\u306e\u307f**: HTTP \u2192 DTO\u5909\u63db\u3001EntryService\u306b\u59d4\u8b72\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"5. **V1Api = \u5909\u63db\u306e\u307f**: HTTP \u2192 RequestAttributes\u5909\u63db\u3001Control-Plane API\u306b\u59d4\u8b72\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7406\u7531"}),": Controller\u3067\u306f\u306a\u304f",(0,t.jsx)(n.code,{children:"*V1Api"}),"\u304c\u6b63\u3057\u3044\u547d\u540d\u3001EntryService\u3067\u306f\u306a\u304fControl-Plane API\u3078\u306e\u59d4\u8b72\u304c\u6b63\u78ba"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6b63\u306e\u539f\u5247",children:"\u4fee\u6b63\u306e\u539f\u5247"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CLAUDE.md\u300c\u60f3\u50cf\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\u9632\u6b62\u300d\u306b\u57fa\u3065\u304f\u4fee\u6b63"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b9f\u88c5\u30d5\u30a1\u30fc\u30b9\u30c8"}),": \u5b9f\u969b\u306eController\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u547d\u540d\u898f\u5247\u306e\u6b63\u78ba\u6027"}),": ",(0,t.jsx)(n.code,{children:"*V1Api"})," \u306e\u5fb9\u5e95"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u6b63\u78ba\u6027"}),": Controller \u2192 Control-Plane API \u2192 EntryService \u306e\u968e\u5c64"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Spring Security\u7d71\u5408"}),": ",(0,t.jsx)(n.code,{children:"@AuthenticationPrincipal"})," \u306e\u6b63\u3057\u3044\u4f7f\u7528"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"libs/idp-server-core-adapter/src/main/java/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"libs/idp-server-springboot-adapter/src/main/java/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"libs/idp-server-database/postgresql/V1_0_0__init_lib.sql"})}),"\n",(0,t.jsx)(n.li,{children:"CLAUDE.md\u300c\u26a0\ufe0f \u30ec\u30a4\u30e4\u30fc\u8cac\u4efb\u9055\u53cd\u306e\u91cd\u8981\u6559\u8a13\u300d\u300c4\u5c64\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u300d"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(36536).A+"",children:"OAuthTokenCommandDataSource.java"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(66449).A+"",children:"ClientManagementV1Api.java"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(86447).A+"",children:"ApiExceptionHandler.java"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65b9\u6cd5"}),": ",(0,t.jsx)(n.code,{children:"find libs/idp-server-core-adapter/src/main/java/org/idp/server/core/adapters/datasource -type d -maxdepth 2"}),"\n",(0,t.jsx)(n.strong,{children:"\u30ec\u30d3\u30e5\u30fc\u5b9f\u65bd"}),": 2025-10-12 - AI\u958b\u767a\u8005\u5411\u3051\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u54c1\u8cea\u6539\u5584\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},36536:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/files/OAuthTokenCommandDataSource-8b13e8ba5b8873027bab4bb6b49a94f5.java"},86447:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/files/ApiExceptionHandler-fefbbfcb950bbfc7f8d1374e92368495.java"},63686:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/files/DynamicCorsFilter-9ffc8527e120d46725c833c23d47ff9b.java"},66449:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/files/ClientManagementV1Api-5298c592179a0fd1831da5723aa6a25f.java"},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var i=r(96540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);