"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3795],{56228:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>j,frontMatter:()=>d,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"content_03_concepts/concept-22-tenant-statistics","title":"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406","description":"idp-server\u306e\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u6982\u5ff5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002","source":"@site/docs/content_03_concepts/concept-22-tenant-statistics.md","sourceDirName":"content_03_concepts","slug":"/content_03_concepts/concept-22-tenant-statistics","permalink":"/idp-server/docs/content_03_concepts/concept-22-tenant-statistics","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_03_concepts/concept-22-tenant-statistics.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u30b9\u30ad\u30fc\u30de\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\uff08JSON Schema\uff09","permalink":"/idp-server/docs/content_03_concepts/concept-21-schema-validation"},"next":{"title":"\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u7ba1\u7406\u306e\u57fa\u790e","permalink":"/idp-server/docs/content_03_concepts/basic/basic-01-identity-management-basics"}}');var l=n(74848),i=n(28453);const d={},c="\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406",r={},x=[{value:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u3068\u306f",id:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u3068\u306f",level:2},{value:"\u76ee\u7684",id:"\u76ee\u7684",level:3},{value:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9078\u629e",id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9078\u629e",level:2},{value:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5 vs \u30d0\u30c3\u30c1\u51e6\u7406",id:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5-vs-\u30d0\u30c3\u30c1\u51e6\u7406",level:3},{value:"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",id:"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",level:2},{value:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u6210",id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u6210",level:3},{value:"\u30c6\u30fc\u30d6\u30eb\u8a73\u7d30",id:"\u30c6\u30fc\u30d6\u30eb\u8a73\u7d30",level:3},{value:"statistics_monthly",id:"statistics_monthly",level:4},{value:"statistics_daily_users",id:"statistics_daily_users",level:4},{value:"statistics_monthly_users",id:"statistics_monthly_users",level:4},{value:"\u7d71\u8a08\u66f4\u65b0\u30d5\u30ed\u30fc",id:"\u7d71\u8a08\u66f4\u65b0\u30d5\u30ed\u30fc",level:2},{value:"SecurityEventHandler\u306b\u3088\u308b\u7d71\u8a08\u53ce\u96c6",id:"securityeventhandler\u306b\u3088\u308b\u7d71\u8a08\u53ce\u96c6",level:3},{value:"\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5224\u5b9a",id:"\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5224\u5b9a",level:3},{value:"\u7d71\u8a08\u66f4\u65b0\u51e6\u7406\u306e\u8a73\u7d30",id:"\u7d71\u8a08\u66f4\u65b0\u51e6\u7406\u306e\u8a73\u7d30",level:3},{value:"\u30e1\u30c8\u30ea\u30af\u30b9\u7a2e\u5225",id:"\u30e1\u30c8\u30ea\u30af\u30b9\u7a2e\u5225",level:2},{value:"\u53ce\u96c6\u3055\u308c\u308b\u30e1\u30c8\u30ea\u30af\u30b9",id:"\u53ce\u96c6\u3055\u308c\u308b\u30e1\u30c8\u30ea\u30af\u30b9",level:3},{value:"\u30ab\u30a6\u30f3\u30c8\u30d1\u30bf\u30fc\u30f3",id:"\u30ab\u30a6\u30f3\u30c8\u30d1\u30bf\u30fc\u30f3",level:3},{value:"\u30d1\u30bf\u30fc\u30f31: \u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30a6\u30f3\u30bf\u30fc",id:"\u30d1\u30bf\u30fc\u30f31-\u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30a6\u30f3\u30bf\u30fc",level:4},{value:"\u30d1\u30bf\u30fc\u30f32: \u30e6\u30cb\u30fc\u30af\u30ab\u30a6\u30f3\u30bf\u30fc\uff08DAU/MAU\uff09",id:"\u30d1\u30bf\u30fc\u30f32-\u30e6\u30cb\u30fc\u30af\u30ab\u30a6\u30f3\u30bf\u30fcdaumau",level:4},{value:"\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u51e6\u7406",id:"\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u51e6\u7406",level:2},{value:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5b9f\u88c5",id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5b9f\u88c5",level:2},{value:"PostgreSQL vs MySQL",id:"postgresql-vs-mysql",level:3},{value:"UPSERT \u306b\u3088\u308b\u5897\u5206\u66f4\u65b0",id:"upsert-\u306b\u3088\u308b\u5897\u5206\u66f4\u65b0",level:3},{value:"\u7ba1\u7406API",id:"\u7ba1\u7406api",level:2},{value:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",level:4},{value:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",level:4},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf",level:3},{value:"\u30ec\u30b9\u30dd\u30f3\u30b9",id:"\u30ec\u30b9\u30dd\u30f3\u30b9",level:3},{value:"\u5fc5\u8981\u306a\u6a29\u9650",id:"\u5fc5\u8981\u306a\u6a29\u9650",level:3},{value:"\u30c7\u30fc\u30bf\u4fdd\u6301\u6226\u7565",id:"\u30c7\u30fc\u30bf\u4fdd\u6301\u6226\u7565",level:2},{value:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406",id:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406",level:3},{value:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570",id:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570",level:3},{value:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e\u4e8b\u9805",id:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e\u4e8b\u9805",level:2},{value:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",id:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",level:3},{value:"\u5897\u5206\u66f4\u65b0\u306b\u3088\u308b\u8ca0\u8377\u8efd\u6e1b",id:"\u5897\u5206\u66f4\u65b0\u306b\u3088\u308b\u8ca0\u8377\u8efd\u6e1b",level:3},{value:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",id:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",level:2},{value:"\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc\u306e\u6319\u52d5",id:"\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc\u306e\u6319\u52d5",level:3},{value:"\u76e3\u8996\u3059\u3079\u304d\u6307\u6a19",id:"\u76e3\u8996\u3059\u3079\u304d\u6307\u6a19",level:3},{value:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9",id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9",level:2},{value:"1. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a",id:"1-\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a",level:3},{value:"2. MAU\u30d9\u30fc\u30b9\u8ab2\u91d1",id:"2-mau\u30d9\u30fc\u30b9\u8ab2\u91d1",level:3},{value:"3. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996",id:"3-\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996",level:3},{value:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406",children:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406"})}),"\n",(0,l.jsx)(t.p,{children:"idp-server\u306e\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u306e\u6982\u5ff5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.h2,{id:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u3068\u306f",children:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u3068\u306f"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\uff08Tenant Statistics\uff09"})," \u3068\u306f\u3001\u5404\u30c6\u30ca\u30f3\u30c8\u306e\u30e6\u30fc\u30b6\u30fc\u6d3b\u52d5\u3084\u30b7\u30b9\u30c6\u30e0\u5229\u7528\u72b6\u6cc1\u3092\u6708\u6b21\u30fb\u65e5\u6b21\u3067\u96c6\u8a08\u30fb\u5206\u6790\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002"]}),"\n",(0,l.jsx)(t.mermaid,{value:"flowchart LR\n    SE[Security Event] --\x3e|\u30a4\u30d9\u30f3\u30c8\u767a\u884c| HANDLER[SecurityEventHandler]\n    HANDLER --\x3e|\u96c6\u8a08| MONTHLY[\u6708\u6b21\u30e1\u30c8\u30ea\u30af\u30b9]\n    HANDLER --\x3e|\u91cd\u8907\u6392\u9664| DAU[DAU / MAU]\n    MONTHLY --\x3e|API\u53d6\u5f97| DASHBOARD[\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9]\n    DAU --\x3e|\u30ab\u30a6\u30f3\u30c8| MONTHLY"}),"\n",(0,l.jsx)(t.h3,{id:"\u76ee\u7684",children:"\u76ee\u7684"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u5229\u7528\u72b6\u6cc1\u306e\u53ef\u8996\u5316"}),": DAU\uff08\u65e5\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff09\u3001MAU\uff08\u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff09\u3001\u30ed\u30b0\u30a4\u30f3\u6570\u306a\u3069\u306e\u628a\u63e1"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u5bb9\u91cf\u8a08\u753b"}),": \u30c6\u30ca\u30f3\u30c8\u3054\u3068\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1\u306e\u8ffd\u8de1"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u8ab2\u91d1\u57fa\u76e4"}),": MAU\u30d9\u30fc\u30b9\u306e\u8ab2\u91d1\u30c7\u30fc\u30bf\u63d0\u4f9b"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996"}),": \u7570\u5e38\u306a\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u691c\u77e5"]}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9078\u629e",children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9078\u629e"}),"\n",(0,l.jsx)(t.h3,{id:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5-vs-\u30d0\u30c3\u30c1\u51e6\u7406",children:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5 vs \u30d0\u30c3\u30c1\u51e6\u7406"}),"\n",(0,l.jsxs)(t.p,{children:["idp-server\u3067\u306f\u3001\u30d0\u30c3\u30c1\u51e6\u7406\u3067\u306f\u306a\u304f",(0,l.jsx)(t.strong,{children:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306b\u3088\u308b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u7d71\u8a08\u66f4\u65b0"}),"\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30a2\u30d7\u30ed\u30fc\u30c1"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u7279\u5fb4"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30e1\u30ea\u30c3\u30c8"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30c7\u30e1\u30ea\u30c3\u30c8"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"\u30d0\u30c3\u30c1\u51e6\u7406"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9a\u671f\u7684\u306b\u904e\u53bb\u30c7\u30fc\u30bf\u3092\u96c6\u8a08"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30b7\u30f3\u30d7\u30eb"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c7\u30fc\u30bf\u9045\u5ef6\u3001\u9ad8\u8ca0\u8377"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306b\u5897\u5206\u66f4\u65b0"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3001\u4f4e\u8ca0\u8377"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9f\u88c5\u8907\u96d1"})]})]})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u3092\u9078\u629e\u3059\u308b\u7406\u7531"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u306f\u65e2\u306b\u767a\u884c\u3055\u308c\u3066\u3044\u308b\uff08\u8ffd\u52a0\u30b3\u30b9\u30c8\u5c0f\uff09"}),"\n",(0,l.jsx)(t.li,{children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306a\u53ef\u8996\u5316\u304c\u53ef\u80fd"}),"\n",(0,l.jsx)(t.li,{children:"\u5897\u5206\u66f4\u65b0\u306e\u305f\u3081\u8a08\u7b97\u30b3\u30b9\u30c8\u304c\u4f4e\u3044"}),"\n",(0,l.jsx)(t.li,{children:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u6574\u5408\u6027\u3092\u4fdd\u8a3c\u3067\u304d\u308b"}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\u306e\u8907\u96d1\u6027\u5897\u52a0"}),"\n",(0,l.jsx)(t.li,{children:"\u7d71\u8a08\u66f4\u65b0\u5931\u6557\u6642\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u5fc5\u8981"}),"\n",(0,l.jsx)(t.li,{children:"\u305f\u3060\u3057\u3001\u8a8d\u8a3c\u30d5\u30ed\u30fc\u3068\u7d71\u8a08\u66f4\u65b0\u306f\u758e\u7d50\u5408\uff08\u7d71\u8a08\u5931\u6557\u3067\u3082\u8a8d\u8a3c\u306f\u6210\u529f\uff09"}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb",children:"\u30c7\u30fc\u30bf\u30e2\u30c7\u30eb"}),"\n",(0,l.jsx)(t.h3,{id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u6210",children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u69cb\u6210"}),"\n",(0,l.jsx)(t.p,{children:"\u7d71\u8a08\u30c7\u30fc\u30bf\u306f3\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u7ba1\u7406\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.mermaid,{value:'erDiagram\n    statistics_monthly ||--o{ statistics_daily_users : "tracks DAU"\n    statistics_monthly ||--o{ statistics_monthly_users : "tracks MAU"\n    statistics_monthly {\n        uuid id PK\n        uuid tenant_id\n        char_7 stat_month\n        jsonb monthly_summary\n        jsonb daily_metrics\n        timestamp created_at\n        timestamp updated_at\n    }\n    statistics_daily_users {\n        uuid tenant_id PK\n        date stat_date PK\n        uuid user_id PK\n        timestamp created_at\n    }\n    statistics_monthly_users {\n        uuid tenant_id PK\n        char_7 stat_month PK\n        uuid user_id PK\n        timestamp created_at\n    }'}),"\n",(0,l.jsx)(t.h3,{id:"\u30c6\u30fc\u30d6\u30eb\u8a73\u7d30",children:"\u30c6\u30fc\u30d6\u30eb\u8a73\u7d30"}),"\n",(0,l.jsx)(t.h4,{id:"statistics_monthly",children:"statistics_monthly"}),"\n",(0,l.jsx)(t.p,{children:"\u6708\u6b21\u7d71\u8a08\u306e\u30e1\u30a4\u30f3\u30c6\u30fc\u30d6\u30eb\u30021\u30c6\u30ca\u30f3\u30c8\u30fb1\u6708 = 1\u30ec\u30b3\u30fc\u30c9\u3067\u7ba1\u7406\u3002"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30ab\u30e9\u30e0"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u578b"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d71\u8a08\u30ec\u30b3\u30fc\u30c9ID"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"tenant_id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c6\u30ca\u30f3\u30c8\u8b58\u5225\u5b50"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"stat_month"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"CHAR(7)"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d71\u8a08\u5bfe\u8c61\u6708\uff08YYYY-MM\u5f62\u5f0f\u3001\u4f8b: 2025-01\uff09"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"monthly_summary"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"JSONB"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u6708\u6b21\u96c6\u8a08\u30e1\u30c8\u30ea\u30af\u30b9"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"daily_metrics"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"JSONB"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u5225\u30e1\u30c8\u30ea\u30af\u30b9\uff08\u30ad\u30fc: \u65e5\u756a\u53f7 01-31\uff09"})]})]})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u6708\u6b21\u96c6\u8a08\u30e1\u30c8\u30ea\u30af\u30b9\uff08monthly_summary\uff09\u306e\u4f8b"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "mau": 5000,\n  "login_success_count": 45000,\n  "dau": 3200,\n  "issue_token_success": 12000,\n  "refresh_token_success": 8000\n}\n'})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u65e5\u5225\u30e1\u30c8\u30ea\u30af\u30b9\uff08daily_metrics\uff09\u306e\u4f8b"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "1": {"dau": 100, "login_success_count": 1500},\n  "2": {"dau": 110, "login_success_count": 1600},\n  "15": {"dau": 95, "login_success_count": 1400},\n  "31": {"dau": 88, "login_success_count": 1200}\n}\n'})}),"\n",(0,l.jsx)(t.h4,{id:"statistics_daily_users",children:"statistics_daily_users"}),"\n",(0,l.jsx)(t.p,{children:"\u65e5\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff08DAU\uff09\u306e\u91cd\u8907\u6392\u9664\u30c6\u30fc\u30d6\u30eb\u3002"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30ab\u30e9\u30e0"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u578b"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"tenant_id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c6\u30ca\u30f3\u30c8\u8b58\u5225\u5b50"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"stat_date"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"DATE"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d71\u8a08\u5bfe\u8c61\u65e5"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"user_id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50"})]})]})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u8907\u5408\u4e3b\u30ad\u30fc"}),": ",(0,l.jsx)(t.code,{children:"(tenant_id, stat_date, user_id)"})]}),"\n",(0,l.jsx)(t.p,{children:"\u540c\u4e00\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u3058\u65e5\u306b\u8907\u6570\u56de\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3082\u30011\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u8a18\u9332\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.h4,{id:"statistics_monthly_users",children:"statistics_monthly_users"}),"\n",(0,l.jsx)(t.p,{children:"\u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff08MAU\uff09\u306e\u91cd\u8907\u6392\u9664\u30c6\u30fc\u30d6\u30eb\u3002"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30ab\u30e9\u30e0"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u578b"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"tenant_id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c6\u30ca\u30f3\u30c8\u8b58\u5225\u5b50"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"stat_month"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"CHAR(7)"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d71\u8a08\u5bfe\u8c61\u6708\uff08YYYY-MM\u5f62\u5f0f\uff09"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"user_id"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50"})]})]})]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u8907\u5408\u4e3b\u30ad\u30fc"}),": ",(0,l.jsx)(t.code,{children:"(tenant_id, stat_month, user_id)"})]}),"\n",(0,l.jsx)(t.p,{children:"\u540c\u4e00\u30e6\u30fc\u30b6\u30fc\u304c\u540c\u3058\u6708\u306b\u8907\u6570\u56de\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3082\u30011\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u8a18\u9332\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u7d71\u8a08\u66f4\u65b0\u30d5\u30ed\u30fc",children:"\u7d71\u8a08\u66f4\u65b0\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(t.h3,{id:"securityeventhandler\u306b\u3088\u308b\u7d71\u8a08\u53ce\u96c6",children:"SecurityEventHandler\u306b\u3088\u308b\u7d71\u8a08\u53ce\u96c6"}),"\n",(0,l.jsxs)(t.p,{children:["\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u767a\u884c\u6642\u306b\u3001",(0,l.jsx)(t.code,{children:"SecurityEventHandler"}),"\u304c\u7d71\u8a08\u3092\u540c\u671f\u7684\u306b\u66f4\u65b0\u3057\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(t.mermaid,{value:"sequenceDiagram\n    participant Auth as \u8a8d\u8a3c\u51e6\u7406\n    participant Handler as SecurityEventHandler\n    participant Log as \u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\n    participant Stats as \u7d71\u8a08\u66f4\u65b0\n    participant Hook as \u30d5\u30c3\u30af\u5b9f\u884c\n\n    Auth->>Handler: handle(tenant, securityEvent)\n    Handler->>Log: logEvent()\n    Handler->>Stats: updateStatistics()\n    Stats--\x3e>Handler: \u5b8c\u4e86\n    Handler->>Hook: \u30d5\u30c3\u30af\u5b9f\u884c\uff08\u975e\u540c\u671f\uff09\n    Handler--\x3e>Auth: \u5b8c\u4e86"}),"\n",(0,l.jsx)(t.h3,{id:"\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5224\u5b9a",children:"\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u5224\u5b9a"}),"\n",(0,l.jsxs)(t.p,{children:["\u4ee5\u4e0b\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u3068\u3057\u3066\u5224\u5b9a\u3055\u308c\u307e\u3059\uff08",(0,l.jsx)(t.code,{children:"DefaultSecurityEventType.isActiveUserEvent()"}),"\uff09:"]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30a4\u30d9\u30f3\u30c8\u30bf\u30a4\u30d7"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"login_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30ed\u30b0\u30a4\u30f3\u6210\u529f"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"issue_token_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6210\u529f"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"refresh_token_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u6210\u529f"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"inspect_token_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u6210\u529f"})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"\u7d71\u8a08\u66f4\u65b0\u51e6\u7406\u306e\u8a73\u7d30",children:"\u7d71\u8a08\u66f4\u65b0\u51e6\u7406\u306e\u8a73\u7d30"}),"\n",(0,l.jsx)(t.mermaid,{value:"flowchart TD\n    EVENT[\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8] --\x3e CHECK{\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc<br/>\u30a4\u30d9\u30f3\u30c8?}\n    CHECK --\x3e|Yes| DAU_CHECK{DAU\u30c6\u30fc\u30d6\u30eb\u306b<br/>\u5b58\u5728\u3059\u308b?}\n    CHECK --\x3e|No| INCREMENT[\u30e1\u30c8\u30ea\u30af\u30b9 +1]\n\n    DAU_CHECK --\x3e|No| ADD_DAU[DAU\u30c6\u30fc\u30d6\u30eb\u306b\u8ffd\u52a0]\n    DAU_CHECK --\x3e|Yes| MAU_CHECK{MAU\u30c6\u30fc\u30d6\u30eb\u306b<br/>\u5b58\u5728\u3059\u308b?}\n\n    ADD_DAU --\x3e INCREMENT_DAU[dau +1]\n    INCREMENT_DAU --\x3e MAU_CHECK\n\n    MAU_CHECK --\x3e|No| ADD_MAU[MAU\u30c6\u30fc\u30d6\u30eb\u306b\u8ffd\u52a0]\n    MAU_CHECK --\x3e|Yes| LOGIN_COUNT[login_success_count +1]\n\n    ADD_MAU --\x3e INCREMENT_MAU[mau +1]\n    INCREMENT_MAU --\x3e LOGIN_COUNT\n\n    INCREMENT --\x3e END[\u5b8c\u4e86]\n    LOGIN_COUNT --\x3e END"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),":"]}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u5224\u5b9a"}),": ",(0,l.jsx)(t.code,{children:"DefaultSecurityEventType.isActiveUserEvent()"})," \u3067\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\u304b\u5224\u5b9a"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u5909\u63db"}),": UTC\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u30c6\u30ca\u30f3\u30c8\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306b\u5909\u63db\u3057\u3066\u65e5\u4ed8\u3092\u6c7a\u5b9a"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"DAU\u51e6\u7406"}),": ",(0,l.jsx)(t.code,{children:"statistics_daily_users"})," \u30c6\u30fc\u30d6\u30eb\u3067\u30e6\u30fc\u30b6\u30fc\u306e\u521d\u56de\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u691c\u51fa"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"MAU\u51e6\u7406"}),": ",(0,l.jsx)(t.code,{children:"statistics_monthly_users"})," \u30c6\u30fc\u30d6\u30eb\u3067\u30e6\u30fc\u30b6\u30fc\u306e\u6708\u521d\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u691c\u51fa"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u30e1\u30c8\u30ea\u30af\u30b9\u66f4\u65b0"}),": \u65e5\u6b21\u30fb\u6708\u6b21\u30e1\u30c8\u30ea\u30af\u30b9\u3092JSONB\u3067\u5897\u5206\u66f4\u65b0"]}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30e1\u30c8\u30ea\u30af\u30b9\u7a2e\u5225",children:"\u30e1\u30c8\u30ea\u30af\u30b9\u7a2e\u5225"}),"\n",(0,l.jsx)(t.h3,{id:"\u53ce\u96c6\u3055\u308c\u308b\u30e1\u30c8\u30ea\u30af\u30b9",children:"\u53ce\u96c6\u3055\u308c\u308b\u30e1\u30c8\u30ea\u30af\u30b9"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30e1\u30c8\u30ea\u30af\u30b9\u540d"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u96c6\u8a08\u30ec\u30d9\u30eb"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"dau"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u6570"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"mau"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u6570"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u6708\u6b21"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"login_success_count"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30ed\u30b0\u30a4\u30f3\u6210\u529f\u56de\u6570"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21\u30fb\u6708\u6b21"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"issue_token_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6210\u529f\u56de\u6570"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21\u30fb\u6708\u6b21"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"refresh_token_success"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u6210\u529f\u56de\u6570"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21\u30fb\u6708\u6b21"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u305d\u306e\u4ed6\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30a4\u30d9\u30f3\u30c8\u7a2e\u5225\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u65e5\u6b21\u30fb\u6708\u6b21"})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"\u30ab\u30a6\u30f3\u30c8\u30d1\u30bf\u30fc\u30f3",children:"\u30ab\u30a6\u30f3\u30c8\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,l.jsx)(t.h4,{id:"\u30d1\u30bf\u30fc\u30f31-\u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30a6\u30f3\u30bf\u30fc",children:"\u30d1\u30bf\u30fc\u30f31: \u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30a6\u30f3\u30bf\u30fc"}),"\n",(0,l.jsx)(t.p,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u3054\u3068\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092+1\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"\u30a4\u30d9\u30f3\u30c8\u767a\u751f \u2192 daily_metrics[day].{metric} +1\n           \u2192 monthly_summary.{metric} +1\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u9069\u7528"}),": \u975e\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30a4\u30d9\u30f3\u30c8\uff08\u4f8b: ",(0,l.jsx)(t.code,{children:"password_failure"}),", ",(0,l.jsx)(t.code,{children:"authorize_failure"}),"\uff09"]}),"\n",(0,l.jsx)(t.h4,{id:"\u30d1\u30bf\u30fc\u30f32-\u30e6\u30cb\u30fc\u30af\u30ab\u30a6\u30f3\u30bf\u30fcdaumau",children:"\u30d1\u30bf\u30fc\u30f32: \u30e6\u30cb\u30fc\u30af\u30ab\u30a6\u30f3\u30bf\u30fc\uff08DAU/MAU\uff09"}),"\n",(0,l.jsx)(t.p,{children:"\u91cd\u8907\u6392\u9664\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u3066\u30e6\u30cb\u30fc\u30af\u30e6\u30fc\u30b6\u30fc\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"\u30ed\u30b0\u30a4\u30f3\u6210\u529f \u2192 statistics_daily_users \u306b INSERT\uff08\u91cd\u8907\u6642\u306f\u7121\u8996\uff09\n           \u2192 \u65b0\u898f\u306a\u3089 dau +1\n           \u2192 statistics_monthly_users \u306b INSERT\uff08\u91cd\u8907\u6642\u306f\u7121\u8996\uff09\n           \u2192 \u65b0\u898f\u306a\u3089 mau +1\n           \u2192 login_success_count +1\n"})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u51e6\u7406",children:"\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u51e6\u7406"}),"\n",(0,l.jsx)(t.p,{children:"\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u74b0\u5883\u3067\u306f\u3001\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u51e6\u7406\u304c\u91cd\u8981\u3067\u3059\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-java",children:"// SecurityEventHandler.updateStatistics() \u3088\u308a\nLocalDate eventDate = securityEvent\n    .createdAt()\n    .value()\n    .atZone(ZoneOffset.UTC)\n    .withZoneSameInstant(tenant.timezone())\n    .toLocalDate();\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u539f\u5247"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u30a4\u30d9\u30f3\u30c8\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306fUTC\u3067\u8a18\u9332"}),"\n",(0,l.jsx)(t.li,{children:"\u7d71\u8a08\u65e5\u4ed8\u306f\u30c6\u30ca\u30f3\u30c8\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3067\u8a08\u7b97"}),"\n",(0,l.jsx)(t.li,{children:"\u4f8b: \u6771\u4eac\u306e\u30c6\u30ca\u30f3\u30c8\uff08JST +9\uff09\u306e23:30 UTC \u2192 \u7fcc\u65e508:30 JST \u3068\u3057\u3066\u96c6\u8a08"}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5b9f\u88c5",children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5b9f\u88c5"}),"\n",(0,l.jsx)(t.h3,{id:"postgresql-vs-mysql",children:"PostgreSQL vs MySQL"}),"\n",(0,l.jsx)(t.p,{children:"\u4e21\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u540c\u7b49\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u6a5f\u80fd"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"PostgreSQL"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"MySQL"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UUID\u751f\u6210"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"gen_random_uuid()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"UUID()"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"JSON\u578b"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"JSONB"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"JSON"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"JSON\u30d1\u30b9\u66f4\u65b0"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"jsonb_set()"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"JSON_SET()"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"UPSERT"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ON CONFLICT ... DO UPDATE"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"ON DUPLICATE KEY UPDATE"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u884c\u30ec\u30d9\u30eb\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"RLS\u30dd\u30ea\u30b7\u30fc"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u306a\u3057\uff08\u30a2\u30d7\u30ea\u5c64\u3067\u5236\u5fa1\uff09"})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"upsert-\u306b\u3088\u308b\u5897\u5206\u66f4\u65b0",children:"UPSERT \u306b\u3088\u308b\u5897\u5206\u66f4\u65b0"}),"\n",(0,l.jsx)(t.p,{children:"\u30a2\u30c8\u30df\u30c3\u30af\u306a\u5897\u5206\u66f4\u65b0\u306b\u3088\u308a\u3001\u540c\u6642\u5b9f\u884c\u5236\u5fa1\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"PostgreSQL\u4f8b"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sql",children:"INSERT INTO statistics_monthly (...)\nVALUES (...)\nON CONFLICT (tenant_id, stat_month)\nDO UPDATE SET\n    daily_metrics = jsonb_set(\n        COALESCE(statistics_monthly.daily_metrics, '{}'::jsonb),\n        ARRAY[?::text],\n        jsonb_set(\n            COALESCE(statistics_monthly.daily_metrics->?::text, '{}'::jsonb),\n            ARRAY[?::text],\n            to_jsonb(COALESCE((statistics_monthly.daily_metrics->?::text->>?::text)::int, 0) + ?::int)\n        )\n    ),\n    updated_at = now()\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u30e1\u30ea\u30c3\u30c8"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u30ed\u30c3\u30af\u4e0d\u8981"}),"\n",(0,l.jsx)(t.li,{children:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u56de\u907f"}),"\n",(0,l.jsx)(t.li,{children:"\u9ad8\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8"}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u7ba1\u7406api",children:"\u7ba1\u7406API"}),"\n",(0,l.jsx)(t.h3,{id:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,l.jsx)(t.h4,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"GET /v1/management/tenants/{tenantId}/statistics?from=2025-01&to=2025-12\n"})}),"\n",(0,l.jsx)(t.h4,{id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"GET /v1/management/organizations/{orgId}/tenants/{tenantId}/statistics?from=2025-01&to=2025-12\n"})}),"\n",(0,l.jsx)(t.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u5fc5\u9808"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u578b"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"from"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u958b\u59cb\u6708\uff08YYYY-MM\u5f62\u5f0f\u3001\u4f8b: 2025-01\uff09"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"to"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Yes"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"String"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d42\u4e86\u6708\uff08YYYY-MM\u5f62\u5f0f\u3001\u4f8b: 2025-12\uff09"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"limit"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"No"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Integer"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u6700\u5927\u53d6\u5f97\u4ef6\u6570\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: 12\u3001\u6700\u5927: 100\uff09"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"offset"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"No"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Integer"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30b9\u30ad\u30c3\u30d7\u4ef6\u6570\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: 0\uff09"})]})]})]}),"\n",(0,l.jsx)(t.h3,{id:"\u30ec\u30b9\u30dd\u30f3\u30b9",children:"\u30ec\u30b9\u30dd\u30f3\u30b9"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "list": [\n    {\n      "stat_month": "2025-01",\n      "monthly_summary": {\n        "mau": 5000,\n        "login_success_count": 45000,\n        "dau": 3200\n      },\n      "daily_metrics": {\n        "1": {"dau": 100, "login_success_count": 1500},\n        "2": {"dau": 110, "login_success_count": 1600}\n      },\n      "created_at": "2025-01-01T00:00:00Z",\n      "updated_at": "2025-01-31T23:59:59Z"\n    }\n  ],\n  "total_count": 12,\n  "limit": 12,\n  "offset": 0\n}\n'})}),"\n",(0,l.jsx)(t.h3,{id:"\u5fc5\u8981\u306a\u6a29\u9650",children:"\u5fc5\u8981\u306a\u6a29\u9650"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"API"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"\u5fc5\u8981\u6a29\u9650"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"TENANT_READ"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"\u7d44\u7e54\u30ec\u30d9\u30eb"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,l.jsx)(t.code,{children:"TENANT_READ"})," + \u7d44\u7e54\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7"]})]})]})]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30c7\u30fc\u30bf\u4fdd\u6301\u6226\u7565",children:"\u30c7\u30fc\u30bf\u4fdd\u6301\u6226\u7565"}),"\n",(0,l.jsx)(t.h3,{id:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406",children:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406"}),"\n",(0,l.jsx)(t.mermaid,{value:"flowchart LR\n    HOT[Hot \u30c7\u30fc\u30bf<br/>0-90\u65e5] --\x3e|\u7d4c\u904e| WARM[Warm \u30c7\u30fc\u30bf<br/>91-365\u65e5]\n    WARM --\x3e|\u7d4c\u904e| COLD[Cold \u30c7\u30fc\u30bf<br/>365\u65e5\u4ee5\u4e0a]\n    COLD --\x3e|\u524a\u9664| ARCHIVE[\u30a2\u30fc\u30ab\u30a4\u30d6<br/>or \u524a\u9664]"}),"\n",(0,l.jsx)(t.h3,{id:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570",children:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570"}),"\n",(0,l.jsx)(t.p,{children:"PostgreSQL\u3067\u306f\u4ee5\u4e0b\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u95a2\u6570\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059:"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sql",children:"-- \u6708\u6b21\u7d71\u8a08\u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08\u6307\u5b9a\u6708\u6570\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\uff09\nSELECT cleanup_old_statistics(12);  -- 12\u30f6\u6708\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u524a\u9664\n\n-- \u65e5\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08\u6307\u5b9a\u65e5\u6570\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\uff09\nSELECT cleanup_old_daily_users(90);  -- 90\u65e5\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u524a\u9664\n\n-- \u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08\u6307\u5b9a\u6708\u6570\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\uff09\nSELECT cleanup_old_monthly_users(12);  -- 12\u30f6\u6708\u3088\u308a\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u524a\u9664\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u63a8\u5968\u4fdd\u6301\u671f\u9593"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"\u7d71\u8a08\u30c7\u30fc\u30bf\uff08statistics_monthly\uff09"}),": 24\u30f6\u6708"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"DAU\u30c7\u30fc\u30bf\uff08statistics_daily_users\uff09"}),": 90\u65e5"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.strong,{children:"MAU\u30c7\u30fc\u30bf\uff08statistics_monthly_users\uff09"}),": 12\u30f6\u6708"]}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e\u4e8b\u9805",children:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8003\u616e\u4e8b\u9805"}),"\n",(0,l.jsx)(t.h3,{id:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565",children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6226\u7565"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-sql",children:"-- \u6642\u7cfb\u5217\u30af\u30a8\u30ea\u7528\uff08\u6700\u983b\u51fa\uff09\nCREATE INDEX idx_statistics_monthly_tenant_month\n    ON statistics_monthly (tenant_id, stat_month DESC);\n\n-- DAU\u30ab\u30a6\u30f3\u30c8\u30af\u30a8\u30ea\u7528\nCREATE INDEX idx_statistics_daily_users_tenant_date\n    ON statistics_daily_users (tenant_id, stat_date);\n\n-- MAU\u30ab\u30a6\u30f3\u30c8\u30af\u30a8\u30ea\u7528\nCREATE INDEX idx_statistics_monthly_users_tenant_month\n    ON statistics_monthly_users (tenant_id, stat_month);\n"})}),"\n",(0,l.jsx)(t.h3,{id:"\u5897\u5206\u66f4\u65b0\u306b\u3088\u308b\u8ca0\u8377\u8efd\u6e1b",children:"\u5897\u5206\u66f4\u65b0\u306b\u3088\u308b\u8ca0\u8377\u8efd\u6e1b"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u907f\u3051\u308b\u3079\u304d\u30d1\u30bf\u30fc\u30f3"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"\u274c \u6bce\u56de\u5168\u30ec\u30b3\u30fc\u30c9\u3092\u518d\u8a08\u7b97\uff08\u9ad8\u30b3\u30b9\u30c8\uff09\n   statistics = load_all_events_today()\n   recalculate(statistics)\n"})}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u63a8\u5968\u30d1\u30bf\u30fc\u30f3"}),":"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"\u2705 \u5897\u5206\u66f4\u65b0\u306e\u307f\uff08\u4f4e\u30b3\u30b9\u30c8\uff09\n   incrementDailyMetric(tenant, month, day, metric, +1)\n"})}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0",children:"\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0"}),"\n",(0,l.jsx)(t.h3,{id:"\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc\u306e\u6319\u52d5",children:"\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc\u306e\u6319\u52d5"}),"\n",(0,l.jsx)(t.p,{children:"\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc\u306f\u8a8d\u8a3c\u30d5\u30ed\u30fc\u3092\u505c\u6b62\u3057\u307e\u305b\u3093\uff08\u758e\u7d50\u5408\u8a2d\u8a08\uff09\u3002"}),"\n",(0,l.jsx)(t.mermaid,{value:"flowchart TD\n    ERROR[\u7d71\u8a08\u66f4\u65b0\u30a8\u30e9\u30fc] --\x3e|\u30ed\u30b0\u8a18\u9332| LOG[\u30a8\u30e9\u30fc\u30ed\u30b0]\n    ERROR --\x3e|\u7d99\u7d9a| AUTH[\u8a8d\u8a3c\u30d5\u30ed\u30fc\u306f\u7d99\u7d9a]\n    LOG --\x3e|\u76e3\u8996| ALERT[\u30a2\u30e9\u30fc\u30c8\u767a\u706b]"}),"\n",(0,l.jsx)(t.h3,{id:"\u76e3\u8996\u3059\u3079\u304d\u6307\u6a19",children:"\u76e3\u8996\u3059\u3079\u304d\u6307\u6a19"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u7d71\u8a08\u66f4\u65b0\u306e\u6210\u529f\u7387"}),"\n",(0,l.jsx)(t.li,{children:"DAU/MAU\u306e\u6025\u6fc0\u306a\u5909\u52d5"}),"\n",(0,l.jsx)(t.li,{children:"\u30e1\u30c8\u30ea\u30af\u30b9\u66f4\u65b0\u306e\u30ec\u30a4\u30c6\u30f3\u30b7"}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9",children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9"}),"\n",(0,l.jsx)(t.h3,{id:"1-\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a",children:"1. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8868\u793a"}),"\n",(0,l.jsx)(t.p,{children:"\u30c6\u30ca\u30f3\u30c8\u7ba1\u7406\u8005\u304c\u81ea\u30c6\u30ca\u30f3\u30c8\u306e\u5229\u7528\u72b6\u6cc1\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u8868\u793a\u30e1\u30c8\u30ea\u30af\u30b9"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"DAU/MAU \u30c8\u30ec\u30f3\u30c9\u30b0\u30e9\u30d5"}),"\n",(0,l.jsx)(t.li,{children:"\u8a8d\u8a3c\u6210\u529f\u7387"}),"\n",(0,l.jsx)(t.li,{children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u6570\u63a8\u79fb"}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"2-mau\u30d9\u30fc\u30b9\u8ab2\u91d1",children:"2. MAU\u30d9\u30fc\u30b9\u8ab2\u91d1"}),"\n",(0,l.jsx)(t.p,{children:"\u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\u6570\u306b\u57fa\u3065\u304f\u5f93\u91cf\u8ab2\u91d1\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "stat_month": "2025-01",\n  "monthly_summary": {\n    "mau": 5000  // \u3053\u306e\u5024\u3067\u8ab2\u91d1\u8a08\u7b97\n  }\n}\n'})}),"\n",(0,l.jsx)(t.h3,{id:"3-\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996",children:"3. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76e3\u8996"}),"\n",(0,l.jsx)(t.p,{children:"\u7570\u5e38\u306a\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u691c\u77e5\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"\u691c\u77e5\u30d1\u30bf\u30fc\u30f3"}),":"]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"DAU\u306e\u6025\u5897\uff08\u30dc\u30c3\u30c8\u653b\u6483\u306e\u53ef\u80fd\u6027\uff09"}),"\n",(0,l.jsx)(t.li,{children:"\u30ed\u30b0\u30a4\u30f3\u5931\u6557\u7387\u306e\u6025\u4e0a\u6607"}),"\n",(0,l.jsx)(t.li,{children:"\u7279\u5b9a\u6642\u9593\u5e2f\u3078\u306e\u96c6\u4e2d"}),"\n"]}),"\n",(0,l.jsx)(t.hr,{}),"\n",(0,l.jsx)(t.h2,{id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/idp-server/docs/content_03_concepts/concept-11-security-events",children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u30fb\u30d5\u30c3\u30af"})," - \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/idp-server/docs/content_03_concepts/concept-01-multi-tenant",children:"\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8"})," - \u30c6\u30ca\u30f3\u30c8\u5206\u96e2\u306e\u57fa\u672c\u6982\u5ff5"]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/idp-server/docs/content_03_concepts/concept-13-audit-compliance",children:"\u76e3\u67fb\u3068\u30b3\u30f3\u30d7\u30e9\u30a4\u30a2\u30f3\u30b9"})," - \u76e3\u67fb\u30ed\u30b0\u3068\u306e\u95a2\u4fc2"]}),"\n"]})]})}function j(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var s=n(96540);const l={},i=s.createContext(l);function d(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);