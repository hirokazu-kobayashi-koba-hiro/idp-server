"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7805],{62207:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"content_11_learning/kubernetes/kubectl-commands","title":"kubectl \u30b3\u30de\u30f3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","description":"\u65e5\u5e38\u7684\u306b\u4f7f\u7528\u3059\u308bkubectl\u30b3\u30de\u30f3\u30c9\u306e\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3067\u3059\u3002","source":"@site/docs/content_11_learning/13-kubernetes/kubectl-commands.md","sourceDirName":"content_11_learning/13-kubernetes","slug":"/content_11_learning/kubernetes/kubectl-commands","permalink":"/idp-server/docs/content_11_learning/kubernetes/kubectl-commands","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/13-kubernetes/kubectl-commands.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Docker \u30b3\u30de\u30f3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","permalink":"/idp-server/docs/content_11_learning/kubernetes/docker-commands"},"next":{"title":"Linux \u5b66\u7fd2\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/linux/"}}');var d=l(74848),c=l(28453);const s={},r="kubectl \u30b3\u30de\u30f3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9",a={},i=[{value:"\u76ee\u6b21",id:"\u76ee\u6b21",level:2},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:2},{value:"\u30af\u30e9\u30b9\u30bf\u30fc\u60c5\u5831",id:"\u30af\u30e9\u30b9\u30bf\u30fc\u60c5\u5831",level:3},{value:"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u7ba1\u7406",id:"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u7ba1\u7406",level:3},{value:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c",id:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c",level:2},{value:"\u53d6\u5f97\uff08get\uff09",id:"\u53d6\u5f97get",level:3},{value:"\u8a73\u7d30\uff08describe\uff09",id:"\u8a73\u7d30describe",level:3},{value:"\u4f5c\u6210\u30fb\u9069\u7528\uff08create/apply\uff09",id:"\u4f5c\u6210\u9069\u7528createapply",level:3},{value:"\u524a\u9664\uff08delete\uff09",id:"\u524a\u9664delete",level:3},{value:"\u7de8\u96c6\uff08edit\uff09",id:"\u7de8\u96c6edit",level:3},{value:"\u30d1\u30c3\u30c1\uff08patch\uff09",id:"\u30d1\u30c3\u30c1patch",level:3},{value:"Pod\u64cd\u4f5c",id:"pod\u64cd\u4f5c",level:2},{value:"\u30ed\u30b0",id:"\u30ed\u30b0",level:3},{value:"\u5b9f\u884c\uff08exec\uff09",id:"\u5b9f\u884cexec",level:3},{value:"\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9",id:"\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9",level:3},{value:"\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc",id:"\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc",level:3},{value:"\u30c7\u30d0\u30c3\u30b0",id:"\u30c7\u30d0\u30c3\u30b0",level:2},{value:"\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1",id:"\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1",level:3},{value:"\u30a4\u30d9\u30f3\u30c8",id:"\u30a4\u30d9\u30f3\u30c8",level:3},{value:"\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca",id:"\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca",level:3},{value:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",id:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",level:3},{value:"\u8a2d\u5b9a\u7ba1\u7406",id:"\u8a2d\u5b9a\u7ba1\u7406",level:2},{value:"ConfigMap",id:"configmap",level:3},{value:"Secret",id:"secret",level:3},{value:"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0",id:"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0",level:2},{value:"\u30ec\u30d7\u30ea\u30ab\u6570\u5909\u66f4",id:"\u30ec\u30d7\u30ea\u30ab\u6570\u5909\u66f4",level:3},{value:"HPA",id:"hpa",level:3},{value:"\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8",id:"\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8",level:3},{value:"\u30e9\u30d9\u30eb\u3068\u30bb\u30ec\u30af\u30bf\u30fc",id:"\u30e9\u30d9\u30eb\u3068\u30bb\u30ec\u30af\u30bf\u30fc",level:2},{value:"\u30e9\u30d9\u30eb\u64cd\u4f5c",id:"\u30e9\u30d9\u30eb\u64cd\u4f5c",level:3},{value:"\u30bb\u30ec\u30af\u30bf\u30fc",id:"\u30bb\u30ec\u30af\u30bf\u30fc",level:3},{value:"\u4fbf\u5229\u306a\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc",id:"\u4fbf\u5229\u306a\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc",level:2},{value:"\u72b6\u614b\u78ba\u8a8d",id:"\u72b6\u614b\u78ba\u8a8d",level:3},{value:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",id:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",level:3},{value:"\u4e00\u62ec\u64cd\u4f5c",id:"\u4e00\u62ec\u64cd\u4f5c",level:3},{value:"JSONPath",id:"jsonpath",level:3},{value:"\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8868",id:"\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8868",level:2},{value:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c",id:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c-1",level:3},{value:"Pod\u64cd\u4f5c",id:"pod\u64cd\u4f5c-1",level:3},{value:"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8",id:"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8",level:3},{value:"\u51fa\u529b\u30aa\u30d7\u30b7\u30e7\u30f3",id:"\u51fa\u529b\u30aa\u30d7\u30b7\u30e7\u30f3",level:3},{value:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",id:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"kubectl-\u30b3\u30de\u30f3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9",children:"kubectl \u30b3\u30de\u30f3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9"})}),"\n",(0,d.jsx)(n.p,{children:"\u65e5\u5e38\u7684\u306b\u4f7f\u7528\u3059\u308bkubectl\u30b3\u30de\u30f3\u30c9\u306e\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3067\u3059\u3002"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u76ee\u6b21",children:"\u76ee\u6b21"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C",children:"\u57fa\u672c\u64cd\u4f5c"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E6%93%8D%E4%BD%9C",children:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#pod%E6%93%8D%E4%BD%9C",children:"Pod\u64cd\u4f5c"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0",children:"\u30c7\u30d0\u30c3\u30b0"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E8%A8%AD%E5%AE%9A%E7%AE%A1%E7%90%86",children:"\u8a2d\u5b9a\u7ba1\u7406"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%B0",children:"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E3%83%A9%E3%83%99%E3%83%AB%E3%81%A8%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF%E3%83%BC",children:"\u30e9\u30d9\u30eb\u3068\u30bb\u30ec\u30af\u30bf\u30fc"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"#%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%AF%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%8A%E3%83%BC",children:"\u4fbf\u5229\u306a\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc"})}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.h3,{id:"\u30af\u30e9\u30b9\u30bf\u30fc\u60c5\u5831",children:"\u30af\u30e9\u30b9\u30bf\u30fc\u60c5\u5831"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30af\u30e9\u30b9\u30bf\u30fc\u60c5\u5831\nkubectl cluster-info\n\n# \u30ce\u30fc\u30c9\u4e00\u89a7\nkubectl get nodes\nkubectl get nodes -o wide\n\n# \u30ce\u30fc\u30c9\u8a73\u7d30\nkubectl describe node node-name\n\n# \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u72b6\u614b\nkubectl get componentstatuses\n\n# API\u30ea\u30bd\u30fc\u30b9\u4e00\u89a7\nkubectl api-resources\n\n# API\u30d0\u30fc\u30b8\u30e7\u30f3\nkubectl api-versions\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u7ba1\u7406",children:"\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u7ba1\u7406"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u73fe\u5728\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\nkubectl config current-context\n\n# \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u4e00\u89a7\nkubectl config get-contexts\n\n# \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5207\u308a\u66ff\u3048\nkubectl config use-context my-cluster\n\n# Namespace\u8a2d\u5b9a\nkubectl config set-context --current --namespace=production\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c",children:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.h3,{id:"\u53d6\u5f97get",children:"\u53d6\u5f97\uff08get\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u57fa\u672c\nkubectl get pods\nkubectl get deployments\nkubectl get services\nkubectl get all\n\n# Namespace\u6307\u5b9a\nkubectl get pods -n production\nkubectl get pods --all-namespaces\nkubectl get pods -A  # \u77ed\u7e2e\u5f62\n\n# \u51fa\u529b\u5f62\u5f0f\nkubectl get pods -o wide          # \u8a73\u7d30\u60c5\u5831\nkubectl get pods -o yaml          # YAML\u5f62\u5f0f\nkubectl get pods -o json          # JSON\u5f62\u5f0f\nkubectl get pods -o name          # \u540d\u524d\u306e\u307f\n\n# \u30ab\u30b9\u30bf\u30e0\u5217\nkubectl get pods -o custom-columns=NAME:.metadata.name,STATUS:.status.phase\n\n# \u30bd\u30fc\u30c8\nkubectl get pods --sort-by=.metadata.creationTimestamp\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u8a73\u7d30describe",children:"\u8a73\u7d30\uff08describe\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ea\u30bd\u30fc\u30b9\u306e\u8a73\u7d30\nkubectl describe pod pod-name\nkubectl describe deployment deployment-name\nkubectl describe node node-name\n\n# \u30a4\u30d9\u30f3\u30c8\u306e\u78ba\u8a8d\nkubectl describe pod pod-name | grep -A 20 Events\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u4f5c\u6210\u9069\u7528createapply",children:"\u4f5c\u6210\u30fb\u9069\u7528\uff08create/apply\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u304b\u3089\u4f5c\u6210\nkubectl create -f manifest.yaml\n\n# \u9069\u7528\uff08\u4f5c\u6210\u307e\u305f\u306f\u66f4\u65b0\uff09\nkubectl apply -f manifest.yaml\nkubectl apply -f directory/\nkubectl apply -f https://example.com/manifest.yaml\n\n# \u30c9\u30e9\u30a4\u30e9\u30f3\nkubectl apply -f manifest.yaml --dry-run=client\nkubectl apply -f manifest.yaml --dry-run=server\n\n# \u5dee\u5206\u78ba\u8a8d\nkubectl diff -f manifest.yaml\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u524a\u9664delete",children:"\u524a\u9664\uff08delete\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ea\u30bd\u30fc\u30b9\u524a\u9664\nkubectl delete pod pod-name\nkubectl delete -f manifest.yaml\n\n# \u5f37\u5236\u524a\u9664\nkubectl delete pod pod-name --force --grace-period=0\n\n# \u30e9\u30d9\u30eb\u30bb\u30ec\u30af\u30bf\u30fc\u3067\u524a\u9664\nkubectl delete pods -l app=my-app\n\n# Namespace\u5185\u306e\u5168Pod\u524a\u9664\nkubectl delete pods --all -n my-namespace\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u7de8\u96c6edit",children:"\u7de8\u96c6\uff08edit\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# \u30a8\u30c7\u30a3\u30bf\u3067\u7de8\u96c6\nkubectl edit deployment my-deployment\nKUBE_EDITOR="code --wait" kubectl edit deployment my-deployment\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u30d1\u30c3\u30c1patch",children:"\u30d1\u30c3\u30c1\uff08patch\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# JSON\u30d1\u30c3\u30c1\nkubectl patch deployment my-deployment -p \'{"spec":{"replicas":5}}\'\n\n# \u6226\u7565\u7684\u30de\u30fc\u30b8\u30d1\u30c3\u30c1\nkubectl patch deployment my-deployment --type=merge -p \'{"spec":{"template":{"spec":{"containers":[{"name":"app","image":"new-image"}]}}}}\'\n\n# JSON\u30d1\u30c3\u30c1\uff08\u914d\u5217\u64cd\u4f5c\uff09\nkubectl patch deployment my-deployment --type=\'json\' -p=\'[{"op":"replace","path":"/spec/replicas","value":3}]\'\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"pod\u64cd\u4f5c",children:"Pod\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.h3,{id:"\u30ed\u30b0",children:"\u30ed\u30b0"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ed\u30b0\u8868\u793a\nkubectl logs pod-name\n\n# \u30b3\u30f3\u30c6\u30ca\u6307\u5b9a\nkubectl logs pod-name -c container-name\n\n# \u30d5\u30a9\u30ed\u30fc\nkubectl logs -f pod-name\n\n# \u672b\u5c3eN\u884c\nkubectl logs --tail=100 pod-name\n\n# \u6642\u9593\u7bc4\u56f2\nkubectl logs --since=1h pod-name\nkubectl logs --since-time=2024-01-01T00:00:00Z pod-name\n\n# \u524d\u306e\u30b3\u30f3\u30c6\u30ca\nkubectl logs pod-name --previous\n\n# \u8907\u6570Pod\nkubectl logs -l app=my-app --all-containers\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u5b9f\u884cexec",children:"\u5b9f\u884c\uff08exec\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\nkubectl exec pod-name -- ls -la\n\n# \u30b7\u30a7\u30eb\u63a5\u7d9a\nkubectl exec -it pod-name -- /bin/sh\nkubectl exec -it pod-name -- /bin/bash\n\n# \u30b3\u30f3\u30c6\u30ca\u6307\u5b9a\nkubectl exec -it pod-name -c container-name -- /bin/sh\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9",children:"\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ed\u30fc\u30ab\u30eb\u30dd\u30fc\u30c8\u3092Pod\u306b\u8ee2\u9001\nkubectl port-forward pod-name 8080:80\n\n# Service\u306b\u8ee2\u9001\nkubectl port-forward svc/my-service 8080:80\n\n# \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\nkubectl port-forward pod-name 8080:80 &\n\n# \u30a2\u30c9\u30ec\u30b9\u6307\u5b9a\nkubectl port-forward --address 0.0.0.0 pod-name 8080:80\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc",children:"\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ed\u30fc\u30ab\u30eb\u2192Pod\nkubectl cp local-file.txt pod-name:/path/in/container\n\n# Pod\u2192\u30ed\u30fc\u30ab\u30eb\nkubectl cp pod-name:/path/in/container local-file.txt\n\n# \u30b3\u30f3\u30c6\u30ca\u6307\u5b9a\nkubectl cp local-file.txt pod-name:/path -c container-name\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30c7\u30d0\u30c3\u30b0",children:"\u30c7\u30d0\u30c3\u30b0"}),"\n",(0,d.jsx)(n.h3,{id:"\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1",children:"\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u72b6\u6cc1"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30ce\u30fc\u30c9\u306e\u30ea\u30bd\u30fc\u30b9\nkubectl top nodes\n\n# Pod\u306e\u30ea\u30bd\u30fc\u30b9\nkubectl top pods\nkubectl top pods --containers\nkubectl top pods -l app=my-app\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30a4\u30d9\u30f3\u30c8",children:"\u30a4\u30d9\u30f3\u30c8"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30a4\u30d9\u30f3\u30c8\u4e00\u89a7\nkubectl get events\nkubectl get events --sort-by=.lastTimestamp\n\n# Namespace\u6307\u5b9a\nkubectl get events -n production\n\n# \u7279\u5b9a\u30ea\u30bd\u30fc\u30b9\u306e\u30a4\u30d9\u30f3\u30c8\nkubectl get events --field-selector involvedObject.name=pod-name\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca",children:"\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca\u3092\u8ffd\u52a0\nkubectl debug pod-name -it --image=busybox\n\n# \u65e2\u5b58\u30b3\u30f3\u30c6\u30ca\u3092\u30b3\u30d4\u30fc\u3057\u3066\u30c7\u30d0\u30c3\u30b0\nkubectl debug pod-name -it --copy-to=debug-pod --container=my-container\n\n# \u30ce\u30fc\u30c9\u306b\u30c7\u30d0\u30c3\u30b0Pod\u3092\u4f5c\u6210\nkubectl debug node/node-name -it --image=ubuntu\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",children:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Pod\u304c\u8d77\u52d5\u3057\u306a\u3044\u539f\u56e0\nkubectl describe pod pod-name\nkubectl logs pod-name --previous\n\n# Service\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\nkubectl get endpoints service-name\nkubectl describe service service-name\n\n# DNS\u306e\u78ba\u8a8d\nkubectl run dns-test --image=busybox:1.28 --rm -it --restart=Never -- nslookup kubernetes\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u8a2d\u5b9a\u7ba1\u7406",children:"\u8a2d\u5b9a\u7ba1\u7406"}),"\n",(0,d.jsx)(n.h3,{id:"configmap",children:"ConfigMap"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u4f5c\u6210\nkubectl create configmap my-config \\\n  --from-literal=key1=value1 \\\n  --from-literal=key2=value2\n\n# \u30d5\u30a1\u30a4\u30eb\u304b\u3089\nkubectl create configmap my-config --from-file=config.properties\n\n# \u78ba\u8a8d\nkubectl get configmap my-config -o yaml\n\n# \u5024\u306e\u53d6\u5f97\nkubectl get configmap my-config -o jsonpath='{.data.key1}'\n"})}),"\n",(0,d.jsx)(n.h3,{id:"secret",children:"Secret"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u4f5c\u6210\nkubectl create secret generic my-secret \\\n  --from-literal=username=admin \\\n  --from-literal=password=secret\n\n# TLS Secret\nkubectl create secret tls my-tls \\\n  --cert=cert.pem \\\n  --key=key.pem\n\n# \u78ba\u8a8d\uff08Base64\u30c7\u30b3\u30fc\u30c9\uff09\nkubectl get secret my-secret -o jsonpath='{.data.password}' | base64 -d\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0",children:"\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0"}),"\n",(0,d.jsx)(n.h3,{id:"\u30ec\u30d7\u30ea\u30ab\u6570\u5909\u66f4",children:"\u30ec\u30d7\u30ea\u30ab\u6570\u5909\u66f4"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30b9\u30b1\u30fc\u30eb\nkubectl scale deployment my-deployment --replicas=5\n\n# \u6761\u4ef6\u4ed8\u304d\u30b9\u30b1\u30fc\u30eb\nkubectl scale deployment my-deployment --replicas=5 --current-replicas=3\n"})}),"\n",(0,d.jsx)(n.h3,{id:"hpa",children:"HPA"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# HPA\u78ba\u8a8d\nkubectl get hpa\nkubectl describe hpa my-hpa\n\n# \u624b\u52d5\u4f5c\u6210\nkubectl autoscale deployment my-deployment --min=2 --max=10 --cpu-percent=70\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8",children:"\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30b9\u30c6\u30fc\u30bf\u30b9\nkubectl rollout status deployment/my-deployment\n\n# \u5c65\u6b74\nkubectl rollout history deployment/my-deployment\nkubectl rollout history deployment/my-deployment --revision=2\n\n# \u30ed\u30fc\u30eb\u30d0\u30c3\u30af\nkubectl rollout undo deployment/my-deployment\nkubectl rollout undo deployment/my-deployment --to-revision=2\n\n# \u4e00\u6642\u505c\u6b62/\u518d\u958b\nkubectl rollout pause deployment/my-deployment\nkubectl rollout resume deployment/my-deployment\n\n# \u518d\u8d77\u52d5\nkubectl rollout restart deployment/my-deployment\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30e9\u30d9\u30eb\u3068\u30bb\u30ec\u30af\u30bf\u30fc",children:"\u30e9\u30d9\u30eb\u3068\u30bb\u30ec\u30af\u30bf\u30fc"}),"\n",(0,d.jsx)(n.h3,{id:"\u30e9\u30d9\u30eb\u64cd\u4f5c",children:"\u30e9\u30d9\u30eb\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u30e9\u30d9\u30eb\u8ffd\u52a0\nkubectl label pod pod-name app=my-app\n\n# \u30e9\u30d9\u30eb\u66f4\u65b0\nkubectl label pod pod-name app=new-app --overwrite\n\n# \u30e9\u30d9\u30eb\u524a\u9664\nkubectl label pod pod-name app-\n\n# \u30e9\u30d9\u30eb\u78ba\u8a8d\nkubectl get pods --show-labels\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u30bb\u30ec\u30af\u30bf\u30fc",children:"\u30bb\u30ec\u30af\u30bf\u30fc"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u7b49\u4fa1\nkubectl get pods -l app=my-app\n\n# \u4e0d\u7b49\u4fa1\nkubectl get pods -l app!=my-app\n\n# \u30bb\u30c3\u30c8\nkubectl get pods -l 'app in (app1, app2)'\nkubectl get pods -l 'app notin (app1, app2)'\n\n# \u8907\u6570\u6761\u4ef6\nkubectl get pods -l app=my-app,version=v1\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u4fbf\u5229\u306a\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc",children:"\u4fbf\u5229\u306a\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc"}),"\n",(0,d.jsx)(n.h3,{id:"\u72b6\u614b\u78ba\u8a8d",children:"\u72b6\u614b\u78ba\u8a8d"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# \u5168Namespace\u306ePod\u72b6\u614b\nkubectl get pods -A -o wide\n\n# \u554f\u984c\u306e\u3042\u308bPod\nkubectl get pods -A | grep -v Running\nkubectl get pods -A --field-selector=status.phase!=Running\n\n# \u518d\u8d77\u52d5\u304c\u591a\u3044Pod\nkubectl get pods -A -o jsonpath=\'{range .items[*]}{.metadata.name}{"\\t"}{.status.containerStatuses[0].restartCount}{"\\n"}{end}\' | sort -k2 -rn\n\n# \u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u304c\u9ad8\u3044Pod\nkubectl top pods -A --sort-by=cpu\nkubectl top pods -A --sort-by=memory\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",children:"\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# \u5b8c\u4e86\u3057\u305fPod\u3092\u524a\u9664\nkubectl delete pods --field-selector=status.phase==Succeeded\n\n# \u5931\u6557\u3057\u305fPod\u3092\u524a\u9664\nkubectl delete pods --field-selector=status.phase==Failed\n\n# Evicted\u306apod\u3092\u524a\u9664\nkubectl get pods -A | grep Evicted | awk '{print $2 \" -n \" $1}' | xargs -L1 kubectl delete pod\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u4e00\u62ec\u64cd\u4f5c",children:"\u4e00\u62ec\u64cd\u4f5c"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'# \u5168Deployment\u3092\u518d\u8d77\u52d5\nkubectl get deployments -o name | xargs -I {} kubectl rollout restart {}\n\n# \u5168Pod\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u78ba\u8a8d\nkubectl get pods -o jsonpath=\'{range .items[*]}{.metadata.name}{"\\t"}{.spec.containers[*].image}{"\\n"}{end}\'\n\n# \u7279\u5b9a\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308bPod\u3092\u691c\u7d22\nkubectl get pods -A -o jsonpath=\'{range .items[*]}{.metadata.namespace}{"\\t"}{.metadata.name}{"\\t"}{.spec.containers[*].image}{"\\n"}{end}\' | grep "image-name"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"jsonpath",children:"JSONPath"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Pod IP\u30a2\u30c9\u30ec\u30b9\nkubectl get pods -o jsonpath='{.items[*].status.podIP}'\n\n# \u30ce\u30fc\u30c9\u306e\u30a2\u30c9\u30ec\u30b9\nkubectl get nodes -o jsonpath='{.items[*].status.addresses[?(@.type==\"InternalIP\")].address}'\n\n# Secret\u306e\u30c7\u30b3\u30fc\u30c9\nkubectl get secret my-secret -o jsonpath='{.data.password}' | base64 -d\n\n# \u7279\u5b9a\u6761\u4ef6\u306ePod\u540d\nkubectl get pods -o jsonpath='{.items[?(@.status.phase==\"Running\")].metadata.name}'\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8868",children:"\u30af\u30a4\u30c3\u30af\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u8868"}),"\n",(0,d.jsx)(n.h3,{id:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c-1",children:"\u30ea\u30bd\u30fc\u30b9\u64cd\u4f5c"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30b3\u30de\u30f3\u30c9"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl get"})}),(0,d.jsx)(n.td,{children:"\u30ea\u30bd\u30fc\u30b9\u4e00\u89a7"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl describe"})}),(0,d.jsx)(n.td,{children:"\u30ea\u30bd\u30fc\u30b9\u8a73\u7d30"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl create"})}),(0,d.jsx)(n.td,{children:"\u30ea\u30bd\u30fc\u30b9\u4f5c\u6210"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl apply"})}),(0,d.jsx)(n.td,{children:"\u4f5c\u6210\u307e\u305f\u306f\u66f4\u65b0"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl delete"})}),(0,d.jsx)(n.td,{children:"\u30ea\u30bd\u30fc\u30b9\u524a\u9664"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl edit"})}),(0,d.jsx)(n.td,{children:"\u30a8\u30c7\u30a3\u30bf\u3067\u7de8\u96c6"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl patch"})}),(0,d.jsx)(n.td,{children:"\u90e8\u5206\u66f4\u65b0"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"pod\u64cd\u4f5c-1",children:"Pod\u64cd\u4f5c"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30b3\u30de\u30f3\u30c9"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl logs"})}),(0,d.jsx)(n.td,{children:"\u30ed\u30b0\u8868\u793a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl exec"})}),(0,d.jsx)(n.td,{children:"\u30b3\u30de\u30f3\u30c9\u5b9f\u884c"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl port-forward"})}),(0,d.jsx)(n.td,{children:"\u30dd\u30fc\u30c8\u8ee2\u9001"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl cp"})}),(0,d.jsx)(n.td,{children:"\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl debug"})}),(0,d.jsx)(n.td,{children:"\u30c7\u30d0\u30c3\u30b0\u30b3\u30f3\u30c6\u30ca"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8",children:"\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30b3\u30de\u30f3\u30c9"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl scale"})}),(0,d.jsx)(n.td,{children:"\u30b9\u30b1\u30fc\u30eb\u5909\u66f4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl rollout status"})}),(0,d.jsx)(n.td,{children:"\u30ed\u30fc\u30eb\u30a2\u30a6\u30c8\u72b6\u614b"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl rollout undo"})}),(0,d.jsx)(n.td,{children:"\u30ed\u30fc\u30eb\u30d0\u30c3\u30af"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"kubectl rollout restart"})}),(0,d.jsx)(n.td,{children:"\u518d\u8d77\u52d5"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u51fa\u529b\u30aa\u30d7\u30b7\u30e7\u30f3",children:"\u51fa\u529b\u30aa\u30d7\u30b7\u30e7\u30f3"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u30aa\u30d7\u30b7\u30e7\u30f3"}),(0,d.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-o wide"})}),(0,d.jsx)(n.td,{children:"\u8a73\u7d30\u60c5\u5831"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-o yaml"})}),(0,d.jsx)(n.td,{children:"YAML\u5f62\u5f0f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-o json"})}),(0,d.jsx)(n.td,{children:"JSON\u5f62\u5f0f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-o name"})}),(0,d.jsx)(n.td,{children:"\u540d\u524d\u306e\u307f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-o jsonpath"})}),(0,d.jsx)(n.td,{children:"JSONPath"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",children:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/",children:"kubectl Cheat Sheet"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"kubectl Reference"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/jsonpath/",children:"JSONPath Support"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>r});var t=l(96540);const d={},c=t.createContext(d);function s(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);