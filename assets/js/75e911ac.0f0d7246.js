"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3571],{13708:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>x,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"content_04_protocols/protocol-03-introspection","title":"\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3","description":"1. \u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u3068\u306f","source":"@site/docs/content_04_protocols/protocol-03-introspection.md","sourceDirName":"content_04_protocols","slug":"/content_04_protocols/protocol-03-introspection","permalink":"/idp-server/docs/content_04_protocols/protocol-03-introspection","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_04_protocols/protocol-03-introspection.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"CIBA \u30d5\u30ed\u30fc","permalink":"/idp-server/docs/content_04_protocols/protocol-02-ciba-flow"},"next":{"title":"How-to \u30ac\u30a4\u30c9 - \u5b66\u7fd2\u30ed\u30fc\u30c9\u30de\u30c3\u30d7","permalink":"/idp-server/docs/content_05_how-to/index"}}');var r=t(74848),c=t(28453);const i={},d="\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3",l={},o=[{value:"1. \u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u3068\u306f",id:"1-\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u3068\u306f",level:2},{value:"2. \u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",id:"2-\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",level:2},{value:"3. \u6b63\u5e38\u7cfb\u30fb\u7570\u5e38\u7cfb\u30ec\u30b9\u30dd\u30f3\u30b9",id:"3-\u6b63\u5e38\u7cfb\u7570\u5e38\u7cfb\u30ec\u30b9\u30dd\u30f3\u30b9",level:2},{value:"3.1 \u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u306a\u5834\u5408\uff08active: true\uff09",id:"31-\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u306a\u5834\u5408active-true",level:3},{value:"3.2 \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u306a\u5834\u5408\uff08active: false\uff09",id:"32-\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u306a\u5834\u5408active-false",level:3},{value:"4. \u30ec\u30b9\u30dd\u30f3\u30b9\u5c5e\u6027\u4e00\u89a7",id:"4-\u30ec\u30b9\u30dd\u30f3\u30b9\u5c5e\u6027\u4e00\u89a7",level:2},{value:"5. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6",id:"5-\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6",level:2},{value:"6. \u3088\u304f\u3042\u308b\u8cea\u554f\uff08FAQ\uff09",id:"6-\u3088\u304f\u3042\u308b\u8cea\u554ffaq",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3",children:"\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3"})}),"\n",(0,r.jsx)(n.h2,{id:"1-\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u3068\u306f",children:"1. \u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u3068\u306f"}),"\n",(0,r.jsx)(n.p,{children:"\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\uff08Token Introspection\uff09\u306f\u3001OAuth2.0\u3084OpenID Connect\u3067\u767a\u884c\u3055\u308c\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3084\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u6027\u3084\u5c5e\u6027\u60c5\u5831\u3092\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3084\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u304c\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u4e3b\u306b\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u304c\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u3063\u305f\u969b\u3001\u305d\u306e\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u304b\u3064\u6b63\u898f\u306e\u3082\u306e\u3067\u3042\u308b\u304b\u3092\u691c\u8a3c\u3059\u308b\u7528\u9014\u3067\u5229\u7528\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",children:"2. \u30b7\u30fc\u30b1\u30f3\u30b9\u56f3"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n  participant Client\n  participant ResourceServer\n  participant IntrospectionEndpoint\n\n  Client->>ResourceServer: API\u30ea\u30af\u30a8\u30b9\u30c8 (access_token\u4ed8\u4e0e)\n  ResourceServer->>IntrospectionEndpoint: introspection\u30ea\u30af\u30a8\u30b9\u30c8 (access_token)\n  IntrospectionEndpoint--\x3e>ResourceServer: \u30ec\u30b9\u30dd\u30f3\u30b9 (active: true/false, \u5c5e\u6027\u30fb\u30a8\u30e9\u30fc)\n  ResourceServer--\x3e>Client: API\u30ec\u30b9\u30dd\u30f3\u30b9"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-\u6b63\u5e38\u7cfb\u7570\u5e38\u7cfb\u30ec\u30b9\u30dd\u30f3\u30b9",children:"3. \u6b63\u5e38\u7cfb\u30fb\u7570\u5e38\u7cfb\u30ec\u30b9\u30dd\u30f3\u30b9"}),"\n",(0,r.jsx)(n.h3,{id:"31-\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u306a\u5834\u5408active-true",children:"3.1 \u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u306a\u5834\u5408\uff08active: true\uff09"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "active": true,\n  "scope": "openid profile email",\n  "client_id": "example-client",\n  "username": "user1",\n  "exp": 1712328000,\n  "iat": 1712324400,\n  "nbf": 1712324400,\n  "aud": "api.example.com",\n  "iss": "https://idp.example.com",\n  "sub": "user1",\n  "cnf": {\n    "x5t#S256": "XXXXXX\uff08\u8a3c\u660e\u66f8\u30b5\u30e0\u30d7\u30ea\u30f3\u30c8\uff09"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"active: true \u306e\u5834\u5408\u306f\u3001\u30c8\u30fc\u30af\u30f3\u306e\u5c5e\u6027\u60c5\u5831\uff08\u30b9\u30b3\u30fc\u30d7\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3001\u30e6\u30fc\u30b6\u540d\u3001\u6709\u52b9\u671f\u9650\u306a\u3069\uff09\u3082\u542b\u3081\u3066\u8fd4\u5374\u3057\u307e\u3059\u3002"}),"\n",(0,r.jsx)(n.li,{children:"mTLS\u7b49\u306esender-constrained access token\u306e\u5834\u5408\u3001cnf \u30d1\u30e9\u30e1\u30fc\u30bf\u3082\u542b\u307e\u308c\u307e\u3059\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"32-\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u306a\u5834\u5408active-false",children:"3.2 \u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u306a\u5834\u5408\uff08active: false\uff09"}),"\n",(0,r.jsx)(n.p,{children:"RFC 7662\u306b\u6e96\u62e0\u3057\u3001\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u306a\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u307f\u8fd4\u5374\u3055\u308c\u307e\u3059\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "active": false\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u91cd\u8981"}),": \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u7406\u7531\u304b\u3089\u3001\u7121\u52b9\u7406\u7531\u306e\u8a73\u7d30\u60c5\u5831\u306f\u542b\u307e\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30c8\u30fc\u30af\u30f3\u5217\u6319\u653b\u6483\u3092\u9632\u6b62\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-\u30ec\u30b9\u30dd\u30f3\u30b9\u5c5e\u6027\u4e00\u89a7",children:"4. \u30ec\u30b9\u30dd\u30f3\u30b9\u5c5e\u6027\u4e00\u89a7"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,r.jsx)(n.th,{children:"\u578b"}),(0,r.jsx)(n.th,{children:"\u8aac\u660e"}),(0,r.jsx)(n.th,{children:"\u6709\u52b9\u6642"}),(0,r.jsx)(n.th,{children:"\u7121\u52b9\u6642"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"active"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u304b\u3069\u3046\u304b"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\u25cb"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"scope"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u4ed8\u4e0e\u6642\u306e\u30b9\u30b3\u30fc\u30d7"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"client_id"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"\u767a\u884c\u5143\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Subject (\u30e6\u30fc\u30b6ID)"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"exp"}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"\u6709\u52b9\u671f\u9650\uff08UNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\uff09"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"iat"}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"\u767a\u884c\u65e5\u6642\uff08UNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\uff09"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"iss"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Issuer"}),(0,r.jsx)(n.td,{children:"\u25cb"}),(0,r.jsx)(n.td,{children:"\xd7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cnf"}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"mTLS\u7b49\u306e\u8a3c\u660e\u66f8\u60c5\u5831"}),(0,r.jsx)(n.td,{children:"\u25b3"}),(0,r.jsx)(n.td,{children:"\xd7"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"\u25cb: \u8fd4\u5374\u3055\u308c\u308b\u3000\xd7: \u8fd4\u5374\u3055\u308c\u306a\u3044\u3000\u25b3: \u6761\u4ef6\u306b\u3088\u308a\u8fd4\u5374"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6ce8\u610f"}),": ",(0,r.jsx)(n.code,{children:"username"}),", ",(0,r.jsx)(n.code,{children:"nbf"}),", ",(0,r.jsx)(n.code,{children:"aud"})," \u306f\u73fe\u5728\u306e\u5b9f\u88c5\u3067\u306f\u542b\u307e\u308c\u307e\u305b\u3093\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6",children:"5. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5fc5\u9808\uff08\u4e0d\u6b63\u306a\u7167\u4f1a\u3092\u9632\u3050\uff09"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"active: true"})," \u306e\u3068\u304d\u306e\u307f\u3001\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u60c5\u5831\u3092\u8fd4\u5374"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"active: false"})," \u306e\u5834\u5408\u306f\u3001RFC 7662\u306b\u6e96\u62e0\u3057\u8a73\u7d30\u60c5\u5831\u3092\u542b\u3081\u306a\u3044\uff08\u30c8\u30fc\u30af\u30f3\u5217\u6319\u653b\u6483\u306e\u9632\u6b62\uff09"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-\u3088\u304f\u3042\u308b\u8cea\u554ffaq",children:"6. \u3088\u304f\u3042\u308b\u8cea\u554f\uff08FAQ\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Q: introspect\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5229\u7528\u5236\u9650\u306f\uff1f","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u3092\u901a\u904e\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u307f\u8a31\u53ef\u3057\u307e\u3059\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Q: \u30c8\u30fc\u30af\u30f3\u304c\u5931\u52b9\u3057\u305f\u5834\u5408\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\uff1f","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A: \u660e\u78ba\u306a\u30a8\u30e9\u30fc\u7406\u7531\u3092\u4ed8\u4e0e\u3057\u3066 active: false \u3092\u8fd4\u3057\u307e\u3059\u3002"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Q: \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u5c5e\u6027\u3092\u62e1\u5f35\u3067\u304d\u307e\u3059\u304b\uff1f","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A: \u5b9f\u88c5\u306b\u3088\u3063\u3066\u306f\u62e1\u5f35\u53ef\u80fd\u3067\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3054\u76f8\u8ac7\u304f\u3060\u3055\u3044\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"\u53c2\u8003:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc7662",children:"RFC 7662: OAuth 2.0 Token Introspection"})}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>d});var s=t(96540);const r={},c=s.createContext(r);function i(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);