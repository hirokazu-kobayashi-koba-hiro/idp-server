"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4192],{21328:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>o,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"content_06_developer-guide/application-plane/client-authentication","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5b9f\u88c5\u30ac\u30a4\u30c9","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684","source":"@site/docs/content_06_developer-guide/03-application-plane/10-client-authentication.md","sourceDirName":"content_06_developer-guide/03-application-plane","slug":"/content_06_developer-guide/application-plane/client-authentication","permalink":"/idp-server/docs/content_06_developer-guide/application-plane/client-authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/03-application-plane/10-client-authentication.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{},"sidebar":"docs","previous":{"title":"UserLifecycleEvent \u5b9f\u88c5\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_06_developer-guide/application-plane/user-lifecycle-event"},"next":{"title":"\u5b9f\u88c5\u30ac\u30a4\u30c9\u6982\u8981 - Implementation Guides Overview","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/overview"}}');var l=t(74848),s=t(28453);const c={},r="\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5b9f\u88c5\u30ac\u30a4\u30c9",d={},a=[{value:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",id:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",level:2},{value:"\u6240\u8981\u6642\u9593",id:"\u6240\u8981\u6642\u9593",level:3},{value:"\u524d\u63d0\u77e5\u8b58",id:"\u524d\u63d0\u77e5\u8b58",level:3},{value:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u3068\u306f",id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u3068\u306f",level:2},{value:"\u4f7f\u7528\u3055\u308c\u308b\u5834\u9762",id:"\u4f7f\u7528\u3055\u308c\u308b\u5834\u9762",level:3},{value:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5168\u4f53\u50cf",id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5168\u4f53\u50cf",level:2},{value:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u306e\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u306e\u51e6\u7406\u30d5\u30ed\u30fc",level:3},{value:"7\u3064\u306e\u8a8d\u8a3c\u65b9\u5f0f",id:"7\u3064\u306e\u8a8d\u8a3c\u65b9\u5f0f",level:2},{value:"\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f\uff085\u7a2e\u985e\uff09",id:"\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f5\u7a2e\u985e",level:3},{value:"FAPI\u62e1\u5f35\u8a8d\u8a3c\u65b9\u5f0f\uff082\u7a2e\u985e\uff09",id:"fapi\u62e1\u5f35\u8a8d\u8a3c\u65b9\u5f0f2\u7a2e\u985e",level:3},{value:"1. client_secret_basic\uff08\u6700\u3082\u4e00\u822c\u7684\uff09",id:"1-client_secret_basic\u6700\u3082\u4e00\u822c\u7684",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc",level:3},{value:"\u6ce8\u610f\u70b9",id:"\u6ce8\u610f\u70b9",level:3},{value:"2. client_secret_post",id:"2-client_secret_post",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-1",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-1",level:3},{value:"\u6ce8\u610f\u70b9",id:"\u6ce8\u610f\u70b9-1",level:3},{value:"3. client_secret_jwt\uff08\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff09",id:"3-client_secret_jwt\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-2",level:3},{value:"JWT\u69cb\u9020",id:"jwt\u69cb\u9020",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-2",level:3},{value:"4. private_key_jwt\uff08\u6700\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff09",id:"4-private_key_jwt\u6700\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-3",level:3},{value:"JWT\u69cb\u9020",id:"jwt\u69cb\u9020-1",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-3",level:3},{value:"\u30e1\u30ea\u30c3\u30c8",id:"\u30e1\u30ea\u30c3\u30c8",level:3},{value:"5. none\uff08Public Client\uff09",id:"5-nonepublic-client",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-4",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-4",level:3},{value:"\u6ce8\u610f\u70b9",id:"\u6ce8\u610f\u70b9-2",level:3},{value:"6. tls_client_auth\uff08FAPI\u6e96\u62e0 - MTLS\uff09",id:"6-tls_client_authfapi\u6e96\u62e0---mtls",level:2},{value:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-5",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-5",level:3},{value:"\u8a2d\u5b9a\u4f8b\uff08ClientConfiguration\uff09",id:"\u8a2d\u5b9a\u4f8bclientconfiguration",level:3},{value:"7. self_signed_tls_client_auth\uff08FAPI\u6e96\u62e0 - \u81ea\u5df1\u7f72\u540dMTLS\uff09",id:"7-self_signed_tls_client_authfapi\u6e96\u62e0---\u81ea\u5df1\u7f72\u540dmtls",level:2},{value:"tls_client_auth\u3068\u306e\u9055\u3044",id:"tls_client_auth\u3068\u306e\u9055\u3044",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc",id:"\u51e6\u7406\u30d5\u30ed\u30fc-6",level:3},{value:"\u8a8d\u8a3c\u65b9\u5f0f\u306e\u9078\u629e",id:"\u8a8d\u8a3c\u65b9\u5f0f\u306e\u9078\u629e",level:2},{value:"ClientAuthenticationHandler \u306e\u5224\u5b9a\u30ed\u30b8\u30c3\u30af",id:"clientauthenticationhandler-\u306e\u5224\u5b9a\u30ed\u30b8\u30c3\u30af",level:3},{value:"\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc",id:"\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc",level:2},{value:"\u30a8\u30e9\u30fc1: <code>invalid_client</code> - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5931\u6557",id:"\u30a8\u30e9\u30fc1-invalid_client---\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5931\u6557",level:3},{value:"\u30a8\u30e9\u30fc2: <code>invalid_request</code> - PKCE\u5fc5\u9808",id:"\u30a8\u30e9\u30fc2-invalid_request---pkce\u5fc5\u9808",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:2},{value:"\ud83d\udcd6 \u6b21\u306b\u8aad\u3080\u3079\u304d\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"-\u6b21\u306b\u8aad\u3080\u3079\u304d\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:3},{value:"\ud83d\udd17 \u8a73\u7d30\u60c5\u5831",id:"-\u8a73\u7d30\u60c5\u5831",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5b9f\u88c5\u30ac\u30a4\u30c9",children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5b9f\u88c5\u30ac\u30a4\u30c9"})}),"\n",(0,l.jsx)(n.h2,{id:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c"}),"\uff08Client Authentication\uff09\u306e\u4ed5\u7d44\u307f\u30687\u3064\u306e\u8a8d\u8a3c\u65b9\u5f0f\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u76ee\u6a19\u3067\u3059\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u6240\u8981\u6642\u9593",children:"\u6240\u8981\u6642\u9593"}),"\n",(0,l.jsxs)(n.p,{children:["\u23f1\ufe0f ",(0,l.jsx)(n.strong,{children:"\u7d0430\u5206"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u524d\u63d0\u77e5\u8b58",children:"\u524d\u63d0\u77e5\u8b58"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/idp-server/docs/content_06_developer-guide/application-plane/token-endpoint",children:"03. Token Flow"})}),"\n",(0,l.jsx)(n.li,{children:"OAuth 2.0\u57fa\u790e\u77e5\u8b58"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u3068\u306f",children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u3068\u306f"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff09\u306e\u6b63\u5f53\u6027\u3092\u691c\u8a3c"}),"\u3059\u308b\u4ed5\u7d44\u307f\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u4f7f\u7528\u3055\u308c\u308b\u5834\u9762",children:"\u4f7f\u7528\u3055\u308c\u308b\u5834\u9762"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),(0,l.jsx)(n.th,{children:"\u7528\u9014"}),(0,l.jsx)(n.th,{children:"\u8a8d\u8a3c\u5fc5\u9808\u5ea6"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Token Request"})}),(0,l.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c"}),(0,l.jsx)(n.td,{children:"\u5fc5\u9808\uff08Confidential Client\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"CIBA\u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8"})}),(0,l.jsx)(n.td,{children:"\u30d0\u30c3\u30af\u30c1\u30e3\u30cd\u30eb\u8a8d\u8a3c\u958b\u59cb"}),(0,l.jsx)(n.td,{children:"\u5fc5\u9808"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Token Introspection"})}),(0,l.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u691c\u8a3c"}),(0,l.jsx)(n.td,{children:"\u63a8\u5968"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Token Revocation"})}),(0,l.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u5931\u52b9"}),(0,l.jsx)(n.td,{children:"\u63a8\u5968"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Public Client"}),"\uff08SPA/Mobile\uff09: ",(0,l.jsx)(n.code,{children:"client_secret_none"})," + PKCE\u5fc5\u9808"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5168\u4f53\u50cf",children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5168\u4f53\u50cf"}),"\n",(0,l.jsx)(n.h3,{id:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u306e\u51e6\u7406\u30d5\u30ed\u30fc",children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u306e\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Token Request / CIBA Request\u7b49\n    \u2193\nTokenRequestHandler / CibaRequestHandler\n    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TokenRequestContext\u4f5c\u6210                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  - clientSecretBasic: Authorization\u30d8\u30c3\u30c0\u30fc\u304b\u3089\u62bd\u51fa  \u2502\n\u2502  - clientCert: x-ssl-cert\u30d8\u30c3\u30c0\u30fc\u304b\u3089\u62bd\u51fa\uff08MTLS\uff09    \u2502\n\u2502  - parameters: POST\u30dc\u30c7\u30a3                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ClientAuthenticationHandler.authenticate()          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  1. \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u65b9\u5f0f\u306e\u691c\u51fa                         \u2502\n\u2502     - Authorization\u30d8\u30c3\u30c0\u30fc\u5b58\u5728 \u2192 client_secret_basic\u2502\n\u2502     - client_assertion\u30d1\u30e9\u30e1\u30fc\u30bf \u2192 JWT\u8a8d\u8a3c           \u2502\n\u2502     - client_id\u306e\u307f \u2192 none                           \u2502\n\u2502     - x-ssl-cert\u5b58\u5728 \u2192 MTLS                          \u2502\n\u2502                                                     \u2502\n\u2502  2. ClientAuthenticators.get(\u8a8d\u8a3c\u30bf\u30a4\u30d7)             \u2502\n\u2502     \u2192 \u8a8d\u8a3c\u65b9\u5f0f\u5225\u306eAuthenticator\u53d6\u5f97\uff08Plugin\uff09         \u2502\n\u2502                                                     \u2502\n\u2502  3. Authenticator.authenticate()                    \u2502\n\u2502     \u2192 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5b9f\u884c                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2193\nClientCredentials\uff08\u8a8d\u8a3c\u6e08\u307f\u60c5\u5831\uff09\n    - clientId: \u8a8d\u8a3c\u6e08\u307f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\n    - authenticationMethod: \u4f7f\u7528\u3057\u305f\u8a8d\u8a3c\u65b9\u5f0f\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(71081).A+"",children:"ClientAuthenticationHandler.java"})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7\u3064\u306e\u8a8d\u8a3c\u65b9\u5f0f",children:"7\u3064\u306e\u8a8d\u8a3c\u65b9\u5f0f"}),"\n",(0,l.jsx)(n.h3,{id:"\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f5\u7a2e\u985e",children:"\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f\uff085\u7a2e\u985e\uff09"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u8a8d\u8a3c\u65b9\u5f0f"}),(0,l.jsx)(n.th,{children:"\u9001\u4fe1\u65b9\u6cd5"}),(0,l.jsx)(n.th,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"}),(0,l.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"client_secret_basic"})}),(0,l.jsx)(n.td,{children:"Basic\u8a8d\u8a3c\u30d8\u30c3\u30c0\u30fc"}),(0,l.jsx)(n.td,{children:"\u2b50\u2b50"}),(0,l.jsx)(n.td,{children:"\u6700\u3082\u4e00\u822c\u7684\uff08\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"client_secret_post"})}),(0,l.jsx)(n.td,{children:"POST\u30dc\u30c7\u30a3"}),(0,l.jsx)(n.td,{children:"\u2b50"}),(0,l.jsx)(n.td,{children:"\u30ec\u30ac\u30b7\u30fc\u5bfe\u5fdc"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"client_secret_jwt"})}),(0,l.jsx)(n.td,{children:"JWT\u7f72\u540d\uff08\u5171\u6709\u9375HMAC\uff09"}),(0,l.jsx)(n.td,{children:"\u2b50\u2b50\u2b50"}),(0,l.jsx)(n.td,{children:"\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"private_key_jwt"})}),(0,l.jsx)(n.td,{children:"JWT\u7f72\u540d\uff08\u79d8\u5bc6\u9375RSA/ECDSA\uff09"}),(0,l.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50"}),(0,l.jsx)(n.td,{children:"\u6700\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"none"})}),(0,l.jsx)(n.td,{children:"\u8a8d\u8a3c\u306a\u3057"}),(0,l.jsx)(n.td,{children:"-"}),(0,l.jsx)(n.td,{children:"Public Client\uff08SPA/Mobile+PKCE\uff09"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"fapi\u62e1\u5f35\u8a8d\u8a3c\u65b9\u5f0f2\u7a2e\u985e",children:"FAPI\u62e1\u5f35\u8a8d\u8a3c\u65b9\u5f0f\uff082\u7a2e\u985e\uff09"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u8a8d\u8a3c\u65b9\u5f0f"}),(0,l.jsx)(n.th,{children:"\u9001\u4fe1\u65b9\u6cd5"}),(0,l.jsx)(n.th,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"}),(0,l.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"tls_client_auth"})}),(0,l.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\uff08MTLS\uff09"}),(0,l.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,l.jsx)(n.td,{children:"\u91d1\u878d\u6a5f\u95a2\u30fbFAPI\u6e96\u62e0"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"self_signed_tls_client_auth"})}),(0,l.jsx)(n.td,{children:"\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\uff08MTLS\uff09"}),(0,l.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50"}),(0,l.jsx)(n.td,{children:"FAPI\u6e96\u62e0\u30fb\u958b\u767a\u74b0\u5883"})]})]})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u62e1\u5f35\u65b9\u5f0f"}),": FAPI\u30e2\u30b8\u30e5\u30fc\u30eb\u30ed\u30fc\u30c9\u6642\u306e\u307f\u6709\u52b9\uff08Plugin\uff09"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"1-client_secret_basic\u6700\u3082\u4e00\u822c\u7684",children:"1. client_secret_basic\uff08\u6700\u3082\u4e00\u822c\u7684\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(23954).A+"",children:"ClientSecretBasicAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/${TENANT_ID}/v1/tokens" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -H "Authorization: Basic $(echo -n \'my-client:my-secret\' | base64)" \\\n  -d "grant_type=authorization_code&code=${CODE}&redirect_uri=${REDIRECT_URI}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'1. Authorization\u30d8\u30c3\u30c0\u30fc\u53d6\u5f97\n   Authorization: Basic Y2xpZW50LWlkOmNsaWVudC1zZWNyZXQ=\n\n2. Base64\u30c7\u30b3\u30fc\u30c9\n   Y2xpZW50LWlkOmNsaWVudC1zZWNyZXQ= \u2192 "client-id:client-secret"\n\n3. \u30b3\u30ed\u30f3\u3067\u5206\u5272\n   \u2192 clientId="client-id", clientSecret="client-secret"\n\n4. ClientConfiguration\u53d6\u5f97\n   clientConfigurationQueryRepository.get(tenant, clientId)\n\n5. client_secret\u691c\u8a3c\n   if (clientConfiguration.clientSecret().equals(clientSecret)) {\n     \u8a8d\u8a3c\u6210\u529f\n   } else {\n     invalid_client \u30a8\u30e9\u30fc\n   }\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6ce8\u610f\u70b9",children:"\u6ce8\u610f\u70b9"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Base64\u30a8\u30f3\u30b3\u30fc\u30c9\u6642\u306e\u6ce8\u610f"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u2705 \u6b63\u3057\u3044\uff08-n \u30aa\u30d7\u30b7\u30e7\u30f3\u4ed8\u304d\uff09\necho -n 'my-client:my-secret' | base64\n\n# \u274c \u9593\u9055\u3044\uff08\u6539\u884c\u304c\u5165\u308b\uff09\necho 'my-client:my-secret' | base64\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-client_secret_post",children:"2. client_secret_post"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(45988).A+"",children:"ClientSecretPostAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-1",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/${TENANT_ID}/v1/tokens" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=authorization_code&code=${CODE}&redirect_uri=${REDIRECT_URI}&client_id=my-client&client_secret=my-secret"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-1",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. POST\u30dc\u30c7\u30a3\u304b\u3089\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\n   client_id=my-client\n   client_secret=my-secret\n\n2. ClientConfiguration\u53d6\u5f97\n\n3. client_secret\u691c\u8a3c\n   \u2192 \u6210\u529f or invalid_client\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6ce8\u610f\u70b9-1",children:"\u6ce8\u610f\u70b9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,l.jsx)(n.strong,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af"}),": client_secret\u304cHTTP\u30dc\u30c7\u30a3\u306b\u5e73\u6587\u3067\u542b\u307e\u308c\u308b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,l.jsx)(n.strong,{children:"\u63a8\u5968\u3057\u306a\u3044"}),": client_secret_basic\u3092\u4f7f\u7528\u3059\u3079\u304d"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-client_secret_jwt\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3",children:"3. client_secret_jwt\uff08\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(2691).A+"",children:"ClientSecretJwtAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-2",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/${TENANT_ID}/v1/tokens" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=authorization_code&code=${CODE}&redirect_uri=${REDIRECT_URI}&client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&client_assertion=${JWT}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"jwt\u69cb\u9020",children:"JWT\u69cb\u9020"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Header"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "alg": "HS256",\n  "typ": "JWT"\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Payload"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "iss": "my-client",\n  "sub": "my-client",\n  "aud": "https://idp-server.example.com/{tenant-id}/v1/tokens",\n  "jti": "unique-jwt-id-12345",\n  "exp": 1697000000,\n  "iat": 1696999000\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7f72\u540d"}),": HMAC-SHA256\uff08client_secret\u3067\u7f72\u540d\uff09"]}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-2",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'1. client_assertion\u30d1\u30e9\u30e1\u30fc\u30bf\u53d6\u5f97\uff08JWT\u6587\u5b57\u5217\uff09\n\n2. JWT\u30d8\u30c3\u30c0\u30fc\u89e3\u6790\n   \u2192 alg="HS256"\u78ba\u8a8d\n\n3. JWT\u30da\u30a4\u30ed\u30fc\u30c9\u89e3\u6790\n   \u2192 iss/sub/aud/exp/iat/jti\u62bd\u51fa\n\n4. ClientConfiguration\u53d6\u5f97\uff08iss=clientId\uff09\n\n5. JWT\u7f72\u540d\u691c\u8a3c\uff08HMAC-SHA256\uff09\n   client_secret\u3092\u79d8\u5bc6\u9375\u3068\u3057\u3066\u7f72\u540d\u691c\u8a3c\n\n6. \u30af\u30ec\u30fc\u30e0\u691c\u8a3c\n   - iss=sub=client_id\n   - aud=Token Endpoint URL\n   - exp\u672a\u6765\n   - jti\u4e00\u610f\u6027\uff08\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u9632\u6b62\uff09\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-private_key_jwt\u6700\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3",children:"4. private_key_jwt\uff08\u6700\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(20322).A+"",children:"PrivateKeyJwtAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-3",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:"client_secret_jwt\u3068\u540c\u3058\u3060\u304c\u3001\u7f72\u540d\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u304c\u7570\u306a\u308b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "..." \\\n  -d "client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer&client_assertion=${JWT}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"jwt\u69cb\u9020-1",children:"JWT\u69cb\u9020"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Header"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "alg": "RS256",  // \u307e\u305f\u306f ES256\n  "typ": "JWT",\n  "kid": "key-id-12345"  // \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u516c\u958b\u9375\u8b58\u5225\u5b50\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Payload"}),": client_secret_jwt\u3068\u540c\u3058"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7f72\u540d"}),": RSA-SHA256 \u307e\u305f\u306f ECDSA-SHA256\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u79d8\u5bc6\u9375\u3067\u7f72\u540d\uff09"]}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-3",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'1. JWT\u30d8\u30c3\u30c0\u30fc\u89e3\u6790\n   \u2192 alg="RS256" or "ES256"\n   \u2192 kid\u62bd\u51fa\n\n2. ClientConfiguration\u53d6\u5f97\n\n3. \u516c\u958b\u9375\u53d6\u5f97\n   - ClientConfiguration.jwks\u304b\u3089\u516c\u958b\u9375\u53d6\u5f97\uff08kid\u3067\u691c\u7d22\uff09\n   - \u307e\u305f\u306fjwks_uri\u304b\u3089\u53d6\u5f97\n\n4. JWT\u7f72\u540d\u691c\u8a3c\uff08RSA/ECDSA\uff09\n   \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u516c\u958b\u9375\u3067\u7f72\u540d\u691c\u8a3c\n\n5. \u30af\u30ec\u30fc\u30e0\u691c\u8a3c\n   \u2192 client_secret_jwt\u3068\u540c\u3058\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u30e1\u30ea\u30c3\u30c8",children:"\u30e1\u30ea\u30c3\u30c8"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"client_secret\u306e\u5171\u6709\u4e0d\u8981"}),": \u516c\u958b\u9375\u306e\u307f\u30b5\u30fc\u30d0\u30fc\u306b\u767b\u9332"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u79d8\u5bc6\u9375\u306e\u5b89\u5168\u6027"}),": \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u53b3\u91cd\u7ba1\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\u9375\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3"}),": \u8907\u6570\u306e\u516c\u958b\u9375\u3092\u30b5\u30dd\u30fc\u30c8\uff08kid\u5207\u308a\u66ff\u3048\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-nonepublic-client",children:"5. none\uff08Public Client\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(93369).A+"",children:"PublicClientAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-4",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8080/${TENANT_ID}/v1/tokens" \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=authorization_code&code=${CODE}&redirect_uri=${REDIRECT_URI}&client_id=my-spa-client&code_verifier=${VERIFIER}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-4",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'1. client_id\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u307f\u53d6\u5f97\n   \uff08client_secret\u306a\u3057\uff09\n\n2. ClientConfiguration\u53d6\u5f97\n\n3. Public Client\u30c1\u30a7\u30c3\u30af\n   if (!clientConfiguration.isPublicClient()) {\n     invalid_client \u30a8\u30e9\u30fc\n   }\n\n4. PKCE\u691c\u8a3c\u5fc5\u9808\n   if (!hasPkce()) {\n     invalid_request \u30a8\u30e9\u30fc\uff08"PKCE required for public client"\uff09\n   }\n\n5. \u8a8d\u8a3c\u6210\u529f\uff08PKCE\u304c\u5f8c\u7d9a\u3067\u691c\u8a3c\u3055\u308c\u308b\uff09\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6ce8\u610f\u70b9-2",children:"\u6ce8\u610f\u70b9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,l.jsx)(n.strong,{children:"PKCE\u5fc5\u9808"}),": Public Client\u306f\u5fc5\u305aPKCE\u4f7f\u7528"]}),"\n",(0,l.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,l.jsx)(n.strong,{children:"client_secret\u306a\u3057"}),": client_secret\u3092\u6301\u305f\u306a\u3044"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"SPA/Mobile\u3067\u4f7f\u7528"}),": \u30d6\u30e9\u30a6\u30b6\u30fb\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"6-tls_client_authfapi\u6e96\u62e0---mtls",children:"6. tls_client_auth\uff08FAPI\u6e96\u62e0 - MTLS\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{href:"../../../../libs/idp-server-core-extension-fapi/src/main/java/org/idp/server/core/openid/extension/fapi/clientauthenticator/TlsClientAuthAuthenticator.java",children:"TlsClientAuthAuthenticator.java"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"FAPI\u30e2\u30b8\u30e5\u30fc\u30eb\u30ed\u30fc\u30c9\u6642\u306e\u307f\u6709\u52b9"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b-5",children:"\u30ea\u30af\u30a8\u30b9\u30c8\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://localhost:8080/${TENANT_ID}/v1/tokens" \\\n  --cert client.crt \\\n  --key client.key \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=authorization_code&code=${CODE}&redirect_uri=${REDIRECT_URI}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-5",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. x-ssl-cert\u30d8\u30c3\u30c0\u30fc\u53d6\u5f97\n   \uff08\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u30d8\u30c3\u30c0\u30fc\u306b\u5909\u63db\uff09\n\n2. \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u89e3\u6790\n   - Subject DN\u62bd\u51fa\n   - Issuer DN\u62bd\u51fa\n   - Serial Number\u62bd\u51fa\n\n3. ClientConfiguration\u53d6\u5f97\n   - POST\u30dc\u30c7\u30a3\u306eclient_id\u307e\u305f\u306f\u8a3c\u660e\u66f8\u306eSubject DN\u304b\u3089\n\n4. \u8a3c\u660e\u66f8\u691c\u8a3c\n   - ClientConfiguration.tls_client_auth_subject_dn\u3068\u4e00\u81f4\n   - \u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u30c1\u30a7\u30c3\u30af\n   - \u8a3c\u660e\u66f8\u30c1\u30a7\u30fc\u30f3\u691c\u8a3c\uff08\u4fe1\u983c\u3055\u308c\u305fCA\uff09\n\n5. \u8a8d\u8a3c\u6210\u529f\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u8a2d\u5b9a\u4f8bclientconfiguration",children:"\u8a2d\u5b9a\u4f8b\uff08ClientConfiguration\uff09"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "client_id": "fapi-client-12345",\n  "token_endpoint_auth_method": "tls_client_auth",\n  "tls_client_auth_subject_dn": "CN=fapi-client,O=Example Bank,C=JP"\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7-self_signed_tls_client_authfapi\u6e96\u62e0---\u81ea\u5df1\u7f72\u540dmtls",children:"7. self_signed_tls_client_auth\uff08FAPI\u6e96\u62e0 - \u81ea\u5df1\u7f72\u540dMTLS\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{href:"../../../../libs/idp-server-core-extension-fapi/src/main/java/org/idp/server/core/openid/extension/fapi/clientauthenticator/SelfSignedTlsClientAuthAuthenticator.java",children:"SelfSignedTlsClientAuthAuthenticator.java"})]}),"\n",(0,l.jsx)(n.h3,{id:"tls_client_auth\u3068\u306e\u9055\u3044",children:"tls_client_auth\u3068\u306e\u9055\u3044"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u9805\u76ee"}),(0,l.jsx)(n.th,{children:"tls_client_auth"}),(0,l.jsx)(n.th,{children:"self_signed_tls_client_auth"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u8a3c\u660e\u66f8\u767a\u884c\u8005"})}),(0,l.jsx)(n.td,{children:"\u4fe1\u983c\u3055\u308c\u305fCA"}),(0,l.jsx)(n.td,{children:"\u81ea\u5df1\u7f72\u540d\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u81ea\u8eab\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u8a3c\u660e\u66f8\u691c\u8a3c"})}),(0,l.jsx)(n.td,{children:"CA\u8a3c\u660e\u66f8\u30c1\u30a7\u30fc\u30f3\u691c\u8a3c"}),(0,l.jsx)(n.td,{children:"\u516c\u958b\u9375\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u691c\u8a3c"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u7528\u9014"})}),(0,l.jsx)(n.td,{children:"\u672c\u756a\u74b0\u5883\uff08\u91d1\u878d\u6a5f\u95a2\u7b49\uff09"}),(0,l.jsx)(n.td,{children:"\u958b\u767a\u74b0\u5883\u30fb\u30c6\u30b9\u30c8"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u51e6\u7406\u30d5\u30ed\u30fc-6",children:"\u51e6\u7406\u30d5\u30ed\u30fc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u53d6\u5f97\n\n2. \u8a3c\u660e\u66f8\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u8a08\u7b97\n   SHA-256(\u8a3c\u660e\u66f8\u306e\u516c\u958b\u9375)\n\n3. ClientConfiguration\u53d6\u5f97\n\n4. \u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u691c\u8a3c\n   if (clientConfiguration.tls_client_auth_san_dns().equals(fingerprint)) {\n     \u8a8d\u8a3c\u6210\u529f\n   }\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u8a8d\u8a3c\u65b9\u5f0f\u306e\u9078\u629e",children:"\u8a8d\u8a3c\u65b9\u5f0f\u306e\u9078\u629e"}),"\n",(0,l.jsx)(n.h3,{id:"clientauthenticationhandler-\u306e\u5224\u5b9a\u30ed\u30b8\u30c3\u30af",children:"ClientAuthenticationHandler \u306e\u5224\u5b9a\u30ed\u30b8\u30c3\u30af"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5b9f\u88c5"}),": ",(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(71081).A+"",children:"ClientAuthenticationHandler.java"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public ClientCredentials authenticate(TokenRequestContext context) {\n\n  // 1. Authorization\u30d8\u30c3\u30c0\u30fc\u5b58\u5728\uff1f\n  if (context.hasClientSecretBasic()) {\n    return clientAuthenticators.get("client_secret_basic").authenticate(context);\n  }\n\n  // 2. client_assertion\u30d1\u30e9\u30e1\u30fc\u30bf\u5b58\u5728\uff1f\n  if (context.hasClientAssertion()) {\n    String clientAssertionType = context.clientAssertionType();\n\n    // JWT Bearer?\n    if (clientAssertionType.equals("urn:ietf:params:oauth:client-assertion-type:jwt-bearer")) {\n      // JWT\u306ealg\u3067\u5224\u5b9a\n      String alg = extractAlg(context.clientAssertion());\n\n      if (alg.startsWith("HS")) {\n        return clientAuthenticators.get("client_secret_jwt").authenticate(context);\n      } else {\n        return clientAuthenticators.get("private_key_jwt").authenticate(context);\n      }\n    }\n  }\n\n  // 3. x-ssl-cert\u30d8\u30c3\u30c0\u30fc\u5b58\u5728\uff1f\uff08MTLS\uff09\n  if (context.hasClientCert()) {\n    // ClientConfiguration\u3067\u5224\u5b9a\n    ClientConfiguration config = getClientConfiguration(context);\n\n    if (config.tokenEndpointAuthMethod().equals("tls_client_auth")) {\n      return clientAuthenticators.get("tls_client_auth").authenticate(context);\n    } else if (config.tokenEndpointAuthMethod().equals("self_signed_tls_client_auth")) {\n      return clientAuthenticators.get("self_signed_tls_client_auth").authenticate(context);\n    }\n  }\n\n  // 4. client_id + client_secret\u30d1\u30e9\u30e1\u30fc\u30bf\u5b58\u5728\uff1f\n  if (context.hasClientIdAndSecret()) {\n    return clientAuthenticators.get("client_secret_post").authenticate(context);\n  }\n\n  // 5. client_id\u306e\u307f\uff1f\n  if (context.hasClientId()) {\n    return clientAuthenticators.get("none").authenticate(context);\n  }\n\n  // 6. \u3044\u305a\u308c\u3082\u8a72\u5f53\u3057\u306a\u3044\n  throw new TokenBadRequestException("invalid_client", "Client authentication failed");\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc",children:"\u3088\u304f\u3042\u308b\u30a8\u30e9\u30fc"}),"\n",(0,l.jsxs)(n.h3,{id:"\u30a8\u30e9\u30fc1-invalid_client---\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5931\u6557",children:["\u30a8\u30e9\u30fc1: ",(0,l.jsx)(n.code,{children:"invalid_client"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u5931\u6557"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539f\u56e0"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"client_secret\u4e0d\u4e00\u81f4"}),"\n",(0,l.jsx)(n.li,{children:"JWT\u7f72\u540d\u691c\u8a3c\u5931\u6557"}),"\n",(0,l.jsx)(n.li,{children:"\u8a3c\u660e\u66f8\u691c\u8a3c\u5931\u6557"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4f8b"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "error": "invalid_client",\n  "error_description": "Client authentication failed"\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u30c7\u30d0\u30c3\u30b0"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# client_secret\u306e\u78ba\u8a8d\ndocker exec -it postgres psql -U idp_user -d idp_db -c \\\n  \"SELECT client_id, payload->>'client_secret' FROM client_configuration WHERE client_id='my-client';\"\n\n# Base64\u30a8\u30f3\u30b3\u30fc\u30c9\u306e\u78ba\u8a8d\necho -n 'my-client:my-secret' | base64\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.h3,{id:"\u30a8\u30e9\u30fc2-invalid_request---pkce\u5fc5\u9808",children:["\u30a8\u30e9\u30fc2: ",(0,l.jsx)(n.code,{children:"invalid_request"})," - PKCE\u5fc5\u9808"]}),"\n",(0,l.jsxs)(n.p,{children:["Public Client\uff08",(0,l.jsx)(n.code,{children:"client_secret_none"}),"\uff09\u3067PKCE\u306a\u3057\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "error": "invalid_request",\n  "error_description": "PKCE is required for public client"\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5bfe\u51e6"}),": ",(0,l.jsx)(n.code,{children:"code_verifier"}),"\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,l.jsx)(n.p,{children:"\u2705 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3057\u305f\uff01"}),"\n",(0,l.jsx)(n.h3,{id:"-\u6b21\u306b\u8aad\u3080\u3079\u304d\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\ud83d\udcd6 \u6b21\u306b\u8aad\u3080\u3079\u304d\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/idp-server/docs/content_06_developer-guide/application-plane/token-endpoint",children:"03. Token Flow"})," - \u30c8\u30fc\u30af\u30f3\u767a\u884c\u30d5\u30ed\u30fc\u5168\u4f53"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/idp-server/docs/content_06_developer-guide/application-plane/ciba-flow",children:"06. CIBA Flow"})," - CIBA\u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"-\u8a73\u7d30\u60c5\u5831",children:"\ud83d\udd17 \u8a73\u7d30\u60c5\u5831"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-11-core#oauth---oauth%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3",children:"AI\u958b\u767a\u8005\u5411\u3051: OAuth - Client Authentication"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-2.3",children:"RFC 6749 Section 2.3"})," - Client Authentication"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(71081).A+"",children:"ClientAuthenticationHandler.java"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(76471).A+"",children:"ClientAuthenticators.java"})}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-13"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},71081:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ClientAuthenticationHandler-d961e27fa8990d59676afe31e4ed03e4.java"},76471:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ClientAuthenticators-99daae9a4be18c2abd215247b2aefaf1.java"},23954:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ClientSecretBasicAuthenticator-b64376f1542d2201311e9d3b497add81.java"},2691:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ClientSecretJwtAuthenticator-4b7c1599d8ff05eed098a07772a61a5c.java"},45988:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/ClientSecretPostAuthenticator-33acc4352c1866af6dfefbe6062829fc.java"},20322:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/PrivateKeyJwtAuthenticator-4bb30cc11d4f778e9d1f76b40ceb45be.java"},93369:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/PublicClientAuthenticator-66a4ccb7a77520b940d3cfce38556fa7.java"},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>r});var i=t(96540);const l={},s=i.createContext(l);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);