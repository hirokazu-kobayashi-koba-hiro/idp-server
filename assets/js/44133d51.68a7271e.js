"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[75612],{38500:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"content_11_learning/linux/systemd","title":"systemd","description":"Linux\u306e\u30b5\u30fc\u30d3\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308bsystemd\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002","source":"@site/docs/content_11_learning/14-linux/systemd.md","sourceDirName":"content_11_learning/14-linux","slug":"/content_11_learning/linux/systemd","permalink":"/idp-server/docs/content_11_learning/linux/systemd","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/14-linux/systemd.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"OverlayFS","permalink":"/idp-server/docs/content_11_learning/linux/overlay-filesystem"},"next":{"title":"\u30ed\u30b0\u7ba1\u7406","permalink":"/idp-server/docs/content_11_learning/linux/logging"}}');var l=s(74848),r=s(28453);const i={},d="systemd",c={},a=[{value:"\u76ee\u6b21",id:"\u76ee\u6b21",level:2},{value:"systemd\u3068\u306f",id:"systemd\u3068\u306f",level:2},{value:"systemd\u306e\u6982\u8981",id:"systemd\u306e\u6982\u8981",level:3},{value:"\u5f93\u6765\u306einit\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u6bd4\u8f03",id:"\u5f93\u6765\u306einit\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u6bd4\u8f03",level:3},{value:"systemctl\u30b3\u30de\u30f3\u30c9",id:"systemctl\u30b3\u30de\u30f3\u30c9",level:2},{value:"\u30b5\u30fc\u30d3\u30b9\u306e\u64cd\u4f5c",id:"\u30b5\u30fc\u30d3\u30b9\u306e\u64cd\u4f5c",level:3},{value:"\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7",id:"\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7",level:3},{value:"\u4f9d\u5b58\u95a2\u4fc2\u306e\u78ba\u8a8d",id:"\u4f9d\u5b58\u95a2\u4fc2\u306e\u78ba\u8a8d",level:3},{value:"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u64cd\u4f5c",id:"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u64cd\u4f5c",level:3},{value:"Unit\u30d5\u30a1\u30a4\u30eb",id:"unit\u30d5\u30a1\u30a4\u30eb",level:2},{value:"Unit\u306e\u7a2e\u985e",id:"unit\u306e\u7a2e\u985e",level:3},{value:"Unit\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240",id:"unit\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240",level:3},{value:"Unit\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u9020",id:"unit\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u9020",level:3},{value:"\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u8aac\u660e",id:"\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u8aac\u660e",level:3},{value:"Service\u306e\u30bf\u30a4\u30d7",id:"service\u306e\u30bf\u30a4\u30d7",level:3},{value:"\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210",id:"\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210",level:2},{value:"\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d3\u30b9",id:"\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d3\u30b9",level:3},{value:"\u74b0\u5883\u5909\u6570\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9",id:"\u74b0\u5883\u5909\u6570\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9",level:3},{value:"\u30bf\u30a4\u30de\u30fc\uff08cron\u306e\u4ee3\u66ff\uff09",id:"\u30bf\u30a4\u30de\u30fccron\u306e\u4ee3\u66ff",level:3},{value:"\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30e9\u30f3\u30ec\u30d9\u30eb",id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30e9\u30f3\u30ec\u30d9\u30eb",level:2},{value:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u6982\u5ff5",id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u6982\u5ff5",level:3},{value:"\u30e9\u30f3\u30ec\u30d9\u30eb\u3068\u306e\u5bfe\u5fdc",id:"\u30e9\u30f3\u30ec\u30d9\u30eb\u3068\u306e\u5bfe\u5fdc",level:3},{value:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u64cd\u4f5c",id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u64cd\u4f5c",level:3},{value:"journalctl\u3067\u30ed\u30b0\u78ba\u8a8d",id:"journalctl\u3067\u30ed\u30b0\u78ba\u8a8d",level:2},{value:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",id:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",level:3},{value:"\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",id:"\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",level:3},{value:"\u51fa\u529b\u5f62\u5f0f",id:"\u51fa\u529b\u5f62\u5f0f",level:3},{value:"\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u7ba1\u7406",id:"\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u7ba1\u7406",level:3},{value:"\u30b3\u30f3\u30c6\u30ca\u3068systemd",id:"\u30b3\u30f3\u30c6\u30ca\u3068systemd",level:2},{value:"Docker\u5185\u3067\u306esystemd",id:"docker\u5185\u3067\u306esystemd",level:3},{value:"Docker\u3067systemd\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c",id:"docker\u3067systemd\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c",level:3},{value:"Kubernetes\u3067\u306esystemd",id:"kubernetes\u3067\u306esystemd",level:3},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"\u4e3b\u8981\u306asystemctl\u30b3\u30de\u30f3\u30c9",id:"\u4e3b\u8981\u306asystemctl\u30b3\u30de\u30f3\u30c9",level:3},{value:"\u4e3b\u8981\u306ajournalctl\u30b3\u30de\u30f3\u30c9",id:"\u4e3b\u8981\u306ajournalctl\u30b3\u30de\u30f3\u30c9",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:3},{value:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",id:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"systemd",children:"systemd"})}),"\n",(0,l.jsx)(n.p,{children:"Linux\u306e\u30b5\u30fc\u30d3\u30b9\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308bsystemd\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3059\u3002"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u76ee\u6b21",children:"\u76ee\u6b21"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#systemd%E3%81%A8%E3%81%AF",children:"systemd\u3068\u306f"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#systemctl%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89",children:"systemctl\u30b3\u30de\u30f3\u30c9"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#unit%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB",children:"Unit\u30d5\u30a1\u30a4\u30eb"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90",children:"\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E3%81%A8%E3%83%A9%E3%83%B3%E3%83%AC%E3%83%99%E3%83%AB",children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30e9\u30f3\u30ec\u30d9\u30eb"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#journalctl%E3%81%A7%E3%83%AD%E3%82%B0%E7%A2%BA%E8%AA%8D",children:"journalctl\u3067\u30ed\u30b0\u78ba\u8a8d"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%A8systemd",children:"\u30b3\u30f3\u30c6\u30ca\u3068systemd"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"systemd\u3068\u306f",children:"systemd\u3068\u306f"}),"\n",(0,l.jsx)(n.h3,{id:"systemd\u306e\u6982\u8981",children:"systemd\u306e\u6982\u8981"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    systemd \u306e\u69cb\u6210                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  \u30ab\u30fc\u30cd\u30eb\u8d77\u52d5                                                \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  systemd (PID 1)                                     \u2502   \u2502\n\u2502  \u2502                                                      \u2502   \u2502\n\u2502  \u2502  \u30fb\u30b5\u30fc\u30d3\u30b9\u7ba1\u7406 (\u8d77\u52d5\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5)                  \u2502   \u2502\n\u2502  \u2502  \u30fb\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a                                     \u2502   \u2502\n\u2502  \u2502  \u30fb\u4e26\u5217\u8d77\u52d5\u306b\u3088\u308b\u9ad8\u901f\u30d6\u30fc\u30c8                          \u2502   \u2502\n\u2502  \u2502  \u30fb\u30ed\u30b0\u7ba1\u7406 (journald)                               \u2502   \u2502\n\u2502  \u2502  \u30fb\u30bd\u30b1\u30c3\u30c8\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3                        \u2502   \u2502\n\u2502  \u2502  \u30fb\u30bf\u30a4\u30de\u30fc (cron\u4ee3\u66ff)                               \u2502   \u2502\n\u2502  \u2502                                                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502      \u2502              \u2502              \u2502                        \u2502\n\u2502      \u25bc              \u25bc              \u25bc                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u2502\n\u2502  \u2502 nginx  \u2502   \u2502 sshd   \u2502   \u2502postgres\u2502                     \u2502\n\u2502  \u2502.service\u2502   \u2502.service\u2502   \u2502.service\u2502                     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5f93\u6765\u306einit\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u6bd4\u8f03",children:"\u5f93\u6765\u306einit\u30b7\u30b9\u30c6\u30e0\u3068\u306e\u6bd4\u8f03"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7279\u5fb4"}),(0,l.jsx)(n.th,{children:"SysVinit"}),(0,l.jsx)(n.th,{children:"systemd"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8d77\u52d5\u65b9\u5f0f"}),(0,l.jsx)(n.td,{children:"\u30b7\u30fc\u30b1\u30f3\u30b7\u30e3\u30eb"}),(0,l.jsx)(n.td,{children:"\u4e26\u5217"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8a2d\u5b9a"}),(0,l.jsx)(n.td,{children:"\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8"}),(0,l.jsx)(n.td,{children:"Unit\u30d5\u30a1\u30a4\u30eb"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u4f9d\u5b58\u95a2\u4fc2"}),(0,l.jsx)(n.td,{children:"\u624b\u52d5\u7ba1\u7406"}),(0,l.jsx)(n.td,{children:"\u81ea\u52d5\u89e3\u6c7a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u30ed\u30b0"}),(0,l.jsx)(n.td,{children:"\u5206\u6563"}),(0,l.jsx)(n.td,{children:"\u7d71\u5408(journald)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u30bd\u30b1\u30c3\u30c8"}),(0,l.jsx)(n.td,{children:"\u624b\u52d5"}),(0,l.jsx)(n.td,{children:"\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"systemctl\u30b3\u30de\u30f3\u30c9",children:"systemctl\u30b3\u30de\u30f3\u30c9"}),"\n",(0,l.jsx)(n.h3,{id:"\u30b5\u30fc\u30d3\u30b9\u306e\u64cd\u4f5c",children:"\u30b5\u30fc\u30d3\u30b9\u306e\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u30b5\u30fc\u30d3\u30b9\u306e\u72b6\u614b\u78ba\u8a8d\nsystemctl status nginx\nsystemctl status nginx.service\n\n# \u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u30fb\u505c\u6b62\u30fb\u518d\u8d77\u52d5\nsudo systemctl start nginx\nsudo systemctl stop nginx\nsudo systemctl restart nginx\nsudo systemctl reload nginx      # \u8a2d\u5b9a\u518d\u8aad\u307f\u8fbc\u307f\uff08\u30d7\u30ed\u30bb\u30b9\u7d99\u7d9a\uff09\n\n# \u81ea\u52d5\u8d77\u52d5\u306e\u6709\u52b9\u5316\u30fb\u7121\u52b9\u5316\nsudo systemctl enable nginx      # \u8d77\u52d5\u6642\u306b\u81ea\u52d5\u8d77\u52d5\nsudo systemctl disable nginx     # \u81ea\u52d5\u8d77\u52d5\u3092\u7121\u52b9\u5316\nsudo systemctl enable --now nginx  # \u6709\u52b9\u5316\u3068\u8d77\u52d5\u3092\u540c\u6642\u306b\n\n# \u30b5\u30fc\u30d3\u30b9\u304c\u6709\u52b9\u304b\u78ba\u8a8d\nsystemctl is-enabled nginx\nsystemctl is-active nginx\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7",children:"\u30b5\u30fc\u30d3\u30b9\u4e00\u89a7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\nsystemctl list-units --type=service\n\n# \u5b9f\u884c\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u307f\nsystemctl list-units --type=service --state=running\n\n# \u5931\u6557\u3057\u305f\u30b5\u30fc\u30d3\u30b9\nsystemctl list-units --type=service --state=failed\n\n# \u6709\u52b9\u306a\u30b5\u30fc\u30d3\u30b9\uff08\u81ea\u52d5\u8d77\u52d5\uff09\nsystemctl list-unit-files --type=service --state=enabled\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u4f9d\u5b58\u95a2\u4fc2\u306e\u78ba\u8a8d",children:"\u4f9d\u5b58\u95a2\u4fc2\u306e\u78ba\u8a8d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4f9d\u5b58\u3057\u3066\u3044\u308bUnit\nsystemctl list-dependencies nginx\n\n# \u9006\u4f9d\u5b58\uff08\u3053\u306eUnit\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3082\u306e\uff09\nsystemctl list-dependencies nginx --reverse\n\n# \u30c4\u30ea\u30fc\u8868\u793a\nsystemctl list-dependencies --all nginx\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u64cd\u4f5c",children:"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u30b7\u30b9\u30c6\u30e0\u518d\u8d77\u52d5\nsudo systemctl reboot\n\n# \u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\nsudo systemctl poweroff\n\n# \u30b5\u30fc\u30d3\u30b9\u306e\u30c7\u30fc\u30e2\u30f3\u518d\u8aad\u307f\u8fbc\u307f\nsudo systemctl daemon-reload\n\n# \u5168\u4f53\u306e\u72b6\u614b\u78ba\u8a8d\nsystemctl status\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"unit\u30d5\u30a1\u30a4\u30eb",children:"Unit\u30d5\u30a1\u30a4\u30eb"}),"\n",(0,l.jsx)(n.h3,{id:"unit\u306e\u7a2e\u985e",children:"Unit\u306e\u7a2e\u985e"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7a2e\u985e"}),(0,l.jsx)(n.th,{children:"\u62e1\u5f35\u5b50"}),(0,l.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Service"}),(0,l.jsx)(n.td,{children:".service"}),(0,l.jsx)(n.td,{children:"\u30c7\u30fc\u30e2\u30f3\u3001\u30b5\u30fc\u30d3\u30b9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Socket"}),(0,l.jsx)(n.td,{children:".socket"}),(0,l.jsx)(n.td,{children:"\u30bd\u30b1\u30c3\u30c8\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Target"}),(0,l.jsx)(n.td,{children:".target"}),(0,l.jsx)(n.td,{children:"Unit\u306e\u30b0\u30eb\u30fc\u30d7\u5316"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Timer"}),(0,l.jsx)(n.td,{children:".timer"}),(0,l.jsx)(n.td,{children:"\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Mount"}),(0,l.jsx)(n.td,{children:".mount"}),(0,l.jsx)(n.td,{children:"\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u30de\u30a6\u30f3\u30c8"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Path"}),(0,l.jsx)(n.td,{children:".path"}),(0,l.jsx)(n.td,{children:"\u30d1\u30b9\u76e3\u8996"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"unit\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240",children:"Unit\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u30b7\u30b9\u30c6\u30e0Unit\uff08\u30d1\u30c3\u30b1\u30fc\u30b8\u63d0\u4f9b\uff09\n/usr/lib/systemd/system/\n\n# \u30b7\u30b9\u30c6\u30e0Unit\uff08\u7ba1\u7406\u8005\u8a2d\u5b9a\uff09\n/etc/systemd/system/\n\n# \u30e6\u30fc\u30b6\u30fcUnit\n~/.config/systemd/user/\n\n# Unit\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u3092\u78ba\u8a8d\nsystemctl show nginx -p FragmentPath\n"})}),"\n",(0,l.jsx)(n.h3,{id:"unit\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u9020",children:"Unit\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u9020"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"# /etc/systemd/system/myapp.service\n\n[Unit]\nDescription=My Application Service\nDocumentation=https://example.com/docs\nAfter=network.target postgresql.service\nRequires=postgresql.service\nWants=redis.service\n\n[Service]\nType=simple\nUser=appuser\nGroup=appgroup\nWorkingDirectory=/opt/myapp\nEnvironment=NODE_ENV=production\nEnvironmentFile=/etc/myapp/env\nExecStart=/opt/myapp/bin/start\nExecStop=/opt/myapp/bin/stop\nExecReload=/bin/kill -HUP $MAINPID\nRestart=on-failure\nRestartSec=5\nTimeoutStartSec=30\nTimeoutStopSec=30\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u8aac\u660e",children:"\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u8aac\u660e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 Unit\u30d5\u30a1\u30a4\u30eb\u306e\u30bb\u30af\u30b7\u30e7\u30f3                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  [Unit] \u30bb\u30af\u30b7\u30e7\u30f3                                           \u2502\n\u2502  \u251c\u2500\u2500 Description  \u8aac\u660e                                      \u2502\n\u2502  \u251c\u2500\u2500 After        \u3053\u306eUnit\u4ee5\u964d\u306b\u8d77\u52d5                        \u2502\n\u2502  \u251c\u2500\u2500 Before       \u3053\u306eUnit\u4ee5\u524d\u306b\u8d77\u52d5                        \u2502\n\u2502  \u251c\u2500\u2500 Requires     \u5fc5\u9808\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08\u5931\u6557\u3059\u308b\u3068\u8d77\u52d5\u3057\u306a\u3044\uff09     \u2502\n\u2502  \u251c\u2500\u2500 Wants        \u63a8\u5968\u306e\u4f9d\u5b58\u95a2\u4fc2\uff08\u5931\u6557\u3057\u3066\u3082\u8d77\u52d5\uff09           \u2502\n\u2502  \u2514\u2500\u2500 Conflicts    \u6392\u4ed6\u95a2\u4fc2                                  \u2502\n\u2502                                                              \u2502\n\u2502  [Service] \u30bb\u30af\u30b7\u30e7\u30f3                                        \u2502\n\u2502  \u251c\u2500\u2500 Type         simple, forking, oneshot, notify          \u2502\n\u2502  \u251c\u2500\u2500 ExecStart    \u8d77\u52d5\u30b3\u30de\u30f3\u30c9                              \u2502\n\u2502  \u251c\u2500\u2500 ExecStop     \u505c\u6b62\u30b3\u30de\u30f3\u30c9                              \u2502\n\u2502  \u251c\u2500\u2500 ExecReload   \u30ea\u30ed\u30fc\u30c9\u30b3\u30de\u30f3\u30c9                          \u2502\n\u2502  \u251c\u2500\u2500 Restart      \u518d\u8d77\u52d5\u6761\u4ef6 (always, on-failure, etc.)     \u2502\n\u2502  \u251c\u2500\u2500 RestartSec   \u518d\u8d77\u52d5\u307e\u3067\u306e\u5f85\u6a5f\u6642\u9593                      \u2502\n\u2502  \u251c\u2500\u2500 User/Group   \u5b9f\u884c\u30e6\u30fc\u30b6\u30fc/\u30b0\u30eb\u30fc\u30d7                     \u2502\n\u2502  \u2514\u2500\u2500 Environment  \u74b0\u5883\u5909\u6570                                  \u2502\n\u2502                                                              \u2502\n\u2502  [Install] \u30bb\u30af\u30b7\u30e7\u30f3                                        \u2502\n\u2502  \u251c\u2500\u2500 WantedBy     enable\u6642\u306e\u30bf\u30fc\u30b2\u30c3\u30c8                      \u2502\n\u2502  \u2514\u2500\u2500 RequiredBy   enable\u6642\u306e\u5fc5\u9808\u30bf\u30fc\u30b2\u30c3\u30c8                  \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h3,{id:"service\u306e\u30bf\u30a4\u30d7",children:"Service\u306e\u30bf\u30a4\u30d7"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"simple"}),(0,l.jsx)(n.td,{children:"\u30c7\u30d5\u30a9\u30eb\u30c8\u3002ExecStart\u304c\u30e1\u30a4\u30f3\u30d7\u30ed\u30bb\u30b9"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"forking"}),(0,l.jsx)(n.td,{children:"\u30c7\u30fc\u30e2\u30f3\u5316\u3059\u308b\u30d7\u30ed\u30bb\u30b9\uff08\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"oneshot"}),(0,l.jsx)(n.td,{children:"\u8d77\u52d5\u3057\u3066\u7d42\u4e86\u3059\u308b\u30bf\u30b9\u30af"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"notify"}),(0,l.jsx)(n.td,{children:"sd_notify()\u3067\u6e96\u5099\u5b8c\u4e86\u3092\u901a\u77e5"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"idle"}),(0,l.jsx)(n.td,{children:"\u4ed6\u306e\u30b8\u30e7\u30d6\u5b8c\u4e86\u5f8c\u306b\u5b9f\u884c"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210",children:"\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210"}),"\n",(0,l.jsx)(n.h3,{id:"\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d3\u30b9",children:"\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d3\u30b9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6e96\u5099\nsudo mkdir -p /opt/myapp\ncat << 'EOF' | sudo tee /opt/myapp/app.sh\n#!/bin/bash\nwhile true; do\n    echo \"$(date): Running...\" >> /var/log/myapp.log\n    sleep 10\ndone\nEOF\nsudo chmod +x /opt/myapp/app.sh\n\n# Unit\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\ncat << 'EOF' | sudo tee /etc/systemd/system/myapp.service\n[Unit]\nDescription=My Application\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/opt/myapp/app.sh\nRestart=always\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# \u30b5\u30fc\u30d3\u30b9\u767b\u9332\u3068\u8d77\u52d5\nsudo systemctl daemon-reload\nsudo systemctl enable --now myapp\nsudo systemctl status myapp\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u74b0\u5883\u5909\u6570\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9",children:"\u74b0\u5883\u5909\u6570\u4ed8\u304d\u30b5\u30fc\u30d3\u30b9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u74b0\u5883\u5909\u6570\u30d5\u30a1\u30a4\u30eb\ncat << 'EOF' | sudo tee /etc/myapp/env\nDATABASE_URL=postgresql://localhost/mydb\nAPI_KEY=secret123\nEOF\n\n# Unit\u30d5\u30a1\u30a4\u30eb\ncat << 'EOF' | sudo tee /etc/systemd/system/myapp.service\n[Unit]\nDescription=My Application with Environment\nAfter=network.target postgresql.service\n\n[Service]\nType=simple\nUser=appuser\nEnvironmentFile=/etc/myapp/env\nWorkingDirectory=/opt/myapp\nExecStart=/opt/myapp/bin/start\nRestart=on-failure\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\nEOF\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30bf\u30a4\u30de\u30fccron\u306e\u4ee3\u66ff",children:"\u30bf\u30a4\u30de\u30fc\uff08cron\u306e\u4ee3\u66ff\uff09"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u30b5\u30fc\u30d3\u30b9Unit\uff08\u5b9f\u884c\u5185\u5bb9\uff09\ncat << 'EOF' | sudo tee /etc/systemd/system/backup.service\n[Unit]\nDescription=Daily Backup\n\n[Service]\nType=oneshot\nExecStart=/opt/scripts/backup.sh\nEOF\n\n# \u30bf\u30a4\u30de\u30fcUnit\ncat << 'EOF' | sudo tee /etc/systemd/system/backup.timer\n[Unit]\nDescription=Run backup daily\n\n[Timer]\nOnCalendar=daily\nPersistent=true\n\n[Install]\nWantedBy=timers.target\nEOF\n\n# \u30bf\u30a4\u30de\u30fc\u6709\u52b9\u5316\nsudo systemctl daemon-reload\nsudo systemctl enable --now backup.timer\n\n# \u30bf\u30a4\u30de\u30fc\u4e00\u89a7\nsystemctl list-timers\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30e9\u30f3\u30ec\u30d9\u30eb",children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30e9\u30f3\u30ec\u30d9\u30eb"}),"\n",(0,l.jsx)(n.h3,{id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u6982\u5ff5",children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u6982\u5ff5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u968e\u5c64                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                              \u2502\n\u2502  graphical.target (\u65e7 runlevel 5)                           \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  multi-user.target (\u65e7 runlevel 3)                          \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u251c\u2500\u2500 nginx.service                                      \u2502\n\u2502      \u251c\u2500\u2500 sshd.service                                       \u2502\n\u2502      \u251c\u2500\u2500 postgresql.service                                 \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  basic.target                                               \u2502\n\u2502      \u2502                                                      \u2502\n\u2502      \u25bc                                                      \u2502\n\u2502  sysinit.target                                             \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30e9\u30f3\u30ec\u30d9\u30eb\u3068\u306e\u5bfe\u5fdc",children:"\u30e9\u30f3\u30ec\u30d9\u30eb\u3068\u306e\u5bfe\u5fdc"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u30e9\u30f3\u30ec\u30d9\u30eb"}),(0,l.jsx)(n.th,{children:"\u30bf\u30fc\u30b2\u30c3\u30c8"}),(0,l.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"0"}),(0,l.jsx)(n.td,{children:"poweroff.target"}),(0,l.jsx)(n.td,{children:"\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"rescue.target"}),(0,l.jsx)(n.td,{children:"\u30b7\u30f3\u30b0\u30eb\u30e6\u30fc\u30b6\u30fc"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"multi-user.target"}),(0,l.jsx)(n.td,{children:"\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u30fc\uff08CLI\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"graphical.target"}),(0,l.jsx)(n.td,{children:"\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u30fc\uff08GUI\uff09"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"6"}),(0,l.jsx)(n.td,{children:"reboot.target"}),(0,l.jsx)(n.td,{children:"\u518d\u8d77\u52d5"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u64cd\u4f5c",children:"\u30bf\u30fc\u30b2\u30c3\u30c8\u306e\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u73fe\u5728\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\nsystemctl get-default\n\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u30bf\u30fc\u30b2\u30c3\u30c8\u5909\u66f4\nsudo systemctl set-default multi-user.target\n\n# \u30bf\u30fc\u30b2\u30c3\u30c8\u5207\u308a\u66ff\u3048\nsudo systemctl isolate rescue.target\n\n# \u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u542b\u307e\u308c\u308bUnit\nsystemctl list-dependencies multi-user.target\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"journalctl\u3067\u30ed\u30b0\u78ba\u8a8d",children:"journalctl\u3067\u30ed\u30b0\u78ba\u8a8d"}),"\n",(0,l.jsx)(n.h3,{id:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9",children:"\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u3059\u3079\u3066\u306e\u30ed\u30b0\njournalctl\n\n# \u6700\u65b0\u306e\u30ed\u30b0\uff08\u9006\u9806\uff09\njournalctl -r\n\n# \u672b\u5c3e\u3092\u30d5\u30a9\u30ed\u30fc\njournalctl -f\n\n# \u4eca\u56de\u306e\u8d77\u52d5\u4ee5\u964d\u306e\u30ed\u30b0\njournalctl -b\n\n# \u524d\u56de\u8d77\u52d5\u306e\u30ed\u30b0\njournalctl -b -1\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0",children:"\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\njournalctl -u nginx\njournalctl -u nginx -u postgresql\n\n# \u512a\u5148\u5ea6\u3067\u30d5\u30a3\u30eb\u30bf\njournalctl -p err         # error\u4ee5\u4e0a\njournalctl -p warning     # warning\u4ee5\u4e0a\n\n# \u6642\u9593\u3067\u30d5\u30a3\u30eb\u30bf\njournalctl --since "1 hour ago"\njournalctl --since "2024-01-15 10:00" --until "2024-01-15 12:00"\njournalctl --since today\n\n# \u30d7\u30ed\u30bb\u30b9\u3067\u30d5\u30a3\u30eb\u30bf\njournalctl _PID=1234\njournalctl _UID=1000\n\n# \u30ab\u30fc\u30cd\u30eb\u30e1\u30c3\u30bb\u30fc\u30b8\njournalctl -k\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u51fa\u529b\u5f62\u5f0f",children:"\u51fa\u529b\u5f62\u5f0f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# JSON\u5f62\u5f0f\njournalctl -o json\njournalctl -o json-pretty\n\n# \u8a73\u7d30\u8868\u793a\njournalctl -o verbose\n\n# \u884c\u6570\u5236\u9650\njournalctl -n 100\n\n# \u30da\u30fc\u30b8\u30e3\u30fc\u306a\u3057\njournalctl --no-pager\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u7ba1\u7406",children:"\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u7ba1\u7406"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528\u91cf\u78ba\u8a8d\njournalctl --disk-usage\n\n# \u53e4\u3044\u30ed\u30b0\u3092\u524a\u9664\nsudo journalctl --vacuum-time=7d    # 7\u65e5\u4ee5\u4e0a\u53e4\u3044\u30ed\u30b0\u524a\u9664\nsudo journalctl --vacuum-size=1G    # 1GB\u4ee5\u4e0b\u306b\u524a\u6e1b\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\ncat /etc/systemd/journald.conf\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u30b3\u30f3\u30c6\u30ca\u3068systemd",children:"\u30b3\u30f3\u30c6\u30ca\u3068systemd"}),"\n",(0,l.jsx)(n.h3,{id:"docker\u5185\u3067\u306esystemd",children:"Docker\u5185\u3067\u306esystemd"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:'# systemd\u3092\u4f7f\u7528\u3059\u308b\u30b3\u30f3\u30c6\u30ca\nFROM ubuntu:22.04\n\nRUN apt-get update && apt-get install -y systemd\n\n# systemd\u7528\u306e\u8a2d\u5b9a\nENV container docker\nSTOPSIGNAL SIGRTMIN+3\n\n# \u4e0d\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u7121\u52b9\u5316\nRUN rm -f /lib/systemd/system/multi-user.target.wants/* \\\n    /etc/systemd/system/*.wants/* \\\n    /lib/systemd/system/local-fs.target.wants/* \\\n    /lib/systemd/system/sockets.target.wants/*udev* \\\n    /lib/systemd/system/sockets.target.wants/*initctl* \\\n    /lib/systemd/system/sysinit.target.wants/systemd-tmpfiles-setup* \\\n    /lib/systemd/system/systemd-update-utmp*\n\nVOLUME ["/sys/fs/cgroup"]\nCMD ["/lib/systemd/systemd"]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"docker\u3067systemd\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c",children:"Docker\u3067systemd\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# cgroup v2 \u306e\u5834\u5408\ndocker run -d --name systemd-container \\\n  --privileged \\\n  --cgroupns=host \\\n  -v /sys/fs/cgroup:/sys/fs/cgroup:rw \\\n  systemd-image\n\n# \u30b3\u30f3\u30c6\u30ca\u5185\u3067systemctl\ndocker exec systemd-container systemctl status\n"})}),"\n",(0,l.jsx)(n.h3,{id:"kubernetes\u3067\u306esystemd",children:"Kubernetes\u3067\u306esystemd"}),"\n",(0,l.jsx)(n.p,{children:"\u30b3\u30f3\u30c6\u30ca\u3067\u306fsystemd\u3092\u4f7f\u308f\u305a\u3001Kubernetes\u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3067\u76f4\u63a5\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u3067\u3059\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'# Kubernetes \u3067\u306f systemd \u306f\u901a\u5e38\u4f7f\u308f\u306a\u3044\napiVersion: v1\nkind: Pod\nmetadata:\n  name: myapp\nspec:\n  containers:\n  - name: app\n    image: myapp:latest\n    command: ["/app/bin/start"]  # \u76f4\u63a5\u5b9f\u884c\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,l.jsx)(n.h3,{id:"\u4e3b\u8981\u306asystemctl\u30b3\u30de\u30f3\u30c9",children:"\u4e3b\u8981\u306asystemctl\u30b3\u30de\u30f3\u30c9"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u30b3\u30de\u30f3\u30c9"}),(0,l.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"systemctl status"}),(0,l.jsx)(n.td,{children:"\u72b6\u614b\u78ba\u8a8d"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"systemctl start/stop"}),(0,l.jsx)(n.td,{children:"\u8d77\u52d5/\u505c\u6b62"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"systemctl enable/disable"}),(0,l.jsx)(n.td,{children:"\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"systemctl restart"}),(0,l.jsx)(n.td,{children:"\u518d\u8d77\u52d5"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"systemctl daemon-reload"}),(0,l.jsx)(n.td,{children:"Unit\u518d\u8aad\u307f\u8fbc\u307f"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u4e3b\u8981\u306ajournalctl\u30b3\u30de\u30f3\u30c9",children:"\u4e3b\u8981\u306ajournalctl\u30b3\u30de\u30f3\u30c9"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u30b3\u30de\u30f3\u30c9"}),(0,l.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"journalctl -u SERVICE"}),(0,l.jsx)(n.td,{children:"\u30b5\u30fc\u30d3\u30b9\u306e\u30ed\u30b0"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"journalctl -f"}),(0,l.jsx)(n.td,{children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u8868\u793a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"journalctl -p LEVEL"}),(0,l.jsx)(n.td,{children:"\u512a\u5148\u5ea6\u30d5\u30a3\u30eb\u30bf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"journalctl --since"}),(0,l.jsx)(n.td,{children:"\u6642\u9593\u30d5\u30a3\u30eb\u30bf"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/idp-server/docs/content_11_learning/linux/logging",children:"\u30ed\u30b0\u7ba1\u7406"})," - \u3088\u308a\u8a73\u3057\u3044\u30ed\u30b0\u7ba1\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/idp-server/docs/content_11_learning/linux/performance",children:"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9"})," - \u30b7\u30b9\u30c6\u30e0\u76e3\u8996"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9",children:"\u53c2\u8003\u30ea\u30bd\u30fc\u30b9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://systemd.io/",children:"systemd Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://wiki.archlinux.org/title/systemd",children:"Arch Wiki - systemd"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/introduction-to-systemd_configuring-basic-system-settings",children:"Red Hat - systemd Guide"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var t=s(96540);const l={},r=t.createContext(l);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);