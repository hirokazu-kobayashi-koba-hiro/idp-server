"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4515],{91468:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"content_06_developer-guide/implementation-guides/impl-18-spring-session","title":"Spring Session\u7d71\u5408\u30ac\u30a4\u30c9","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684","source":"@site/docs/content_06_developer-guide/04-implementation-guides/impl-18-spring-session.md","sourceDirName":"content_06_developer-guide/04-implementation-guides","slug":"/content_06_developer-guide/implementation-guides/impl-18-spring-session","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/impl-18-spring-session","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/04-implementation-guides/impl-18-spring-session.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/impl-17-external-integration"},"next":{"title":"JOSE\uff08JWT/JWS/JWE\uff09\u51e6\u7406\u5b9f\u88c5\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/impl-19-jose-handler"}}');var r=n(74848),o=n(28453);const t={},d="Spring Session\u7d71\u5408\u30ac\u30a4\u30c9",l={},c=[{value:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",id:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",level:2},{value:"\u6240\u8981\u6642\u9593",id:"\u6240\u8981\u6642\u9593",level:3},{value:"Spring Session\u3068\u306f",id:"spring-session\u3068\u306f",level:2},{value:"\u306a\u305cSpring Session\u304c\u5fc5\u8981\u304b",id:"\u306a\u305cspring-session\u304c\u5fc5\u8981\u304b",level:3},{value:"idp-server\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5229\u7528\u7b87\u6240",id:"idp-server\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5229\u7528\u7b87\u6240",level:2},{value:"1. OAuth\u8a8d\u53ef\u30d5\u30ed\u30fc\uff08Authorization Code Flow\uff09",id:"1-oauth\u8a8d\u53ef\u30d5\u30ed\u30fcauthorization-code-flow",level:3},{value:"\u5b9f\u88c5\u69cb\u9020",id:"\u5b9f\u88c5\u69cb\u9020",level:2},{value:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",level:3},{value:"\u5b9f\u88c5\u89e3\u8aac",id:"\u5b9f\u88c5\u89e3\u8aac",level:2},{value:"OAuthSessionRepository\uff08Core\u5c64\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09",id:"oauthsessionrepositorycore\u5c64\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",level:3},{value:"OAuthSessionDataSource\uff08Spring Session\u7d71\u5408\uff09",id:"oauthsessiondatasourcespring-session\u7d71\u5408",level:3},{value:"OAuthSessionDelegate\uff08Core\u5c64\u3078\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09",id:"oauthsessiondelegatecore\u5c64\u3078\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af",level:3},{value:"Spring Session\u8a2d\u5b9a",id:"spring-session\u8a2d\u5b9a",level:2},{value:"Gradle\u4f9d\u5b58\u95a2\u4fc2",id:"gradle\u4f9d\u5b58\u95a2\u4fc2",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u9078\u629e",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u9078\u629e",level:3},{value:"Option 1: \u30a4\u30f3\u30e1\u30e2\u30ea\uff08\u958b\u767a\u74b0\u5883\uff09",id:"option-1-\u30a4\u30f3\u30e1\u30e2\u30ea\u958b\u767a\u74b0\u5883",level:4},{value:"Option 2: Redis\uff08\u672c\u756a\u74b0\u5883\u63a8\u5968\uff09",id:"option-2-redis\u672c\u756a\u74b0\u5883\u63a8\u5968",level:4},{value:"SafeRedisSessionRepository\uff08\u8010\u969c\u5bb3\u6027\u5f37\u5316\uff09",id:"saferedissessionrepository\u8010\u969c\u5bb3\u6027\u5f37\u5316",level:2},{value:"Redis\u969c\u5bb3\u6642\u306eGraceful Degradation",id:"redis\u969c\u5bb3\u6642\u306egraceful-degradation",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:2},{value:"1. \u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8a2d\u5b9a",id:"1-\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8a2d\u5b9a",level:3},{value:"2. \u30bb\u30c3\u30b7\u30e7\u30f3ID\u751f\u6210",id:"2-\u30bb\u30c3\u30b7\u30e7\u30f3id\u751f\u6210",level:3},{value:"3. \u30bb\u30c3\u30b7\u30e7\u30f3Cookie\u8a2d\u5b9a",id:"3-\u30bb\u30c3\u30b7\u30e7\u30f3cookie\u8a2d\u5b9a",level:3},{value:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",id:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",level:2},{value:"\u30a8\u30e9\u30fc1: <code>Session not found</code>",id:"\u30a8\u30e9\u30fc1-session-not-found",level:3},{value:"\u30a8\u30e9\u30fc2: <code>Could not get JDBC Connection</code>\uff08Redis\u4f7f\u7528\u6642\uff09",id:"\u30a8\u30e9\u30fc2-could-not-get-jdbc-connectionredis\u4f7f\u7528\u6642",level:3},{value:"\u30a8\u30e9\u30fc3: <code>Session serialization error</code>",id:"\u30a8\u30e9\u30fc3-session-serialization-error",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3 vs \u30c8\u30fc\u30af\u30f3",id:"\u30bb\u30c3\u30b7\u30e7\u30f3-vs-\u30c8\u30fc\u30af\u30f3",level:2},{value:"\u3044\u3064\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u304b",id:"\u3044\u3064\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u304b",level:3},{value:"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",id:"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",level:2},{value:"\u5b9f\u88c5",id:"\u5b9f\u88c5",level:3},{value:"\u8a2d\u5b9a\uff08\u672c\u756a\u74b0\u5883\uff09",id:"\u8a2d\u5b9a\u672c\u756a\u74b0\u5883",level:3},{value:"\u30c6\u30b9\u30c8",id:"\u30c6\u30b9\u30c8",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:2},{value:"\ud83d\udd17 \u8a73\u7d30\u60c5\u5831",id:"-\u8a73\u7d30\u60c5\u5831",level:3}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"spring-session\u7d71\u5408\u30ac\u30a4\u30c9",children:"Spring Session\u7d71\u5408\u30ac\u30a4\u30c9"})}),"\n",(0,r.jsx)(s.h2,{id:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684",children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Spring Session\u3092\u4f7f\u3063\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"}),"\u306e\u5b9f\u88c5\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u76ee\u6a19\u3067\u3059\u3002"]}),"\n",(0,r.jsx)(s.h3,{id:"\u6240\u8981\u6642\u9593",children:"\u6240\u8981\u6642\u9593"}),"\n",(0,r.jsxs)(s.p,{children:["\u23f1\ufe0f ",(0,r.jsx)(s.strong,{children:"\u7d0420\u5206"})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"spring-session\u3068\u306f",children:"Spring Session\u3068\u306f"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"HTTP\u30bb\u30c3\u30b7\u30e7\u30f3\u3092Redis\u7b49\u306e\u5916\u90e8\u30b9\u30c8\u30a2\u306b\u4fdd\u5b58\u3059\u308b\u4ed5\u7d44\u307f"})}),"\n",(0,r.jsx)(s.h3,{id:"\u306a\u305cspring-session\u304c\u5fc5\u8981\u304b",children:"\u306a\u305cSpring Session\u304c\u5fc5\u8981\u304b"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u9805\u76ee"}),(0,r.jsx)(s.th,{children:"\u30c7\u30d5\u30a9\u30eb\u30c8\uff08\u30a4\u30f3\u30e1\u30e2\u30ea\uff09"}),(0,r.jsx)(s.th,{children:"Spring Session\uff08Redis\uff09"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u6c38\u7d9a\u5316"})}),(0,r.jsx)(s.td,{children:"\u274c \u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u3067\u6d88\u5931"}),(0,r.jsx)(s.td,{children:"\u2705 Redis\u4fdd\u5b58\u3067\u6c38\u7d9a\u5316"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3"})}),(0,r.jsx)(s.td,{children:"\u274c \u30b9\u30c6\u30a3\u30c3\u30ad\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u5fc5\u9808"}),(0,r.jsx)(s.td,{children:"\u2705 \u8907\u6570\u30b5\u30fc\u30d0\u30fc\u3067\u5171\u6709\u53ef\u80fd"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"HA\u69cb\u6210"})}),(0,r.jsx)(s.td,{children:"\u274c \u30b5\u30fc\u30d0\u30fc\u969c\u5bb3\u3067\u5168\u30bb\u30c3\u30b7\u30e7\u30f3\u6d88\u5931"}),(0,r.jsx)(s.td,{children:"\u2705 Redis\u5197\u9577\u5316\u3067\u53ef\u7528\u6027\u5411\u4e0a"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"idp-server\u306e\u8981\u4ef6"}),": \u30de\u30eb\u30c1\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u30fb\u9ad8\u53ef\u7528\u6027 \u2192 Spring Session\u5fc5\u9808"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"idp-server\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5229\u7528\u7b87\u6240",children:"idp-server\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5229\u7528\u7b87\u6240"}),"\n",(0,r.jsx)(s.h3,{id:"1-oauth\u8a8d\u53ef\u30d5\u30ed\u30fcauthorization-code-flow",children:"1. OAuth\u8a8d\u53ef\u30d5\u30ed\u30fc\uff08Authorization Code Flow\uff09"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. [\u30e6\u30fc\u30b6\u30fc] /oauth/authorize \u306b\u30a2\u30af\u30bb\u30b9\n   \u2193\n2. [idp-server] AuthorizationRequest\u4fdd\u5b58\n   \u2193 HttpSession\u306b\u4fdd\u5b58\n3. [\u30e6\u30fc\u30b6\u30fc] \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3067\u8a8d\u8a3c\n   \u2193\n4. [idp-server] HttpSession\u304b\u3089 AuthorizationRequest\u53d6\u5f97\n   \u2193 \u30bb\u30c3\u30b7\u30e7\u30f3\u7d99\u7d9a\n5. [idp-server] Authorization Code\u767a\u884c\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u306a\u3044\u3068"}),": \u8a8d\u8a3c\u5b8c\u4e86\u5f8c\u306bAuthorization Request\u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u5b9f\u88c5\u69cb\u9020",children:"\u5b9f\u88c5\u69cb\u9020"}),"\n",(0,r.jsx)(s.h3,{id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3",children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Core\u5c64\uff08\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\uff09\n  \u2193 \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\nOAuthSessionRepository\uff08\u62bd\u8c61\u5316\uff09\n  \u2193 \u5b9f\u88c5\nOAuthSessionDataSource\uff08Spring Session\u7d71\u5408\uff09\n  \u2193 \u5229\u7528\nHttpSession\uff08Spring Session\u7ba1\u7406\uff09\n  \u2193 \u4fdd\u5b58\u5148\nRedis\uff08\u5916\u90e8\u30b9\u30c8\u30a2\uff09\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u5b9f\u88c5\u89e3\u8aac",children:"\u5b9f\u88c5\u89e3\u8aac"}),"\n",(0,r.jsx)(s.h3,{id:"oauthsessionrepositorycore\u5c64\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9",children:"OAuthSessionRepository\uff08Core\u5c64\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff09"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5b9a\u7fa9\u5834\u6240"}),": ",(0,r.jsx)(s.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/repository/"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"public interface OAuthSessionRepository {\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u767b\u9332\n   */\n  void register(OAuthSession oAuthSession);\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u691c\u7d22\n   */\n  OAuthSession find(OAuthSessionKey oAuthSessionKey);\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u66f4\u65b0\n   */\n  void update(OAuthSession oAuthSession);\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u524a\u9664\n   */\n  void delete(OAuthSessionKey oAuthSessionKey);\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30dd\u30a4\u30f3\u30c8"}),": Core\u5c64\u306fSpring\u4f9d\u5b58\u306a\u3057\uff08\u79fb\u690d\u6027\uff09"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"oauthsessiondatasourcespring-session\u7d71\u5408",children:"OAuthSessionDataSource\uff08Spring Session\u7d71\u5408\uff09"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5b9f\u88c5"}),": ",(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(79292).A+"",children:"OAuthSessionDataSource.java"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'@Repository\npublic class OAuthSessionDataSource implements OAuthSessionRepository {\n\n  HttpSession httpSession;  // \u2705 Spring\u7ba1\u7406\u306eHttpSession\n  LoggerWrapper log = LoggerWrapper.getLogger(OAuthSessionDataSource.class);\n\n  public OAuthSessionDataSource(HttpSession httpSession) {\n    this.httpSession = httpSession;  // \u2705 Spring DI\u3067\u6ce8\u5165\n  }\n\n  @Override\n  public void register(OAuthSession oAuthSession) {\n    String sessionKey = oAuthSession.sessionKeyValue();\n    log.debug("registerSession: {}", sessionKey);\n    log.debug("register sessionId: {}", httpSession.getId());\n\n    // \u2705 HttpSession\u5c5e\u6027\u3068\u3057\u3066\u4fdd\u5b58\n    httpSession.setAttribute(sessionKey, oAuthSession);\n  }\n\n  @Override\n  public OAuthSession find(OAuthSessionKey oAuthSessionKey) {\n    String sessionKey = oAuthSessionKey.key();\n\n    // \u2705 HttpSession\u5c5e\u6027\u304b\u3089\u53d6\u5f97\n    OAuthSession oAuthSession = (OAuthSession) httpSession.getAttribute(sessionKey);\n\n    log.debug("find sessionId: {}", httpSession.getId());\n    log.debug("findSession: {}", sessionKey);\n\n    if (oAuthSession == null) {\n      log.debug("session not found");\n      return new OAuthSession();  // \u7a7a\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\n    }\n\n    return oAuthSession;\n  }\n\n  @Override\n  public void update(OAuthSession oAuthSession) {\n    String sessionKey = oAuthSession.sessionKeyValue();\n    log.debug("update sessionId: {}", httpSession.getId());\n    log.debug("updateSession: {}", sessionKey);\n\n    // \u2705 HttpSession\u5c5e\u6027\u3092\u4e0a\u66f8\u304d\n    httpSession.setAttribute(sessionKey, oAuthSession);\n  }\n\n  @Override\n  public void delete(OAuthSessionKey oAuthSessionKey) {\n    log.debug("delete sessionId: {}", httpSession.getId());\n    log.debug("deleteSession: {}", oAuthSessionKey.key());\n\n    // \u2705 \u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\n    httpSession.invalidate();\n  }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u2705 HttpSession\u3092DI\u6ce8\u5165\uff08Spring\u304c\u7ba1\u7406\uff09"}),"\n",(0,r.jsxs)(s.li,{children:["\u2705 ",(0,r.jsx)(s.code,{children:"setAttribute()"}),"/",(0,r.jsx)(s.code,{children:"getAttribute()"}),"\u3067\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u5b58\u30fb\u53d6\u5f97"]}),"\n",(0,r.jsx)(s.li,{children:"\u2705 \u30ed\u30b0\u51fa\u529b\u3067\u8ffd\u8de1\u53ef\u80fd"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"oauthsessiondelegatecore\u5c64\u3078\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af",children:"OAuthSessionDelegate\uff08Core\u5c64\u3078\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\uff09"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5b9f\u88c5"}),": ",(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(5822).A+"",children:"OAuthSessionService.java"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"@Service\npublic class OAuthSessionService implements OAuthSessionDelegate {\n\n  OAuthSessionRepository httpSessionRepository;\n\n  public OAuthSessionService(OAuthSessionRepository httpSessionRepository) {\n    this.httpSessionRepository = httpSessionRepository;\n  }\n\n  @Override\n  public void registerSession(OAuthSession oAuthSession) {\n    httpSessionRepository.register(oAuthSession);\n  }\n\n  @Override\n  public OAuthSession findOrInitialize(OAuthSessionKey oAuthSessionKey) {\n    OAuthSession oAuthSession = httpSessionRepository.find(oAuthSessionKey);\n\n    if (oAuthSession.exists()) {\n      return oAuthSession;\n    }\n\n    // \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u521d\u671f\u5316\n    return OAuthSession.init(oAuthSessionKey);\n  }\n\n  // update(), delete() \u30e1\u30bd\u30c3\u30c9\u3082\u540c\u69d8...\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Delegate\u30d1\u30bf\u30fc\u30f3\u306e\u7406\u7531"}),": Core\u5c64\u306fRepository\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u4f9d\u5b58\u3001\u5177\u4f53\u5b9f\u88c5\uff08Spring Session\uff09\u306f\u77e5\u3089\u306a\u3044"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"spring-session\u8a2d\u5b9a",children:"Spring Session\u8a2d\u5b9a"}),"\n",(0,r.jsx)(s.h3,{id:"gradle\u4f9d\u5b58\u95a2\u4fc2",children:"Gradle\u4f9d\u5b58\u95a2\u4fc2"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30d5\u30a1\u30a4\u30eb"}),": ",(0,r.jsx)(s.code,{children:"libs/idp-server-springboot-adapter/build.gradle"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-groovy",children:"dependencies {\n    // Spring Session Core\n    implementation 'org.springframework.session:spring-session-core'\n\n    // Redis\u3092\u4f7f\u3046\u5834\u5408\uff08\u63a8\u5968\uff09\n    // implementation 'org.springframework.session:spring-session-data-redis'\n}\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u9078\u629e",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u9078\u629e"}),"\n",(0,r.jsx)(s.h4,{id:"option-1-\u30a4\u30f3\u30e1\u30e2\u30ea\u958b\u767a\u74b0\u5883",children:"Option 1: \u30a4\u30f3\u30e1\u30e2\u30ea\uff08\u958b\u767a\u74b0\u5883\uff09"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u8a2d\u5b9a\u4e0d\u8981"})," - \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30f3\u30e1\u30e2\u30ea"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30e1\u30ea\u30c3\u30c8"}),": \u8a2d\u5b9a\u4e0d\u8981\u3001\u7c21\u5358\n",(0,r.jsx)(s.strong,{children:"\u30c7\u30e1\u30ea\u30c3\u30c8"}),": \u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u3067\u6d88\u5931\u3001\u30b9\u30b1\u30fc\u30eb\u3057\u306a\u3044"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h4,{id:"option-2-redis\u672c\u756a\u74b0\u5883\u63a8\u5968",children:"Option 2: Redis\uff08\u672c\u756a\u74b0\u5883\u63a8\u5968\uff09"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"application.properties"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-properties",children:"# Spring Session Redis\u8a2d\u5b9a\nspring.session.store-type=redis\nspring.session.redis.namespace=spring:session\nspring.session.timeout=1800  # 30\u5206\n\n# Redis\u63a5\u7d9a\nspring.data.redis.host=localhost\nspring.data.redis.port=6379\nspring.data.redis.password=\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Gradle\u4f9d\u5b58\u95a2\u4fc2\u8ffd\u52a0"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-groovy",children:"implementation 'org.springframework.session:spring-session-data-redis'\nimplementation 'org.springframework.boot:spring-boot-starter-data-redis'\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Java Config"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"@Configuration\n@EnableRedisHttpSession(maxInactiveIntervalInSeconds = 1800)\npublic class SessionConfig {\n\n  @Bean\n  public SafeRedisSessionRepository sessionRepository(\n      RedisOperations<String, Object> sessionRedisOperations) {\n    // \u2705 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u306a\u304fSafeRedisSessionRepository\u4f7f\u7528\n    return new SafeRedisSessionRepository(sessionRedisOperations);\n  }\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u30e1\u30ea\u30c3\u30c8"}),": \u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u3001\u6c38\u7d9a\u5316\u3001HA\u5bfe\u5fdc\n",(0,r.jsx)(s.strong,{children:"\u30c7\u30e1\u30ea\u30c3\u30c8"}),": Redis\u30a4\u30f3\u30d5\u30e9\u5fc5\u8981"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"saferedissessionrepository\u8010\u969c\u5bb3\u6027\u5f37\u5316",children:"SafeRedisSessionRepository\uff08\u8010\u969c\u5bb3\u6027\u5f37\u5316\uff09"}),"\n",(0,r.jsx)(s.h3,{id:"redis\u969c\u5bb3\u6642\u306egraceful-degradation",children:"Redis\u969c\u5bb3\u6642\u306eGraceful Degradation"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u5b9f\u88c5"}),": ",(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(25492).A+"",children:"SafeRedisSessionRepository.java"})]}),"\n",(0,r.jsxs)(s.p,{children:["idp-server\u3067\u306f\u3001",(0,r.jsx)(s.strong,{children:"Redis\u969c\u5bb3\u6642\u3067\u3082\u30b5\u30fc\u30d3\u30b9\u3092\u7d99\u7d9a"}),"\u3059\u308b\u305f\u3081\u306e\u72ec\u81ea\u5b9f\u88c5\u3092\u63d0\u4f9b\uff1a"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'/**\n * Redis\u969c\u5bb3\u6642\u3067\u3082\u4f8b\u5916\u3092\u30b9\u30ed\u30fc\u305b\u305a\u3001\u30ed\u30b0\u51fa\u529b\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u7d99\u7d9a\n *\n * \u8a2d\u8a08\u601d\u60f3:\n * - \u53ef\u7528\u6027\u512a\u5148: Redis\u969c\u5bb3\u3067\u3082IdP\u30b5\u30fc\u30d3\u30b9\u306f\u7d99\u7d9a\n * - Graceful Degradation: \u30bb\u30c3\u30b7\u30e7\u30f3\u5931\u308f\u308c\u3066\u3082\u8a8d\u8a3c\u30d5\u30ed\u30fc\u7d99\u7d9a\u53ef\u80fd\n * - \u76e3\u8996\u53ef\u80fd: \u30a8\u30e9\u30fc\u30ed\u30b0\u3067\u969c\u5bb3\u691c\u77e5\n */\npublic class SafeRedisSessionRepository extends RedisIndexedSessionRepository {\n\n  @Override\n  public void save(RedisSession session) {\n    try {\n      super.save(session);\n    } catch (Exception e) {\n      // \u2705 \u4f8b\u5916\u3092\u30b9\u30ed\u30fc\u305b\u305a\u3001\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u307f\n      logger.error("Failed to save session (Redis disconnected): {}", e.getMessage());\n      // \u30b5\u30fc\u30d3\u30b9\u306f\u7d99\u7d9a\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u5931\u308f\u308c\u308b\u304c\u3001\u8a8d\u8a3c\u30d5\u30ed\u30fc\u306f\u7d99\u7d9a\u53ef\u80fd\uff09\n    }\n  }\n\n  @Override\n  public RedisSession findById(String id) {\n    try {\n      return super.findById(id);\n    } catch (Exception e) {\n      logger.error("Failed to load session: {}", e.getMessage());\n      // \u2705 null\u3092\u8fd4\u3059\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u306a\u3057\u3068\u3057\u3066\u6271\u3046\uff09\n      return null;\n    }\n  }\n\n  @Override\n  public void deleteById(String id) {\n    try {\n      super.deleteById(id);\n    } catch (Exception e) {\n      logger.error("Failed to delete session: {}", e.getMessage());\n      // \u2705 \u524a\u9664\u5931\u6557\u3092\u7121\u8996\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u81ea\u52d5\u671f\u9650\u5207\u308c\u3067\u524a\u9664\u3055\u308c\u308b\uff09\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u52d5\u4f5c"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"Redis\u6b63\u5e38\u6642"}),": \u901a\u5e38\u901a\u308a\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u30fb\u53d6\u5f97"]}),"\n",(0,r.jsxs)(s.li,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"Redis\u969c\u5bb3\u6642"}),": \u30a8\u30e9\u30fc\u30ed\u30b0\u51fa\u529b + \u30b5\u30fc\u30d3\u30b9\u7d99\u7d9a\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u306a\u3057\u3067\u52d5\u4f5c\uff09"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u7528\u9014"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u2705 HA\u69cb\u6210\u306eIdP\uff08Redis\u969c\u5bb3\u6642\u3082\u30c0\u30a6\u30f3\u3057\u306a\u3044\uff09"}),"\n",(0,r.jsx)(s.li,{children:"\u2705 \u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\uff08Redis + Stateless Fallback\uff09"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fallback\u52d5\u4f5c\u4f8b"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304c\u30ed\u30b0\u30a4\u30f3\u5b9f\u884c\n   \u2193\n2. Redis\u969c\u5bb3\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u5931\u6557\n   \u2193 SafeRedisSessionRepository \u304c\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u307f\n3. \u8a8d\u8a3c\u306f\u6210\u529f\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u306a\u3057\u3067\u3082\u52d5\u4f5c\uff09\n   \u2193\n4. Authorization Code\u767a\u884c\n   \u2193 \u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97\u5931\u6557 \u2192 Stateless\u51e6\u7406\u306bFallback\n5. \u30c8\u30fc\u30af\u30f3\u767a\u884c\u6210\u529f\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u91cd\u8981"}),": Redis\u969c\u5bb3\u6642\u3082IdP\u30b5\u30fc\u30d3\u30b9\u306f\u7d99\u7d9a\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u6a5f\u80fd\u306e\u307f\u52a3\u5316\uff09"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,r.jsx)(s.h3,{id:"1-\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8a2d\u5b9a",children:"1. \u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8a2d\u5b9a"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-properties",children:"# 30\u5206\u3067\u81ea\u52d5\u524a\u9664\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\nspring.session.timeout=1800\n\n# Authorization Request\u6709\u52b9\u671f\u9650\u3068\u5408\u308f\u305b\u308b\n"})}),"\n",(0,r.jsx)(s.h3,{id:"2-\u30bb\u30c3\u30b7\u30e7\u30f3id\u751f\u6210",children:"2. \u30bb\u30c3\u30b7\u30e7\u30f3ID\u751f\u6210"}),"\n",(0,r.jsx)(s.p,{children:"Spring Session\u304c\u81ea\u52d5\u751f\u6210\uff08UUID\uff09"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"JSESSIONID=550e8400-e29b-41d4-a716-446655440000\n"})}),"\n",(0,r.jsx)(s.h3,{id:"3-\u30bb\u30c3\u30b7\u30e7\u30f3cookie\u8a2d\u5b9a",children:"3. \u30bb\u30c3\u30b7\u30e7\u30f3Cookie\u8a2d\u5b9a"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-properties",children:"# Cookie\u8a2d\u5b9a\nserver.servlet.session.cookie.http-only=true  # XSS\u5bfe\u7b56\nserver.servlet.session.cookie.secure=true     # HTTPS\u5fc5\u9808\nserver.servlet.session.cookie.same-site=lax   # CSRF\u5bfe\u7b56\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",children:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"}),"\n",(0,r.jsxs)(s.h3,{id:"\u30a8\u30e9\u30fc1-session-not-found",children:["\u30a8\u30e9\u30fc1: ",(0,r.jsx)(s.code,{children:"Session not found"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u539f\u56e0"}),": \u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8 or \u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\uff08\u30a4\u30f3\u30e1\u30e2\u30ea\u4f7f\u7528\u6642\uff09"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Redis\u3092\u4f7f\u7528\uff08\u6c38\u7d9a\u5316\uff09"}),"\n",(0,r.jsx)(s.li,{children:"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5ef6\u9577"}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"\u30a8\u30e9\u30fc2-could-not-get-jdbc-connectionredis\u4f7f\u7528\u6642",children:["\u30a8\u30e9\u30fc2: ",(0,r.jsx)(s.code,{children:"Could not get JDBC Connection"}),"\uff08Redis\u4f7f\u7528\u6642\uff09"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u539f\u56e0"}),": Redis\u63a5\u7d9a\u5931\u6557"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89e3\u6c7a\u7b56"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Redis\u8d77\u52d5\u78ba\u8a8d\nredis-cli ping\n# PONG \u304c\u8fd4\u308c\u3070OK\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"\u30a8\u30e9\u30fc3-session-serialization-error",children:["\u30a8\u30e9\u30fc3: ",(0,r.jsx)(s.code,{children:"Session serialization error"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u539f\u56e0"}),": \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cSerializable\u672a\u5b9f\u88c5"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u89e3\u6c7a\u7b56"}),": ",(0,r.jsx)(s.code,{children:"OAuthSession"}),"\u30af\u30e9\u30b9\u306b",(0,r.jsx)(s.code,{children:"Serializable"}),"\u5b9f\u88c5"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"public class OAuthSession implements Serializable {\n    private static final long serialVersionUID = 1L;\n    // ...\n}\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3-vs-\u30c8\u30fc\u30af\u30f3",children:"\u30bb\u30c3\u30b7\u30e7\u30f3 vs \u30c8\u30fc\u30af\u30f3"}),"\n",(0,r.jsx)(s.h3,{id:"\u3044\u3064\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u304b",children:"\u3044\u3064\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u304b"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u7528\u9014"}),(0,r.jsx)(s.th,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3"}),(0,r.jsx)(s.th,{children:"\u30c8\u30fc\u30af\u30f3"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Authorization Flow\u4e2d"})}),(0,r.jsx)(s.td,{children:"\u2705 \u4f7f\u7528\uff08\u8a8d\u8a3c\u524d\uff09"}),(0,r.jsx)(s.td,{children:"\u274c \u307e\u3060\u30c8\u30fc\u30af\u30f3\u306a\u3057"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"API\u8a8d\u8a3c"})}),(0,r.jsx)(s.td,{children:"\u274c \u4f7f\u7528\u3057\u306a\u3044"}),(0,r.jsx)(s.td,{children:"\u2705 Access Token"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u30b9\u30c6\u30fc\u30c8\u30d5\u30eb"})}),(0,r.jsx)(s.td,{children:"\u2705 \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u72b6\u614b\u7ba1\u7406"}),(0,r.jsx)(s.td,{children:"\u274c \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9"})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"idp-server\u306e\u4f7f\u3044\u5206\u3051"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u2705 \u30bb\u30c3\u30b7\u30e7\u30f3: Authorization Request \u2192 \u8a8d\u8a3c \u2192 Authorization Code\u767a\u884c\u307e\u3067"}),"\n",(0,r.jsx)(s.li,{children:"\u2705 \u30c8\u30fc\u30af\u30f3: Authorization Code\u767a\u884c\u5f8c\u306eAPI\u547c\u3073\u51fa\u3057"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",children:"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8"}),"\n",(0,r.jsx)(s.p,{children:"Spring Session\u7d71\u5408\u6642\u306e\u78ba\u8a8d\u9805\u76ee\uff1a"}),"\n",(0,r.jsx)(s.h3,{id:"\u5b9f\u88c5",children:"\u5b9f\u88c5"}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","OAuthSessionRepository\u5b9f\u88c5"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","HttpSession DI\u6ce8\u5165"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(s.code,{children:"setAttribute()"}),"/",(0,r.jsx)(s.code,{children:"getAttribute()"}),"\u4f7f\u7528"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","OAuthSessionDelegate\u5b9f\u88c5"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"\u8a2d\u5b9a\u672c\u756a\u74b0\u5883",children:"\u8a2d\u5b9a\uff08\u672c\u756a\u74b0\u5883\uff09"}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","spring.session.store-type=redis"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Redis\u63a5\u7d9a\u8a2d\u5b9a"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8a2d\u5b9a"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Cookie\u8a2d\u5b9a\uff08http-only, secure, same-site\uff09"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"\u30c6\u30b9\u30c8",children:"\u30c6\u30b9\u30c8"}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u30fb\u53d6\u5f97\u30c6\u30b9\u30c8"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u5f8c\u306e\u6c38\u7d9a\u5316\u78ba\u8a8d\uff08Redis\uff09"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","\u30de\u30eb\u30c1\u30b5\u30fc\u30d0\u30fc\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u78ba\u8a8d"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,r.jsx)(s.p,{children:"\u2705 Spring Session\u7d71\u5408\u3092\u7406\u89e3\u3057\u305f\uff01"}),"\n",(0,r.jsx)(s.h3,{id:"-\u8a73\u7d30\u60c5\u5831",children:"\ud83d\udd17 \u8a73\u7d30\u60c5\u5831"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"../content_10_ai_developer/ai-12-platform.md#session---%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86",children:"AI\u958b\u767a\u8005\u5411\u3051: Platform - Session"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"/idp-server/docs/content_03_concepts/concept-07-session-management",children:"Concepts: Session Management"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://spring.io/projects/spring-session",children:"Spring Session Documentation"})}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(79292).A+"",children:"OAuthSessionDataSource.java"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(5822).A+"",children:"OAuthSessionService.java"}),"\n",(0,r.jsx)(s.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12"]}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},25492:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/files/SafeRedisSessionRepository-8787be7b11988a28743d97210bed3189.java"},5822:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/files/OAuthSessionService-eb1484d74da23693143d5303abbda971.java"},79292:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/files/OAuthSessionDataSource-aa03baa1056f78dd3584dddbbde3f655.java"},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>d});var i=n(96540);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);