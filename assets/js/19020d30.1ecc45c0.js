"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8366],{32800:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"content_10_ai_developer/ai-11-core","title":"idp-server-core - OAuth 2.0/OIDC\u6e96\u62e0\u30b3\u30a2\u30a8\u30f3\u30b8\u30f3","description":"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981","source":"@site/docs/content_10_ai_developer/ai-11-core.md","sourceDirName":"content_10_ai_developer","slug":"/content_10_ai_developer/ai-11-core","permalink":"/idp-server/docs/content_10_ai_developer/ai-11-core","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-11-core.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"idp-server-use-cases - \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64\uff08EntryService\u5b9f\u88c5\uff09","permalink":"/idp-server/docs/content_10_ai_developer/ai-10-use-cases"},"next":{"title":"idp-server-platform - \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u57fa\u76e4","permalink":"/idp-server/docs/content_10_ai_developer/ai-12-platform"}}');var t=i(74848),s=i(28453);const o={},d="idp-server-core - OAuth 2.0/OIDC\u6e96\u62e0\u30b3\u30a2\u30a8\u30f3\u30b8\u30f3",c={},a=[{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9",level:3},{value:"\u4f9d\u5b58\u95a2\u4fc2",id:"\u4f9d\u5b58\u95a2\u4fc2",level:3},{value:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020",id:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020",level:2},{value:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3",id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3",level:2},{value:"Handler-Service-Repository \u30d1\u30bf\u30fc\u30f3",id:"handler-service-repository-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"1. Handler - \u30d7\u30ed\u30c8\u30b3\u30eb\u51e6\u7406\u30fb\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3",id:"1-handler---\u30d7\u30ed\u30c8\u30b3\u30eb\u51e6\u7406\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3",level:4},{value:"2. Service - \u7d14\u7c8b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",id:"2-service---\u7d14\u7c8b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",level:4},{value:"3. Repository - \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u62bd\u8c61\u5316",id:"3-repository---\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u62bd\u8c61\u5316",level:4},{value:"Validator vs Verifier",id:"validator-vs-verifier",level:3},{value:"Verifier\u306e\u968e\u5c64\u30d1\u30bf\u30fc\u30f3\uff08Base + Extension\uff09",id:"verifier\u306e\u968e\u5c64\u30d1\u30bf\u30fc\u30f3base--extension",level:3},{value:"AuthorizationCodeGrantVerifier - \u7d71\u5408Verifier",id:"authorizationcodegrantverifier---\u7d71\u5408verifier",level:4},{value:"Base Verifier - \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\u691c\u8a3c",id:"base-verifier---\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\u691c\u8a3c",level:4},{value:"Extension Verifier - \u62e1\u5f35\u4ed5\u69d8\u691c\u8a3c",id:"extension-verifier---\u62e1\u5f35\u4ed5\u69d8\u691c\u8a3c",level:4},{value:"Verifier\u30d1\u30bf\u30fc\u30f3\u306e\u5229\u70b9",id:"verifier\u30d1\u30bf\u30fc\u30f3\u306e\u5229\u70b9",level:3},{value:"\u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306e\u7d71\u5408",id:"\u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306e\u7d71\u5408",level:3},{value:"\u4e3b\u8981\u30c9\u30e1\u30a4\u30f3",id:"\u4e3b\u8981\u30c9\u30e1\u30a4\u30f3",level:2},{value:"1. OAuth (<code>openid/oauth/</code>)",id:"1-oauth-openidoauth",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",level:4},{value:"AuthorizationRequest - \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",id:"authorizationrequest---\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",level:4},{value:"AuthorizationResponse - \u8a8d\u53ef\u30ec\u30b9\u30dd\u30f3\u30b9\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",id:"authorizationresponse---\u8a8d\u53ef\u30ec\u30b9\u30dd\u30f3\u30b9\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",level:4},{value:"OAuthSession - \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",id:"oauthsession---\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",level:4},{value:"Configuration - \u8a2d\u5b9a\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",id:"configuration---\u8a2d\u5b9a\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",level:4},{value:"2. Token (<code>openid/token/</code>)",id:"2-token-openidtoken",level:3},{value:"3. Identity (<code>openid/identity/</code>)",id:"3-identity-openididentity",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-1",level:4},{value:"User - \u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",id:"user---\u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",level:4},{value:"UserStatus - \u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9",id:"userstatus---\u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9",level:4},{value:"Address - \u4f4f\u6240\u30af\u30ec\u30fc\u30e0",id:"address---\u4f4f\u6240\u30af\u30ec\u30fc\u30e0",level:4},{value:"4. Authentication (<code>openid/authentication/</code>)",id:"4-authentication-openidauthentication",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-2",level:4},{value:"Authentication - \u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",id:"authentication---\u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",level:4},{value:"AuthenticationTransaction - \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3",id:"authenticationtransaction---\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3",level:4},{value:"AuthenticationMethod - \u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f",id:"authenticationmethod---\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f",level:4},{value:"5. Grant Management (<code>openid/grant_management/</code>)",id:"5-grant-management-openidgrant_management",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-3",level:4},{value:"AuthorizationGranted - \u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8",id:"authorizationgranted---\u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8",level:4},{value:"AuthorizationGrant - \u8a8d\u53ef\u30b0\u30e9\u30f3\u30c8\uff08\u4e00\u6642\uff09",id:"authorizationgrant---\u8a8d\u53ef\u30b0\u30e9\u30f3\u30c8\u4e00\u6642",level:4},{value:"6. Discovery (<code>openid/discovery/</code>)",id:"6-discovery-openiddiscovery",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-4",level:4},{value:"Discovery Metadata - OpenID Provider Metadata",id:"discovery-metadata---openid-provider-metadata",level:4},{value:"JWKS Endpoint - JSON Web Key Set",id:"jwks-endpoint---json-web-key-set",level:4},{value:"7. UserInfo (<code>openid/userinfo/</code>)",id:"7-userinfo-openiduserinfo",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-5",level:4},{value:"UserInfo Endpoint",id:"userinfo-endpoint",level:4},{value:"8. Federation (<code>openid/federation/</code>)",id:"8-federation-openidfederation",level:3},{value:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-6",level:4},{value:"Federation Flow",id:"federation-flow",level:4},{value:"9. Plugin (<code>openid/plugin/</code>)",id:"9-plugin-openidplugin",level:3},{value:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30d1\u30bf\u30fc\u30f3",id:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u60aa\u3044\u4f8b \u274c",id:"\u60aa\u3044\u4f8b-",level:3},{value:"\u826f\u3044\u4f8b \u2705",id:"\u826f\u3044\u4f8b-",level:3},{value:"\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",id:"\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",level:2},{value:"\u4f8b\u5916\u547d\u540d\u30d1\u30bf\u30fc\u30f3",id:"\u4f8b\u5916\u547d\u540d\u30d1\u30bf\u30fc\u30f3",level:3},{value:"<code>throwExceptionIf{Condition}() \u30d1\u30bf\u30fc\u30f3</code>",id:"throwexceptionifcondition-\u30d1\u30bf\u30fc\u30f3",level:3},{value:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",id:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u274c 1. Util\u6feb\u7528",id:"-1-util\u6feb\u7528",level:3},{value:"\u274c 2. Map\u6feb\u7528",id:"-2-map\u6feb\u7528",level:3},{value:"\u274c 3. \u6c38\u7d9a\u5316\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",id:"-3-\u6c38\u7d9a\u5316\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",level:3},{value:"\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3",id:"\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3",level:2},{value:"TenantAttributes\u6d3b\u7528",id:"tenantattributes\u6d3b\u7528",level:3},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"idp-server-core \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",id:"idp-server-core-\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"idp-server-core---oauth-20oidc\u6e96\u62e0\u30b3\u30a2\u30a8\u30f3\u30b8\u30f3",children:"idp-server-core - OAuth 2.0/OIDC\u6e96\u62e0\u30b3\u30a2\u30a8\u30f3\u30b8\u30f3"})}),"\n",(0,t.jsx)(n.h2,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/"}),"\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"OAuth 2.0\u3001OpenID Connect (OIDC)\u3001\u304a\u3088\u3073\u305d\u306e\u62e1\u5f35\u4ed5\u69d8\u306b\u6e96\u62e0\u3057\u305f\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30fb\u30c8\u30fc\u30af\u30f3\u767a\u884c\u306e\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u63d0\u4f9b\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30d7\u30ed\u30c8\u30b3\u30eb\u6e96\u62e0"}),": RFC 6749 (OAuth 2.0), RFC 6750 (Bearer Token), OpenID Connect Core 1.0\u7b49"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af"}),": Handler-Service-Repository\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308b\u5c64\u8cac\u4efb\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u62e1\u5f35\u53ef\u80fd\u6027"}),": Plugin\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u3088\u308b\u6a5f\u80fd\u62e1\u5f35"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4f9d\u5b58\u95a2\u4fc2",children:"\u4f9d\u5b58\u95a2\u4fc2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"idp-server-core\n  \u2193 (\u4f9d\u5b58)\nidp-server-platform (\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u30fb\u30bb\u30c3\u30b7\u30e7\u30f3\u30fb\u30ed\u30b0\u7b49)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020",children:"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/\n\u251c\u2500\u2500 openid/\n\u2502   \u251c\u2500\u2500 authentication/       # \u8a8d\u8a3c\u30c9\u30e1\u30a4\u30f3\n\u2502   \u251c\u2500\u2500 discovery/           # OIDC Discovery\n\u2502   \u251c\u2500\u2500 federation/          # \u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\n\u2502   \u251c\u2500\u2500 grant_management/    # \u30b0\u30e9\u30f3\u30c8\u7ba1\u7406\n\u2502   \u251c\u2500\u2500 identity/            # Identity\u30fb\u8eab\u5143\u78ba\u8a8d\n\u2502   \u251c\u2500\u2500 oauth/               # OAuth 2.0\u30b3\u30a2\n\u2502   \u251c\u2500\u2500 plugin/              # \u30d7\u30e9\u30b0\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n\u2502   \u251c\u2500\u2500 token/               # \u30c8\u30fc\u30af\u30f3\u51e6\u7406\n\u2502   \u2514\u2500\u2500 userinfo/            # UserInfo \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"find libs/idp-server-core/src/main/java/org/idp/server/core -type d -maxdepth 2"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3",children:"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"handler-service-repository-\u30d1\u30bf\u30fc\u30f3",children:"Handler-Service-Repository \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.p,{children:"idp-server-core\u3067\u306f\u3001\u4ee5\u4e0b\u306e3\u5c64\u30d1\u30bf\u30fc\u30f3\u3067\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\uff1a"}),"\n",(0,t.jsx)(n.h4,{id:"1-handler---\u30d7\u30ed\u30c8\u30b3\u30eb\u51e6\u7406\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3",children:"1. Handler - \u30d7\u30ed\u30c8\u30b3\u30eb\u51e6\u7406\u30fb\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u547d\u540d\u898f\u5247"}),": ",(0,t.jsx)(n.code,{children:"{'{Domain}{Action}Handler'}"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u30d7\u30ed\u30c8\u30b3\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u53d7\u3051\u53d6\u308a"}),"\n",(0,t.jsx)(n.li,{children:"Validator/Verifier\u306b\u3088\u308b\u691c\u8a3c"}),"\n",(0,t.jsx)(n.li,{children:"Repository\u304b\u3089\u306e\u30c7\u30fc\u30bf\u53d6\u5f97"}),"\n",(0,t.jsx)(n.li,{children:"Service/Creator\u3078\u306e\u51e6\u7406\u59d4\u8b72"}),"\n",(0,t.jsx)(n.li,{children:"\u30d7\u30ed\u30c8\u30b3\u30eb\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u751f\u6210"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5b9f\u88c5\u4f8b"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/handler/OAuthAuthorizeHandler.java#L51",children:"OAuthAuthorizeHandler.java:51"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u60c5\u5831\u6e90: libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/handler/OAuthAuthorizeHandler.java\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e77-133\u884c\u76ee\n */\npublic class OAuthAuthorizeHandler {\n\n  LoggerWrapper log = LoggerWrapper.getLogger(OAuthAuthorizeHandler.class);\n  AuthorizationResponseCreators creators;\n  AuthorizationRequestRepository authorizationRequestRepository;\n  AuthorizationCodeGrantRepository authorizationCodeGrantRepository;\n  OAuthTokenCommandRepository oAuthTokenCommandRepository;\n  AuthorizationServerConfigurationQueryRepository authorizationServerConfigurationQueryRepository;\n  ClientConfigurationQueryRepository clientConfigurationQueryRepository;\n\n  public AuthorizationResponse handle(\n      OAuthAuthorizeRequest request, OAuthSessionDelegate delegate) {\n\n    // 1. \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u5fc5\u8981\u60c5\u5831\u3092\u62bd\u51fa\n    Tenant tenant = request.tenant();\n    AuthorizationRequestIdentifier authorizationRequestIdentifier = request.toIdentifier();\n    User user = request.user();\n    Authentication authentication = request.authentication();\n    CustomProperties customProperties = request.toCustomProperties();\n    DeniedScopes deniedScopes = request.toDeniedScopes();\n\n    // 2. Validator\u3067\u5165\u529b\u691c\u8a3c\n    OAuthAuthorizeRequestValidator validator =\n        new OAuthAuthorizeRequestValidator(\n            authorizationRequestIdentifier, user, authentication, customProperties);\n    validator.validate();\n\n    // 3. Repository\u304b\u3089\u30c7\u30fc\u30bf\u53d6\u5f97\uff08\u6ce8\u610f: Tenant\u7b2c\u4e00\u5f15\u6570\uff09\n    AuthorizationRequest authorizationRequest =\n        authorizationRequestRepository.get(tenant, authorizationRequestIdentifier);\n    RequestedClientId requestedClientId = authorizationRequest.requestedClientId();\n    AuthorizationServerConfiguration authorizationServerConfiguration =\n        authorizationServerConfigurationQueryRepository.get(tenant);\n    ClientConfiguration clientConfiguration =\n        clientConfigurationQueryRepository.get(tenant, requestedClientId);\n\n    // 4. Context\u3092\u69cb\u7bc9\n    OAuthAuthorizeContext context =\n        new OAuthAuthorizeContext(\n            authorizationRequest,\n            user,\n            authentication,\n            customProperties,\n            deniedScopes,\n            authorizationServerConfiguration,\n            clientConfiguration);\n\n    // 5. Creator\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u751f\u6210\n    AuthorizationResponseCreator authorizationResponseCreator =\n        creators.get(context.responseType());\n    AuthorizationResponse authorizationResponse = authorizationResponseCreator.create(context);\n\n    // 6. \u8a8d\u53ef\u30b3\u30fc\u30c9/\u30c8\u30fc\u30af\u30f3\u306e\u6c38\u7d9a\u5316\n    AuthorizationGrant authorizationGrant = context.authorize();\n    if (authorizationResponse.hasAuthorizationCode()) {\n      AuthorizationCodeGrant authorizationCodeGrant =\n          AuthorizationCodeGrantCreator.create(context, authorizationResponse);\n      authorizationCodeGrantRepository.register(tenant, authorizationCodeGrant);\n    }\n\n    if (authorizationResponse.hasAccessToken()) {\n      OAuthToken oAuthToken = OAuthTokenFactory.create(authorizationResponse, authorizationGrant);\n      oAuthTokenCommandRepository.register(tenant, oAuthToken);\n    }\n\n    // 7. \u30bb\u30c3\u30b7\u30e7\u30f3\u767b\u9332\n    OAuthSessionKey oAuthSessionKey =\n        new OAuthSessionKey(tenant.identifierValue(), requestedClientId.value());\n    OAuthSession session =\n        OAuthSession.create(oAuthSessionKey, user, authentication, authorizationRequest.maxAge());\n    delegate.registerSession(session);\n\n    return authorizationResponse;\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Tenant\u7b2c\u4e00\u5f15\u6570"}),": \u5168Repository\u64cd\u4f5c\u3067",(0,t.jsx)(n.code,{children:"Tenant"}),"\u3092\u6700\u521d\u306b\u6e21\u3059\uff08\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Validator/Verifier\u5206\u96e2"}),": \u5165\u529b\u691c\u8a3c\u3068\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u691c\u8a3c\u3092\u660e\u78ba\u306b\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Context Pattern"}),": \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u3092Context\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30ab\u30d7\u30bb\u30eb\u5316"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Factory/Creator"}),": \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u30ed\u30b8\u30c3\u30af\u3092\u5c02\u7528\u30af\u30e9\u30b9\u306b\u5206\u96e2"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"2-service---\u7d14\u7c8b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",children:"2. Service - \u7d14\u7c8b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u547d\u540d\u898f\u5247"}),": ",(0,t.jsx)(n.code,{children:"{'{Domain}{Action}Service'}"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"RFC\u6e96\u62e0\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u5b9f\u88c5"}),"\n",(0,t.jsx)(n.li,{children:"\u526f\u4f5c\u7528\u306e\u306a\u3044\u7d14\u7c8b\u306a\u51e6\u7406\uff08\u53ef\u80fd\u306a\u9650\u308a\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u8907\u6570\u306eRepository\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30ed\u30b8\u30c3\u30af"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5b9f\u88c5\u4f8b"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/service/AuthorizationCodeGrantService.java#L96",children:"AuthorizationCodeGrantService.java:96"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * 4.1.3. Access Token Request authorization code handling\n *\n * <p>The client makes a request to the token endpoint by sending the following parameters using the\n * "application/x-www-form-urlencoded" format per Appendix B with a character encoding of UTF-8 in\n * the HTTP request entity-body:\n *\n * <p>grant_type REQUIRED. Value MUST be set to "authorization_code".\n * <p>code REQUIRED. The authorization code received from the authorization server.\n * <p>redirect_uri REQUIRED, if the "redirect_uri" parameter was included in the authorization\n *     request as described in Section 4.1.1, and their values MUST be identical.\n * <p>client_id REQUIRED, if the client is not authenticating with the authorization server as\n *     described in Section 3.2.1.\n *\n * <p>For example, the client makes the following HTTP request using TLS (with extra line breaks for\n * display purposes only):\n *\n * <p>POST /token HTTP/1.1 Host: server.example.com Authorization: Basic\n * czZCaGRSa3F0MzpnWDFmQmF0M2JW Content-Type: application/x-www-form-urlencoded\n *\n * <p>grant_type=authorization_code&code=SplxlOBeZQQYbYS6WxSbIA\n * &redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb\n *\n * @see <a href="https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3">4.1.3. Access Token Request</a>\n *\n * \u60c5\u5831\u6e90: libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/service/AuthorizationCodeGrantService.java\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e1-95\u884c\u76ee\uff08Javadoc\u30b3\u30e1\u30f3\u30c8\uff09\n */\npublic class AuthorizationCodeGrantService\n    implements OAuthTokenCreationService, RefreshTokenCreatable, CNonceCreatable {\n\n  AuthorizationRequestRepository authorizationRequestRepository;\n  OAuthTokenCommandRepository oAuthTokenCommandRepository;\n  // ...\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"RFC\u5f15\u7528Javadoc"}),": \u4ed5\u69d8\u66f8\u306e\u7ae0\u756a\u53f7\u30fb\u5f15\u7528\u3092\u5fc5\u305a\u8a18\u8f09"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"}),": \u6a5f\u80fd\u7279\u6027\u3092\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u8868\u73fe\uff08",(0,t.jsx)(n.code,{children:"RefreshTokenCreatable"}),"\u7b49\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u96c6\u4e2d"}),": \u30d7\u30ed\u30c8\u30b3\u30eb\u8a73\u7d30\u306fService\u306b\u96c6\u7d04"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3-repository---\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u62bd\u8c61\u5316",children:"3. Repository - \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u62bd\u8c61\u5316"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u547d\u540d\u898f\u5247"}),": ",(0,t.jsx)(n.code,{children:"{'{Entity}QueryRepository'}"})," / ",(0,t.jsx)(n.code,{children:"{'{Entity}CommandRepository'}"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CQRS (Command Query Responsibility Segregation) \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.li,{children:"\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u62bd\u8c61\u5316"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u7981\u6b62"})," - \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u306e\u307f"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5b9f\u88c5\u4f8b"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/configuration/client/ClientConfigurationQueryRepository.java#L23",children:"ClientConfigurationQueryRepository.java:23"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u60c5\u5831\u6e90: libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/configuration/client/ClientConfigurationQueryRepository.java\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e23-39\u884c\u76ee\n */\npublic interface ClientConfigurationQueryRepository {\n\n  // \u2705 \u5fc5\u9808\u5b58\u5728: get() - \u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u4f8b\u5916\u30b9\u30ed\u30fc\n  ClientConfiguration get(Tenant tenant, RequestedClientId requestedClientId);\n  ClientConfiguration get(Tenant tenant, ClientIdentifier clientIdentifier);\n\n  // \u2705 \u4efb\u610f\u5b58\u5728: find() - \u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306fnull/\u7a7a\u3092\u8fd4\u5374\n  ClientConfiguration find(Tenant tenant, ClientIdentifier clientIdentifier);\n  ClientConfiguration findWithDisabled(\n      Tenant tenant, ClientIdentifier clientIdentifier, boolean includeDisabled);\n\n  // \u2705 \u30ea\u30b9\u30c8\u53d6\u5f97: findList()\n  List<ClientConfiguration> findList(Tenant tenant, int limit, int offset);\n  List<ClientConfiguration> findList(Tenant tenant, ClientQueries queries);\n\n  // \u2705 \u30ab\u30a6\u30f3\u30c8: findTotalCount()\n  long findTotalCount(Tenant tenant, ClientQueries queries);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\ud83d\udea8 ",(0,t.jsx)(n.strong,{children:"Tenant\u7b2c\u4e00\u5f15\u6570\u5fc5\u9808"}),": \u5168\u30e1\u30bd\u30c3\u30c9\u3067",(0,t.jsx)(n.code,{children:"Tenant"}),"\u304c\u7b2c\u4e00\u5f15\u6570\uff08\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2\u306e\u57fa\u672c\u539f\u5247\uff09","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f8b\u5916"}),": ",(0,t.jsx)(n.code,{children:"OrganizationRepository"}),"\u306e\u307f\uff08\u7d44\u7e54\u306f\u30c6\u30ca\u30f3\u30c8\u3088\u308a\u4e0a\u4f4d\u6982\u5ff5\uff09"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"get() vs find()"}),": ",(0,t.jsx)(n.code,{children:"get()"}),"\u306f\u5fc5\u9808\u5b58\u5728\u3001",(0,t.jsx)(n.code,{children:"find()"}),"\u306f\u4efb\u610f\u5b58\u5728"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Query/Command\u5206\u96e2"}),": \u8aad\u307f\u53d6\u308a\uff08Query\uff09\u3068\u66f8\u304d\u8fbc\u307f\uff08Command\uff09\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5f15\u6570"}),": ",(0,t.jsx)(n.code,{children:"String"}),"\u3067\u306f\u306a\u304f",(0,t.jsx)(n.code,{children:"RequestedClientId"}),"\u7b49\u306e\u578b\u5b89\u5168\u306a\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"validator-vs-verifier",children:"Validator vs Verifier"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Validator"}),": \u5165\u529b\u5f62\u5f0f\u30c1\u30a7\u30c3\u30af \u2192 ",(0,t.jsx)(n.code,{children:"{'{Operation}BadRequestException'}"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u5f62\u5f0f\u30c1\u30a7\u30c3\u30af: null\u30c1\u30a7\u30c3\u30af\u3001\u5f62\u5f0f\u59a5\u5f53\u6027\npublic class OAuthAuthorizeRequestValidator {\n  public void validate() {\n    throwExceptionIfIdentifierIsInvalid();\n    throwExceptionIfUserIsInvalid();\n    throwExceptionIfAuthenticationIsInvalid();\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verifier"}),": \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u691c\u8a3c \u2192 ",(0,t.jsx)(n.code,{children:"OAuthRedirectableBadRequestException"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb: \u30d7\u30ed\u30c8\u30b3\u30eb\u4ed5\u69d8\u6e96\u62e0\u30c1\u30a7\u30c3\u30af\npublic class AuthorizationCodeGrantVerifier {\n  public void verify() {\n    verifyAuthorizationCode();\n    verifyClientAuthentication();\n    verifyRedirectUri();\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"verifier\u306e\u968e\u5c64\u30d1\u30bf\u30fc\u30f3base--extension",children:"Verifier\u306e\u968e\u5c64\u30d1\u30bf\u30fc\u30f3\uff08Base + Extension\uff09"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/verifier/AuthorizationCodeGrantVerifier.java#L29",children:"AuthorizationCodeGrantVerifier.java:29"})]}),"\n",(0,t.jsx)(n.p,{children:"idp-server\u306eVerifier\u306f\u3001**Base Verifier\uff08OAuth2/OIDC\uff09+ Extension Verifier\uff08PKCE/FAPI\u7b49\uff09**\u306e2\u5c64\u69cb\u9020\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"authorizationcodegrantverifier---\u7d71\u5408verifier",children:"AuthorizationCodeGrantVerifier - \u7d71\u5408Verifier"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * Authorization Code Grant\u7d71\u5408Verifier\n * Base + Extension\u306e\u4e21\u65b9\u3092\u5b9f\u884c\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e29-77\u884c\u76ee\n */\npublic class AuthorizationCodeGrantVerifier {\n\n  Map<AuthorizationProfile, AuthorizationCodeGrantVerifierInterface> baseVerifiers;\n  List<AuthorizationCodeGrantExtensionVerifierInterface> extensionVerifiers;\n\n  public AuthorizationCodeGrantVerifier() {\n    // \u2705 Base Verifier\u767b\u9332\uff08OAuth2/OIDC\uff09\n    this.baseVerifiers = new HashMap<>();\n    baseVerifiers.put(AuthorizationProfile.OAUTH2, new AuthorizationCodeGrantOAuth2Verifier());\n    baseVerifiers.put(AuthorizationProfile.OIDC, new AuthorizationCodeGrantOidcVerifier());\n\n    // \u2705 Plugin\u304b\u3089Base Verifier\u30ed\u30fc\u30c9\uff08FAPI_BASELINE, FAPI_ADVANCE\u7b49\uff09\n    Map<AuthorizationProfile, AuthorizationCodeGrantVerifierInterface> loadedBaseVerifiers =\n        AuthorizationCodeGrantVerifierPluginLoader.load();\n    baseVerifiers.putAll(loadedBaseVerifiers);\n\n    // \u2705 Extension Verifier\u30ed\u30fc\u30c9\uff08PKCE\u7b49\uff09\n    this.extensionVerifiers = AuthorizationCodeGrantExtensionVerifierPluginLoader.load();\n  }\n\n  public void verify(\n      TokenRequestContext tokenRequestContext,\n      AuthorizationRequest authorizationRequest,\n      AuthorizationCodeGrant authorizationCodeGrant,\n      ClientCredentials clientCredentials) {\n\n    // 1. Base Verifier\u5b9f\u884c\uff08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\uff09\n    AuthorizationCodeGrantVerifierInterface baseVerifier =\n        baseVerifiers.get(authorizationRequest.profile());\n\n    if (baseVerifier == null) {\n      throw new UnSupportedException(\n          "Unsupported profile: " + authorizationRequest.profile().name());\n    }\n\n    baseVerifier.verify(tokenRequestContext, authorizationRequest, authorizationCodeGrant, clientCredentials);\n\n    // 2. Extension Verifier\u5b9f\u884c\uff08shouldVerify() \u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\uff09\n    extensionVerifiers.forEach(extensionVerifier -> {\n      if (extensionVerifier.shouldVerify(...)) {\n        extensionVerifier.verify(...);\n      }\n    });\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"base-verifier---\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\u691c\u8a3c",children:"Base Verifier - \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\u691c\u8a3c"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"AuthorizationProfile"}),(0,t.jsx)(n.th,{children:"Base Verifier"}),(0,t.jsx)(n.th,{children:"\u691c\u8a3c\u5185\u5bb9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OAUTH2"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantOAuth2Verifier"})}),(0,t.jsx)(n.td,{children:"OAuth 2.0\u57fa\u672c\u691c\u8a3c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OIDC"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantOidcVerifier"})}),(0,t.jsx)(n.td,{children:"OIDC\u8ffd\u52a0\u691c\u8a3c\uff08nonce\u7b49\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FAPI_BASELINE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantFapiBaselineVerifier"})}),(0,t.jsx)(n.td,{children:"FAPI Baseline\u8981\u4ef6"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FAPI_ADVANCE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantFapiAdvanceVerifier"})}),(0,t.jsx)(n.td,{children:"FAPI Advanced\u8981\u4ef6"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"extension-verifier---\u62e1\u5f35\u4ed5\u69d8\u691c\u8a3c",children:"Extension Verifier - \u62e1\u5f35\u4ed5\u69d8\u691c\u8a3c"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Extension Verifier"}),(0,t.jsx)(n.th,{children:"\u691c\u8a3c\u5185\u5bb9"}),(0,t.jsx)(n.th,{children:"shouldVerify\u6761\u4ef6"}),(0,t.jsx)(n.th,{children:"\u5b9f\u88c5\u30e2\u30b8\u30e5\u30fc\u30eb"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PkceVerifier"})}),(0,t.jsx)(n.td,{children:"code_verifier\u691c\u8a3c"}),(0,t.jsx)(n.td,{children:"\u30ea\u30af\u30a8\u30b9\u30c8\u306bcode_challenge\u304c\u542b\u307e\u308c\u308b"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-34-extension-pkce",children:"idp-server-core-extension-pkce"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FAPI Base/Advance"}),(0,t.jsx)(n.td,{children:"JAR/JARM/MTLS\u8981\u4ef6"}),(0,t.jsx)(n.td,{children:"\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304cFAPI"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-32-extension-fapi",children:"idp-server-core-extension-fapi"})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"verifier\u30d1\u30bf\u30fc\u30f3\u306e\u5229\u70b9",children:"Verifier\u30d1\u30bf\u30fc\u30f3\u306e\u5229\u70b9"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u5225\u691c\u8a3c"}),": OAuth2/OIDC/FAPI\u7b49\u3092\u81ea\u52d5\u9078\u629e"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u62e1\u5f35\u53ef\u80fd\u6027"}),": Extension Verifier\u3092Plugin\u3067\u8ffd\u52a0\u53ef\u80fd"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u6761\u4ef6\u4ed8\u304d\u5b9f\u884c"}),": shouldVerify()\u3067\u4e0d\u8981\u306a\u691c\u8a3c\u3092\u30b9\u30ad\u30c3\u30d7"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u8cac\u52d9\u5206\u96e2"}),": Base\uff08\u4ed5\u69d8\u6e96\u62e0\uff09\u3068Extension\uff08\u8ffd\u52a0\u8981\u4ef6\uff09\u3092\u5206\u96e2"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306e\u7d71\u5408",children:"\u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306e\u7d71\u5408"}),"\n",(0,t.jsx)(n.p,{children:"**Core\u5c64\uff08\u672c\u30e2\u30b8\u30e5\u30fc\u30eb\uff09**\u304c\u63d0\u4f9b:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantVerifier"})," - \u7d71\u5408Verifier"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantVerifierInterface"})," - Base Verifier\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantExtensionVerifierInterface"})," - Extension Verifier\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"]}),"\n",(0,t.jsx)(n.li,{children:"Plugin\u8aad\u307f\u8fbc\u307f\u6a5f\u69cb"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb"}),"\u304c\u5b9f\u88c5:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-34-extension-pkce",children:"PKCE"}),": ",(0,t.jsx)(n.code,{children:"PkceVerifier"})," (Extension Verifier)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-32-extension-fapi",children:"FAPI"}),": ",(0,t.jsx)(n.code,{children:"FapiBaselineVerifier"}),", ",(0,t.jsx)(n.code,{children:"FapiAdvanceVerifier"})," (Base Verifier)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-31-extension-ciba",children:"CIBA"}),": CIBA\u5c02\u7528Verifier"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7d71\u5408\u30d5\u30ed\u30fc"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"1. Core\u5c64\u304cPlugin Loader\u3067\u62e1\u5f35Verifier\u3092\u30ed\u30fc\u30c9\n2. AuthorizationProfile\u306b\u57fa\u3065\u3044\u3066Base Verifier\u9078\u629e\n3. Extension Verifier\u3092\u6761\u4ef6\u4ed8\u304d\u3067\u5168\u5b9f\u884c\n4. \u5168\u691c\u8a3c\u304c\u6210\u529f\u3057\u305f\u5834\u5408\u306e\u307f\u51e6\u7406\u7d99\u7d9a\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8a73\u7d30"}),": ",(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-30-extensions",children:"\u62e1\u5f35\u6a5f\u80fd\u5c64\u7d71\u5408\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u691c\u8a3c\u30fb\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u300d\u30bb\u30af\u30b7\u30e7\u30f3"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4e3b\u8981\u30c9\u30e1\u30a4\u30f3",children:"\u4e3b\u8981\u30c9\u30e1\u30a4\u30f3"}),"\n",(0,t.jsxs)(n.h3,{id:"1-oauth-openidoauth",children:["1. OAuth (",(0,t.jsx)(n.code,{children:"openid/oauth/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"OAuth 2.0\u6e96\u62e0\u306e\u8a8d\u53ef\u30d5\u30ed\u30fc\u5b9f\u88c5\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OAuthAuthorizeHandler"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u51e6\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OAuthHandler"})}),(0,t.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u51e6\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationRequest"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationResponse"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30ec\u30b9\u30dd\u30f3\u30b9\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OAuthSession"})}),(0,t.jsx)(n.td,{children:"OAuth\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OAuthAuthorizeContext"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationServerConfiguration"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ClientConfiguration"})}),(0,t.jsx)(n.td,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/"})]}),"\n",(0,t.jsx)(n.h4,{id:"authorizationrequest---\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",children:"AuthorizationRequest - \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/request/AuthorizationRequest.java#L34",children:"AuthorizationRequest.java:34"})]}),"\n",(0,t.jsx)(n.p,{children:"OAuth 2.0/OIDC\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5168\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u578b\u5b89\u5168\u306b\u4fdd\u6301\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e34-150\u884c\u76ee\n */\npublic class AuthorizationRequest {\n  // \u2705 \u8b58\u5225\u5b50\u30fb\u30c6\u30ca\u30f3\u30c8\n  AuthorizationRequestIdentifier identifier;\n  TenantIdentifier tenantIdentifier;\n  AuthorizationProfile profile;  // OIDC/OAuth2/FAPI\u7b49\n\n  // \u2705 OAuth 2.0\u5fc5\u9808\u30d1\u30e9\u30e1\u30fc\u30bf\n  ResponseType responseType;          // code, token, id_token\u7b49\n  RequestedClientId requestedClientId;\n  RedirectUri redirectUri;\n  Scopes scopes;\n  State state;\n\n  // \u2705 OAuth 2.0\u30aa\u30d7\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\n  ResponseMode responseMode;          // query, fragment, form_post\n\n  // \u2705 OIDC\u62e1\u5f35\u30d1\u30e9\u30e1\u30fc\u30bf\n  Nonce nonce;\n  Display display;                    // page, popup, touch, wap\n  Prompts prompts;                    // none, login, consent, select_account\n  MaxAge maxAge;\n  UiLocales uiLocales;\n  IdTokenHint idTokenHint;\n  LoginHint loginHint;\n  AcrValues acrValues;\n  ClaimsValue claimsValue;\n\n  // \u2705 JAR (JWT Authorization Request)\n  RequestObject requestObject;\n  RequestUri requestUri;\n  RequestedClaimsPayload requestedClaimsPayload;\n\n  // \u2705 PKCE (Proof Key for Code Exchange)\n  CodeChallenge codeChallenge;\n  CodeChallengeMethod codeChallengeMethod;  // S256, plain\n\n  // \u2705 RAR (Rich Authorization Requests)\n  AuthorizationDetails authorizationDetails;\n\n  // \u2705 \u30ab\u30b9\u30bf\u30e0\u30d1\u30e9\u30e1\u30fc\u30bf\n  CustomParams customParams;\n  ClientAttributes clientAttributes;\n\n  // \u2705 \u6709\u52b9\u671f\u9650\n  ExpiresIn expiresIn;\n  ExpiresAt expiresAt;\n\n  // \u2705 \u5224\u5b9a\u30e1\u30bd\u30c3\u30c9\n  public boolean hasScope() { return scopes.exists(); }\n  public boolean hasNonce() { return nonce.exists(); }\n  public boolean hasCodeChallenge() { return codeChallenge.exists(); }\n  public boolean hasAuthorizationDetails() { return authorizationDetails.exists(); }\n  // ...\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u5168\u30d1\u30e9\u30e1\u30fc\u30bf\u578b\u5b89\u5168"}),": ",(0,t.jsx)(n.code,{children:"String"}),"\u3067\u306f\u306a\u304f\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08",(0,t.jsx)(n.code,{children:"Scopes"}),", ",(0,t.jsx)(n.code,{children:"ResponseType"}),"\u7b49\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u5224\u5b9a\u30e1\u30bd\u30c3\u30c9"}),": ",(0,t.jsx)(n.code,{children:"has*()"}),"\u3067\u5b58\u5728\u30c1\u30a7\u30c3\u30af"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u4e0d\u5909\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"}),": Immutable\u8a2d\u8a08"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u62e1\u5f35\u5bfe\u5fdc"}),": PKCE/JAR/RAR\u7b49\u306e\u62e1\u5f35\u4ed5\u69d8\u3092\u30b5\u30dd\u30fc\u30c8"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"authorizationresponse---\u8a8d\u53ef\u30ec\u30b9\u30dd\u30f3\u30b9\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",children:"AuthorizationResponse - \u8a8d\u53ef\u30ec\u30b9\u30dd\u30f3\u30b9\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ResponseType\u5225\u306eCreator\u30d1\u30bf\u30fc\u30f3"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// ResponseType: code\nAuthorizationResponseCodeCreator\n  \u2192 AuthorizationResponse.with(code, state)\n\n// ResponseType: token\nAuthorizationResponseTokenCreator\n  \u2192 AuthorizationResponse.with(accessToken, tokenType, expiresIn, state)\n\n// ResponseType: id_token\nAuthorizationResponseIdTokenCreator\n  \u2192 AuthorizationResponse.with(idToken, state)\n\n// ResponseType: code token\nAuthorizationResponseCodeTokenCreator\n  \u2192 AuthorizationResponse.with(code, accessToken, tokenType, expiresIn, state)\n\n// ResponseType: code id_token\nAuthorizationResponseCodeIdTokenCreator\n  \u2192 AuthorizationResponse.with(code, idToken, state)\n\n// ResponseType: code id_token token\nAuthorizationResponseCodeIdTokenTokenCreator\n  \u2192 AuthorizationResponse.with(code, idToken, accessToken, tokenType, expiresIn, state)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/response/"})]}),"\n",(0,t.jsx)(n.h4,{id:"oauthsession---\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",children:"OAuthSession - \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class OAuthSession {\n  OAuthSessionKey key;              // (tenantId, clientId)\u306e\u30da\u30a2\n  User user;                        // \u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\n  Authentication authentication;    // \u8a8d\u8a3c\u60c5\u5831\n  MaxAge maxAge;                    // \u30bb\u30c3\u30b7\u30e7\u30f3\u6709\u52b9\u671f\u9650\n  Instant authenticatedAt;          // \u8a8d\u8a3c\u6642\u523b\n\n  // \u2705 \u30bb\u30c3\u30b7\u30e7\u30f3\u4f5c\u6210\n  public static OAuthSession create(\n      OAuthSessionKey key,\n      User user,\n      Authentication authentication,\n      MaxAge maxAge) {\n    return new OAuthSession(key, user, authentication, maxAge, Instant.now());\n  }\n\n  // \u2705 \u30bb\u30c3\u30b7\u30e7\u30f3\u6709\u52b9\u6027\u30c1\u30a7\u30c3\u30af\n  public boolean isExpired() {\n    if (!maxAge.exists()) {\n      return false;\n    }\n    Instant expiresAt = authenticatedAt.plusSeconds(maxAge.value());\n    return Instant.now().isAfter(expiresAt);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u9014"}),": SSO\uff08Single Sign-On\uff09\u5b9f\u73fe\u306e\u305f\u3081\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"configuration---\u8a2d\u5b9a\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",children:"Configuration - \u8a2d\u5b9a\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AuthorizationServerConfiguration"})," - \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class AuthorizationServerConfiguration {\n  String issuer;\n  String authorizationEndpoint;\n  String tokenEndpoint;\n  String userinfoEndpoint;\n  String jwksUri;\n  List<String> responseTypesSupported;\n  List<String> grantTypesSupported;\n  List<String> scopesSupported;\n  List<String> tokenEndpointAuthMethodsSupported;\n  // ...\n\n  // \u2705 \u5224\u5b9a\u30e1\u30bd\u30c3\u30c9\n  public boolean supportsResponseType(ResponseType responseType) { ... }\n  public boolean supportsGrantType(GrantType grantType) { ... }\n  public boolean supportsScope(Scope scope) { ... }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ClientConfiguration"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class ClientConfiguration {\n  ClientIdentifier identifier;\n  ClientName name;\n  ClientType clientType;              // public, confidential\n  RedirectUris redirectUris;\n  GrantTypes grantTypes;\n  ResponseTypes responseTypes;\n  Scopes scopes;\n  ClientSecret clientSecret;          // confidential\u306e\u307f\n  TokenEndpointAuthMethod tokenEndpointAuthMethod;\n  // ...\n\n  // \u2705 \u5224\u5b9a\u30e1\u30bd\u30c3\u30c9\n  public boolean isConfidential() { return clientType.isConfidential(); }\n  public boolean allowsGrantType(GrantType grantType) { ... }\n  public boolean allowsRedirectUri(RedirectUri redirectUri) { ... }\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"2-token-openidtoken",children:["2. Token (",(0,t.jsx)(n.code,{children:"openid/token/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u30c8\u30fc\u30af\u30f3\u767a\u884c\u30fb\u691c\u8a3c\u30fb\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u51e6\u7406\u3002"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4e3b\u8981\u30af\u30e9\u30b9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationCodeGrantService"})," - \u8a8d\u53ef\u30b3\u30fc\u30c9\u30d5\u30ed\u30fc"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ClientCredentialsGrantService"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30ed\u30fc"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RefreshTokenGrantService"})," - \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u30d5\u30ed\u30fc"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OAuthTokenCreationService"})," - \u30c8\u30fc\u30af\u30f3\u751f\u6210\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Grant Type\u62e1\u5f35\u30d1\u30bf\u30fc\u30f3"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Map<GrantType, Service> \u30d1\u30bf\u30fc\u30f3\nMap<GrantType, OAuthTokenCreationService> services = new HashMap<>();\nservices.put(GrantType.AUTHORIZATION_CODE, new AuthorizationCodeGrantService(...));\nservices.put(GrantType.CLIENT_CREDENTIALS, new ClientCredentialsGrantService(...));\nservices.put(GrantType.REFRESH_TOKEN, new RefreshTokenGrantService(...));\n\n// \u5b9f\u884c\u6642\u306b\u52d5\u7684\u9078\u629e\nOAuthTokenCreationService service = services.get(tokenRequest.grantType());\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300cExtension: ",(0,t.jsx)(n.code,{children:"Map<GrantType, Service>"})," + Plugin \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u300d"]}),"\n",(0,t.jsxs)(n.h3,{id:"3-identity-openididentity",children:["3. Identity (",(0,t.jsx)(n.code,{children:"openid/identity/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u30fbID Token\u30fbVerified Claims\u51e6\u7406\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-1",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"User"})}),(0,t.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserIdentifier"})}),(0,t.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50\uff08sub\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IdTokenCreator"})}),(0,t.jsx)(n.td,{children:"ID Token\u751f\u6210"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IdTokenCustomClaimsBuilder"})}),(0,t.jsx)(n.td,{children:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u8ffd\u52a0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserAuthenticationApi"})}),(0,t.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3cAPI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserOperationApi"})}),(0,t.jsx)(n.td,{children:"\u30e6\u30fc\u30b6\u30fc\u64cd\u4f5cAPI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationDevices"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30c7\u30d0\u30a4\u30b9\u7ba1\u7406"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/"})]}),"\n",(0,t.jsx)(n.h4,{id:"user---\u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",children:"User - \u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/User.java#L36",children:"User.java:36"})]}),"\n",(0,t.jsx)(n.p,{children:"OpenID Connect\u6a19\u6e96\u30af\u30ec\u30fc\u30e0 + \u62e1\u5f35\u6a5f\u80fd\u3092\u542b\u3080\u5305\u62ec\u7684\u306a\u30e6\u30fc\u30b6\u30fc\u30e2\u30c7\u30eb\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * \u30e6\u30fc\u30b6\u30fc\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e36-100\u884c\u76ee\n */\npublic class User implements JsonReadable, Serializable, UuidConvertable {\n  // \u2705 OpenID Connect \u6a19\u6e96\u30af\u30ec\u30fc\u30e0\n  String sub;                     // Subject Identifier\uff08\u5fc5\u9808\u30fb\u4e00\u610f\uff09\n  String name;                    // Full name\n  String givenName;               // Given name\n  String familyName;              // Family name\n  String middleName;              // Middle name\n  String nickname;                // Casual name\n  String preferredUsername;       // Preferred username\n  String profile;                 // Profile page URL\n  String picture;                 // Profile picture URL\n  String website;                 // Website URL\n  String email;                   // Email address\n  Boolean emailVerified;          // Email verified flag\n  String gender;                  // Gender\n  String birthdate;               // Birthdate (YYYY-MM-DD)\n  String zoneinfo;                // Time zone\n  String locale;                  // Locale\n  String phoneNumber;             // Phone number\n  Boolean phoneNumberVerified;    // Phone number verified flag\n  Address address;                // Address\n\n  // \u2705 \u62e1\u5f35\u6a5f\u80fd\n  String providerId;              // Identity Provider ID\n  String externalUserId;          // \u5916\u90e8\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306e\u30e6\u30fc\u30b6\u30fcID\n  HashMap<String, Object> externalProviderOriginalPayload; // \u5916\u90e8IdP\u306e\u5143\u30c7\u30fc\u30bf\n\n  // \u2705 \u8a8d\u8a3c\u95a2\u9023\n  String hashedPassword;          // \u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\n  String rawPassword;             // \u4e00\u6642\u7684\u306a\u5e73\u6587\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u6c38\u7d9a\u5316\u3057\u306a\u3044\uff09\n  List<AuthenticationDevice> authenticationDevices; // FIDO2/Passkey\u7b49\n\n  // \u2705 \u6a29\u9650\u30fb\u30ed\u30fc\u30eb\n  List<UserRole> roles;           // \u30e6\u30fc\u30b6\u30fc\u30ed\u30fc\u30eb\n  List<String> permissions;       // \u6a29\u9650\u30ea\u30b9\u30c8\n\n  // \u2705 \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u30fb\u7d44\u7e54\n  String currentTenant;           // \u73fe\u5728\u306e\u30c6\u30ca\u30f3\u30c8\n  List<String> assignedTenants;   // \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30c6\u30ca\u30f3\u30c8\n  String currentOrganizationId;   // \u73fe\u5728\u306e\u7d44\u7e54\n  List<String> assignedOrganizations; // \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u7d44\u7e54\n\n  // \u2705 Verified Claims (IDA)\n  HashMap<String, Object> verifiedClaims; // \u691c\u8a3c\u6e08\u307f\u8eab\u5143\u60c5\u5831\n\n  // \u2705 Verifiable Credentials\n  List<HashMap<String, Object>> credentials; // VC\u30ea\u30b9\u30c8\n\n  // \u2705 \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3\n  HashMap<String, Object> customProperties; // \u30c6\u30ca\u30f3\u30c8\u56fa\u6709\u306e\u8ffd\u52a0\u60c5\u5831\n\n  // \u2705 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\n  LocalDateTime createdAt;\n  LocalDateTime updatedAt;\n  UserStatus status;              // INITIALIZED, ACTIVE, SUSPENDED, DELETED\n\n  // \u2705 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406\n  public boolean canTransit(UserStatus from, UserStatus to) {\n    return UserLifecycleManager.canTransit(from, to);\n  }\n\n  public User transitStatus(UserStatus newStatus) {\n    this.status = UserLifecycleManager.transit(this.status, newStatus);\n    return this;\n  }\n\n  // \u2705 \u6a29\u9650\u5224\u5b9a\n  public Set<String> permissionsAsSet() {\n    return new HashSet<>(permissions);\n  }\n\n  public String permissionsAsString() {\n    return String.join(",", permissions);\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"OIDC\u6a19\u6e96\u6e96\u62e0"}),": RFC\u6e96\u62e0\u306e\u6a19\u6e96\u30af\u30ec\u30fc\u30e0"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u62e1\u5f35\u6a5f\u80fd"}),": FIDO2, IDA, VC\u5bfe\u5fdc"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8"}),": \u8907\u6570\u30c6\u30ca\u30f3\u30c8\u30fb\u7d44\u7e54\u3078\u306e\u6240\u5c5e"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u7ba1\u7406"}),": \u30b9\u30c6\u30fc\u30bf\u30b9\u9077\u79fb\u5236\u5fa1"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"userstatus---\u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9",children:"UserStatus - \u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public enum UserStatus {\n  INITIALIZED,  // \u521d\u671f\u5316\u6e08\u307f\uff08\u767b\u9332\u76f4\u5f8c\uff09\n  ACTIVE,       // \u30a2\u30af\u30c6\u30a3\u30d6\uff08\u901a\u5e38\u5229\u7528\u53ef\u80fd\uff09\n  SUSPENDED,    // \u4e00\u6642\u505c\u6b62\n  DELETED       // \u524a\u9664\u6e08\u307f\n}\n\n// \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u9077\u79fb\u30eb\u30fc\u30eb\n// INITIALIZED \u2192 ACTIVE\n// ACTIVE \u2194 SUSPENDED\n// ACTIVE/SUSPENDED \u2192 DELETED\n"})}),"\n",(0,t.jsx)(n.h4,{id:"address---\u4f4f\u6240\u30af\u30ec\u30fc\u30e0",children:"Address - \u4f4f\u6240\u30af\u30ec\u30fc\u30e0"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class Address {\n  String formatted;       // \u5b8c\u5168\u306a\u4f4f\u6240\u6587\u5b57\u5217\n  String streetAddress;   // \u756a\u5730\n  String locality;        // \u5e02\u533a\u753a\u6751\n  String region;          // \u90fd\u9053\u5e9c\u770c\n  String postalCode;      // \u90f5\u4fbf\u756a\u53f7\n  String country;         // \u56fd\u30b3\u30fc\u30c9\uff08ISO 3166-1\uff09\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"4-authentication-openidauthentication",children:["4. Authentication (",(0,t.jsx)(n.code,{children:"openid/authentication/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u8a8d\u8a3c\u51e6\u7406\u30fb\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-2",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Authentication"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationTransaction"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationContext"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationInteractor"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30a4\u30f3\u30bf\u30e9\u30af\u30bf\u30fc\uff08FIDO2/Password\u7b49\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationMethod"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u65b9\u5f0f"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationPolicy"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthenticationInteractionResult"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u8a3c\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u7d50\u679c"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/authentication/"})]}),"\n",(0,t.jsx)(n.h4,{id:"authentication---\u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb",children:"Authentication - \u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/authentication/Authentication.java#L24",children:"Authentication.java:24"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u8a8d\u8a3c\u5b8c\u4e86\u5f8c\u306e\u60c5\u5831\u3092\u4fdd\u6301\u3002ID Token\u306e",(0,t.jsx)(n.code,{children:"auth_time"}),", ",(0,t.jsx)(n.code,{children:"amr"}),", ",(0,t.jsx)(n.code,{children:"acr"}),"\u30af\u30ec\u30fc\u30e0\u306b\u4f7f\u7528\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u8a8d\u8a3c\u7d50\u679c\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e24-84\u884c\u76ee\n */\npublic class Authentication implements Serializable, JsonReadable {\n  LocalDateTime time;          // \u8a8d\u8a3c\u6642\u523b\uff08auth_time\uff09\n  List<String> methods;        // \u8a8d\u8a3c\u65b9\u5f0f\u30ea\u30b9\u30c8\uff08amr: Authentication Methods References\uff09\n  String acr;                  // \u8a8d\u8a3c\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30af\u30e9\u30b9\u53c2\u7167\uff08acr: Authentication Context Class Reference\uff09\n\n  // \u2705 \u8a8d\u8a3c\u6642\u523b\n  public LocalDateTime time() { return time; }\n  public boolean hasAuthenticationTime() { return Objects.nonNull(time); }\n\n  // \u2705 \u8a8d\u8a3c\u65b9\u5f0f\n  public List<String> methods() { return methods; }\n  public boolean hasMethod() { return !methods.isEmpty(); }\n\n  // \u2705 ACR (Authentication Context Class Reference)\n  public String acr() { return acr; }\n  public boolean hasAcrValues() { return acr != null && !acr.isEmpty(); }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AMR\uff08Authentication Methods References\uff09\u4f8b"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'["pwd"]'})," - \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'["fido", "pwd"]'})," - FIDO2 + \u30d1\u30b9\u30ef\u30fc\u30c9\uff08MFA\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'["otp", "sms"]'})," - SMS OTP"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'["fed"]'})," - \u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8176.html",children:"RFC 8176 - Authentication Method Reference Values"})]}),"\n",(0,t.jsx)(n.h4,{id:"authenticationtransaction---\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3",children:"AuthenticationTransaction - \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/authentication/AuthenticationTransaction.java#L35",children:"AuthenticationTransaction.java:35"})]}),"\n",(0,t.jsx)(n.p,{children:"\u8907\u6570\u30b9\u30c6\u30c3\u30d7\u306e\u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08MFA\u7b49\uff09\u3092\u7ba1\u7406\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e35-120\u884c\u76ee\n */\npublic class AuthenticationTransaction {\n  AuthenticationTransactionIdentifier identifier;  // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u8b58\u5225\u5b50\n  AuthorizationIdentifier authorizationIdentifier; // \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u8b58\u5225\u5b50\n  AuthenticationRequest request;                   // \u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8\n  AuthenticationPolicy authenticationPolicy;       // \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\n  AuthenticationInteractionResults interactionResults; // \u8a8d\u8a3c\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u7d50\u679c\u96c6\u5408\n  AuthenticationTransactionAttributes attributes;   // \u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\n\n  // \u2705 \u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u7d50\u679c\u306e\u8ffd\u52a0\u30fb\u66f4\u65b0\n  public AuthenticationTransaction updateWith(\n      AuthenticationInteractionRequestResult interactionRequestResult) {\n    // Immutable\u30d1\u30bf\u30fc\u30f3: \u65b0\u3057\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u5374\n  }\n\n  // \u2705 \u8a8d\u8a3c\u5b8c\u4e86\u5224\u5b9a\n  public boolean isCompleted() {\n    return authenticationPolicy.isCompleted(interactionResults);\n  }\n\n  // \u2705 MFA\u5fc5\u8981\u5224\u5b9a\n  public boolean requiresMfa() {\n    return authenticationPolicy.requiresMfa();\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8a8d\u8a3c\u30d5\u30ed\u30fc\u4f8b\uff08MFA\uff09"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// 1. \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\nAuthenticationInteractionRequestResult passwordResult =\n    new AuthenticationInteractionRequestResult("PASSWORD", "pwd", true, user);\ntransaction = transaction.updateWith(passwordResult);\n\n// 2. MFA\u5fc5\u8981\u5224\u5b9a\nif (transaction.requiresMfa()) {\n  // FIDO2\u8a8d\u8a3c\u3092\u8981\u6c42\n  AuthenticationInteractionRequestResult fidoResult =\n      new AuthenticationInteractionRequestResult("FIDO2", "fido", true, user);\n  transaction = transaction.updateWith(fidoResult);\n}\n\n// 3. \u8a8d\u8a3c\u5b8c\u4e86\u5224\u5b9a\nif (transaction.isCompleted()) {\n  Authentication authentication = transaction.createAuthentication();\n  // authentication.methods() \u2192 ["pwd", "fido"]\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"authenticationmethod---\u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f",children:"AuthenticationMethod - \u6a19\u6e96\u8a8d\u8a3c\u65b9\u5f0f"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"AMR\u5024"}),(0,t.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pwd"})}),(0,t.jsx)(n.td,{children:"Password"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"otp"})}),(0,t.jsx)(n.td,{children:"One-Time Password"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sms"})}),(0,t.jsx)(n.td,{children:"SMS OTP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fido"})}),(0,t.jsx)(n.td,{children:"FIDO2/WebAuthn"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"hwk"})}),(0,t.jsx)(n.td,{children:"Hardware Key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"swk"})}),(0,t.jsx)(n.td,{children:"Software Key"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pin"})}),(0,t.jsx)(n.td,{children:"PIN"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"face"})}),(0,t.jsx)(n.td,{children:"\u9854\u8a8d\u8a3c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fpt"})}),(0,t.jsx)(n.td,{children:"\u6307\u7d0b\u8a8d\u8a3c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mfa"})}),(0,t.jsx)(n.td,{children:"Multiple-Factor Authentication"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fed"})}),(0,t.jsx)(n.td,{children:"Federation"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"5-grant-management-openidgrant_management",children:["5. Grant Management (",(0,t.jsx)(n.code,{children:"openid/grant_management/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u308b\u8a8d\u53ef\uff08\u30b9\u30b3\u30fc\u30d7\u30fb\u30af\u30ec\u30fc\u30e0\u540c\u610f\uff09\u306e\u7ba1\u7406\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-3",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationGranted"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8\uff08\u6c38\u7d9a\u5316\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationGrant"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30b0\u30e9\u30f3\u30c8\uff08\u4e00\u6642\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AuthorizationCodeGrant"})}),(0,t.jsx)(n.td,{children:"\u8a8d\u53ef\u30b3\u30fc\u30c9\u30b0\u30e9\u30f3\u30c8"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ConsentClaims"})}),(0,t.jsx)(n.td,{children:"\u540c\u610f\u3055\u308c\u305f\u30af\u30ec\u30fc\u30e0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"GrantIdTokenClaims"})}),(0,t.jsx)(n.td,{children:"ID Token\u7528\u30af\u30ec\u30fc\u30e0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"GrantUserinfoClaims"})}),(0,t.jsx)(n.td,{children:"UserInfo\u7528\u30af\u30ec\u30fc\u30e0"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/grant_management/"})]}),"\n",(0,t.jsx)(n.h4,{id:"authorizationgranted---\u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8",children:"AuthorizationGranted - \u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/grant_management/AuthorizationGranted.java#L25",children:"AuthorizationGranted.java:25"})]}),"\n",(0,t.jsx)(n.p,{children:"\u30e6\u30fc\u30b6\u30fc\u304c\u904e\u53bb\u306b\u540c\u610f\u3057\u305f\u30b9\u30b3\u30fc\u30d7\u30fb\u30af\u30ec\u30fc\u30e0\u3092\u6c38\u7d9a\u5316\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"/**\n * \u8a8d\u53ef\u6e08\u307f\u30b0\u30e9\u30f3\u30c8\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e25-80\u884c\u76ee\n */\npublic class AuthorizationGranted {\n  AuthorizationGrantedIdentifier identifier;  // (user, client)\u306e\u30da\u30a2\n  AuthorizationGrant authorizationGrant;      // \u8a8d\u53ef\u5185\u5bb9\n\n  // \u2705 \u30b9\u30b3\u30fc\u30d7\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\n  public boolean isGrantedScopes(Scopes requestedScopes) {\n    return authorizationGrant.isGrantedScopes(requestedScopes);\n  }\n\n  // \u2705 \u672a\u8a8d\u53ef\u30b9\u30b3\u30fc\u30d7\u53d6\u5f97\n  public Scopes unauthorizedScopes(Scopes requestedScopes) {\n    return authorizationGrant.unauthorizedScopes(requestedScopes);\n  }\n\n  // \u2705 \u30af\u30ec\u30fc\u30e0\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\n  public boolean isGrantedClaims(GrantIdTokenClaims requestedIdTokenClaims) {\n    return authorizationGrant.isGrantedIdTokenClaims(requestedIdTokenClaims);\n  }\n\n  // \u2705 \u30b0\u30e9\u30f3\u30c8\u30de\u30fc\u30b8\uff08\u8ffd\u52a0\u540c\u610f\uff09\n  public AuthorizationGranted merge(AuthorizationGrant newAuthorizationGrant) {\n    AuthorizationGrant merged = authorizationGrant.merge(newAuthorizationGrant);\n    return new AuthorizationGranted(identifier, merged);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7528\u9014"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u521d\u56de\u8a8d\u53ef"}),": \u30e6\u30fc\u30b6\u30fc\u304c\u540c\u610f\u753b\u9762\u3067\u627f\u8a8d \u2192 ",(0,t.jsx)(n.code,{children:"AuthorizationGranted"}),"\u3092\u4fdd\u5b58"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"2\u56de\u76ee\u4ee5\u964d"}),": ",(0,t.jsx)(n.code,{children:"AuthorizationGranted"}),"\u3092\u78ba\u8a8d \u2192 \u540c\u610f\u6e08\u307f\u306a\u3089\u540c\u610f\u753b\u9762\u30b9\u30ad\u30c3\u30d7"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8ffd\u52a0\u30b9\u30b3\u30fc\u30d7"}),": \u672a\u8a8d\u53ef\u30b9\u30b3\u30fc\u30d7\u306e\u307f\u540c\u610f\u753b\u9762\u8868\u793a"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"authorizationgrant---\u8a8d\u53ef\u30b0\u30e9\u30f3\u30c8\u4e00\u6642",children:"AuthorizationGrant - \u8a8d\u53ef\u30b0\u30e9\u30f3\u30c8\uff08\u4e00\u6642\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class AuthorizationGrant {\n  Scopes scopes;                    // \u8a8d\u53ef\u3055\u308c\u305f\u30b9\u30b3\u30fc\u30d7\n  ConsentClaims consentClaims;      // \u540c\u610f\u3055\u308c\u305f\u30af\u30ec\u30fc\u30e0\n  GrantIdTokenClaims idTokenClaims; // ID Token\u7528\u30af\u30ec\u30fc\u30e0\n  GrantUserinfoClaims userinfoClaims; // UserInfo\u7528\u30af\u30ec\u30fc\u30e0\n\n  // \u2705 \u30b9\u30b3\u30fc\u30d7\u5224\u5b9a\n  public boolean isGrantedScopes(Scopes requestedScopes) {\n    return scopes.containsAll(requestedScopes);\n  }\n\n  // \u2705 \u30de\u30fc\u30b8\uff08\u8ffd\u52a0\u8a8d\u53ef\uff09\n  public AuthorizationGrant merge(AuthorizationGrant other) {\n    Scopes mergedScopes = scopes.merge(other.scopes);\n    ConsentClaims mergedClaims = consentClaims.merge(other.consentClaims);\n    return new AuthorizationGrant(mergedScopes, mergedClaims, ...);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"6-discovery-openiddiscovery",children:["6. Discovery (",(0,t.jsx)(n.code,{children:"openid/discovery/"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["OpenID Connect Discovery\uff08",(0,t.jsx)(n.code,{children:".well-known/openid-configuration"}),"\uff09\u3068JWKS\u63d0\u4f9b\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-4",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DiscoveryHandler"})}),(0,t.jsx)(n.td,{children:"Discovery\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u51e6\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ServerConfigurationResponseCreator"})}),(0,t.jsx)(n.td,{children:"\u30e1\u30bf\u30c7\u30fc\u30bf\u751f\u6210"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OidcMetaDataApi"})}),(0,t.jsx)(n.td,{children:"Discovery API"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/discovery/"})]}),"\n",(0,t.jsx)(n.h4,{id:"discovery-metadata---openid-provider-metadata",children:"Discovery Metadata - OpenID Provider Metadata"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),": ",(0,t.jsx)(n.code,{children:"GET /.well-known/openid-configuration"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "issuer": "https://idp.example.com",\n  "authorization_endpoint": "https://idp.example.com/authorize",\n  "token_endpoint": "https://idp.example.com/token",\n  "userinfo_endpoint": "https://idp.example.com/userinfo",\n  "jwks_uri": "https://idp.example.com/.well-known/jwks.json",\n  "registration_endpoint": "https://idp.example.com/register",\n  "scopes_supported": ["openid", "profile", "email", "address", "phone"],\n  "response_types_supported": ["code", "token", "id_token", "code token", "code id_token", "id_token token", "code id_token token"],\n  "response_modes_supported": ["query", "fragment", "form_post"],\n  "grant_types_supported": ["authorization_code", "implicit", "refresh_token", "client_credentials"],\n  "subject_types_supported": ["public", "pairwise"],\n  "id_token_signing_alg_values_supported": ["RS256", "RS384", "RS512", "ES256", "ES384", "ES512"],\n  "token_endpoint_auth_methods_supported": ["client_secret_basic", "client_secret_post", "client_secret_jwt", "private_key_jwt"],\n  "claims_supported": ["sub", "name", "given_name", "family_name", "email", "email_verified", "..."],\n  "code_challenge_methods_supported": ["S256", "plain"]\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"jwks-endpoint---json-web-key-set",children:"JWKS Endpoint - JSON Web Key Set"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),": ",(0,t.jsx)(n.code,{children:"GET /.well-known/jwks.json"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "keys": [\n    {\n      "kty": "RSA",\n      "use": "sig",\n      "kid": "2024-key-1",\n      "alg": "RS256",\n      "n": "xGOr...",\n      "e": "AQAB"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"7-userinfo-openiduserinfo",children:["7. UserInfo (",(0,t.jsx)(n.code,{children:"openid/userinfo/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"OpenID Connect UserInfo\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u5b9f\u88c5\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-5",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserinfoHandler"})}),(0,t.jsx)(n.td,{children:"UserInfo\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u51e6\u7406"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserinfoResponse"})}),(0,t.jsx)(n.td,{children:"UserInfo \u30ec\u30b9\u30dd\u30f3\u30b9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UserinfoCustomIndividualClaimsCreator"})}),(0,t.jsx)(n.td,{children:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u8ffd\u52a0\uff08Plugin\uff09"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/userinfo/"})]}),"\n",(0,t.jsx)(n.h4,{id:"userinfo-endpoint",children:"UserInfo Endpoint"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),": ",(0,t.jsx)(n.code,{children:"GET /userinfo"}),"\n",(0,t.jsx)(n.strong,{children:"\u8a8d\u8a3c"}),": ",(0,t.jsx)(n.code,{children:"Authorization: Bearer <access_token>"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "sub": "248289761001",\n  "name": "Jane Doe",\n  "given_name": "Jane",\n  "family_name": "Doe",\n  "email": "janedoe@example.com",\n  "email_verified": true,\n  "picture": "https://example.com/janedoe.jpg"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u30de\u30c3\u30d4\u30f3\u30b0"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30b9\u30b3\u30fc\u30d7"}),(0,t.jsx)(n.th,{children:"\u8fd4\u5374\u3055\u308c\u308b\u30af\u30ec\u30fc\u30e0"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"openid"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sub"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"profile"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"name"}),", ",(0,t.jsx)(n.code,{children:"given_name"}),", ",(0,t.jsx)(n.code,{children:"family_name"}),", ",(0,t.jsx)(n.code,{children:"middle_name"}),", ",(0,t.jsx)(n.code,{children:"nickname"}),", ",(0,t.jsx)(n.code,{children:"preferred_username"}),", ",(0,t.jsx)(n.code,{children:"profile"}),", ",(0,t.jsx)(n.code,{children:"picture"}),", ",(0,t.jsx)(n.code,{children:"website"}),", ",(0,t.jsx)(n.code,{children:"gender"}),", ",(0,t.jsx)(n.code,{children:"birthdate"}),", ",(0,t.jsx)(n.code,{children:"zoneinfo"}),", ",(0,t.jsx)(n.code,{children:"locale"}),", ",(0,t.jsx)(n.code,{children:"updated_at"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"email"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"email"}),", ",(0,t.jsx)(n.code,{children:"email_verified"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"address"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"phone"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"phone_number"}),", ",(0,t.jsx)(n.code,{children:"phone_number_verified"})]})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"8-federation-openidfederation",children:["8. Federation (",(0,t.jsx)(n.code,{children:"openid/federation/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u5916\u90e8IdP\u3068\u306e\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\uff08SSO\u9023\u643a\uff09\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7-6",children:"\u4e3b\u8981\u30af\u30e9\u30b9\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FederationInteractor"})}),(0,t.jsx)(n.td,{children:"\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\uff08Plugin\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FederationInteractionResult"})}),(0,t.jsx)(n.td,{children:"\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u7d50\u679c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"FederationConfigurationQueryRepository"})}),(0,t.jsx)(n.td,{children:"\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u53d6\u5f97"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/org/idp/server/core/openid/federation/"})]}),"\n",(0,t.jsx)(n.h4,{id:"federation-flow",children:"Federation Flow"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// 1. \u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u53d6\u5f97\nFederationConfiguration config =\n    federationConfigurationQueryRepository.get(tenant, providerId);\n\n// 2. \u5916\u90e8IdP\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\nFederationInteractor interactor = federationInteractorFactory.create(config);\nString authorizationUrl = interactor.createAuthorizationUrl(authorizationRequest);\n// \u2192 https://external-idp.com/authorize?client_id=...&redirect_uri=...\n\n// 3. \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\nFederationInteractionResult result = interactor.handleCallback(callbackRequest);\n\n// 4. \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u53d6\u5f97\nUser externalUser = result.user();\n\n// 5. \u30ed\u30fc\u30ab\u30eb\u30e6\u30fc\u30b6\u30fc\u3068\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u30ea\u30f3\u30ad\u30f3\u30b0\nUser localUser = userRepository.findByEmail(tenant, externalUser.email());\nif (localUser == null) {\n  localUser = createNewUser(externalUser);\n} else {\n  localUser = linkFederatedIdentity(localUser, externalUser, providerId);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5bfe\u5fdc\u30d7\u30ed\u30c8\u30b3\u30eb"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 OIDC Federation\uff08",(0,t.jsx)(n.code,{children:"idp-server-federation-oidc"}),"\u30e2\u30b8\u30e5\u30fc\u30eb\uff09"]}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd1c SAML 2.0\uff08\u5c06\u6765\u5bfe\u5fdc\u4e88\u5b9a\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd1c LDAP\uff08\u5c06\u6765\u5bfe\u5fdc\u4e88\u5b9a\uff09"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"9-plugin-openidplugin",children:["9. Plugin (",(0,t.jsx)(n.code,{children:"openid/plugin/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u6a5f\u80fd\u62e1\u5f35\u7528\u30d7\u30e9\u30b0\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9a\u7fa9\u3002"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4e3b\u8981\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationRequestExtensionVerifier"})," - \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u62e1\u5f35\u691c\u8a3c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OAuthTokenCreationServiceFactory"})," - \u30c8\u30fc\u30af\u30f3\u751f\u6210Service\u62e1\u5f35"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AccessTokenCustomClaimsCreator"})," - \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u30af\u30ec\u30fc\u30e0\u62e1\u5f35"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ClientAuthenticator"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a8d\u8a3c\u62e1\u5f35"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../documentation/docs/content_01_intro/intro-01-tech-overview.md#L93-L170",children:"intro-01-tech-overview.md:93-170"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30d1\u30bf\u30fc\u30f3",children:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:["idp-server-core\u3067\u306f\u3001",(0,t.jsx)(n.code,{children:"String"}),"/",(0,t.jsx)(n.code,{children:"Map"}),"\u306e\u6feb\u7528\u3092\u907f\u3051\u3001\u610f\u5473\u306e\u3042\u308b\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u7528\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"\u60aa\u3044\u4f8b-",children:"\u60aa\u3044\u4f8b \u274c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c String\u6feb\u7528\npublic void register(Tenant tenant, String clientId, String clientSecret) {\n  // clientId\u3068clientSecret\u3092\u9593\u9055\u3048\u3066\u6e21\u3057\u3066\u3082\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\n}\n\n// \u274c Map\u6feb\u7528\npublic Map<String, Object> getTokenResponse(Map<String, String> request) {\n  // \u578b\u5b89\u5168\u6027\u304c\u306a\u3044\u3001IDE\u88dc\u5b8c\u304c\u52b9\u304b\u306a\u3044\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u826f\u3044\u4f8b-",children:"\u826f\u3044\u4f8b \u2705"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u2705 \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f7f\u7528\npublic void register(Tenant tenant, RequestedClientId clientId, ClientSecret clientSecret) {\n  // \u578b\u304c\u9055\u3046\u305f\u3081\u3001\u9593\u9055\u3048\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\n}\n\n// \u2705 \u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u4f7f\u7528\npublic TokenResponse createToken(TokenRequest request) {\n  // \u578b\u5b89\u5168\u3001IDE\u88dc\u5b8c\u304c\u52b9\u304f\u3001\u4ed5\u69d8\u304c\u660e\u78ba\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f8b"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RequestedClientId"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationCode"})," - \u8a8d\u53ef\u30b3\u30fc\u30c9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AccessToken"})," - \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RefreshToken"})," - \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Scope"})," / ",(0,t.jsx)(n.code,{children:"Scopes"})," - \u30b9\u30b3\u30fc\u30d7"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RedirectUri"})," - \u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GrantType"})," - \u30b0\u30e9\u30f3\u30c8\u30bf\u30a4\u30d7"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u578b\u5b89\u5168\u6027: String/Map\u6feb\u7528\u7981\u6b62\u3001\u610f\u5473\u306e\u3042\u308b\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u512a\u5148\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",children:"\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"}),"\n",(0,t.jsx)(n.h3,{id:"\u4f8b\u5916\u547d\u540d\u30d1\u30bf\u30fc\u30f3",children:"\u4f8b\u5916\u547d\u540d\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// OAuth\u6a19\u6e96\u30a8\u30e9\u30fc\nthrow new OAuthBadRequestException("invalid_request", "Missing required parameter: code");\nthrow new OAuthUnauthorizedException("invalid_client", "Client authentication failed");\n\n// OAuth Redirectable\u30a8\u30e9\u30fc\uff08\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09\nthrow new OAuthRedirectableBadRequestException("invalid_scope", "Requested scope is invalid");\n\n// \u5185\u90e8\u30a8\u30e9\u30fc\nthrow new ServerConfigurationNotFoundException("Authorization server configuration not found");\n'})}),"\n",(0,t.jsx)(n.h3,{id:"throwexceptionifcondition-\u30d1\u30bf\u30fc\u30f3",children:(0,t.jsx)(n.code,{children:"throwExceptionIf{Condition}() \u30d1\u30bf\u30fc\u30f3"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u2705 \u826f\u3044\u4f8b: \u6761\u4ef6\u3092\u660e\u793a\u7684\u306b\u8868\u73fe\nprivate void throwExceptionIfCodeIsInvalid(AuthorizationCode code) {\n  if (code == null || code.isEmpty()) {\n    throw new TokenBadRequestException("invalid_grant", "Authorization code is invalid");\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u65e9\u671f\u30ea\u30bf\u30fc\u30f3\u3067\u53ef\u8aad\u6027\u5411\u4e0a\npublic void verify() {\n  throwExceptionIfCodeIsInvalid(authorizationCode);\n  throwExceptionIfClientIdMismatch(clientId);\n  throwExceptionIfRedirectUriMismatch(redirectUri);\n  // \u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u4f8b\u5916: ",(0,t.jsx)(n.code,{children:"throwExceptionIf{Condition}()"})," \u30d1\u30bf\u30fc\u30f3\u3001OAuth\u6a19\u6e96\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",children:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"-1-util\u6feb\u7528",children:"\u274c 1. Util\u6feb\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c \u60aa\u3044\u4f8b: \u5171\u901a\u30ed\u30b8\u30c3\u30af\u3092Util\u306b\u9003\u304c\u3059\npublic class OAuthUtils {\n  public static boolean isValidAuthorizationCode(String code) {\n    // \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u304cUtil\u306b\u6f0f\u308c\u3066\u3044\u308b\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u914d\u7f6e\npublic class AuthorizationCode {\n  public boolean isValid() {\n    // \u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306f\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-2-map\u6feb\u7528",children:"\u274c 2. Map\u6feb\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: Map<String, Object>\u3067\u60c5\u5831\u3092\u6301\u3061\u56de\u308b\npublic Map<String, Object> authorize(Map<String, String> request) {\n  Map<String, Object> response = new HashMap<>();\n  response.put("access_token", "...");\n  response.put("expires_in", 3600);\n  return response;\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u5c02\u7528\u30af\u30e9\u30b9\u4f7f\u7528\npublic AuthorizationResponse authorize(AuthorizationRequest request) {\n  return AuthorizationResponse.builder()\n      .accessToken(new AccessToken("..."))\n      .expiresIn(3600)\n      .build();\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"-3-\u6c38\u7d9a\u5316\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af",children:"\u274c 3. \u6c38\u7d9a\u5316\u5c64\u3067\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: Repository\u5b9f\u88c5\u3067\u30d3\u30b8\u30cd\u30b9\u5224\u5b9a\npublic class ClientConfigurationRepositoryImpl implements ClientConfigurationQueryRepository {\n  @Override\n  public ClientConfiguration get(Tenant tenant, RequestedClientId clientId) {\n    ClientConfiguration config = dao.findById(clientId);\n\n    // \u274c \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304c\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64\u306b\u6f0f\u308c\u3066\u3044\u308b\n    if ("ORGANIZER".equals(tenant.type())) {\n      config.setSpecialPermissions(true);\n    }\n\n    return config;\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u30c9\u30e1\u30a4\u30f3\u5c64\u3067\u5224\u5b9a\npublic class ClientConfiguration {\n  public boolean hasSpecialPermissions(Tenant tenant) {\n    // \u2705 \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\n    return tenant.isOrganizer() && this.permissionLevel.isSpecial();\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u6559\u8a13"}),": \u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u5c64 = SELECT/INSERT/UPDATE/DELETE\u3001\u30c9\u30e1\u30a4\u30f3\u5c64 = \u696d\u52d9\u30eb\u30fc\u30eb"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u26a0\ufe0f \u30ec\u30a4\u30e4\u30fc\u8cac\u4efb\u9055\u53cd\u306e\u91cd\u8981\u6559\u8a13\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3",children:"\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"tenantattributes\u6d3b\u7528",children:"TenantAttributes\u6d3b\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u30c6\u30ca\u30f3\u30c8\u56fa\u6709\u8a2d\u5b9a\u306e\u53d6\u5f97\nboolean enablePKCE = tenantAttributes.optValueAsBoolean("oauth.pkce.enabled", false);\nint tokenLifetime = tenantAttributes.optValueAsInt("token.access_token.lifetime_seconds", 3600);\nString customClaim = tenantAttributes.optValueAsString("token.custom_claim_key", "");\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u8a2d\u5b9a: TenantAttributes.optValueAsBoolean(key, default) \u30d1\u30bf\u30fc\u30f3\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,t.jsx)(n.h3,{id:"idp-server-core-\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8",children:"idp-server-core \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e5\u3064\u306e\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Handler-Service-Repository \u30d1\u30bf\u30fc\u30f3"}),": \u5c64\u8cac\u4efb\u3092\u660e\u78ba\u306b\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tenant\u7b2c\u4e00\u5f15\u6570\u306e\u539f\u5247"}),": \u5168Repository\u64cd\u4f5c\u3067\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u512a\u5148"}),": String/Map\u6feb\u7528\u3092\u907f\u3051\u3001\u578b\u5b89\u5168\u306a\u8a2d\u8a08"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RFC\u6e96\u62e0Javadoc"}),": \u4ed5\u69d8\u66f8\u5f15\u7528\u3067\u5b9f\u88c5\u610f\u56f3\u3092\u660e\u78ba\u5316"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Plugin\u62e1\u5f35"}),": ",(0,t.jsx)(n.code,{children:"Map<GrantType, Service>"}),"\u30d1\u30bf\u30fc\u30f3\u3067\u6a5f\u80fd\u62e1\u5f35"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-12-platform",children:"idp-server-platform\uff08\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u57fa\u76e4\uff09"})," - \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5b9f\u88c5\u8a73\u7d30"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-10-use-cases",children:"idp-server-use-cases\uff08\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64\uff09"})," - EntryService\u30d1\u30bf\u30fc\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-21-core-adapter",children:"idp-server-core-adapter\uff08\u30a2\u30c0\u30d7\u30bf\u30fc\u5c64\uff09"})," - Repository\u5b9f\u88c5"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"libs/idp-server-core/src/main/java/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,t.jsx)(n.li,{children:"CLAUDE.md\u300c4\u5c64\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a73\u7d30\u300d\u300cHandler-Service-Repository \u30d1\u30bf\u30fc\u30f3\u300d"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../documentation/docs/content_01_intro/intro-01-tech-overview.md",children:"intro-01-tech-overview.md"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65b9\u6cd5"}),": ",(0,t.jsx)(n.code,{children:'find libs/idp-server-core -type f -name "*.java" | head -20'})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var r=i(96540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);