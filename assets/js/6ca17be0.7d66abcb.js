"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7420],{72904:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"content_06_developer-guide/reference/pg-partman-operations-guide","title":"pg_partman + pg_cron \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u904b\u7528\u30ac\u30a4\u30c9","description":"1. \u6982\u8981","source":"@site/docs/content_06_developer-guide/08-reference/pg-partman-operations-guide.md","sourceDirName":"content_06_developer-guide/08-reference","slug":"/content_06_developer-guide/reference/pg-partman-operations-guide","permalink":"/idp-server/docs/content_06_developer-guide/reference/pg-partman-operations-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/08-reference/pg-partman-operations-guide.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\ud83e\udded \u8a2d\u8a08\u539f\u5247\u3068\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3","permalink":"/idp-server/docs/content_06_developer-guide/reference/design-principles-guidelines"},"next":{"title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8 \u30a2\u30fc\u30ab\u30a4\u30d6\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_06_developer-guide/reference/security-event-archive-guide"}}');var s=t(74848),r=t(28453);const i={},a="pg_partman + pg_cron \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u904b\u7528\u30ac\u30a4\u30c9",d={},c=[{value:"1. \u6982\u8981",id:"1-\u6982\u8981",level:2},{value:"1.1 pg_partman \u3068\u306f",id:"11-pg_partman-\u3068\u306f",level:3},{value:"1.2 pg_cron \u3068\u306f",id:"12-pg_cron-\u3068\u306f",level:3},{value:"1.3 \u306a\u305c\u3053\u306e\u7d44\u307f\u5408\u308f\u305b\u304b",id:"13-\u306a\u305c\u3053\u306e\u7d44\u307f\u5408\u308f\u305b\u304b",level:3},{value:"2. \u74b0\u5883\u69cb\u6210",id:"2-\u74b0\u5883\u69cb\u6210",level:2},{value:"2.1 \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\uff08Docker\uff09",id:"21-\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883docker",level:3},{value:"2.2 AWS RDS",id:"22-aws-rds",level:3},{value:"3. \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806",id:"3-\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806",level:2},{value:"3.1 \u62e1\u5f35\u6a5f\u80fd\u306e\u6709\u52b9\u5316",id:"31-\u62e1\u5f35\u6a5f\u80fd\u306e\u6709\u52b9\u5316",level:3},{value:"3.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210",id:"32-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210",level:3},{value:"3.3 pg_partman\u8a2d\u5b9a",id:"33-pg_partman\u8a2d\u5b9a",level:3},{value:"3.4 pg_cron\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a",id:"34-pg_cron\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a",level:3},{value:"4. \u63a8\u5968\u8a2d\u5b9a",id:"4-\u63a8\u5968\u8a2d\u5b9a",level:2},{value:"4.1 \u7d71\u8a08\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a",id:"41-\u7d71\u8a08\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a",level:3},{value:"4.2 \u8a2d\u5b9a\u4f8b",id:"42-\u8a2d\u5b9a\u4f8b",level:3},{value:"5. \u904b\u7528\u76e3\u8996",id:"5-\u904b\u7528\u76e3\u8996",level:2},{value:"5.1 pg_partman\u8a2d\u5b9a\u78ba\u8a8d",id:"51-pg_partman\u8a2d\u5b9a\u78ba\u8a8d",level:3},{value:"5.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\u78ba\u8a8d",id:"52-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\u78ba\u8a8d",level:3},{value:"5.3 pg_cron\u30b8\u30e7\u30d6\u78ba\u8a8d",id:"53-pg_cron\u30b8\u30e7\u30d6\u78ba\u8a8d",level:3},{value:"5.4 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996",id:"54-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996",level:3},{value:"6. \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",id:"6-\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",level:2},{value:"6.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044",id:"61-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044",level:3},{value:"6.2 \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u524a\u9664\u3055\u308c\u306a\u3044",id:"62-\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u524a\u9664\u3055\u308c\u306a\u3044",level:3},{value:"6.3 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u6e9c\u307e\u308b\uff08\u91cd\u8981\uff09",id:"63-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u6e9c\u307e\u308b\u91cd\u8981",level:3},{value:"\u691c\u8a3c\u7d50\u679c\uff08\u5b9f\u969b\u306e\u52d5\u4f5c\u78ba\u8a8d\uff09",id:"\u691c\u8a3c\u7d50\u679c\u5b9f\u969b\u306e\u52d5\u4f5c\u78ba\u8a8d",level:4},{value:"6.4 run_maintenance_proc()\u304c\u30a8\u30e9\u30fc\u3067\u5931\u6557",id:"64-run_maintenance_proc\u304c\u30a8\u30e9\u30fc\u3067\u5931\u6557",level:3},{value:"7. \u691c\u8a3c\u30b9\u30af\u30ea\u30d7\u30c8",id:"7-\u691c\u8a3c\u30b9\u30af\u30ea\u30d7\u30c8",level:2},{value:"7.1 \u5229\u7528\u53ef\u80fd\u306a\u30b9\u30af\u30ea\u30d7\u30c8",id:"71-\u5229\u7528\u53ef\u80fd\u306a\u30b9\u30af\u30ea\u30d7\u30c8",level:3},{value:"7.2 \u57fa\u672c\u7684\u306a\u691c\u8a3c\u624b\u9806",id:"72-\u57fa\u672c\u7684\u306a\u691c\u8a3c\u624b\u9806",level:3},{value:"7.3 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u691c\u8a3c",id:"73-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u691c\u8a3c",level:3},{value:"7.4 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u691c\u8a3c",id:"74-\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u691c\u8a3c",level:3},{value:"8. AWS RDS\u56fa\u6709\u306e\u6ce8\u610f\u4e8b\u9805",id:"8-aws-rds\u56fa\u6709\u306e\u6ce8\u610f\u4e8b\u9805",level:2},{value:"8.1 pg_partman_bgw\u306f\u4f7f\u7528\u4e0d\u53ef",id:"81-pg_partman_bgw\u306f\u4f7f\u7528\u4e0d\u53ef",level:3},{value:"8.2 \u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a",id:"82-\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a",level:3},{value:"8.3 \u6a29\u9650\u8a2d\u5b9a",id:"83-\u6a29\u9650\u8a2d\u5b9a",level:3},{value:"9. \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"9-\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:2},{value:"9.1 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0",id:"91-\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0",level:3},{value:"9.2 premake\u8a2d\u5b9a\u306e\u76ee\u5b89",id:"92-premake\u8a2d\u5b9a\u306e\u76ee\u5b89",level:3},{value:"9.3 \u76e3\u8996\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a",id:"93-\u76e3\u8996\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a",level:3},{value:"9.4 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u9069\u5316",id:"94-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u9069\u5316",level:3},{value:"9.5 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u306e\u51aa\u7b49\u6027",id:"95-\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u306e\u51aa\u7b49\u6027",level:3},{value:"9.6 \u5916\u90e8\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u306e\u9078\u629e\u80a2",id:"96-\u5916\u90e8\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u306e\u9078\u629e\u80a2",level:3},{value:"10. \u904b\u7528\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",id:"10-\u904b\u7528\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",level:2},{value:"10.1 \u65e5\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",id:"101-\u65e5\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",level:3},{value:"10.2 \u9031\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",id:"102-\u9031\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",level:3},{value:"11. \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"11-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2},{value:"12. \u53c2\u8003\u8cc7\u6599",id:"12-\u53c2\u8003\u8cc7\u6599",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pg_partman--pg_cron-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u904b\u7528\u30ac\u30a4\u30c9",children:"pg_partman + pg_cron \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u904b\u7528\u30ac\u30a4\u30c9"})}),"\n",(0,s.jsx)(n.h2,{id:"1-\u6982\u8981",children:"1. \u6982\u8981"}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001pg_partman\u3068pg_cron\u3092\u4f7f\u7528\u3057\u305fPostgreSQL\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u81ea\u52d5\u904b\u7528\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"11-pg_partman-\u3068\u306f",children:"1.1 pg_partman \u3068\u306f"}),"\n",(0,s.jsx)(n.p,{children:"pg_partman\u306f\u3001PostgreSQL\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406\u3092\u81ea\u52d5\u5316\u3059\u308b\u62e1\u5f35\u6a5f\u80fd\u3067\u3059\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         pg_partman \u306e\u5f79\u5272                                    \u2502\n\u2502                                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502  \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3  \u2502     \u2502  \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3  \u2502     \u2502  \u4fdd\u6301\u30dd\u30ea\u30b7\u30fc   \u2502       \u2502\n\u2502  \u2502  \u81ea\u52d5\u4f5c\u6210       \u2502     \u2502  \u81ea\u52d5\u524a\u9664       \u2502     \u2502  \u7ba1\u7406          \u2502       \u2502\n\u2502  \u2502  (premake)      \u2502     \u2502  (retention)    \u2502     \u2502                \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                                                             \u2502\n\u2502  \u624b\u52d5\u3067\u306eCREATE TABLE / DROP TABLE\u304c\u4e0d\u8981\u306b\u306a\u308b                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h3,{id:"12-pg_cron-\u3068\u306f",children:"1.2 pg_cron \u3068\u306f"}),"\n",(0,s.jsx)(n.p,{children:"pg_cron\u306f\u3001PostgreSQL\u5185\u3067\u30b8\u30e7\u30d6\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u62e1\u5f35\u6a5f\u80fd\u3067\u3059\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- cron\u5f0f\u3067SQL\u3092\u5b9a\u671f\u5b9f\u884c\nSELECT cron.schedule('job-name', '0 * * * *', 'SELECT my_function();');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"13-\u306a\u305c\u3053\u306e\u7d44\u307f\u5408\u308f\u305b\u304b",children:"1.3 \u306a\u305c\u3053\u306e\u7d44\u307f\u5408\u308f\u305b\u304b"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u65b9\u5f0f"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30e1\u30ea\u30c3\u30c8"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30c7\u30e1\u30ea\u30c3\u30c8"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"AWS RDS\u5bfe\u5fdc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u624b\u52d5\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30b7\u30f3\u30d7\u30eb"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u904b\u7528\u8ca0\u8377\u9ad8\u3044"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u2705"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"pg_partman + pg_partman_bgw"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a2d\u5b9a\u306e\u307f\u3067\u81ea\u52d5\u5316"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u274c"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"pg_partman + pg_cron"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u67d4\u8edf\u306a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"\u2705"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5916\u90e8\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\uff08Lambda\u7b49\uff09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"AWS\u9023\u643a\u5bb9\u6613"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8907\u96d1"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u2705"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"AWS RDS\u3067\u306fpg_partman_bgw\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001pg_cron\u3068\u306e\u7d44\u307f\u5408\u308f\u305b\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-\u74b0\u5883\u69cb\u6210",children:"2. \u74b0\u5883\u69cb\u6210"}),"\n",(0,s.jsx)(n.h3,{id:"21-\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883docker",children:"2.1 \u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\uff08Docker\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yaml\npostgres-primary:\n  command: [\n    "postgres",\n    "-c", "shared_preload_libraries=pg_stat_statements,pg_cron",\n    "-c", "cron.database_name=idpserver"\n  ]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"22-aws-rds",children:"2.2 AWS RDS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# \u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\nshared_preload_libraries = 'pg_cron'\ncron.database_name = 'idpserver'\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6ce8\u610f"}),": \u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u5909\u66f4\u5f8c\u306fDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u518d\u8d77\u52d5\u304c\u5fc5\u8981\u3067\u3059\u3002"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806",children:"3. \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806"}),"\n",(0,s.jsx)(n.h3,{id:"31-\u62e1\u5f35\u6a5f\u80fd\u306e\u6709\u52b9\u5316",children:"3.1 \u62e1\u5f35\u6a5f\u80fd\u306e\u6709\u52b9\u5316"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- pg_cron\u306e\u6709\u52b9\u5316\nCREATE EXTENSION IF NOT EXISTS pg_cron;\n\n-- pg_partman\u306e\u6709\u52b9\u5316\nCREATE SCHEMA IF NOT EXISTS partman;\nCREATE EXTENSION IF NOT EXISTS pg_partman WITH SCHEMA partman;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"32-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210",children:"3.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u4f8b: \u7d71\u8a08\u30e6\u30fc\u30b6\u30fc\u30c6\u30fc\u30d6\u30eb\uff08\u65e5\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\uff09\nCREATE TABLE statistics_daily_users (\n    tenant_id UUID NOT NULL,\n    stat_date DATE NOT NULL,\n    user_id UUID NOT NULL,\n    last_used_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (tenant_id, stat_date, user_id)\n) PARTITION BY RANGE (stat_date);\n\nCREATE INDEX idx_daily_users_tenant_date\n    ON statistics_daily_users(tenant_id, stat_date);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"33-pg_partman\u8a2d\u5b9a",children:"3.3 pg_partman\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7ba1\u7406\u3092\u8a2d\u5b9a\nSELECT partman.create_parent(\n    p_parent_table => 'public.statistics_daily_users',\n    p_control => 'stat_date',           -- \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30ad\u30fc\n    p_type => 'range',                  -- RANGE \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n    p_interval => '1 month',            -- \u6708\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n    p_premake => 3,                     -- 3\u30f6\u6708\u5148\u307e\u3067\u4e8b\u524d\u4f5c\u6210\n    p_start_partition => '2024-01-01'   -- \u958b\u59cb\u65e5\n);\n\n-- \u4fdd\u6301\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\nUPDATE partman.part_config\nSET infinite_time_partitions = true,   -- \u7121\u9650\u306b\u65b0\u898f\u4f5c\u6210\n    retention = '6 months',             -- 6\u30f6\u6708\u4fdd\u6301\n    retention_keep_table = false,       -- \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u524a\u9664\n    retention_keep_index = false        -- \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3082\u524a\u9664\nWHERE parent_table = 'public.statistics_daily_users';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"34-pg_cron\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a",children:"3.4 pg_cron\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u6bce\u6642\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\uff08\u63a8\u5968\uff09\nSELECT cron.schedule(\n    'partman-maintenance',\n    '0 * * * *',  -- \u6bce\u66420\u5206\n    $$CALL partman.run_maintenance_proc()$$\n);\n\n-- \u307e\u305f\u306f\u6bce\u65e5AM2\u6642\u306b\u5b9f\u884c\nSELECT cron.schedule(\n    'partman-daily-maintenance',\n    '0 2 * * *',  -- \u6bce\u65e5AM2:00\n    $$CALL partman.run_maintenance_proc()$$\n);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-\u63a8\u5968\u8a2d\u5b9a",children:"4. \u63a8\u5968\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.h3,{id:"41-\u7d71\u8a08\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a",children:"4.1 \u7d71\u8a08\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30c6\u30fc\u30d6\u30eb"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u9593\u9694"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"premake"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u4fdd\u6301\u671f\u9593"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"statistics_daily_users"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6708\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"6\u30f6\u6708"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"statistics_monthly_users"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5e74\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3\u5e74"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"statistics_yearly_users"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5e74\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5\u5e74"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"42-\u8a2d\u5b9a\u4f8b",children:"4.2 \u8a2d\u5b9a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- DAU\uff08\u65e5\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff09\u30c6\u30fc\u30d6\u30eb\nSELECT partman.create_parent(\n    p_parent_table => 'public.statistics_daily_users',\n    p_control => 'stat_date',\n    p_type => 'range',\n    p_interval => '1 month',\n    p_premake => 3,\n    p_start_partition => '2024-01-01'\n);\n\nUPDATE partman.part_config\nSET retention = '6 months',\n    retention_keep_table = false\nWHERE parent_table = 'public.statistics_daily_users';\n\n-- MAU\uff08\u6708\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff09\u30c6\u30fc\u30d6\u30eb\nSELECT partman.create_parent(\n    p_parent_table => 'public.statistics_monthly_users',\n    p_control => 'stat_month',\n    p_type => 'range',\n    p_interval => '1 year',\n    p_premake => 2,\n    p_start_partition => '2024-01-01'\n);\n\nUPDATE partman.part_config\nSET retention = '3 years',\n    retention_keep_table = false\nWHERE parent_table = 'public.statistics_monthly_users';\n\n-- YAU\uff08\u5e74\u6b21\u30a2\u30af\u30c6\u30a3\u30d6\u30e6\u30fc\u30b6\u30fc\uff09\u30c6\u30fc\u30d6\u30eb\nSELECT partman.create_parent(\n    p_parent_table => 'public.statistics_yearly_users',\n    p_control => 'stat_year',\n    p_type => 'range',\n    p_interval => '1 year',\n    p_premake => 2,\n    p_start_partition => '2024-01-01'\n);\n\nUPDATE partman.part_config\nSET retention = '5 years',\n    retention_keep_table = false\nWHERE parent_table = 'public.statistics_yearly_users';\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-\u904b\u7528\u76e3\u8996",children:"5. \u904b\u7528\u76e3\u8996"}),"\n",(0,s.jsx)(n.h3,{id:"51-pg_partman\u8a2d\u5b9a\u78ba\u8a8d",children:"5.1 pg_partman\u8a2d\u5b9a\u78ba\u8a8d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u8a2d\u5b9a\u4e00\u89a7\nSELECT\n    parent_table,\n    partition_interval,\n    premake,\n    retention,\n    infinite_time_partitions as infinite\nFROM partman.part_config\nORDER BY parent_table;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"52-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\u78ba\u8a8d",children:"5.2 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\u78ba\u8a8d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u7279\u5b9a\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4e00\u89a7\nSELECT\n    c.relname as partition,\n    pg_size_pretty(pg_relation_size(c.oid)) as size\nFROM pg_inherits i\nJOIN pg_class c ON i.inhrelid = c.oid\nJOIN pg_class p ON i.inhparent = p.oid\nWHERE p.relname = 'statistics_daily_users'\nORDER BY c.relname;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"53-pg_cron\u30b8\u30e7\u30d6\u78ba\u8a8d",children:"5.3 pg_cron\u30b8\u30e7\u30d6\u78ba\u8a8d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30b8\u30e7\u30d6\u4e00\u89a7\nSELECT jobid, jobname, schedule, command, active\nFROM cron.job\nORDER BY jobid;\n\n-- \u30b8\u30e7\u30d6\u5b9f\u884c\u5c65\u6b74\nSELECT\n    jobid,\n    status,\n    return_message,\n    start_time,\n    end_time\nFROM cron.job_run_details\nORDER BY start_time DESC\nLIMIT 10;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"54-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996",children:"5.4 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u76e3\u8996"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u6e9c\u307e\u3063\u3066\u3044\u306a\u3044\u304b\u78ba\u8a8d\nSELECT\n    p.relname as parent_table,\n    c.relname as default_partition,\n    (SELECT COUNT(*) FROM ONLY c.relname::regclass) as row_count\nFROM pg_inherits i\nJOIN pg_class c ON i.inhrelid = c.oid\nJOIN pg_class p ON i.inhparent = p.oid\nWHERE c.relname LIKE '%_default';\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6ce8\u610f"}),": DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\u304c\u8ffd\u3044\u3064\u3044\u3066\u3044\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",children:"6. \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"}),"\n",(0,s.jsx)(n.h3,{id:"61-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044",children:"6.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6"}),": \u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u81ea\u52d5\u4f5c\u6210\u3055\u308c\u306a\u3044"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u78ba\u8a8d\u624b\u9806"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- pg_cron\u30b8\u30e7\u30d6\u304c\u6709\u52b9\u304b\u78ba\u8a8d\nSELECT jobid, jobname, active FROM cron.job\nWHERE jobname LIKE '%partman%';\n\n-- \u30b8\u30e7\u30d6\u5b9f\u884c\u5c65\u6b74\u3092\u78ba\u8a8d\nSELECT * FROM cron.job_run_details\nWHERE jobid = (SELECT jobid FROM cron.job WHERE jobname = 'partman-maintenance')\nORDER BY start_time DESC\nLIMIT 5;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5bfe\u51e6\u6cd5"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u624b\u52d5\u3067\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\nCALL partman.run_maintenance_proc();\n\n-- \u30b8\u30e7\u30d6\u3092\u518d\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\nSELECT cron.unschedule('partman-maintenance');\nSELECT cron.schedule('partman-maintenance', '0 * * * *',\n    $$CALL partman.run_maintenance_proc()$$);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"62-\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u524a\u9664\u3055\u308c\u306a\u3044",children:"6.2 \u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u524a\u9664\u3055\u308c\u306a\u3044"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6"}),": retention\u8a2d\u5b9a\u3092\u8d85\u3048\u305f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u6b8b\u3063\u3066\u3044\u308b"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u78ba\u8a8d\u624b\u9806"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- retention\u8a2d\u5b9a\u3092\u78ba\u8a8d\nSELECT parent_table, retention, retention_keep_table\nFROM partman.part_config;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5bfe\u51e6\u6cd5"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- retention_keep_table\u304ctrue\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u78ba\u8a8d\nUPDATE partman.part_config\nSET retention_keep_table = false\nWHERE parent_table = 'public.your_table';\n\n-- \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u518d\u5b9f\u884c\nCALL partman.run_maintenance_proc();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"63-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u6e9c\u307e\u308b\u91cd\u8981",children:"6.3 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u6e9c\u307e\u308b\uff08\u91cd\u8981\uff09"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6"}),": DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u60f3\u5b9a\u5916\u306e\u30c7\u30fc\u30bf\u304c\u5b58\u5728"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u539f\u56e0"}),": premake\u8a2d\u5b9a\u304c\u4e0d\u8db3\u3001\u307e\u305f\u306f\u30c7\u30fc\u30bf\u306e\u65e5\u4ed8\u304c\u60f3\u5b9a\u7bc4\u56f2\u5916"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u26a0\ufe0f \u91cd\u5927\u306a\u554f\u984c"}),": DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u72b6\u614b\u3067\u3001\u305d\u306e\u30c7\u30fc\u30bf\u306e\u65e5\u4ed8\u7bc4\u56f2\u306b\u8a72\u5f53\u3059\u308b\u65b0\u3057\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001pg_partman\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u306f",(0,s.jsx)(n.strong,{children:"\u5236\u7d04\u9055\u53cd\u3067\u30a8\u30e9\u30fc"}),"\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u6d41\u308c                                             \u2502\n\u2502                                                                             \u2502\n\u2502  1. premake\u4e0d\u8db3\u3067\u5c06\u6765\u65e5\u4ed8\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044                         \u2502\n\u2502     \u4f8b: premake=1 \u2192 \u4eca\u65e5+1\u65e5\u5f8c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3057\u304b\u5b58\u5728\u3057\u306a\u3044                  \u2502\n\u2502                                                                             \u2502\n\u2502  2. \u5c06\u6765\u65e5\u4ed8\u306e\u30c7\u30fc\u30bf\u304cDEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u683c\u7d0d\u3055\u308c\u308b                       \u2502\n\u2502     \u4f8b: 5\u65e5\u5f8c\u306e\u30c7\u30fc\u30bf \u2192 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u683c\u7d0d                          \u2502\n\u2502                                                                             \u2502\n\u2502  3. run_maintenance_proc()\u304c\u65b0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\u3092\u8a66\u307f\u308b                     \u2502\n\u2502                                                                             \u2502\n\u2502  4. \u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u308a\u52d5\u4f5c\u304c\u7570\u306a\u308b:                                            \u2502\n\u2502     - \u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3: DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30fc\u30bf\u3068\u7af6\u5408 \u2192 \u30a8\u30e9\u30fc\u767a\u751f        \u2502\n\u2502     - \u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3: \u30a8\u30e9\u30fc\u306f\u767a\u751f\u3057\u306a\u3044\u304c\u3001\u30c7\u30fc\u30bf\u306f\u79fb\u52d5\u3055\u308c\u306a\u3044            \u2502\n\u2502                                                                             \u2502\n\u2502  5. \u3044\u305a\u308c\u306e\u5834\u5408\u3082\u3001DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30fc\u30bf\u306f\u624b\u52d5\u5bfe\u51e6\u304c\u5fc5\u8981             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u691c\u8a3c\u7d50\u679c\u5b9f\u969b\u306e\u52d5\u4f5c\u78ba\u8a8d",children:"\u691c\u8a3c\u7d50\u679c\uff08\u5b9f\u969b\u306e\u52d5\u4f5c\u78ba\u8a8d\uff09"}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5\u4e0b\u306e\u691c\u8a3c\u3092 ",(0,s.jsx)(n.code,{children:"default-partition-problem-test.sh"})," \u3067\u5b9f\u65bd\u3057\u307e\u3057\u305f\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u691c\u8a3c\u74b0\u5883: pg_partman 5.x\n\nPhase 1: \u30c6\u30b9\u30c8\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\uff08premake=1\uff09\n  \u2192 \u521d\u671f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3: default, p20251209, p20251210\n\nPhase 2: \u5c06\u6765\u65e5\u4ed8\u30c7\u30fc\u30bf\u633f\u5165\uff085\u301c7\u65e5\u5f8c\uff09\n  \u2192 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b4\u4ef6\u683c\u7d0d\n     event_date | count\n     -----------+-------\n     2025-12-14 |     2\n     2025-12-15 |     1\n     2025-12-16 |     1\n\nPhase 3: check_default()\u3067\u76e3\u8996\n  \u2192 DEFAULT\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u3092\u691c\u51fa\n\nPhase 4: partition_data_time()\u3067\u518d\u914d\u7f6e\n  \u2192 4\u4ef6\u304c\u9069\u5207\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u79fb\u52d5\n  \u2192 \u65b0\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3 p20251214, p20251215, p20251216 \u304c\u81ea\u52d5\u4f5c\u6210\n  \u2192 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u7a7a\u306b\n\nPhase 5: \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u518d\u5b9f\u884c\n  \u2192 premake=10\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u300112/26\u307e\u3067\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5bfe\u51e6\u6cd5"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Step 1: DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30c7\u30fc\u30bf\u7bc4\u56f2\u3092\u78ba\u8a8d\nSELECT MIN(stat_date), MAX(stat_date), COUNT(*)\nFROM statistics_daily_users_default;\n\n-- Step 2: partition_data_time()\u3067\u30c7\u30fc\u30bf\u3092\u9069\u5207\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u518d\u914d\u7f6e\n-- \u3053\u306e\u95a2\u6570\u306f\u5fc5\u8981\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3082\u540c\u6642\u306b\u4f5c\u6210\u3059\u308b\n-- \u26a0\ufe0f \u6ce8\u610f: \u5927\u91cf\u30c7\u30fc\u30bf\u306e\u5834\u5408\u3001\u9577\u6642\u9593\u306e\u30ed\u30c3\u30af\u7372\u5f97\u304c\u767a\u751f\nSELECT partman.partition_data_time(\n    p_parent_table := 'public.statistics_daily_users',\n    p_batch_count := 100  -- \u30d0\u30c3\u30c1\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\uff08\u79fb\u52d5\u3059\u308b\u30ec\u30b3\u30fc\u30c9\u6570\uff09\n);\n\n-- \u623b\u308a\u5024: \u79fb\u52d5\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u6570\n-- \u4f8b: partition_data_time\n--     ---------------------\n--                        4\n\n-- Step 3: DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u7a7a\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\nSELECT COUNT(*) FROM statistics_daily_users_default;\n-- \u7d50\u679c: 0\n\n-- Step 4: premake\u3092\u5897\u3084\u3057\u3066\u518d\u767a\u9632\u6b62\nUPDATE partman.part_config\nSET premake = 6  -- 6\u671f\u9593\u5148\u307e\u3067\u4e8b\u524d\u4f5c\u6210\nWHERE parent_table = 'public.statistics_daily_users';\n\n-- Step 5: \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u518d\u5b9f\u884c\nCALL partman.run_maintenance_proc();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4e88\u9632\u7b56\uff08check_default\u95a2\u6570\uff09"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5168\u30c6\u30fc\u30d6\u30eb\u3092\u30c1\u30a7\u30c3\u30af\n-- \u5f15\u6570\u306a\u3057\u3067\u3001pg_partman\u7ba1\u7406\u4e0b\u306e\u5168\u30c6\u30fc\u30d6\u30eb\u3092\u5bfe\u8c61\nSELECT * FROM partman.check_default();\n\n-- \u7d50\u679c\u4f8b:\n--            default_table                  | count\n-- -----------------------------------------+-------\n--  public.statistics_daily_users_default   |     4\n--  public.statistics_monthly_users_default |     0\n-- (\u30c7\u30fc\u30bf\u304c\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u307f\u8868\u793a\u3055\u308c\u308b)\n\n-- \u76e3\u8996\u30af\u30a8\u30ea\u4f8b\uff08\u30a2\u30e9\u30fc\u30c8\u7528\uff09\nSELECT COUNT(*) as tables_with_default_data\nFROM partman.check_default()\nWHERE count > 0;\n-- \u7d50\u679c\u304c0\u3088\u308a\u5927\u304d\u3044\u5834\u5408\u3001\u5bfe\u51e6\u304c\u5fc5\u8981\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u91cd\u8981"}),": ",(0,s.jsx)(n.code,{children:"check_default()"}),"\u306f\u5f15\u6570\u306a\u3057\u3067\u3001pg_partman\u7ba1\u7406\u4e0b\u306e\u5168\u30c6\u30fc\u30d6\u30eb\u306eDEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u65e5\u6b21\u307e\u305f\u306f\u9031\u6b21\u306e\u76e3\u8996\u30b8\u30e7\u30d6\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"64-run_maintenance_proc\u304c\u30a8\u30e9\u30fc\u3067\u5931\u6557",children:"6.4 run_maintenance_proc()\u304c\u30a8\u30e9\u30fc\u3067\u5931\u6557"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u75c7\u72b6"}),": pg_cron\u30b8\u30e7\u30d6\u304c\u5931\u6557\u30b9\u30c6\u30fc\u30bf\u30b9\u306b\u306a\u308b"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u78ba\u8a8d\u624b\u9806"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u30b8\u30e7\u30d6\u5b9f\u884c\u5c65\u6b74\u3067\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\nSELECT\n    jobid,\n    status,\n    return_message,\n    start_time,\n    end_time\nFROM cron.job_run_details\nWHERE status = 'failed'\nORDER BY start_time DESC\nLIMIT 10;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4e3b\u306a\u539f\u56e0\u3068\u5bfe\u51e6"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30a8\u30e9\u30fc\u5185\u5bb9"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u539f\u56e0"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u5bfe\u51e6\u6cd5"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5236\u7d04\u9055\u53cd"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u5b58\u5728"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.code,{children:"partition_data_time()"}),"\u3067\u30c7\u30fc\u30bf\u518d\u914d\u7f6e"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6a29\u9650\u30a8\u30e9\u30fc"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u4e0d\u8db3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA partman"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30ed\u30c3\u30af\u5f85\u3061"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ed6\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u30ed\u30c3\u30af\u4fdd\u6301"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u4f4e\u8ca0\u8377\u6642\u9593\u5e2f\u306b\u518d\u5b9f\u884c"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"7-\u691c\u8a3c\u30b9\u30af\u30ea\u30d7\u30c8",children:"7. \u691c\u8a3c\u30b9\u30af\u30ea\u30d7\u30c8"}),"\n",(0,s.jsx)(n.h3,{id:"71-\u5229\u7528\u53ef\u80fd\u306a\u30b9\u30af\u30ea\u30d7\u30c8",children:"7.1 \u5229\u7528\u53ef\u80fd\u306a\u30b9\u30af\u30ea\u30d7\u30c8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"scripts/pg_partman/\n\u251c\u2500\u2500 setup-pg_partman.sh                  # pg_partman\u62e1\u5f35\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\u251c\u2500\u2500 statistics-users-pg_partman.sh       # \u7d71\u8a08\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\u251c\u2500\u2500 verify-pg_partman.sh                 # \u52d5\u4f5c\u691c\u8a3c\n\u251c\u2500\u2500 partition-lifecycle-test.sh          # \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u691c\u8a3c\n\u251c\u2500\u2500 pgcron-autorun-test.sh               # pg_cron\u81ea\u52d5\u5b9f\u884c\u691c\u8a3c\n\u251c\u2500\u2500 default-partition-problem-test.sh    # DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u691c\u8a3c\n\u251c\u2500\u2500 cleanup-pg_partman.sh                # \u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\n\u2514\u2500\u2500 README.md                            # \u8a73\u7d30\u8aac\u660e\n"})}),"\n",(0,s.jsx)(n.h3,{id:"72-\u57fa\u672c\u7684\u306a\u691c\u8a3c\u624b\u9806",children:"7.2 \u57fa\u672c\u7684\u306a\u691c\u8a3c\u624b\u9806"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. pg_partman\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n./scripts/pg_partman/setup-pg_partman.sh\n\n# 2. \u7d71\u8a08\u30c6\u30fc\u30d6\u30eb\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u8a2d\u5b9a\n./scripts/pg_partman/statistics-users-pg_partman.sh\n\n# 3. \u52d5\u4f5c\u691c\u8a3c\n./scripts/pg_partman/verify-pg_partman.sh\n\n# 4. pg_cron\u81ea\u52d5\u5b9f\u884c\u691c\u8a3c\n./scripts/pg_partman/pgcron-autorun-test.sh\n\n# 5. \u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\uff08\u5fc5\u8981\u306b\u5fdc\u3058\u3066\uff09\n./scripts/pg_partman/cleanup-pg_partman.sh\n"})}),"\n",(0,s.jsx)(n.h3,{id:"73-default\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u691c\u8a3c",children:"7.3 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u691c\u8a3c"}),"\n",(0,s.jsx)(n.p,{children:"DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u554f\u984c\u306e\u767a\u751f\u3068\u5bfe\u51e6\u6cd5\u3092\u691c\u8a3c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./scripts/pg_partman/default-partition-problem-test.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Phase"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u5185\u5bb9"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u78ba\u8a8d\u30dd\u30a4\u30f3\u30c8"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"1"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30c6\u30b9\u30c8\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\uff08premake=1\uff09"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6700\u5c0f\u9650\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3067\u958b\u59cb"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5c06\u6765\u65e5\u4ed8\u30c7\u30fc\u30bf\u633f\u5165"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u683c\u7d0d\u3055\u308c\u308b"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"check_default()\u3067\u76e3\u8996"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"DEFAULT\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u3092\u691c\u51fa"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"4"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u308b\u52d5\u4f5c\u5dee\u7570\u3092\u78ba\u8a8d"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"5"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"partition_data_time()\u3067\u518d\u914d\u7f6e"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30c7\u30fc\u30bf\u304c\u9069\u5207\u306a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u79fb\u52d5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"6"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u518d\u5ea6\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6b63\u5e38\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u308b"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5b9f\u884c\u4f8b"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Phase 2: \u5c06\u6765\u65e5\u4ed8\u30c7\u30fc\u30bf\u633f\u5165\n  \u2192 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b4\u4ef6\u683c\u7d0d\n\nPhase 3: check_default()\u3067\u76e3\u8996\n  \u2192 \u7d50\u679c:\n           default_table           | count\n  ---------------------------------+-------\n   public.default_test_table_default |     4\n\nPhase 5: partition_data_time()\u3067\u518d\u914d\u7f6e\n  \u2192 partition_data_time\n    ---------------------\n                       4\n  \u2192 DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u7a7a\u306b\n"})}),"\n",(0,s.jsx)(n.h3,{id:"74-\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u691c\u8a3c",children:"7.4 \u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u691c\u8a3c"}),"\n",(0,s.jsx)(n.p,{children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u30fb\u524a\u9664\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u691c\u8a3c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./scripts/pg_partman/partition-lifecycle-test.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u691c\u8a3c\u5185\u5bb9"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"premake\u8a2d\u5b9a\u306b\u3088\u308b\u5c06\u6765\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4e8b\u524d\u4f5c\u6210"}),"\n",(0,s.jsx)(n.li,{children:"retention\u8a2d\u5b9a\u306b\u3088\u308b\u53e4\u3044\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u81ea\u52d5\u524a\u9664"}),"\n",(0,s.jsx)(n.li,{children:"\u30c7\u30fc\u30bf\u5206\u6563\u306e\u78ba\u8a8d"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"8-aws-rds\u56fa\u6709\u306e\u6ce8\u610f\u4e8b\u9805",children:"8. AWS RDS\u56fa\u6709\u306e\u6ce8\u610f\u4e8b\u9805"}),"\n",(0,s.jsx)(n.h3,{id:"81-pg_partman_bgw\u306f\u4f7f\u7528\u4e0d\u53ef",children:"8.1 pg_partman_bgw\u306f\u4f7f\u7528\u4e0d\u53ef"}),"\n",(0,s.jsxs)(n.p,{children:["AWS RDS\u3067\u306f",(0,s.jsx)(n.code,{children:"pg_partman_bgw"}),"\uff08Background Worker\uff09\u306f",(0,s.jsx)(n.code,{children:"shared_preload_libraries"}),"\u306b\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3002\n\u4ee3\u308f\u308a\u306b",(0,s.jsx)(n.code,{children:"pg_cron"}),"\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u30ed\u30fc\u30ab\u30eb\u74b0\u5883:\n  pg_partman_bgw\uff08Background Worker\uff09\u2190 \u4f7f\u7528\u53ef\u80fd\n\nAWS RDS:\n  pg_cron + run_maintenance_proc() \u2190 \u3053\u3061\u3089\u3092\u4f7f\u7528\n"})}),"\n",(0,s.jsx)(n.h3,{id:"82-\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a",children:"8.2 \u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# \u5fc5\u9808\u8a2d\u5b9a\nshared_preload_libraries = 'pg_cron'\ncron.database_name = 'your_database_name'\n\n# \u30aa\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\ncron.log_run = on\ncron.log_statement = on\n"})}),"\n",(0,s.jsx)(n.h3,{id:"83-\u6a29\u9650\u8a2d\u5b9a",children:"8.3 \u6a29\u9650\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- RDS\u30de\u30b9\u30bf\u30fc\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\nGRANT USAGE ON SCHEMA cron TO your_app_user;\nGRANT USAGE ON SCHEMA partman TO your_app_user;\nGRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA partman TO your_app_user;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"9-\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"9. \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,s.jsx)(n.h3,{id:"91-\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0",children:"9.1 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u6bce\u6642\uff08",(0,s.jsx)(n.code,{children:"0 * * * *"}),"\uff09"]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u65e5\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3001\u9ad8\u983b\u5ea6\u30c7\u30fc\u30bf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u6bce\u65e5AM2\u6642\uff08",(0,s.jsx)(n.code,{children:"0 2 * * *"}),"\uff09"]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6708\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3001\u6a19\u6e96\u7684\u306a\u904b\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["\u90311\u56de\uff08",(0,s.jsx)(n.code,{children:"0 2 * * 0"}),"\uff09"]}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5e74\u5225\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3001\u4f4e\u983b\u5ea6\u30c7\u30fc\u30bf"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"92-premake\u8a2d\u5b9a\u306e\u76ee\u5b89",children:"9.2 premake\u8a2d\u5b9a\u306e\u76ee\u5b89"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u9593\u9694"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u63a8\u5968premake"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u65e5\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"7\u301c14\uff081\u301c2\u9031\u9593\u5148\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6708\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"2\u301c3\uff082\u301c3\u30f6\u6708\u5148\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u5e74\u5225"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"1\u301c2\uff081\u301c2\u5e74\u5148\uff09"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"93-\u76e3\u8996\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a",children:"9.3 \u76e3\u8996\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a"}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u306e\u72b6\u6cc1\u3067\u30a2\u30e9\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u5b58\u5728"}),"\n",(0,s.jsx)(n.li,{children:"pg_cron\u30b8\u30e7\u30d6\u306e\u5931\u6557"}),"\n",(0,s.jsx)(n.li,{children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u306e\u6025\u6fc0\u306a\u5897\u52a0/\u6e1b\u5c11"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"94-\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u9069\u5316",children:"9.4 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u306e\u6700\u9069\u5316"}),"\n",(0,s.jsx)(n.p,{children:"\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u3092\u6709\u52b9\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30a8\u30ea\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u5927\u5e45\u306b\u5411\u4e0a\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- PostgreSQL 14\u4ee5\u964d\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\nSHOW enable_partition_pruning;  -- 'on'\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n-- \u8907\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092JOIN\u3059\u308b\u5834\u5408\u306b\u6709\u52b9\u5316\u63a8\u5968\nSET enable_partitionwise_join = on;\n\n-- \u96c6\u7d04\u30af\u30a8\u30ea\uff08SUM, COUNT\u7b49\uff09\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5411\u4e0a\nSET enable_partitionwise_aggregate = on;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Aurora PostgreSQL \u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"enable_partition_pruning = 1          # \u30c7\u30d5\u30a9\u30eb\u30c8\u6709\u52b9\uff08v14+\uff09\nenable_partitionwise_join = 1         # \u8907\u6570\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3JOIN\u6642\u306b\u63a8\u5968\nenable_partitionwise_aggregate = 1    # \u96c6\u7d04\u30af\u30a8\u30ea\u6642\u306b\u63a8\u5968\n"})}),"\n",(0,s.jsx)(n.h3,{id:"95-\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u306e\u51aa\u7b49\u6027",children:"9.5 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u306e\u51aa\u7b49\u6027"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"run_maintenance_proc()"}),"\u306f",(0,s.jsx)(n.strong,{children:"\u51aa\u7b49"}),"\u3067\u3059\u3002\u8907\u6570\u56de\u5b9f\u884c\u3057\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5b9f\u884c\u6642\u9593: \u901a\u5e38\u6570\u79d2\u3067\u5b8c\u4e86"}),"\n",(0,s.jsx)(n.li,{children:"\u30ed\u30c3\u30af: \u77ed\u6642\u9593\u306e\u307f"}),"\n",(0,s.jsx)(n.li,{children:"\u5b89\u5168\u6027: \u65e2\u306b\u5b58\u5728\u3059\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u518d\u4f5c\u6210\u3055\u308c\u306a\u3044"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u5b89\u5fc3\u3057\u3066\u624b\u52d5\u5b9f\u884c\u53ef\u80fd\nCALL partman.run_maintenance_proc();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"96-\u5916\u90e8\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u306e\u9078\u629e\u80a2",children:"9.6 \u5916\u90e8\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u30fc\u306e\u9078\u629e\u80a2"}),"\n",(0,s.jsx)(n.p,{children:"pg_cron\u4ee5\u5916\u306e\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\u65b9\u5f0f\u306e\u6bd4\u8f03\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u65b9\u5f0f"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u7279\u5fb4"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u63a8\u5968\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"pg_cron"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"DB\u5185\u3067\u5b8c\u7d50\u3001\u30b7\u30f3\u30d7\u30eb"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u6a19\u6e96\u7684\u306a\u904b\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"EventBridge + Lambda"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"AWS\u9023\u643a\u3001\u8a73\u7d30\u306a\u76e3\u8996"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u8907\u96d1\u306a\u76e3\u8996\u8981\u4ef6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Kubernetes CronJob"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3001\u30a2\u30e9\u30fc\u30c8\u9023\u643a"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"EKS\u74b0\u5883"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes CronJob\u306e\u4f8b"}),"\uff08\u53c2\u8003\uff09:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: partman-maintenance\nspec:\n  schedule: "0 2 * * 0"  # \u90311\u56de\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          containers:\n          - name: psql\n            image: postgres:15\n            command:\n            - psql\n            - -h\n            - $(DB_HOST)\n            - -U\n            - $(DB_USER)\n            - -d\n            - $(DB_NAME)\n            - -c\n            - "CALL partman.run_maintenance_proc();"\n          restartPolicy: OnFailure\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"10-\u904b\u7528\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",children:"10. \u904b\u7528\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8"}),"\n",(0,s.jsx)(n.h3,{id:"101-\u65e5\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",children:"10.1 \u65e5\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- 1. pg_cron\u30b8\u30e7\u30d6\u5b9f\u884c\u5c65\u6b74\u78ba\u8a8d\nSELECT status, COUNT(*)\nFROM cron.job_run_details\nWHERE start_time > NOW() - INTERVAL '24 hours'\nGROUP BY status;\n\n-- 2. DEFAULT\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30c7\u30fc\u30bf\u304c\u306a\u3044\u304b\u78ba\u8a8d\nSELECT table_name, row_count\nFROM (\n    SELECT\n        c.relname as table_name,\n        (SELECT COUNT(*) FROM pg_class WHERE relname = c.relname) as row_count\n    FROM pg_class c\n    WHERE c.relname LIKE '%_default'\n) t\nWHERE row_count > 0;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"102-\u9031\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee",children:"10.2 \u9031\u6b21\u30c1\u30a7\u30c3\u30af\u9805\u76ee"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- 1. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u6570\u306e\u78ba\u8a8d\nSELECT\n    parent.relname as parent_table,\n    COUNT(*) as partition_count\nFROM pg_inherits i\nJOIN pg_class parent ON i.inhparent = parent.oid\nJOIN pg_class child ON i.inhrelid = child.oid\nWHERE parent.relname IN ('statistics_daily_users', 'statistics_monthly_users', 'statistics_yearly_users')\nGROUP BY parent.relname;\n\n-- 2. pg_partman\u8a2d\u5b9a\u306e\u78ba\u8a8d\nSELECT parent_table, premake, retention, infinite_time_partitions\nFROM partman.part_config;\n\n-- 3. \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30b5\u30a4\u30ba\u306e\u78ba\u8a8d\nSELECT\n    parent.relname as parent_table,\n    pg_size_pretty(SUM(pg_relation_size(child.oid))) as total_size\nFROM pg_inherits i\nJOIN pg_class parent ON i.inhparent = parent.oid\nJOIN pg_class child ON i.inhrelid = child.oid\nGROUP BY parent.relname;\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"11-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"11. \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/idp-server/docs/content_06_developer-guide/reference/database-partitioning-guide",children:"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u30ac\u30a4\u30c9"})," - \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u306e\u57fa\u672c\u6982\u5ff5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/idp-server/docs/content_03_concepts/operations/concept-22-tenant-statistics",children:"\u30c6\u30ca\u30f3\u30c8\u7d71\u8a08\u7ba1\u7406"})," - \u7d71\u8a08\u30c7\u30fc\u30bf\u306e\u8a2d\u8a08"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"12-\u53c2\u8003\u8cc7\u6599",children:"12. \u53c2\u8003\u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/pgpartman/pg_partman",children:"pg_partman GitHub"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/citusdata/pg_cron",children:"pg_cron GitHub"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/PostgreSQL_Partitions.html",children:"AWS RDS PostgreSQL Partitions"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var l=t(96540);const s={},r=l.createContext(s);function i(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);