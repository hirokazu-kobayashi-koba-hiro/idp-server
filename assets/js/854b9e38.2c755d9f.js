"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3252],{45508:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>x,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"content_03_concepts/authentication-authorization/concept-03-session-management","title":"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406","description":"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u7dad\u6301\u3057\u3001\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3\uff08SSO\uff09\u3084\u30ed\u30b0\u30a2\u30a6\u30c8\u9023\u643a\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002","source":"@site/docs/content_03_concepts/03-authentication-authorization/concept-03-session-management.md","sourceDirName":"content_03_concepts/03-authentication-authorization","slug":"/content_03_concepts/authentication-authorization/concept-03-session-management","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-03-session-management","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_03_concepts/03-authentication-authorization/concept-03-session-management.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u591a\u8981\u7d20\u8a8d\u8a3c\uff08MFA\uff09","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-02-mfa"},"next":{"title":"\u8a8d\u53ef","permalink":"/idp-server/docs/content_03_concepts/authentication-authorization/concept-04-authorization"}}');var i=s(74848),l=s(28453);const d={},r="\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",c={},h=[{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u306f",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u306f",level:2},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5f79\u5272",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5f79\u5272",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u30c8\u30fc\u30af\u30f3\u306e\u9055\u3044",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u30c8\u30fc\u30af\u30f3\u306e\u9055\u3044",level:3},{value:"idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",id:"idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",level:2},{value:"\u306a\u305cSpring Session\u3092\u4f7f\u308f\u306a\u3044\u304b",id:"\u306a\u305cspring-session\u3092\u4f7f\u308f\u306a\u3044\u304b",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u968e\u5c64\u69cb\u9020",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u968e\u5c64\u69cb\u9020",level:3},{value:"OPSession\uff08OP\u30bb\u30c3\u30b7\u30e7\u30f3\uff09",id:"opsessionop\u30bb\u30c3\u30b7\u30e7\u30f3",level:4},{value:"ClientSession\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bb\u30c3\u30b7\u30e7\u30f3\uff09",id:"clientsession\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bb\u30c3\u30b7\u30e7\u30f3",level:4},{value:"Cookie\u306e\u5f79\u5272",id:"cookie\u306e\u5f79\u5272",level:2},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u8b58\u5225Cookie",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u8b58\u5225cookie",level:3},{value:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u4fdd\u8b77Cookie",id:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u4fdd\u8b77cookie",level:3},{value:"\u30c6\u30ca\u30f3\u30c8\u5206\u96e2",id:"\u30c6\u30ca\u30f3\u30c8\u5206\u96e2",level:3},{value:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3\uff08SSO\uff09",id:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3sso",level:2},{value:"max_age\u30d1\u30e9\u30e1\u30fc\u30bf",id:"max_age\u30d1\u30e9\u30e1\u30fc\u30bf",level:3},{value:"prompt=login\u30d1\u30e9\u30e1\u30fc\u30bf",id:"promptlogin\u30d1\u30e9\u30e1\u30fc\u30bf",level:3},{value:"\u30ed\u30b0\u30a2\u30a6\u30c8",id:"\u30ed\u30b0\u30a2\u30a6\u30c8",level:2},{value:"RP-Initiated Logout",id:"rp-initiated-logout",level:3},{value:"Back-Channel Logout",id:"back-channel-logout",level:3},{value:"Front-Channel Logout",id:"front-channel-logout",level:3},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8",level:2},{value:"\u306a\u305cRedis\u304b",id:"\u306a\u305credis\u304b",level:3},{value:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u69cb\u9020",id:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u69cb\u9020",level:3},{value:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6a5f\u80fd",id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6a5f\u80fd",level:2},{value:"\u30bb\u30c3\u30b7\u30e7\u30f3\u56fa\u5b9a\u653b\u6483\u5bfe\u7b56",id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u56fa\u5b9a\u653b\u6483\u5bfe\u7b56",level:3},{value:"CSRF\u5bfe\u7b56",id:"csrf\u5bfe\u7b56",level:3},{value:"Cookie\u5c5e\u6027",id:"cookie\u5c5e\u6027",level:3},{value:"\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3068\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0",id:"\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3068\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0",level:3},{value:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u6574\u5408\u6027\u306e\u691c\u8a3c",id:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u6574\u5408\u6027\u306e\u691c\u8a3c",level:3},{value:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2},{value:"\u95a2\u9023\u4ed5\u69d8",id:"\u95a2\u9023\u4ed5\u69d8",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"})}),"\n",(0,i.jsx)(n.p,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u7dad\u6301\u3057\u3001\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3\uff08SSO\uff09\u3084\u30ed\u30b0\u30a2\u30a6\u30c8\u9023\u643a\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u306f",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u306f"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u30bb\u30c3\u30b7\u30e7\u30f3\uff08Session\uff09"})," \u3068\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u8a8d\u8a3c\u72b6\u614b\u3092\u4e00\u5b9a\u671f\u9593\u4fdd\u6301\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5f79\u5272",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5f79\u5272"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8a8d\u8a3c\u72b6\u614b\u306e\u4fdd\u6301"}),": \u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u6bce\u56de\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u305b\u305a\u306b\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u53ef\u80fd"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3\uff08SSO\uff09"}),": \u4e00\u5ea6\u306e\u30ed\u30b0\u30a4\u30f3\u3067\u8907\u6570\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30af\u30bb\u30b9"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u30ed\u30b0\u30a2\u30a6\u30c8\u9023\u643a"}),": \u4e00\u7b87\u6240\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u95a2\u9023\u3059\u308b\u3059\u3079\u3066\u306e\u30a2\u30d7\u30ea\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u30c8\u30fc\u30af\u30f3\u306e\u9055\u3044",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u3068\u30c8\u30fc\u30af\u30f3\u306e\u9055\u3044"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u9805\u76ee"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u30bb\u30c3\u30b7\u30e7\u30f3"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u7528\u9014"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30d6\u30e9\u30a6\u30b6\u3068IdP\u9593\u306e\u72b6\u614b\u7ba1\u7406"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u8a8d\u53ef"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u4fdd\u5b58\u5834\u6240"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Cookie\uff08\u30d6\u30e9\u30a6\u30b6\u5074\uff09+ Redis/DB\uff08\u30b5\u30fc\u30d0\u30fc\u5074\uff09"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u6709\u52b9\u671f\u9650"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\uff08\u901a\u5e3830\u5206\u301c\u6570\u6642\u9593\uff09"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\uff08\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3: \u5206\u301c\u6642\u9593\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u8b58\u5225\u5bfe\u8c61"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30e6\u30fc\u30b6\u30fc\u306e\u30d6\u30e9\u30a6\u30b6"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30ea\u30af\u30a8\u30b9\u30c8"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406",children:"idp-server\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"}),"\n",(0,i.jsx)(n.h3,{id:"\u306a\u305cspring-session\u3092\u4f7f\u308f\u306a\u3044\u304b",children:"\u306a\u305cSpring Session\u3092\u4f7f\u308f\u306a\u3044\u304b"}),"\n",(0,i.jsx)(n.p,{children:"idp-server\u306f\u3001OIDC Session Management\u306e\u8981\u4ef6\u3092\u6e80\u305f\u3059\u305f\u3081\u3001\u72ec\u81ea\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Spring Session"}),(0,i.jsx)(n.th,{children:"OIDC Session Management"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1\u30d6\u30e9\u30a6\u30b6 = 1\u30bb\u30c3\u30b7\u30e7\u30f3"}),(0,i.jsx)(n.td,{children:"1 OP\u30bb\u30c3\u30b7\u30e7\u30f3 : N \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bb\u30c3\u30b7\u30e7\u30f3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"HttpSession\u306e\u5206\u6563\u5316\u304c\u76ee\u7684"}),(0,i.jsx)(n.td,{children:"sid, sub \u3067\u306e\u8907\u5408\u691c\u7d22\u304c\u5fc5\u8981"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RP\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff09\u5074\u3067\u306e\u5229\u7528\u3092\u60f3\u5b9a"}),(0,i.jsx)(n.td,{children:"OP\uff08IdP\uff09\u5074\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u3053\u306e\u8981\u4ef6\u306e\u9055\u3044\u304b\u3089\u3001Keycloak\u306a\u3069\u3068\u540c\u69d8\u306b\u72ec\u81ea\u5b9f\u88c5\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u968e\u5c64\u69cb\u9020",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u968e\u5c64\u69cb\u9020"}),"\n",(0,i.jsx)(n.p,{children:"idp-server\u3067\u306f\u30012\u5c64\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u69cb\u9020\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Browser Session                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502                    OPSession                             \u2502   \u2502\n\u2502  \u2502  - \u30d6\u30e9\u30a6\u30b6\u3068OP\u9593\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\uff08SSO\u7528\uff09                    \u2502   \u2502\n\u2502  \u2502  - sub, authTime, acr, amr \u3092\u4fdd\u6301                        \u2502   \u2502\n\u2502  \u2502  - \u8907\u6570\u306eClientSession\u3092\u6301\u3064                             \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502           \u2502                    \u2502                    \u2502           \u2502\n\u2502           \u25bc                    \u25bc                    \u25bc           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 ClientSession   \u2502  \u2502 ClientSession   \u2502  \u2502 ClientSession   \u2502 \u2502\n\u2502  \u2502 \u30a2\u30d7\u30eaA         \u2502  \u2502 \u30a2\u30d7\u30eaB         \u2502  \u2502 \u30a2\u30d7\u30eaC         \u2502 \u2502\n\u2502  \u2502 sid: xxx        \u2502  \u2502 sid: yyy        \u2502  \u2502 sid: zzz        \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h4,{id:"opsessionop\u30bb\u30c3\u30b7\u30e7\u30f3",children:"OPSession\uff08OP\u30bb\u30c3\u30b7\u30e7\u30f3\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u30d6\u30e9\u30a6\u30b6\u3068IdP\uff08OP\uff09\u9593\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u304c\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3068\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u5c5e\u6027"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"id"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff08UUID\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"sub"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"authTime"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a8d\u8a3c\u6642\u523b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"acr"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a8d\u8a3c\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30af\u30e9\u30b9\uff08\u8a8d\u8a3c\u5f37\u5ea6\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"amr"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a8d\u8a3c\u65b9\u5f0f\uff08password, otp, fido\u7b49\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"expiresAt"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6709\u52b9\u671f\u9650"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"clientsession\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bb\u30c3\u30b7\u30e7\u30f3",children:"ClientSession\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bb\u30c3\u30b7\u30e7\u30f3\uff09"}),"\n",(0,i.jsx)(n.p,{children:"OPSession\u3068\u7279\u5b9a\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff08RP\uff09\u9593\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u3059\u3002\u8a8d\u53ef\u304c\u5b8c\u4e86\u3059\u308b\u3068\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u5c5e\u6027"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"sid"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff08ID Token\u306esid\u30af\u30ec\u30fc\u30e0\u306b\u542b\u307e\u308c\u308b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"opSessionId"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u89aa\u3068\u306a\u308bOPSession\u306eID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"clientId"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eClient ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"scopes"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a8d\u53ef\u3055\u308c\u305f\u30b9\u30b3\u30fc\u30d7"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"nonce"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u306enonce"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"cookie\u306e\u5f79\u5272",children:"Cookie\u306e\u5f79\u5272"}),"\n",(0,i.jsx)(n.p,{children:"idp-server\u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306b\u8907\u6570\u306eCookie\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u8b58\u5225cookie",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u8b58\u5225Cookie"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Cookie\u540d"}),(0,i.jsx)(n.th,{children:"\u5185\u5bb9"}),(0,i.jsx)(n.th,{children:"HttpOnly"}),(0,i.jsx)(n.th,{children:"\u76ee\u7684"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"IDP_IDENTITY"})}),(0,i.jsx)(n.td,{children:"OPSession\u306eID"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"SSO\u8b58\u5225\u7528\uff08\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u4f7f\u7528\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"IDP_SESSION"})}),(0,i.jsx)(n.td,{children:"SHA256(opSessionId)"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Session Management iframe\u7528"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"IDP_IDENTITY"}),": \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306eCookie\uff08HttpOnly\u3067\u30bb\u30ad\u30e5\u30a2\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"IDP_SESSION"}),": OIDC Session Management\u306eiframe\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306eCookie"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u4fdd\u8b77cookie",children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u4fdd\u8b77Cookie"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Cookie\u540d"}),(0,i.jsx)(n.th,{children:"\u5185\u5bb9"}),(0,i.jsx)(n.th,{children:"\u76ee\u7684"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AUTH_SESSION"})}),(0,i.jsx)(n.td,{children:"\u8a8d\u53ef\u30bb\u30c3\u30b7\u30e7\u30f3ID"}),(0,i.jsx)(n.td,{children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u4e57\u3063\u53d6\u308a\u653b\u6483\u306e\u9632\u6b62"})]})})]}),"\n",(0,i.jsx)(n.p,{children:"\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u307e\u3067\u306e\u4e00\u9023\u306e\u30d5\u30ed\u30fc\u3092\u3001\u540c\u4e00\u30d6\u30e9\u30a6\u30b6\u30bb\u30c3\u30b7\u30e7\u30f3\u5185\u3067\u306e\u307f\u6709\u52b9\u306b\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u30c6\u30ca\u30f3\u30c8\u5206\u96e2",children:"\u30c6\u30ca\u30f3\u30c8\u5206\u96e2"}),"\n",(0,i.jsx)(n.p,{children:"Cookie\u306e\u30d1\u30b9\u3067\u30c6\u30ca\u30f3\u30c8\u3092\u5206\u96e2\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Browser Cookie Storage:\n\u251c\u2500\u2500 /tenant-a/\n\u2502   \u251c\u2500\u2500 IDP_IDENTITY = "session-id-for-tenant-a"\n\u2502   \u2514\u2500\u2500 IDP_SESSION = "hash-a..."\n\u2502\n\u2514\u2500\u2500 /tenant-b/\n    \u251c\u2500\u2500 IDP_IDENTITY = "session-id-for-tenant-b"\n    \u2514\u2500\u2500 IDP_SESSION = "hash-b..."\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u3053\u308c\u306b\u3088\u308a\u3001\u540c\u4e00\u30d6\u30e9\u30a6\u30b6\u3067\u8907\u6570\u30c6\u30ca\u30f3\u30c8\u306b\u72ec\u7acb\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3sso",children:"\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3\uff08SSO\uff09"}),"\n",(0,i.jsx)(n.p,{children:"OPSession\u306b\u3088\u308a\u3001\u4e00\u5ea6\u306e\u30ed\u30b0\u30a4\u30f3\u3067\u8907\u6570\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30d7\u30eaA\u306b\u30a2\u30af\u30bb\u30b9\n   \u2514\u2500 \u30ed\u30b0\u30a4\u30f3\u3057\u3066OPSession\u4f5c\u6210 \u2192 ClientSession(A)\u4f5c\u6210\n\n2. \u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30d7\u30eaB\u306b\u30a2\u30af\u30bb\u30b9\n   \u2514\u2500 OPSession\u304c\u6709\u52b9\u306a\u306e\u3067\u518d\u8a8d\u8a3c\u4e0d\u8981 \u2192 ClientSession(B)\u4f5c\u6210\n\n3. \u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30d7\u30eaC\u306b\u30a2\u30af\u30bb\u30b9\n   \u2514\u2500 OPSession\u304c\u6709\u52b9\u306a\u306e\u3067\u518d\u8a8d\u8a3c\u4e0d\u8981 \u2192 ClientSession(C)\u4f5c\u6210\n"})}),"\n",(0,i.jsx)(n.h3,{id:"max_age\u30d1\u30e9\u30e1\u30fc\u30bf",children:"max_age\u30d1\u30e9\u30e1\u30fc\u30bf"}),"\n",(0,i.jsxs)(n.p,{children:["\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u3067",(0,i.jsx)(n.code,{children:"max_age"}),"\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u6700\u5f8c\u306e\u8a8d\u8a3c\u304b\u3089\u306e\u7d4c\u904e\u6642\u9593\u3092\u5236\u9650\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"max_age=300  \u2192 \u6700\u5f8c\u306e\u8a8d\u8a3c\u304b\u30895\u5206\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u305f\u3089\u518d\u8a8d\u8a3c\u3092\u8981\u6c42\n"})}),"\n",(0,i.jsx)(n.h3,{id:"promptlogin\u30d1\u30e9\u30e1\u30fc\u30bf",children:"prompt=login\u30d1\u30e9\u30e1\u30fc\u30bf"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"prompt=login"}),"\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u65e2\u5b58\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7121\u8996\u3057\u3066\u518d\u8a8d\u8a3c\u3092\u8981\u6c42\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u30ed\u30b0\u30a2\u30a6\u30c8",children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"idp-server\u306f\u3001OIDC\u4ed5\u69d8\u306b\u6e96\u62e0\u3057\u305f\u8907\u6570\u306e\u30ed\u30b0\u30a2\u30a6\u30c8\u65b9\u5f0f\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"rp-initiated-logout",children:"RP-Initiated Logout"}),"\n",(0,i.jsx)(n.p,{children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff08RP\uff09\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u958b\u59cb\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30d7\u30ea\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n2. \u30a2\u30d7\u30ea\u304cIdP\u306e/logout\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n3. IdP\u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\n4. IdP\u304c\u6307\u5b9a\u3055\u308c\u305fURL\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n"})}),"\n",(0,i.jsx)(n.h3,{id:"back-channel-logout",children:"Back-Channel Logout"}),"\n",(0,i.jsx)(n.p,{children:"IdP\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30b5\u30fc\u30d0\u30fc\u9593\u901a\u4fe1\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u901a\u77e5\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304cIdP\u307e\u305f\u306f\u4ed6\u306e\u30a2\u30d7\u30ea\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\n2. IdP\u304c\u5404\u30a2\u30d7\u30ea\u306ebackchannel_logout_uri\u306bLogout Token\u3092\u9001\u4fe1\n3. \u5404\u30a2\u30d7\u30ea\u304c\u30ed\u30fc\u30ab\u30eb\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7279\u5fb4"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u30e6\u30fc\u30b6\u30fc\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u7d4c\u7531\u3057\u306a\u3044\uff08\u30b5\u30fc\u30d0\u30fc\u9593\u901a\u4fe1\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u4fe1\u983c\u6027\u304c\u9ad8\u3044"}),"\n",(0,i.jsx)(n.li,{children:"\u30a2\u30d7\u30ea\u304c\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u3082\u5f8c\u3067\u51e6\u7406\u53ef\u80fd"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"front-channel-logout",children:"Front-Channel Logout"}),"\n",(0,i.jsx)(n.p,{children:"IdP\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u30d6\u30e9\u30a6\u30b6\u7d4c\u7531\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u901a\u77e5\u3059\u308b\u65b9\u5f0f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. \u30e6\u30fc\u30b6\u30fc\u304cIdP\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\n2. IdP\u304c\u30ed\u30b0\u30a2\u30a6\u30c8\u78ba\u8a8d\u30da\u30fc\u30b8\u3092\u8868\u793a\n3. \u30da\u30fc\u30b8\u5185\u306eiframe\u3067\u5404\u30a2\u30d7\u30ea\u306efrontchannel_logout_uri\u3092\u8aad\u307f\u8fbc\u307f\n4. \u5404\u30a2\u30d7\u30ea\u304c\u30ed\u30fc\u30ab\u30eb\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u7279\u5fb4"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u30e6\u30fc\u30b6\u30fc\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u7d4c\u7531"}),"\n",(0,i.jsx)(n.li,{children:"Cookie\u524a\u9664\u306a\u3069\u30d6\u30e9\u30a6\u30b6\u5074\u306e\u51e6\u7406\u304c\u53ef\u80fd"}),"\n",(0,i.jsx)(n.li,{children:"\u30d6\u30e9\u30a6\u30b6\u306e\u5236\u9650\uff083rd\u30d1\u30fc\u30c6\u30a3Cookie\u30d6\u30ed\u30c3\u30af\u7b49\uff09\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8"}),"\n",(0,i.jsx)(n.p,{children:"idp-server\u306f\u3001Redis\u3092\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u306a\u305credis\u304b",children:"\u306a\u305cRedis\u304b"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u8981\u4ef6"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Redis\u306e\u5229\u70b9"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u9ad8\u901f\u30a2\u30af\u30bb\u30b9"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30a4\u30f3\u30e1\u30e2\u30eaDB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"TTL\uff08\u6709\u52b9\u671f\u9650\uff09"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30dd\u30fc\u30c8"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u8907\u5408\u691c\u7d22"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30bb\u30ab\u30f3\u30c0\u30ea\u30a4\u30f3\u30c7\u30c3\u30af\u30b9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u5206\u6563\u74b0\u5883"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u5bfe\u5fdc"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u69cb\u9020",children:"\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u69cb\u9020"}),"\n",(0,i.jsx)(n.p,{children:"\u52b9\u7387\u7684\u306a\u691c\u7d22\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# OPSession\nop_session:{tenantId}:{opSessionId}           # \u30e1\u30a4\u30f3\u30c7\u30fc\u30bf\nidx:tenant:{tenantId}:sub:{sub}               # \u30e6\u30fc\u30b6\u30fc\u5225\u691c\u7d22\n\n# ClientSession\nclient_session:{tenantId}:{sid}               # \u30e1\u30a4\u30f3\u30c7\u30fc\u30bf\nidx:tenant:{tenantId}:op_session:{opSessionId} # OPSession\u5225\u691c\u7d22\nidx:tenant:{tenantId}:sub:{sub}               # \u30e6\u30fc\u30b6\u30fc\u5225\u691c\u7d22\nidx:tenant:{tenantId}:client:{clientId}:sub:{sub} # \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\xd7\u30e6\u30fc\u30b6\u30fc\u691c\u7d22\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6a5f\u80fd",children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6a5f\u80fd"}),"\n",(0,i.jsx)(n.h3,{id:"\u30bb\u30c3\u30b7\u30e7\u30f3\u56fa\u5b9a\u653b\u6483\u5bfe\u7b56",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u56fa\u5b9a\u653b\u6483\u5bfe\u7b56"}),"\n",(0,i.jsx)(n.p,{children:"\u8a8d\u8a3c\u6210\u529f\u6642\u306b\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092\u518d\u751f\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"csrf\u5bfe\u7b56",children:"CSRF\u5bfe\u7b56"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SameSite Cookie\u5c5e\u6027"}),": ",(0,i.jsx)(n.code,{children:"Lax"}),"\u307e\u305f\u306f",(0,i.jsx)(n.code,{children:"Strict"}),"\u3067\u30af\u30ed\u30b9\u30b5\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5236\u9650"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AUTH_SESSION Cookie"}),": \u8a8d\u53ef\u30d5\u30ed\u30fc\u306e\u4e57\u3063\u53d6\u308a\u3092\u9632\u6b62"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cookie\u5c5e\u6027",children:"Cookie\u5c5e\u6027"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u5c5e\u6027"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u8a2d\u5b9a"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u76ee\u7684"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"HttpOnly"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"IDP_IDENTITY: Yes"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"XSS\u306b\u3088\u308bCookie\u76d7\u96e3\u9632\u6b62"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"Secure"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Yes"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"HTTPS\u901a\u4fe1\u306e\u307f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"SameSite"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Lax"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"CSRF\u653b\u6483\u8efd\u6e1b"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3068\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0",children:"\u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3068\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0"}),"\n",(0,i.jsx)(n.p,{children:"\u8a8d\u53ef\u30d5\u30ed\u30fc\u5168\u4f53\u3092\u901a\u3058\u3066\u3001\u540c\u4e00\u30d6\u30e9\u30a6\u30b6\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u3042\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u958b\u59cb\n    \u2502\n    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 AuthenticationTransaction                            \u2502\n\u2502   authSessionId: "xyz789"  \u2190\u2500\u2500 \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u751f\u6210 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502\n    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 AUTH_SESSION Cookie: "xyz789"                        \u2502\n\u2502   \u30d6\u30e9\u30a6\u30b6\u306b\u8a2d\u5b9a\uff08HttpOnly, Secure, SameSite=Lax\uff09   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502\n    \u25bc\n\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306e\u5404\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u691c\u8a3c\n    POST /password-authentication \u2192 validateAuthSession()\n    POST /authorize              \u2192 validateAuthSession()\n    POST /authorize-with-session \u2192 validateAuthSession()\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u76ee\u7684"}),": \u8a8d\u53ef\u30d5\u30ed\u30fc\u30cf\u30a4\u30b8\u30e3\u30c3\u30af\u653b\u6483\u306e\u9632\u6b62"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5236\u5fa1"}),": \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306e",(0,i.jsx)(n.code,{children:"auth_session_binding_required"}),"\u3067\u6709\u52b9/\u7121\u52b9\u3092\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: \u6709\u52b9\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4f8b\u5916"}),": CIBA\u7b49\u306enon-browser\u30d5\u30ed\u30fc\u3067\u306f\u81ea\u52d5\u7684\u306b\u30b9\u30ad\u30c3\u30d7"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u6574\u5408\u6027\u306e\u691c\u8a3c",children:"\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u6574\u5408\u6027\u306e\u691c\u8a3c"}),"\n",(0,i.jsx)(n.p,{children:"SSO\u30bb\u30c3\u30b7\u30e7\u30f3\u518d\u5229\u7528\u6642\u306b\u3001\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306e\u8981\u4ef6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u304b\u3092\u691c\u8a3c\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u3010\u554f\u984c\u3068\u306a\u308b\u30b7\u30ca\u30ea\u30aa\u3011\n\n1. \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u307f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\n   \u2514\u2500 OPSession\u4f5c\u6210\uff08\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u306e\u307f\uff09\n\n2. MFA\u5fc5\u9808\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\n   \u2514\u2500 OPSession\u304c\u6709\u52b9\u306a\u306e\u3067SSO\u304c\u53ef\u80fd\u306b\u898b\u3048\u308b\n\n3. authorize-with-session \u3092\u5b9f\u884c\n   \u2514\u2500 [\u5bfe\u7b56\u306a\u3057] MFA\u3092\u30d0\u30a4\u30d1\u30b9\u3057\u3066\u8a8d\u53ef\u3055\u308c\u308b \u274c\n   \u2514\u2500 [\u5bfe\u7b56\u3042\u308a] \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3055\u305a\u62d2\u5426 \u2713\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u3053\u306e\u5bfe\u7b56\u306b\u3088\u308a\u3001\u7570\u306a\u308b\u8a8d\u8a3c\u5f37\u5ea6\u3092\u8981\u6c42\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u9593\u3067\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u518d\u5229\u7528\u3092\u9069\u5207\u306b\u5236\u5fa1\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4ed5\u7d44\u307f"}),": OPSession\u306b\u8a8d\u8a3c\u7d50\u679c\uff08interactionResults\uff09\u3092\u4fdd\u5b58\u3057\u3001authorize-with-session\u6642\u306b\u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306esuccessConditions\u3092\u518d\u8a55\u4fa1"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7d50\u679c"}),": \u8a8d\u8a3c\u30dd\u30ea\u30b7\u30fc\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u5834\u5408\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u884c\u3057\u8a8d\u53ef\u3092\u62d2\u5426"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/idp-server/docs/content_06_developer-guide/implementation-guides/oauth-oidc/session-management",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406 \u5b9f\u88c5\u30ac\u30a4\u30c9"})," - \u5b9f\u88c5\u8a73\u7d30"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/idp-server/docs/content_03_concepts/tokens-claims/concept-02-token-management",children:"\u30c8\u30fc\u30af\u30f3\u7ba1\u7406"})," - \u30c8\u30fc\u30af\u30f3\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f7f\u3044\u5206\u3051"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/idp-server/docs/content_03_concepts/foundation/concept-01-multi-tenant",children:"\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8"})," - \u30c6\u30ca\u30f3\u30c8\u5206\u96e2\u306e\u4ed5\u7d44\u307f"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u95a2\u9023\u4ed5\u69d8",children:"\u95a2\u9023\u4ed5\u69d8"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-session-1_0.html",children:"OpenID Connect Session Management 1.0"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-rpinitiated-1_0.html",children:"OpenID Connect RP-Initiated Logout 1.0"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-backchannel-1_0.html",children:"OpenID Connect Back-Channel Logout 1.0"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-frontchannel-1_0.html",children:"OpenID Connect Front-Channel Logout 1.0"})}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>r});var t=s(96540);const i={},l=t.createContext(i);function d(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);