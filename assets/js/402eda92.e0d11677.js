"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4084],{90601:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"content_10_ai_developer/ai-10-use-cases","title":"idp-server-use-cases - \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64\uff08EntryService\u5b9f\u88c5\uff09","description":"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981","source":"@site/docs/content_10_ai_developer/ai-10-use-cases.md","sourceDirName":"content_10_ai_developer","slug":"/content_10_ai_developer/ai-10-use-cases","permalink":"/idp-server/docs/content_10_ai_developer/ai-10-use-cases","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-10-use-cases.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"AI\u958b\u767a\u8005\u5411\u3051\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_10_ai_developer/ai-02-lessons-learned"},"next":{"title":"idp-server-core - OAuth 2.0/OIDC\u6e96\u62e0\u30b3\u30a2\u30a8\u30f3\u30b8\u30f3","permalink":"/idp-server/docs/content_10_ai_developer/ai-11-core"}}');var t=i(74848),s=i(28453);const a={},l="idp-server-use-cases - \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64\uff08EntryService\u5b9f\u88c5\uff09",o={},c=[{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9",level:3},{value:"\u4f9d\u5b58\u95a2\u4fc2",id:"\u4f9d\u5b58\u95a2\u4fc2",level:3},{value:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",id:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",level:2},{value:"\ud83d\udd37 Application\u5c64 (<code>application/</code>)",id:"-application\u5c64-application",level:3},{value:"\ud83c\udf9b\ufe0f Control Plane\u5c64 (<code>control_plane/</code>)",id:"\ufe0f-control-plane\u5c64-control_plane",level:3},{value:"EntryService \u30d1\u30bf\u30fc\u30f3",id:"entryservice-\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u547d\u540d\u898f\u5247",id:"\u547d\u540d\u898f\u5247",level:3},{value:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",level:3},{value:"EntryService\u306e10\u30d5\u30a7\u30fc\u30ba",id:"entryservice\u306e10\u30d5\u30a7\u30fc\u30ba",level:2},{value:"Phase 1: \u6a29\u9650\u53d6\u5f97",id:"phase-1-\u6a29\u9650\u53d6\u5f97",level:3},{value:"Phase 2: Tenant\u53d6\u5f97",id:"phase-2-tenant\u53d6\u5f97",level:3},{value:"Phase 3: Validator - \u5165\u529b\u691c\u8a3c",id:"phase-3-validator---\u5165\u529b\u691c\u8a3c",level:3},{value:"Phase 4: Context Creator - \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u69cb\u7bc9",id:"phase-4-context-creator---\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u69cb\u7bc9",level:3},{value:"Phase 5: Audit Log\u8a18\u9332",id:"phase-5-audit-log\u8a18\u9332",level:3},{value:"Phase 6: \u6a29\u9650\u30c1\u30a7\u30c3\u30af",id:"phase-6-\u6a29\u9650\u30c1\u30a7\u30c3\u30af",level:3},{value:"Phase 7: \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af",id:"phase-7-\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af",level:3},{value:"Phase 8: Dry Run\u5bfe\u5fdc",id:"phase-8-dry-run\u5bfe\u5fdc",level:3},{value:"Phase 9: \u6c38\u7d9a\u5316",id:"phase-9-\u6c38\u7d9a\u5316",level:3},{value:"Phase 10: \u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374",id:"phase-10-\u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374",level:3},{value:"Application\u5c64 EntryService \u30d1\u30bf\u30fc\u30f3",id:"application\u5c64-entryservice-\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u8a2d\u8a08\u601d\u60f3",id:"\u8a2d\u8a08\u601d\u60f3",level:3},{value:"Application\u5c64\u306e\u7279\u5fb4",id:"application\u5c64\u306e\u7279\u5fb4",level:3},{value:"\u2705 \u63a1\u7528\u3059\u308b\u6a5f\u80fd",id:"-\u63a1\u7528\u3059\u308b\u6a5f\u80fd",level:4},{value:"\u274c \u63a1\u7528\u3057\u306a\u3044\u6a5f\u80fd",id:"-\u63a1\u7528\u3057\u306a\u3044\u6a5f\u80fd",level:4},{value:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f31: OAuth\u8a8d\u53ef\u30d5\u30ed\u30fc",id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f31-oauth\u8a8d\u53ef\u30d5\u30ed\u30fc",level:3},{value:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f32: \u30e1\u30bf\u30c7\u30fc\u30bfAPI\uff08\u8aad\u307f\u53d6\u308a\u5c02\u7528\uff09",id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f32-\u30e1\u30bf\u30c7\u30fc\u30bfapi\u8aad\u307f\u53d6\u308a\u5c02\u7528",level:3},{value:"Application\u5c64\u306e3-4\u30d5\u30a7\u30fc\u30ba",id:"application\u5c64\u306e3-4\u30d5\u30a7\u30fc\u30ba",level:3},{value:"\u6a19\u6e96\u30d5\u30ed\u30fc\uff08\u8aad\u307f\u66f8\u304d\uff09",id:"\u6a19\u6e96\u30d5\u30ed\u30fc\u8aad\u307f\u66f8\u304d",level:4},{value:"\u7c21\u6613\u30d5\u30ed\u30fc\uff08\u8aad\u307f\u53d6\u308a\u5c02\u7528\uff09",id:"\u7c21\u6613\u30d5\u30ed\u30fc\u8aad\u307f\u53d6\u308a\u5c02\u7528",level:4},{value:"Application\u5c64 vs Control Plane\u5c64 \u6bd4\u8f03",id:"application\u5c64-vs-control-plane\u5c64-\u6bd4\u8f03",level:3},{value:"Application\u5c64\u3067\u907f\u3051\u308b\u3079\u304d\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",id:"application\u5c64\u3067\u907f\u3051\u308b\u3079\u304d\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",level:3},{value:"\u274c 1. Repository\u76f4\u63a5\u64cd\u4f5c",id:"-1-repository\u76f4\u63a5\u64cd\u4f5c",level:4},{value:"\u274c 2. \u7ba1\u7406API\u6a5f\u80fd\u306e\u6df7\u5165",id:"-2-\u7ba1\u7406api\u6a5f\u80fd\u306e\u6df7\u5165",level:4},{value:"Application\u5c64 EntryService\u4e00\u89a7",id:"application\u5c64-entryservice\u4e00\u89a7",level:3},{value:"enduser\uff08\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5411\u3051\uff09",id:"enduser\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5411\u3051",level:4},{value:"relying_party\uff08RP\u5411\u3051\uff09",id:"relying_partyrp\u5411\u3051",level:4},{value:"system\uff08\u30b7\u30b9\u30c6\u30e0\u5185\u90e8\uff09",id:"system\u30b7\u30b9\u30c6\u30e0\u5185\u90e8",level:4},{value:"identity_verification_service\uff08\u8eab\u5143\u78ba\u8a8d\u30b5\u30fc\u30d3\u30b9\uff09",id:"identity_verification_service\u8eab\u5143\u78ba\u8a8d\u30b5\u30fc\u30d3\u30b9",level:4},{value:"tenant_invitator\uff08\u30c6\u30ca\u30f3\u30c8\u62db\u5f85\uff09",id:"tenant_invitator\u30c6\u30ca\u30f3\u30c8\u62db\u5f85",level:4},{value:"Control Plane\u5c64 EntryService \u30d1\u30bf\u30fc\u30f3",id:"control-plane\u5c64-entryservice-\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb vs \u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb-vs-\u7d44\u7e54\u30ec\u30d9\u30ebapi",level:2},{value:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI",id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",level:3},{value:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI",id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",level:3},{value:"\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc",id:"\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc",level:3},{value:"Context Creator \u30d1\u30bf\u30fc\u30f3",id:"context-creator-\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u5f79\u5272",id:"\u5f79\u5272",level:3},{value:"\u5b9f\u88c5\u4f8b",id:"\u5b9f\u88c5\u4f8b",level:3},{value:"Audit Log \u8a18\u9332\u30d1\u30bf\u30fc\u30f3",id:"audit-log-\u8a18\u9332\u30d1\u30bf\u30fc\u30f3",level:2},{value:"AuditLogCreator",id:"auditlogcreator",level:3},{value:"\u64cd\u4f5c\u5225Audit Log",id:"\u64cd\u4f5c\u5225audit-log",level:3},{value:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406",id:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406",level:2},{value:"@Transaction \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",id:"transaction-\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",level:3},{value:"Dry Run \u30d1\u30bf\u30fc\u30f3",id:"dry-run-\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u76ee\u7684",id:"\u76ee\u7684",level:3},{value:"\u5b9f\u88c5",id:"\u5b9f\u88c5",level:3},{value:"\u30ec\u30b9\u30dd\u30f3\u30b9\u5f62\u5f0f",id:"\u30ec\u30b9\u30dd\u30f3\u30b9\u5f62\u5f0f",level:3},{value:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",id:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",level:2},{value:"\u274c 1. Context Creator\u8efd\u8996",id:"-1-context-creator\u8efd\u8996",level:3},{value:"\u274c 2. Audit Log\u624b\u629c\u304d",id:"-2-audit-log\u624b\u629c\u304d",level:3},{value:"\u274c 3. \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u5b9f\u88c5\u306e\u7406\u89e3\u4e0d\u8db3",id:"-3-\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u5b9f\u88c5\u306e\u7406\u89e3\u4e0d\u8db3",level:3},{value:"\u274c 4. \u300c\u305f\u3076\u3093\u300d\u300c\u9069\u5f53\u306b\u300d\u5b9f\u88c5",id:"-4-\u305f\u3076\u3093\u9069\u5f53\u306b\u5b9f\u88c5",level:3},{value:"IdpServerApplication - DI\u30b3\u30f3\u30c6\u30ca",id:"idpserverapplication---di\u30b3\u30f3\u30c6\u30ca",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9-1",level:3},{value:"\u4e3b\u8981\u306a\u5f79\u5272",id:"\u4e3b\u8981\u306a\u5f79\u5272",level:3},{value:"1. Application API\u516c\u958b",id:"1-application-api\u516c\u958b",level:4},{value:"2. EntryService\u7d44\u307f\u7acb\u3066 + Proxy\u30e9\u30c3\u30d7",id:"2-entryservice\u7d44\u307f\u7acb\u3066--proxy\u30e9\u30c3\u30d7",level:4},{value:"3. Repository\u30fbExecutor\u30fbPlugin\u7d44\u307f\u7acb\u3066",id:"3-repositoryexecutorplugin\u7d44\u307f\u7acb\u3066",level:4},{value:"DI\u968e\u5c64\u69cb\u9020",id:"di\u968e\u5c64\u69cb\u9020",level:3},{value:"\u4e3b\u8981\u306aDI\u5bfe\u8c61",id:"\u4e3b\u8981\u306adi\u5bfe\u8c61",level:3},{value:"\u4f7f\u7528\u4f8b\uff08Spring Boot\u304b\u3089\uff09",id:"\u4f7f\u7528\u4f8bspring-boot\u304b\u3089",level:3},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"idp-server-use-cases \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e8\u3064\u306e\u30dd\u30a4\u30f3\u30c8",id:"idp-server-use-cases-\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e8\u3064\u306e\u30dd\u30a4\u30f3\u30c8",level:3},{value:"Application\u5c64 vs Control Plane\u5c64 \u9078\u629e\u57fa\u6e96",id:"application\u5c64-vs-control-plane\u5c64-\u9078\u629e\u57fa\u6e96",level:3},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:3},{value:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",level:2},{value:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",level:3},{value:"\u4fee\u6b631: \u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u4fee\u6b63 (551-593\u884c\u76ee)",id:"\u4fee\u6b631-\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u4fee\u6b63-551-593\u884c\u76ee",level:4},{value:"\u691c\u8a3c\u6e08\u307f\u9805\u76ee",id:"\u691c\u8a3c\u6e08\u307f\u9805\u76ee",level:3},{value:"\u2705 EntryService 10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3",id:"-entryservice-10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3",level:4},{value:"\u2705 Application\u5c64\u30d1\u30bf\u30fc\u30f3",id:"-application\u5c64\u30d1\u30bf\u30fc\u30f3",level:4},{value:"\u2705 @Transaction \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",id:"-transaction-\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",level:4},{value:"\u2705 \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb vs \u7d44\u7e54\u30ec\u30d9\u30eb",id:"-\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb-vs-\u7d44\u7e54\u30ec\u30d9\u30eb",level:4},{value:"\u4fee\u6b63\u306e\u539f\u5247",id:"\u4fee\u6b63\u306e\u539f\u5247",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"idp-server-use-cases---\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64entryservice\u5b9f\u88c5",children:"idp-server-use-cases - \u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u5c64\uff08EntryService\u5b9f\u88c5\uff09"})}),"\n",(0,t.jsx)(n.h2,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/"}),"\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5c64\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3002Control Plane API\u306e\u5951\u7d04\u3092\u5b9f\u88c5\u3057\u3001Core\u5c64\u306eHandler\u3092\u547c\u3073\u51fa\u3059\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"EntryService\u5b9f\u88c5"}),": ",(0,t.jsx)(n.code,{children:"{'{Domain}{Action}EntryService'}"})," \u30d1\u30bf\u30fc\u30f3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c"}),": ",(0,t.jsx)(n.code,{children:"@Transaction"})," \u306b\u3088\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af"}),": \u6a29\u9650\u691c\u8a3c\u30fb\u30a2\u30af\u30bb\u30b9\u5236\u5fa1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audit Log\u8a18\u9332"}),": \u5168\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0\u51fa\u529b"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dry Run\u5bfe\u5fdc"}),": \u691c\u8a3c\u306e\u307f\u306e\u5b9f\u884c\u30e2\u30fc\u30c9"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4f9d\u5b58\u95a2\u4fc2",children:"\u4f9d\u5b58\u95a2\u4fc2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"idp-server-use-cases\n  \u2193 (\u4f9d\u5b58)\nidp-server-core (\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af)\nidp-server-platform (\u57fa\u76e4\u6a5f\u80fd)\nidp-server-control-plane (API\u5951\u7d04\u5b9a\u7fa9)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210",children:"\u30d1\u30c3\u30b1\u30fc\u30b8\u69cb\u6210"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:"find libs/idp-server-use-cases/src/main/java/org/idp/server/usecases -type d -maxdepth 2"})]}),"\n",(0,t.jsxs)(n.h3,{id:"-application\u5c64-application",children:["\ud83d\udd37 Application\u5c64 (",(0,t.jsx)(n.code,{children:"application/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u30fbRP\uff08Relying Party\uff09\u30fb\u30b7\u30b9\u30c6\u30e0\u5411\u3051\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u3002"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30b5\u30d6\u30d1\u30c3\u30b1\u30fc\u30b8"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"relying_party/"})}),(0,t.jsx)(n.td,{children:"OAuth/OIDC\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30d5\u30ed\u30fc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enduser/"})}),(0,t.jsx)(n.td,{children:"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5411\u3051API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"identity_verification_service/"})}),(0,t.jsx)(n.td,{children:"\u8eab\u5143\u78ba\u8a8d\u30b5\u30fc\u30d3\u30b9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"system/"})}),(0,t.jsx)(n.td,{children:"\u30b7\u30b9\u30c6\u30e0\u5185\u90e8API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tenant_invitator/"})}),(0,t.jsx)(n.td,{children:"\u30c6\u30ca\u30f3\u30c8\u62db\u5f85\u51e6\u7406"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7279\u5fb4"}),": Control Plane\u5c64\u3068\u7570\u306a\u308a\u3001",(0,t.jsx)(n.strong,{children:"\u30b7\u30f3\u30d7\u30eb\u306a\u59d4\u8b72\u30d1\u30bf\u30fc\u30f3"}),"\u3092\u63a1\u7528\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u274c \u6a29\u9650\u30c1\u30a7\u30c3\u30af\u306a\u3057\uff08\u516c\u958bAPI or \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u6e08\u307f\u524d\u63d0\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Audit Log\u306a\u3057\uff08\u5fc5\u8981\u306a\u5834\u5408\u306fCore\u5c64\u3067\u8a18\u9332\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Dry Run\u306a\u3057"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Context Creator\u306a\u3057"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Core\u5c64\u306eProtocol/Interactor\u3078\u306e\u59d4\u8b72"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Transaction\u7ba1\u7406\u306e\u307f"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8a73\u7d30"}),": ",(0,t.jsx)(n.a,{href:"#application%E5%B1%A4-entryservice-%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3",children:"Application\u5c64 EntryService\u30d1\u30bf\u30fc\u30f3"})]}),"\n",(0,t.jsxs)(n.h3,{id:"\ufe0f-control-plane\u5c64-control_plane",children:["\ud83c\udf9b\ufe0f Control Plane\u5c64 (",(0,t.jsx)(n.code,{children:"control_plane/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u7ba1\u7406API\u5b9f\u88c5\u3002\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u30fb\u7d44\u7e54\u7ba1\u7406\u8005\u5411\u3051\u3002"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30b5\u30d6\u30d1\u30c3\u30b1\u30fc\u30b8"}),(0,t.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"system_manager/"})}),(0,t.jsx)(n.td,{children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u7ba1\u7406API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"system_administrator/"})}),(0,t.jsx)(n.td,{children:"\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"organization_manager/"})}),(0,t.jsx)(n.td,{children:"\u7d44\u7e54\u30ec\u30d9\u30eb\u7ba1\u7406API"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"entryservice-\u30d1\u30bf\u30fc\u30f3",children:"EntryService \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"\u547d\u540d\u898f\u5247",children:"\u547d\u540d\u898f\u5247"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"{Domain}{Action}EntryService\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4f8b"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ClientManagementEntryService"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserManagementEntryService"})," - \u30e6\u30fc\u30b6\u30fc\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorizationServerManagementEntryService"})," - \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TenantManagementEntryService"})," - \u30c6\u30ca\u30f3\u30c8\u7ba1\u7406"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3",children:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/system_manager/ClientManagementEntryService.java#L47",children:"ClientManagementEntryService.java:47"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'/**\n * EntryService\u306e\u6a19\u6e96\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e47-114\u884c\u76ee\n */\n@Transaction // \u2705 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5883\u754c\npublic class ClientManagementEntryService implements ClientManagementApi {\n\n  // \u2705 Repository\u4f9d\u5b58\u6027\u6ce8\u5165\n  TenantQueryRepository tenantQueryRepository;\n  ClientConfigurationCommandRepository clientConfigurationCommandRepository;\n  ClientConfigurationQueryRepository clientConfigurationQueryRepository;\n  AuditLogPublisher auditLogPublisher;\n  LoggerWrapper log = LoggerWrapper.getLogger(ClientManagementEntryService.class);\n\n  // \u2705 \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\n  public ClientManagementEntryService(\n      TenantQueryRepository tenantQueryRepository,\n      ClientConfigurationCommandRepository clientConfigurationCommandRepository,\n      ClientConfigurationQueryRepository clientConfigurationQueryRepository,\n      AuditLogPublisher auditLogPublisher) {\n    this.tenantQueryRepository = tenantQueryRepository;\n    this.clientConfigurationCommandRepository = clientConfigurationCommandRepository;\n    this.clientConfigurationQueryRepository = clientConfigurationQueryRepository;\n    this.auditLogPublisher = auditLogPublisher;\n  }\n\n  @Override\n  public ClientManagementResponse create(\n      TenantIdentifier tenantIdentifier,\n      User operator,\n      OAuthToken oAuthToken,\n      ClientRegistrationRequest request,\n      RequestAttributes requestAttributes,\n      boolean dryRun) {\n\n    // \u2705 Phase 1: \u6a29\u9650\u53d6\u5f97\n    AdminPermissions permissions = getRequiredPermissions("create");\n\n    // \u2705 Phase 2: Tenant\u53d6\u5f97\n    Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n\n    // \u2705 Phase 3: Validator - \u5165\u529b\u691c\u8a3c\n    ClientRegistrationRequestValidator validator =\n        new ClientRegistrationRequestValidator(request, dryRun);\n    ClientRegistrationRequestValidationResult validate = validator.validate();\n\n    // \u2705 Phase 4: Context Creator - \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u69cb\u7bc9\n    ClientRegistrationContextCreator contextCreator =\n        new ClientRegistrationContextCreator(tenant, request, dryRun);\n    ClientRegistrationContext context = contextCreator.create();\n\n    // \u2705 Phase 5: Audit Log\u8a18\u9332\n    AuditLog auditLog =\n        AuditLogCreator.create(\n            "ClientManagementApi.create",\n            tenant,\n            operator,\n            oAuthToken,\n            context,\n            requestAttributes);\n    auditLogPublisher.publish(auditLog);\n\n    // \u2705 Phase 6: \u6a29\u9650\u30c1\u30a7\u30c3\u30af\n    if (!permissions.includesAll(operator.permissionsAsSet())) {\n      Map<String, Object> response = new HashMap<>();\n      response.put("error", "access_denied");\n      response.put(\n          "error_description",\n          String.format(\n              "permission denied required permission %s, but %s",\n              permissions.valuesAsString(), operator.permissionsAsString()));\n      log.warn(response.toString());\n      return new ClientManagementResponse(ClientManagementStatus.FORBIDDEN, response);\n    }\n\n    // \u2705 Phase 7: \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af\n    if (!validate.isValid()) {\n      return validate.errorResponse();\n    }\n\n    // \u2705 Phase 8: Dry Run\u5bfe\u5fdc\n    if (dryRun) {\n      return context.toResponse();\n    }\n\n    // \u2705 Phase 9: \u6c38\u7d9a\u5316\n    clientConfigurationCommandRepository.register(tenant, context.configuration());\n\n    // \u2705 Phase 10: \u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374\n    return context.toResponse();\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"entryservice\u306e10\u30d5\u30a7\u30fc\u30ba",children:"EntryService\u306e10\u30d5\u30a7\u30fc\u30ba"}),"\n",(0,t.jsx)(n.h3,{id:"phase-1-\u6a29\u9650\u53d6\u5f97",children:"Phase 1: \u6a29\u9650\u53d6\u5f97"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'AdminPermissions permissions = getRequiredPermissions("create");\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981"}),": Control Plane API\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e",(0,t.jsx)(n.code,{children:"default"}),"\u30e1\u30bd\u30c3\u30c9\u3067\u81ea\u52d5\u8a08\u7b97\u3055\u308c\u308b\u305f\u3081\u3001\u901a\u5e38\u306f\u5b9f\u88c5\u4e0d\u8981\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-2-tenant\u53d6\u5f97",children:"Phase 2: Tenant\u53d6\u5f97"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539f\u5247"}),": \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI\u306f\u5fc5\u305aTenant\u3092\u6700\u521d\u306b\u53d6\u5f97\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-3-validator---\u5165\u529b\u691c\u8a3c",children:"Phase 3: Validator - \u5165\u529b\u691c\u8a3c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"ClientRegistrationRequestValidator validator =\n    new ClientRegistrationRequestValidator(request, dryRun);\nClientRegistrationRequestValidationResult validate = validator.validate();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9"}),": \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5f62\u5f0f\u30fb\u5fc5\u9808\u30c1\u30a7\u30c3\u30af\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-4-context-creator---\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u69cb\u7bc9",children:"Phase 4: Context Creator - \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u69cb\u7bc9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"ClientRegistrationContextCreator contextCreator =\n    new ClientRegistrationContextCreator(tenant, request, dryRun);\nClientRegistrationContext context = contextCreator.create();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981"}),": Context Creator\u306f",(0,t.jsx)(n.strong,{children:"\u7d76\u5bfe\u5fc5\u9808"}),"\u3002TODO\u30b3\u30e1\u30f3\u30c8\u3067\u6e08\u307e\u305b\u306a\u3044\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-5-audit-log\u8a18\u9332",children:"Phase 5: Audit Log\u8a18\u9332"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'AuditLog auditLog =\n    AuditLogCreator.create(\n        "ClientManagementApi.create",\n        tenant,\n        operator,\n        oAuthToken,\n        context,\n        requestAttributes);\nauditLogPublisher.publish(auditLog);\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539f\u5247"}),": \u5168\u64cd\u4f5c\u306e\u76e3\u67fb\u30ed\u30b0\u3092\u8a18\u9332\uff08create/update/delete\u5225\uff09\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-6-\u6a29\u9650\u30c1\u30a7\u30c3\u30af",children:"Phase 6: \u6a29\u9650\u30c1\u30a7\u30c3\u30af"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"if (!permissions.includesAll(operator.permissionsAsSet())) {\n  return new ClientManagementResponse(ClientManagementStatus.FORBIDDEN, response);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9"}),": ",(0,t.jsx)(n.code,{children:"403 Forbidden"})]}),"\n",(0,t.jsx)(n.h3,{id:"phase-7-\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af",children:"Phase 7: \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"if (!validate.isValid()) {\n  return validate.errorResponse();\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9"}),": ",(0,t.jsx)(n.code,{children:"400 Bad Request"})]}),"\n",(0,t.jsx)(n.h3,{id:"phase-8-dry-run\u5bfe\u5fdc",children:"Phase 8: Dry Run\u5bfe\u5fdc"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"if (dryRun) {\n  return context.toResponse();\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u76ee\u7684"}),": \u5b9f\u884c\u305b\u305a\u306b\u691c\u8a3c\u7d50\u679c\u306e\u307f\u8fd4\u5374\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-9-\u6c38\u7d9a\u5316",children:"Phase 9: \u6c38\u7d9a\u5316"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"clientConfigurationCommandRepository.register(tenant, context.configuration());\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539f\u5247"}),": Tenant\u7b2c\u4e00\u5f15\u6570\u5fc5\u9808\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"phase-10-\u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374",children:"Phase 10: \u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"return context.toResponse();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"application\u5c64-entryservice-\u30d1\u30bf\u30fc\u30f3",children:"Application\u5c64 EntryService \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application/enduser/OAuthFlowEntryService.java",children:"OAuthFlowEntryService.java"}),", ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application/relying_party/OidcMetaDataEntryService.java",children:"OidcMetaDataEntryService.java"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u8a2d\u8a08\u601d\u60f3",children:"\u8a2d\u8a08\u601d\u60f3"}),"\n",(0,t.jsxs)(n.p,{children:["Application\u5c64\u306f",(0,t.jsx)(n.strong,{children:"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u30fbRP\uff08Relying Party\uff09\u5411\u3051API"}),"\u3067\u3042\u308a\u3001Control Plane\u5c64\u3068\u306f\u7570\u306a\u308b\u8a2d\u8a08\u539f\u5247\u3092\u63a1\u7528\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Control Plane\u5c64\u3068\u306e\u9055\u3044"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5bfe\u8c61"}),": \u7ba1\u7406\u8005 \u2192 \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc/RP"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8907\u96d1\u5ea6"}),": 10\u30d5\u30a7\u30fc\u30ba \u2192 3-4\u30d5\u30a7\u30fc\u30ba"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8cac\u52d9"}),": \u691c\u8a3c\u30fb\u8a8d\u53ef\u30fbContext\u69cb\u7bc9\u30fb\u6c38\u7d9a\u5316 \u2192 Protocol\u59d4\u8b72\u30fbTransaction\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f9d\u5b58"}),": Repository\u76f4\u63a5 \u2192 Protocol/Interactor\u7d4c\u7531"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64\u306e\u7279\u5fb4",children:"Application\u5c64\u306e\u7279\u5fb4"}),"\n",(0,t.jsx)(n.h4,{id:"-\u63a1\u7528\u3059\u308b\u6a5f\u80fd",children:"\u2705 \u63a1\u7528\u3059\u308b\u6a5f\u80fd"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transaction\u7ba1\u7406"}),": ",(0,t.jsx)(n.code,{children:"@Transaction"})," / ",(0,t.jsx)(n.code,{children:"@Transaction(readOnly = true)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tenant\u53d6\u5f97"}),": \u5168\u64cd\u4f5c\u306e\u6700\u521d\u306bTenant\u53d6\u5f97"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Protocol\u59d4\u8b72"}),": Core\u5c64\u306e",(0,t.jsx)(n.code,{children:"Protocol"}),"/",(0,t.jsx)(n.code,{children:"Interactor"}),"\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u59d4\u8b72"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"-\u63a1\u7528\u3057\u306a\u3044\u6a5f\u80fd",children:"\u274c \u63a1\u7528\u3057\u306a\u3044\u6a5f\u80fd"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6a29\u9650\u30c1\u30a7\u30c3\u30af"}),": Controller\u5c64\u3067\u5b8c\u4e86\u6e08\u307f or \u516c\u958bAPI"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audit Log"}),": Core\u5c64\u3067\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u8a18\u9332"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dry Run"}),": \u7ba1\u7406\u64cd\u4f5c\u3067\u306f\u306a\u3044\u305f\u3081\u4e0d\u8981"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Context Creator"}),": Protocol\u304c\u5185\u90e8\u3067\u51e6\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validator"}),": Protocol\u5185\u3067\u5b9f\u88c5"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f31-oauth\u8a8d\u53ef\u30d5\u30ed\u30fc",children:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f31: OAuth\u8a8d\u53ef\u30d5\u30ed\u30fc"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application/enduser/OAuthFlowEntryService.java#L117-L138",children:"OAuthFlowEntryService.java:117-138"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Transaction\npublic class OAuthFlowEntryService implements OAuthFlowApi {\n\n  OAuthProtocols oAuthProtocols;\n  TenantQueryRepository tenantQueryRepository;\n  AuthenticationTransactionCommandRepository authenticationTransactionCommandRepository;\n  // ...\n\n  @Override\n  public OAuthRequestResponse request(\n      TenantIdentifier tenantIdentifier,\n      Map<String, String[]> params,\n      RequestAttributes requestAttributes) {\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 1: Tenant\u53d6\u5f97\n    Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 2: Request\u69cb\u7bc9\n    OAuthRequest oAuthRequest = new OAuthRequest(tenant, params);\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 3: Core\u5c64Protocol\u53d6\u5f97\u30fb\u5b9f\u884c\n    OAuthProtocol oAuthProtocol = oAuthProtocols.get(tenant.authorizationProvider());\n    OAuthRequestResponse response = oAuthProtocol.request(oAuthRequest);\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 4: Transaction\u7ba1\u7406\uff08\u6210\u529f\u6642\u306e\u307f\uff09\n    if (response.isOK()) {\n      AuthenticationPolicyConfiguration policyConfig =\n          authenticationPolicyConfigurationQueryRepository.find(tenant, StandardAuthFlow.OAUTH.toAuthFlow());\n      AuthenticationTransaction transaction =\n          OAuthAuthenticationTransactionCreator.create(tenant, response, policyConfig);\n      authenticationTransactionCommandRepository.register(tenant, transaction);\n    }\n\n    return response;\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Protocol\u4e2d\u5fc3"}),": ",(0,t.jsx)(n.code,{children:"OAuthProtocol"}),"\u304cOAuth 2.0\u4ed5\u69d8\u6e96\u62e0\u306e\u51e6\u7406\u3092\u5b9f\u88c5"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transaction\u7ba1\u7406"}),": \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6c38\u7d9a\u5316\u306e\u307f\u62c5\u5f53"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"}),": Protocol\u304c\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u69cb\u7bc9"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f32-\u30e1\u30bf\u30c7\u30fc\u30bfapi\u8aad\u307f\u53d6\u308a\u5c02\u7528",children:"\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f32: \u30e1\u30bf\u30c7\u30fc\u30bfAPI\uff08\u8aad\u307f\u53d6\u308a\u5c02\u7528\uff09"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application/relying_party/OidcMetaDataEntryService.java#L29-L56",children:"OidcMetaDataEntryService.java:29-56"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Transaction(readOnly = true)\npublic class OidcMetaDataEntryService implements OidcMetaDataApi {\n\n  TenantQueryRepository tenantQueryRepository;\n  DiscoveryProtocols discoveryProtocols;\n\n  public OidcMetaDataEntryService(\n      TenantQueryRepository tenantQueryRepository,\n      DiscoveryProtocols discoveryProtocols) {\n    this.tenantQueryRepository = tenantQueryRepository;\n    this.discoveryProtocols = discoveryProtocols;\n  }\n\n  @Override\n  public ServerConfigurationRequestResponse getConfiguration(\n      TenantIdentifier tenantIdentifier) {\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 1: Tenant\u53d6\u5f97\n    Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 2: Core\u5c64Protocol\u53d6\u5f97\n    DiscoveryProtocol protocol = discoveryProtocols.get(tenant.authorizationProvider());\n\n    // \u2705 \u30d5\u30a7\u30fc\u30ba 3: \u59d4\u8b72\u5b9f\u884c\n    return protocol.getConfiguration(tenant);\n  }\n\n  @Override\n  public JwksRequestResponse getJwks(TenantIdentifier tenantIdentifier) {\n    Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n    DiscoveryProtocol protocol = discoveryProtocols.get(tenant.authorizationProvider());\n    return protocol.getJwks(tenant);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8aad\u307f\u53d6\u308a\u5c02\u7528"}),": ",(0,t.jsx)(n.code,{children:"@Transaction(readOnly = true)"}),"\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u516c\u958bAPI"}),": \u8a8d\u8a3c\u4e0d\u8981\u306eOIDC Discovery\u4ed5\u69d8\u6e96\u62e0"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5358\u7d14\u59d4\u8b72"}),": \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306a\u3057\u3001Protocol\u547c\u3073\u51fa\u3057\u306e\u307f"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64\u306e3-4\u30d5\u30a7\u30fc\u30ba",children:"Application\u5c64\u306e3-4\u30d5\u30a7\u30fc\u30ba"}),"\n",(0,t.jsx)(n.h4,{id:"\u6a19\u6e96\u30d5\u30ed\u30fc\u8aad\u307f\u66f8\u304d",children:"\u6a19\u6e96\u30d5\u30ed\u30fc\uff08\u8aad\u307f\u66f8\u304d\uff09"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tenant\u53d6\u5f97"}),": ",(0,t.jsx)(n.code,{children:"tenantQueryRepository.get(tenantIdentifier)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Request\u69cb\u7bc9"}),": \u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Protocol\u5b9f\u884c"}),": Core\u5c64\u3078\u306e\u59d4\u8b72"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transaction\u7ba1\u7406"}),": \u6210\u529f\u6642\u306e\u307f\u6c38\u7d9a\u5316"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"\u7c21\u6613\u30d5\u30ed\u30fc\u8aad\u307f\u53d6\u308a\u5c02\u7528",children:"\u7c21\u6613\u30d5\u30ed\u30fc\uff08\u8aad\u307f\u53d6\u308a\u5c02\u7528\uff09"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tenant\u53d6\u5f97"}),": ",(0,t.jsx)(n.code,{children:"tenantQueryRepository.get(tenantIdentifier)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Protocol\u53d6\u5f97"}),": ",(0,t.jsx)(n.code,{children:"protocols.get(tenant.authorizationProvider())"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u59d4\u8b72\u5b9f\u884c"}),": ",(0,t.jsx)(n.code,{children:"protocol.method(tenant)"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64-vs-control-plane\u5c64-\u6bd4\u8f03",children:"Application\u5c64 vs Control Plane\u5c64 \u6bd4\u8f03"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u9805\u76ee"}),(0,t.jsx)(n.th,{children:"Application\u5c64"}),(0,t.jsx)(n.th,{children:"Control Plane\u5c64"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u5bfe\u8c61\u30e6\u30fc\u30b6\u30fc"})}),(0,t.jsx)(n.td,{children:"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc/RP"}),(0,t.jsx)(n.td,{children:"\u7ba1\u7406\u8005\uff08\u30b7\u30b9\u30c6\u30e0/\u7d44\u7e54\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u30d5\u30a7\u30fc\u30ba\u6570"})}),(0,t.jsx)(n.td,{children:"3-4\u30d5\u30a7\u30fc\u30ba"}),(0,t.jsx)(n.td,{children:"10\u30d5\u30a7\u30fc\u30ba"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u6a29\u9650\u30c1\u30a7\u30c3\u30af"})}),(0,t.jsx)(n.td,{children:"\u274c \u306a\u3057"}),(0,t.jsx)(n.td,{children:"\u2705 AdminPermissions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Audit Log"})}),(0,t.jsx)(n.td,{children:"\u274c \u306a\u3057"}),(0,t.jsx)(n.td,{children:"\u2705 \u5168\u64cd\u4f5c\u8a18\u9332"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Dry Run"})}),(0,t.jsx)(n.td,{children:"\u274c \u306a\u3057"}),(0,t.jsx)(n.td,{children:"\u2705 \u5fc5\u9808"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Context Creator"})}),(0,t.jsx)(n.td,{children:"\u274c \u306a\u3057"}),(0,t.jsx)(n.td,{children:"\u2705 \u5fc5\u9808"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Validator"})}),(0,t.jsx)(n.td,{children:"\u25b3 Protocol\u5185"}),(0,t.jsx)(n.td,{children:"\u2705 \u5c02\u7528Validator"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u4f9d\u5b58\u5c64"})}),(0,t.jsx)(n.td,{children:"Protocol/Interactor"}),(0,t.jsx)(n.td,{children:"Repository"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@Transaction"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"@Transaction"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u8a2d\u8a08\u601d\u60f3"})}),(0,t.jsx)(n.td,{children:"OIDC\u4ed5\u69d8\u6e96\u62e0\u51e6\u7406"}),(0,t.jsx)(n.td,{children:"\u7ba1\u7406\u64cd\u4f5c\u306e\u5b8c\u5168\u5236\u5fa1"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64\u3067\u907f\u3051\u308b\u3079\u304d\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",children:"Application\u5c64\u3067\u907f\u3051\u308b\u3079\u304d\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h4,{id:"-1-repository\u76f4\u63a5\u64cd\u4f5c",children:"\u274c 1. Repository\u76f4\u63a5\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c \u60aa\u3044\u4f8b: Repository\u3092\u76f4\u63a5\u64cd\u4f5c\npublic OAuthRequestResponse request(...) {\n  Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n  ClientConfiguration client = clientConfigurationQueryRepository.get(tenant, clientId);\n  // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092EntryService\u306b\u5b9f\u88c5\n  if (client.isConfidential()) {\n    // ...\n  }\n}\n\n// \u2705 \u826f\u3044\u4f8b: Protocol\u306b\u59d4\u8b72\npublic OAuthRequestResponse request(...) {\n  Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n  OAuthRequest oAuthRequest = new OAuthRequest(tenant, params);\n  OAuthProtocol protocol = oAuthProtocols.get(tenant.authorizationProvider());\n  return protocol.request(oAuthRequest); // Protocol\u5185\u3067\u5b8c\u7d50\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"-2-\u7ba1\u7406api\u6a5f\u80fd\u306e\u6df7\u5165",children:"\u274c 2. \u7ba1\u7406API\u6a5f\u80fd\u306e\u6df7\u5165"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: \u6a29\u9650\u30c1\u30a7\u30c3\u30af\u30fbAudit Log\u3092\u8ffd\u52a0\npublic OAuthRequestResponse request(...) {\n  // Application\u5c64\u306b\u6a29\u9650\u30c1\u30a7\u30c3\u30af\u306f\u4e0d\u8981\n  if (!operator.hasPermission("OAUTH_REQUEST")) {\n    return error();\n  }\n\n  // Application\u5c64\u306bAudit Log\u306f\u4e0d\u8981\n  auditLogPublisher.publish(auditLog);\n\n  // ...\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u30b7\u30f3\u30d7\u30eb\u306a\u59d4\u8b72\u306e\u307f\npublic OAuthRequestResponse request(...) {\n  Tenant tenant = tenantQueryRepository.get(tenantIdentifier);\n  OAuthProtocol protocol = oAuthProtocols.get(tenant.authorizationProvider());\n  return protocol.request(new OAuthRequest(tenant, params));\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64-entryservice\u4e00\u89a7",children:"Application\u5c64 EntryService\u4e00\u89a7"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.code,{children:'find libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application -name "*EntryService.java"'})]}),"\n",(0,t.jsx)(n.h4,{id:"enduser\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5411\u3051",children:"enduser\uff08\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u5411\u3051\uff09"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OAuthFlowEntryService"})," - OAuth/OIDC\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30d5\u30ed\u30fc"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TokenEntryService"})," - \u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserinfoEntryService"})," - UserInfo API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CibaFlowEntryService"})," - CIBA\uff08Client Initiated Backchannel Authentication\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"IdentityVerificationApplicationEntryService"})," - \u8eab\u5143\u78ba\u8a8d\u7533\u8fbc\u307f"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserOperationEntryService"})," - \u30e6\u30fc\u30b6\u30fc\u64cd\u4f5cAPI"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthenticationTransactionEntryService"})," - \u8a8d\u8a3c\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthenticationMetaDataEntryService"})," - \u8a8d\u8a3c\u30e1\u30bf\u30c7\u30fc\u30bf"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"relying_partyrp\u5411\u3051",children:"relying_party\uff08RP\u5411\u3051\uff09"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OidcMetaDataEntryService"})," - OIDC Discovery\uff08.well-known\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SharedSignalsFrameworkMetaDataEntryService"})," - SSF Discovery"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"system\u30b7\u30b9\u30c6\u30e0\u5185\u90e8",children:"system\uff08\u30b7\u30b9\u30c6\u30e0\u5185\u90e8\uff09"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserAuthenticationEntryService"})," - \u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u51e6\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OrganizationUserAuthenticationEntryService"})," - \u7d44\u7e54\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SecurityEventEntryService"})," - \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u51e6\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UserLifecycleEventEntryService"})," - \u30e6\u30fc\u30b6\u30fc\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u30a4\u30d9\u30f3\u30c8"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuditLogEntryService"})," - \u76e3\u67fb\u30ed\u30b0\u51e6\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TenantMetaDataEntryService"})," - \u30c6\u30ca\u30f3\u30c8\u30e1\u30bf\u30c7\u30fc\u30bf"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"identity_verification_service\u8eab\u5143\u78ba\u8a8d\u30b5\u30fc\u30d3\u30b9",children:"identity_verification_service\uff08\u8eab\u5143\u78ba\u8a8d\u30b5\u30fc\u30d3\u30b9\uff09"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"IdentityVerificationEntryService"})," - \u8eab\u5143\u78ba\u8a8d\u5b9f\u884c"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"IdentityVerificationCallbackEntryService"})," - \u8eab\u5143\u78ba\u8a8d\u30b3\u30fc\u30eb\u30d0\u30c3\u30af"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"tenant_invitator\u30c6\u30ca\u30f3\u30c8\u62db\u5f85",children:"tenant_invitator\uff08\u30c6\u30ca\u30f3\u30c8\u62db\u5f85\uff09"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TenantInvitationMetaDataEntryService"})," - \u30c6\u30ca\u30f3\u30c8\u62db\u5f85\u30e1\u30bf\u30c7\u30fc\u30bf"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"control-plane\u5c64-entryservice-\u30d1\u30bf\u30fc\u30f3",children:"Control Plane\u5c64 EntryService \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6ce8\u610f"}),": \u4ee5\u4e0b\u306f**Control Plane\u5c64\uff08\u7ba1\u7406API\uff09**\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002Application\u5c64\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb-vs-\u7d44\u7e54\u30ec\u30d9\u30ebapi",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb vs \u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,t.jsx)(n.h3,{id:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebapi",children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebAPI"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30e1\u30bd\u30c3\u30c9\u30b7\u30b0\u30cd\u30c1\u30e3"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public Response method(\n    TenantIdentifier tenantIdentifier,\n    User operator,\n    OAuthToken oAuthToken,\n    Request request,\n    RequestAttributes requestAttributes,\n    boolean dryRun)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7279\u5fb4"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u30c6\u30ca\u30f3\u30c8\u5358\u4f4d\u306e\u64cd\u4f5c"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"tenantIdentifier"}),"\u304c\u7b2c\u4e00\u5f15\u6570"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u7d44\u7e54\u30ec\u30d9\u30ebapi",children:"\u7d44\u7e54\u30ec\u30d9\u30ebAPI"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u30e1\u30bd\u30c3\u30c9\u30b7\u30b0\u30cd\u30c1\u30e3"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public Response method(\n    OrganizationIdentifier organizationIdentifier,\n    TenantIdentifier tenantIdentifier,\n    User operator,\n    OAuthToken oAuthToken,\n    Request request,\n    RequestAttributes requestAttributes,\n    boolean dryRun)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u7279\u5fb4"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u7d44\u7e54\u5358\u4f4d\u306e\u64cd\u4f5c\uff08\u8907\u6570\u30c6\u30ca\u30f3\u30c8\u3092\u7ba1\u7406\uff09"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"organizationIdentifier"})," \u2192 ",(0,t.jsx)(n.code,{children:"tenantIdentifier"}),"\u306e\u9806"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u8ffd\u52a0\u691c\u8a3c"}),": \u7d44\u7e54\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u30fb\u7d44\u7e54-\u30c6\u30ca\u30f3\u30c8\u95a2\u4fc2\u30fb\u6a29\u9650\u691c\u8a3c"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u7d44\u7e54\u30ec\u30d9\u30ebAPI\u8a2d\u8a08\u300d"]}),"\n",(0,t.jsx)(n.h3,{id:"\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc",children:"\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/organization_manager/OrgUserManagementEntryService.java#L150-L187",children:"OrgUserManagementEntryService.java:150-187"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u2705 \u5b9f\u969b\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\n\n// Phase 1: \u6a29\u9650\u53d6\u5f97\nAdminPermissions permissions = getRequiredPermissions("create");\n\n// Phase 2: Organization \u3068 Tenant \u53d6\u5f97\nOrganization organization = organizationRepository.get(organizationIdentifier);\nTenant targetTenant = tenantQueryRepository.get(tenantIdentifier);\n\n// Phase 3: OrganizationAccessVerifier \u3067\u7d71\u5408\u691c\u8a3c\nOrganizationAccessVerifier organizationAccessVerifier = new OrganizationAccessVerifier();\nOrganizationAccessControlResult accessResult =\n    organizationAccessVerifier.verifyAccess(\n        organization,\n        tenantIdentifier,\n        operator,\n        permissions);\n\n// Phase 4: \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u7d50\u679c\u30c1\u30a7\u30c3\u30af\nif (!accessResult.isSuccess()) {\n  Map<String, Object> response = new HashMap<>();\n  response.put("error", "access_denied");\n  response.put("error_description", accessResult.getReason());\n  return new UserManagementResponse(UserManagementStatus.FORBIDDEN, response);\n}\n\n// Phase 5: \u4ee5\u964d\u306e\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u5b9f\u884c\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"OrganizationAccessVerifier \u306e\u691c\u8a3c\u5185\u5bb9"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u7d44\u7e54\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u691c\u8a3c\uff08operator\u304c\u7d44\u7e54\u30e1\u30f3\u30d0\u30fc\u304b\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u30c6\u30ca\u30f3\u30c8\u30a2\u30af\u30bb\u30b9\u691c\u8a3c\uff08tenant\u304c\u7d44\u7e54\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u304b\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u7d44\u7e54-\u30c6\u30ca\u30f3\u30c8\u95a2\u4fc2\u691c\u8a3c\uff08organization.assignedTenants()\u304b\u3089\u30c1\u30a7\u30c3\u30af\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u6a29\u9650\u691c\u8a3c\uff08\u5fc5\u8981\u306a\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\uff09"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CLAUDE.md\u300c\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc\u300d"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../libs/idp-server-control-plane/src/main/java/org/idp/server/control_plane/organization/access/OrganizationAccessVerifier.java",children:"OrganizationAccessVerifier.java"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"context-creator-\u30d1\u30bf\u30fc\u30f3",children:"Context Creator \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"\u5f79\u5272",children:"\u5f79\u5272"}),"\n",(0,t.jsx)(n.p,{children:"\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5909\u63db\u3057\u3001Core\u5c64\u3067\u4f7f\u7528\u53ef\u80fd\u306aContext\u3092\u69cb\u7bc9\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9f\u88c5\u4f8b",children:"\u5b9f\u88c5\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class ClientRegistrationContextCreator {\n  Tenant tenant;\n  ClientRegistrationRequest request;\n  boolean dryRun;\n\n  public ClientRegistrationContextCreator(\n      Tenant tenant,\n      ClientRegistrationRequest request,\n      boolean dryRun) {\n    this.tenant = tenant;\n    this.request = request;\n    this.dryRun = dryRun;\n  }\n\n  public ClientRegistrationContext create() {\n    // \u2705 \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u69cb\u7bc9\n    ClientIdentifier clientIdentifier = new ClientIdentifier(request.clientId());\n    ClientName clientName = new ClientName(request.clientName());\n    RedirectUris redirectUris = new RedirectUris(request.redirectUris());\n    // ...\n\n    // \u2705 ClientConfiguration\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u69cb\u7bc9\n    ClientConfiguration configuration = ClientConfiguration.builder()\n        .identifier(clientIdentifier)\n        .name(clientName)\n        .redirectUris(redirectUris)\n        // ...\n        .build();\n\n    // \u2705 Context\u3092\u8fd4\u5374\n    return new ClientRegistrationContext(\n        tenant,\n        configuration,\n        dryRun);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 \u30ea\u30af\u30a8\u30b9\u30c8DTO \u2192 \u5024\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5909\u63db"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u69cb\u7bc9"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Context\u30ab\u30d7\u30bb\u30eb\u5316"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"audit-log-\u8a18\u9332\u30d1\u30bf\u30fc\u30f3",children:"Audit Log \u8a18\u9332\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"auditlogcreator",children:"AuditLogCreator"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'AuditLog auditLog = AuditLogCreator.create(\n    "ClientManagementApi.create",  // \u30a2\u30af\u30b7\u30e7\u30f3\u540d\n    tenant,                         // \u30c6\u30ca\u30f3\u30c8\n    operator,                       // \u64cd\u4f5c\u8005\n    oAuthToken,                     // \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\n    context,                        // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u64cd\u4f5c\u5185\u5bb9\uff09\n    requestAttributes);             // \u30ea\u30af\u30a8\u30b9\u30c8\u5c5e\u6027\uff08IP\u7b49\uff09\n\nauditLogPublisher.publish(auditLog);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u64cd\u4f5c\u5225audit-log",children:"\u64cd\u4f5c\u5225Audit Log"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Create\u64cd\u4f5c\nAuditLogCreator.create("ClientManagementApi.create", ...)\n\n// Update\u64cd\u4f5c\nAuditLogCreator.create("ClientManagementApi.update", ...)\n\n// Delete\u64cd\u4f5c\nAuditLogCreator.create("ClientManagementApi.delete", ...)\n\n// Read\u64cd\u4f5c\uff08\u5fc5\u8981\u306b\u5fdc\u3058\u3066\uff09\nAuditLogCreator.createOnRead("ClientManagementApi.get", ...)\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6ce8\u610f"}),": ",(0,t.jsx)(n.code,{children:"createOnRead()"}),"\u3067\u7d71\u4e00\u3057\u3066\u30a8\u30e9\u30fc\u56de\u907f\u3059\u308b\u306e\u306f",(0,t.jsx)(n.strong,{children:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"}),"\u3002\u64cd\u4f5c\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\ud83d\udea8 \u7d44\u7e54\u30ec\u30d9\u30ebAPI\u5b9f\u88c5\u306e\u91cd\u8981\u6ce8\u610f\u4e8b\u9805\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406",children:"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406"}),"\n",(0,t.jsx)(n.h3,{id:"transaction-\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",children:"@Transaction \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u2705 \u30c7\u30d5\u30a9\u30eb\u30c8: \u8aad\u307f\u66f8\u304d\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\n@Transaction\npublic class ClientManagementEntryService implements ClientManagementApi {\n\n  @Override\n  public ClientManagementResponse create(...) {\n    // \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u3067\u5b9f\u884c\n  }\n\n  // \u2705 \u8aad\u307f\u53d6\u308a\u5c02\u7528: \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316\n  @Override\n  @Transaction(readOnly = true)\n  public ClientManagementResponse findList(...) {\n    // \u8aad\u307f\u53d6\u308a\u5c02\u7528\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u52b9\u679c"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u81ea\u52d5\u30b3\u30df\u30c3\u30c8/\u30ed\u30fc\u30eb\u30d0\u30c3\u30af"}),"\n",(0,t.jsxs)(n.li,{children:["PostgreSQL Row Level Security\u306e\u305f\u3081\u306e",(0,t.jsx)(n.code,{children:"app.tenant_id"}),"\u8a2d\u5b9a"]}),"\n",(0,t.jsx)(n.li,{children:"\u8aad\u307f\u53d6\u308a\u5c02\u7528\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3067\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dry-run-\u30d1\u30bf\u30fc\u30f3",children:"Dry Run \u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"\u76ee\u7684",children:"\u76ee\u7684"}),"\n",(0,t.jsx)(n.p,{children:"\u5b9f\u969b\u306e\u6c38\u7d9a\u5316\u3092\u884c\u308f\u305a\u306b\u3001\u691c\u8a3c\u7d50\u679c\u306e\u307f\u3092\u8fd4\u5374\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9f\u88c5",children:"\u5b9f\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public Response create(..., boolean dryRun) {\n  // Phase 1-7: \u691c\u8a3c\u30fbContext\u69cb\u7bc9\u30fb\u6a29\u9650\u30c1\u30a7\u30c3\u30af\n  // ...\n\n  // \u2705 Dry Run\u306e\u5834\u5408\u306f\u3053\u3053\u3067\u8fd4\u5374\n  if (dryRun) {\n    return context.toResponse();\n  }\n\n  // \u2705 Dry Run\u3067\u306a\u3044\u5834\u5408\u306e\u307f\u6c38\u7d9a\u5316\n  repository.register(tenant, context.configuration());\n\n  return context.toResponse();\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u30ec\u30b9\u30dd\u30f3\u30b9\u5f62\u5f0f",children:"\u30ec\u30b9\u30dd\u30f3\u30b9\u5f62\u5f0f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "dry_run": true,\n  "result": {\n    "id": "generated-uuid",\n    "client_id": "test-client",\n    "client_secret": "generated-secret",\n    ...\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981"}),": Dry Run\u3067\u3082",(0,t.jsx)(n.code,{children:"result"}),"\u30d5\u30a3\u30fc\u30eb\u30c9\u5185\u306b\u5b8c\u5168\u306a\u7d50\u679c\u3092\u542b\u3081\u308b\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\ud83d\udcdd \u30ec\u30b9\u30dd\u30f3\u30b9\u69cb\u9020\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3",children:"\u30a2\u30f3\u30c1\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsx)(n.h3,{id:"-1-context-creator\u8efd\u8996",children:"\u274c 1. Context Creator\u8efd\u8996"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: TODO\u30b3\u30e1\u30f3\u30c8\u3067\u6e08\u307e\u305b\u308b\npublic Response create(...) {\n  // TODO: Context Creator\u5b9f\u88c5\n  return new Response(Status.OK, "\u9069\u5f53\u306a\u30e1\u30c3\u30bb\u30fc\u30b8");\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u5fc5\u305aContext Creator\u4f7f\u7528\npublic Response create(...) {\n  ClientRegistrationContextCreator contextCreator =\n      new ClientRegistrationContextCreator(tenant, request, dryRun);\n  ClientRegistrationContext context = contextCreator.create();\n  // ...\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"-2-audit-log\u624b\u629c\u304d",children:"\u274c 2. Audit Log\u624b\u629c\u304d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u274c \u60aa\u3044\u4f8b: createOnRead()\u3067\u7d71\u4e00\u3057\u3066\u30a8\u30e9\u30fc\u56de\u907f\nAuditLog auditLog = AuditLogCreator.createOnRead("ClientManagementApi.create", ...);\n\n// \u2705 \u826f\u3044\u4f8b: \u64cd\u4f5c\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u30e1\u30bd\u30c3\u30c9\nAuditLog auditLog = AuditLogCreator.create("ClientManagementApi.create", ...); // Create\nAuditLog auditLog = AuditLogCreator.createOnUpdate("ClientManagementApi.update", ...); // Update\nAuditLog auditLog = AuditLogCreator.createOnDelete("ClientManagementApi.delete", ...); // Delete\n'})}),"\n",(0,t.jsx)(n.h3,{id:"-3-\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u5b9f\u88c5\u306e\u7406\u89e3\u4e0d\u8db3",children:"\u274c 3. \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u5b9f\u88c5\u306e\u7406\u89e3\u4e0d\u8db3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c \u60aa\u3044\u4f8b: \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u3092\u7406\u89e3\u305b\u305a\u306b\u7d44\u7e54\u30ec\u30d9\u30eb\u5b9f\u88c5\npublic Response orgMethod(...) {\n  // \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u305b\u305a\u306b\u5b9f\u88c5\n  // \u2192 Context Creator\u672a\u4f7f\u7528\u3001Audit Log\u4e0d\u9069\u5207\u3001\u6a29\u9650\u30c1\u30a7\u30c3\u30af\u6f0f\u308c\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u5b9f\u88c5\u3092\u5b8c\u5168\u7406\u89e3\u3057\u3066\u304b\u3089\u7d44\u7e54\u30ec\u30d9\u30eb\u5b9f\u88c5\npublic Response orgMethod(...) {\n  // 1. \u7d44\u7e54\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u691c\u8a3c\n  // 2. \u30c6\u30ca\u30f3\u30c8\u30a2\u30af\u30bb\u30b9\u691c\u8a3c\n  // 3. \u7d44\u7e54-\u30c6\u30ca\u30f3\u30c8\u95a2\u4fc2\u691c\u8a3c\n  // 4. \u6a29\u9650\u691c\u8a3c\n  // 5. \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u3068\u540c\u3058\u30d1\u30bf\u30fc\u30f3\u3067\u5b9f\u88c5\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u6559\u8a13"}),": \u300c\u7d44\u7e54\u30ec\u30d9\u30eb = \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb + \u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u300d\u3067\u3042\u308a\u3001\u7c21\u6613\u7248\u3067\u306f\u306a\u3044\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u274c \u81f4\u547d\u7684\u8aa4\u89e3\uff08\u7d76\u5bfe\u56de\u907f\uff09\u300d"]}),"\n",(0,t.jsx)(n.h3,{id:"-4-\u305f\u3076\u3093\u9069\u5f53\u306b\u5b9f\u88c5",children:"\u274c 4. \u300c\u305f\u3076\u3093\u300d\u300c\u9069\u5f53\u306b\u300d\u5b9f\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c \u60aa\u3044\u4f8b: \u63a8\u6e2c\u5b9f\u88c5\npublic Response create(...) {\n  // \u305f\u3076\u3093\u3053\u308c\u3067\u3044\u3051\u308b\u3060\u308d\u3046\uff08\u30a8\u30e9\u30fc\u4f9d\u5b58\u5224\u65ad\uff09\n  repository.register(configuration); // Tenant\u5f15\u6570\u5fd8\u308c\n}\n\n// \u2705 \u826f\u3044\u4f8b: \u65e2\u5b58\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u53c2\u8003\npublic Response create(...) {\n  // \u65e2\u5b58\u306eClientManagementEntryService\u3068\u540c\u3058\u30d1\u30bf\u30fc\u30f3\n  repository.register(tenant, configuration); // Tenant\u7b2c\u4e00\u5f15\u6570\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u539f\u5247"}),": \u300c\u4e0d\u78ba\u5b9f\u306a\u5b9f\u88c5\u3088\u308a\u78ba\u5b9f\u306a\u8a2d\u8a08\u78ba\u8a8d\u3092\u512a\u5148\u300d"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": CLAUDE.md\u300c\u274c \u5b9f\u88c5\u7d99\u7d9a\u5371\u967a\u30b7\u30b0\u30ca\u30eb\u300d"]}),"\n",(0,t.jsx)(n.h2,{id:"idpserverapplication---di\u30b3\u30f3\u30c6\u30ca",children:"IdpServerApplication - DI\u30b3\u30f3\u30c6\u30ca"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/IdpServerApplication.java",children:"IdpServerApplication.java"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u8cac\u52d9-1",children:"\u8cac\u52d9"}),"\n",(0,t.jsx)(n.p,{children:"idp-server\u5168\u4f53\u306e\u4f9d\u5b58\u6027\u6ce8\u5165\uff08DI\uff09\u3092\u7ba1\u7406\u3059\u308b\u4e2d\u592e\u30b3\u30f3\u30c6\u30ca\u3002\u5168\u3066\u306eAPI\u3001Protocol\u3001EntryService\u3001Repository\u3092\u7d44\u307f\u7acb\u3066\u308b\u3002"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u898f\u6a21"}),": 1,288\u884c\u300140\u4ee5\u4e0a\u306epublic API\u30e1\u30bd\u30c3\u30c9"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4e3b\u8981\u306a\u5f79\u5272",children:"\u4e3b\u8981\u306a\u5f79\u5272"}),"\n",(0,t.jsx)(n.h4,{id:"1-application-api\u516c\u958b",children:"1. Application API\u516c\u958b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class IdpServerApplication {\n\n  // \u2705 Application\u5c64API\uff08\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc\u30fbRP\u5411\u3051\uff09\n  public OAuthFlowApi oAuthFlowApi() { ... }\n  public TokenApi tokenAPi() { ... }\n  public UserinfoApi userinfoApi() { ... }\n  public CibaFlowApi cibaFlowApi() { ... }\n  public AuthenticationTransactionApi authenticationApi() { ... }\n  public IdentityVerificationApplicationApi identityVerificationApplicationApi() { ... }\n\n  // \u2705 \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30ebManagement API\n  public TenantManagementApi tenantManagementApi() { ... }\n  public ClientManagementApi clientManagementApi() { ... }\n  public UserManagementApi userManagementAPi() { ... }\n  public AuthorizationServerManagementApi authorizationServerManagementApi() { ... }\n  // ... \u7d0420\u500b\u306eManagement API\n\n  // \u2705 \u7d44\u7e54\u30ec\u30d9\u30ebManagement API\n  public OrgTenantManagementApi orgTenantManagementApi() { ... }\n  public OrgClientManagementApi orgClientManagementApi() { ... }\n  public OrgUserManagementApi orgUserManagementApi() { ... }\n  // ... \u7d0415\u500b\u306eOrg Management API\n\n  // \u2705 Admin API\uff08\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\uff09\n  public IdpServerStarterApi idpServerStarterApi() { ... }\n  public IdpServerOperationApi idpServerOperationApi() { ... }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"2-entryservice\u7d44\u307f\u7acb\u3066--proxy\u30e9\u30c3\u30d7",children:"2. EntryService\u7d44\u307f\u7acb\u3066 + Proxy\u30e9\u30c3\u30d7"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// EntryService\u5b9f\u88c5\u3092\u751f\u6210\nClientManagementEntryService entryService = new ClientManagementEntryService(\n    tenantQueryRepository,\n    clientConfigurationCommandRepository,\n    clientConfigurationQueryRepository,\n    auditLogPublisher\n);\n\n// \u2705 TenantAwareEntryServiceProxy\u3067\u30e9\u30c3\u30d7\uff08\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u81ea\u52d5\u7ba1\u7406\uff09\nClientManagementApi api = TenantAwareEntryServiceProxy.createProxy(\n    entryService,\n    ClientManagementApi.class,\n    applicationDatabaseTypeProvider\n);\n\nreturn api;  // @Transaction\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u99c6\u52d5\u3067\u81ea\u52d5\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7ba1\u7406\n"})}),"\n",(0,t.jsx)(n.h4,{id:"3-repositoryexecutorplugin\u7d44\u307f\u7acb\u3066",children:"3. Repository\u30fbExecutor\u30fbPlugin\u7d44\u307f\u7acb\u3066"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Repository\u7d44\u307f\u7acb\u3066\nTenantQueryRepository tenantQueryRepository = ...\nClientConfigurationCommandRepository clientConfigurationCommandRepository = ...\n\n// Plugin\u8aad\u307f\u8fbc\u307f\nAuthenticationInteractors authenticationInteractors =\n    AuthenticationInteractorPluginLoader.load(authenticationDependencyContainer);\n\nFederationInteractors federationInteractors =\n    FederationInteractorPluginLoader.load(federationDependencyContainer);\n\n// HttpRequestExecutor\u7d44\u307f\u7acb\u3066\nHttpClient httpClient = HttpClientFactory.create();\nOAuthAuthorizationResolvers oauthResolvers = ...\nHttpRequestExecutor httpRequestExecutor = new HttpRequestExecutor(httpClient, oauthResolvers);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"di\u968e\u5c64\u69cb\u9020",children:"DI\u968e\u5c64\u69cb\u9020"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"IdpServerApplication (DI\u30b3\u30f3\u30c6\u30ca)\n  \u2193 \u7d44\u307f\u7acb\u3066\nEntryService\u5b9f\u88c5\n  \u2193 Proxy\u30e9\u30c3\u30d7\nTenantAwareEntryServiceProxy\uff08@Transaction\u99c6\u52d5\uff09\n  \u2193 \u516c\u958b\nManagement API / Application API\n  \u2193 \u4f7f\u7528\nController / Spring Boot\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u4e3b\u8981\u306adi\u5bfe\u8c61",children:"\u4e3b\u8981\u306aDI\u5bfe\u8c61"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u30ab\u30c6\u30b4\u30ea"}),(0,t.jsx)(n.th,{children:"\u5185\u5bb9"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Application API"})}),(0,t.jsx)(n.td,{children:"OAuth/Token/UserInfo/CIBA\u7b49\uff08\u7d0410\u500b\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Management API"})}),(0,t.jsx)(n.td,{children:"System Level\uff08\u7d0420\u500b\uff09 + Organization Level\uff08\u7d0415\u500b\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Admin API"})}),(0,t.jsx)(n.td,{children:"Starter/Operation\uff082\u500b\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Repository"})}),(0,t.jsx)(n.td,{children:"Query/Command\uff08\u7d0450\u500b\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Protocol/Interactor"})}),(0,t.jsx)(n.td,{children:"Plugin\u8aad\u307f\u8fbc\u307f\u30fb\u7d44\u307f\u7acb\u3066"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Executor"})}),(0,t.jsx)(n.td,{children:"HttpRequestExecutor, AuthenticationExecutors\u7b49"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u4f7f\u7528\u4f8bspring-boot\u304b\u3089",children:"\u4f7f\u7528\u4f8b\uff08Spring Boot\u304b\u3089\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Configuration\npublic class IdpServerConfiguration {\n\n  @Bean\n  public IdpServerApplication idpServerApplication(\n      DataSource dataSource,\n      CacheStore cacheStore,\n      // ... \u305d\u306e\u4ed6\u306e\u4f9d\u5b58\u95a2\u4fc2\n  ) {\n    return new IdpServerApplication(dataSource, cacheStore, ...);\n  }\n\n  @Bean\n  public ClientManagementApi clientManagementApi(IdpServerApplication app) {\n    return app.clientManagementApi();  // \u2705 Proxy\u30e9\u30c3\u30d7\u6e08\u307f\u306eAPI\u53d6\u5f97\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981"}),": Spring Boot\u306eController\u306f\u3001",(0,t.jsx)(n.code,{children:"IdpServerApplication"}),"\u304b\u3089\u53d6\u5f97\u3057\u305fAPI\uff08Proxy\u30e9\u30c3\u30d7\u6e08\u307f\uff09\u3092\u4f7f\u7528\u3059\u308b\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,t.jsx)(n.h3,{id:"idp-server-use-cases-\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e8\u3064\u306e\u30dd\u30a4\u30f3\u30c8",children:"idp-server-use-cases \u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306e8\u3064\u306e\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"IdpServerApplication"}),": \u5168\u4f53\u306eDI\u30b3\u30f3\u30c6\u30ca\uff081,288\u884c\u300140\u4ee5\u4e0a\u306eAPI\uff09\u3001Proxy\u7d71\u5408\u306e\u4e2d\u5fc3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"2\u3064\u306eEntryService\u5c64"}),": Application\u5c64\uff083-4\u30d5\u30a7\u30fc\u30ba\u3001Protocol\u59d4\u8b72\uff09 vs Control Plane\u5c64\uff0810\u30d5\u30a7\u30fc\u30ba\u3001\u5b8c\u5168\u5236\u5fa1\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Application\u5c64\u30d1\u30bf\u30fc\u30f3"}),": Tenant\u53d6\u5f97 \u2192 Request\u69cb\u7bc9 \u2192 Protocol\u5b9f\u884c \u2192 Transaction\u7ba1\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control Plane\u5c6410\u30d5\u30a7\u30fc\u30ba"}),": \u6a29\u9650\u53d6\u5f97 \u2192 Tenant\u53d6\u5f97 \u2192 Validator \u2192 Context Creator \u2192 Audit Log \u2192 \u6a29\u9650\u30c1\u30a7\u30c3\u30af \u2192 \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3 \u2192 Dry Run \u2192 \u6c38\u7d9a\u5316 \u2192 \u30ec\u30b9\u30dd\u30f3\u30b9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Context Creator\u5fc5\u9808"}),"\uff08Control Plane\u306e\u307f\uff09: TODO\u30b3\u30e1\u30f3\u30c8\u3067\u6e08\u307e\u305b\u305a\u3001\u5fc5\u305a\u5b9f\u88c5"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audit Log\u9069\u5207\u5316"}),"\uff08Control Plane\u306e\u307f\uff09: \u64cd\u4f5c\u306b\u5fdc\u3058\u305f\u30e1\u30bd\u30c3\u30c9\u4f7f\u7528\uff08create/update/delete\u5225\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u7406\u89e3\u512a\u5148"}),": \u7d44\u7e54\u30ec\u30d9\u30eb\u5b9f\u88c5\u524d\u306b\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u3092\u5b8c\u5168\u7406\u89e3"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tenant\u7b2c\u4e00\u5f15\u6570"}),": Repository\u64cd\u4f5c\u306f\u5fc5\u305aTenant\u7b2c\u4e00\u5f15\u6570\uff08OrganizationRepository\u9664\u304f\uff09"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"application\u5c64-vs-control-plane\u5c64-\u9078\u629e\u57fa\u6e96",children:"Application\u5c64 vs Control Plane\u5c64 \u9078\u629e\u57fa\u6e96"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u8cea\u554f"}),(0,t.jsx)(n.th,{children:"Application\u5c64"}),(0,t.jsx)(n.th,{children:"Control Plane\u5c64"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u5bfe\u8c61\u30e6\u30fc\u30b6\u30fc\u306f\uff1f"}),(0,t.jsx)(n.td,{children:"\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u30fc/RP"}),(0,t.jsx)(n.td,{children:"\u7ba1\u7406\u8005"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306f\u3069\u3053\uff1f"}),(0,t.jsx)(n.td,{children:"Core\u5c64Protocol"}),(0,t.jsx)(n.td,{children:"EntryService\u5185"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u6a29\u9650\u30c1\u30a7\u30c3\u30af\u306f\u5fc5\u8981\uff1f"}),(0,t.jsx)(n.td,{children:"\u274c \u4e0d\u8981"}),(0,t.jsx)(n.td,{children:"\u2705 \u5fc5\u9808"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Audit Log\u306f\u5fc5\u8981\uff1f"}),(0,t.jsx)(n.td,{children:"\u274c \u4e0d\u8981"}),(0,t.jsx)(n.td,{children:"\u2705 \u5fc5\u9808"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Dry Run\u306f\u5fc5\u8981\uff1f"}),(0,t.jsx)(n.td,{children:"\u274c \u4e0d\u8981"}),(0,t.jsx)(n.td,{children:"\u2705 \u5fc5\u9808"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OIDC\u4ed5\u69d8\u6e96\u62e0\uff1f"}),(0,t.jsx)(n.td,{children:"\u2705 \u53b3\u5bc6\u6e96\u62e0"}),(0,t.jsx)(n.td,{children:"\u25b3 \u7ba1\u7406\u64cd\u4f5c"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-13-control-plane",children:"idp-server-control-plane\uff08\u7ba1\u7406API\u5951\u7d04\uff09"})," - API\u5951\u7d04\u5b9a\u7fa9"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-21-core-adapter",children:"idp-server-core-adapter\uff08\u30a2\u30c0\u30d7\u30bf\u30fc\u5c64\uff09"})," - Repository\u5b9f\u88c5"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-22-database",children:"idp-server-database\uff08\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5c64\uff09"})," - \u30b9\u30ad\u30fc\u30de\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74",children:"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4fee\u6b63\u5c65\u6b74"}),"\n",(0,t.jsx)(n.h3,{id:"2025-10-12-\u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63",children:"2025-10-12: \u5b9f\u88c5\u691c\u8a3c\u306b\u57fa\u3065\u304f\u4fee\u6b63"}),"\n",(0,t.jsx)(n.h4,{id:"\u4fee\u6b631-\u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u4fee\u6b63-551-593\u884c\u76ee",children:"\u4fee\u6b631: \u7d44\u7e54\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u30d5\u30ed\u30fc\u306e\u5b9f\u88c5\u306b\u5408\u308f\u305b\u305f\u4fee\u6b63 (551-593\u884c\u76ee)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u554f\u984c"}),": \u5b58\u5728\u3057\u306a\u3044Repository\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u305f\u60f3\u50cf\u30d5\u30ed\u30fc"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u524d"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u274c \u5b58\u5728\u3057\u306a\u3044\u30e1\u30bd\u30c3\u30c9\nOrganizationMember member = organizationMemberRepository.find(...);  // \u274c \u5b58\u5728\u3057\u306a\u3044\nAssignedTenant assignment = organizationRepository.findAssignment(...);  // \u274c \u5b58\u5728\u3057\u306a\u3044\n\n// \u274c \u500b\u5225\u306e\u691c\u8a3c\u30ed\u30b8\u30c3\u30af\uff08\u5b9f\u969b\u306f\u7d71\u5408\u3055\u308c\u3066\u3044\u308b\uff09\nif (member == null) { ... }\nif (assignment == null) { ... }\nif (!permissions.includesAll(...)) { ... }\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4fee\u6b63\u5f8c"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \u2705 \u5b9f\u969b\u306e\u5b9f\u88c5\nOrganization organization = organizationRepository.get(organizationIdentifier);\nTenant targetTenant = tenantQueryRepository.get(tenantIdentifier);\n\n// \u2705 OrganizationAccessVerifier \u3067\u7d71\u5408\u691c\u8a3c\nOrganizationAccessVerifier organizationAccessVerifier = new OrganizationAccessVerifier();\nOrganizationAccessControlResult accessResult =\n    organizationAccessVerifier.verifyAccess(\n        organization,\n        tenantIdentifier,\n        operator,\n        permissions);\n\nif (!accessResult.isSuccess()) {\n  return new UserManagementResponse(UserManagementStatus.FORBIDDEN, response);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u91cd\u8981\u306a\u5909\u66f4"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u500b\u5225\u691c\u8a3c \u2192 ",(0,t.jsx)(n.strong,{children:"OrganizationAccessVerifier"})," \u306b\u3088\u308b\u7d71\u5408\u691c\u8a3c"]}),"\n",(0,t.jsx)(n.li,{children:"\u5b58\u5728\u3057\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u524a\u9664\uff08findMember, findAssignment\uff09"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OrganizationAccessControlResult"})," \u306b\u3088\u308b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u7d50\u679c\u7ba1\u7406"]}),"\n",(0,t.jsx)(n.li,{children:"4\u30b9\u30c6\u30c3\u30d7\u306e\u691c\u8a3c\u5185\u5bb9\u3092\u8aac\u660e\u3068\u3057\u3066\u660e\u8a18"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u691c\u8a3c"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/organization_manager/OrgUserManagementEntryService.java#L150-L187",children:"OrgUserManagementEntryService.java:150-187"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../libs/idp-server-control-plane/src/main/java/org/idp/server/control_plane/organization/access/OrganizationAccessVerifier.java",children:"OrganizationAccessVerifier.java"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u691c\u8a3c\u6e08\u307f\u9805\u76ee",children:"\u691c\u8a3c\u6e08\u307f\u9805\u76ee"}),"\n",(0,t.jsx)(n.h4,{id:"-entryservice-10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3",children:"\u2705 EntryService 10\u30d5\u30a7\u30fc\u30ba\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/control_plane/system_manager/ClientManagementEntryService.java#L47-L114",children:"ClientManagementEntryService.java:47-114"})}),"\n",(0,t.jsx)(n.li,{children:"\u516810\u30d5\u30a7\u30fc\u30ba\u304c\u5b9f\u88c5\u3068\u5b8c\u5168\u4e00\u81f4"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"-application\u5c64\u30d1\u30bf\u30fc\u30f3",children:"\u2705 Application\u5c64\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../../libs/idp-server-use-cases/src/main/java/org/idp/server/usecases/application/enduser/OAuthFlowEntryService.java#L117-L138",children:"OAuthFlowEntryService.java:117-138"})}),"\n",(0,t.jsx)(n.li,{children:"\u30b7\u30f3\u30d7\u30eb\u306a\u59d4\u8b72\u30d1\u30bf\u30fc\u30f3\u304c\u6b63\u78ba"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"-transaction-\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3",children:"\u2705 @Transaction \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u30af\u30e9\u30b9\u30ec\u30d9\u30eb: ",(0,t.jsx)(n.code,{children:"@Transaction"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u30e1\u30bd\u30c3\u30c9\u30ec\u30d9\u30eb: ",(0,t.jsx)(n.code,{children:"@Transaction(readOnly = true)"})]}),"\n",(0,t.jsx)(n.li,{children:"\u5b9f\u88c5\u3068\u5b8c\u5168\u4e00\u81f4"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"-\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb-vs-\u7d44\u7e54\u30ec\u30d9\u30eb",children:"\u2705 \u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb vs \u7d44\u7e54\u30ec\u30d9\u30eb"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u30e1\u30bd\u30c3\u30c9\u30b7\u30b0\u30cd\u30c1\u30e3\u306e\u9055\u3044\u304c\u6b63\u78ba"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OrganizationIdentifier"})," \u2192 ",(0,t.jsx)(n.code,{children:"TenantIdentifier"})," \u306e\u9806\u5e8f\u304c\u6b63\u78ba"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4fee\u6b63\u306e\u539f\u5247",children:"\u4fee\u6b63\u306e\u539f\u5247"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CLAUDE.md\u300c\u60f3\u50cf\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u6210\u9632\u6b62\u300d\u306b\u57fa\u3065\u304f\u4fee\u6b63"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b9f\u88c5\u30d5\u30a1\u30fc\u30b9\u30c8"}),": \u5b9f\u969b\u306e\u7d44\u7e54\u30ec\u30d9\u30ebEntryService\u3092\u78ba\u8a8d"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u7d71\u5408\u691c\u8a3c\u30d1\u30bf\u30fc\u30f3"}),": OrganizationAccessVerifier\u306e\u4f7f\u7528\u3092\u6b63\u78ba\u306b\u8a18\u8f09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5b58\u5728\u3057\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u524a\u9664"}),": findMember(), findAssignment()\u306e\u524a\u9664"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90\u8a18\u9332"}),": \u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u30fb\u884c\u756a\u53f7\u3092\u660e\u8a18"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"libs/idp-server-use-cases/src/main/java/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,t.jsx)(n.li,{children:"CLAUDE.md\u300c4\u5c64\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u8a73\u7d30\u300d\u300c\u7d44\u7e54\u30ec\u30d9\u30ebAPI\u8a2d\u8a08\u300d\u300c\ud83d\udea8 \u7d44\u7e54\u30ec\u30d9\u30ebAPI\u5b9f\u88c5\u306e\u91cd\u8981\u6ce8\u610f\u4e8b\u9805\u300d"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(35860).A+"",children:"ClientManagementEntryService.java"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(20114).A+"",children:"OrgUserManagementEntryService.java"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(67741).A+"",children:"OrganizationAccessVerifier.java"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12\n",(0,t.jsx)(n.strong,{children:"\u78ba\u8a8d\u65b9\u6cd5"}),": ",(0,t.jsx)(n.code,{children:'find libs/idp-server-use-cases -type f -name "*EntryService.java" | head -15'}),"\n",(0,t.jsx)(n.strong,{children:"\u30ec\u30d3\u30e5\u30fc\u5b9f\u65bd"}),": 2025-10-12 - AI\u958b\u767a\u8005\u5411\u3051\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u54c1\u8cea\u6539\u5584\u30d7\u30ed\u30b8\u30a7\u30af\u30c8"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},67741:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/files/OrganizationAccessVerifier-e8391c6d3faebe817677d89bb0c1d718.java"},20114:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/files/OrgUserManagementEntryService-d8887d01d7a94d8877a3e3a03cfb7201.java"},35860:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/files/ClientManagementEntryService-ebaed311a2fd256dc6a40b4a3f4706df.java"},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(96540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);