"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[77350],{37511:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"content_10_ai_developer/ai-53-email-aws","title":"idp-server-email-aws-adapter","description":"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981","source":"@site/docs/content_10_ai_developer/ai-53-email-aws.md","sourceDirName":"content_10_ai_developer","slug":"/content_10_ai_developer/ai-53-email-aws","permalink":"/idp-server/docs/content_10_ai_developer/ai-53-email-aws","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_10_ai_developer/ai-53-email-aws.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"idp-server-notification-apns-adapter","permalink":"/idp-server/docs/content_10_ai_developer/ai-52-notification-apns"},"next":{"title":"idp-server-security-event-framework","permalink":"/idp-server/docs/content_10_ai_developer/ai-54-security-event-framework"}}');var r=i(74848),a=i(28453);const t={},d="idp-server-email-aws-adapter",l={},o=[{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",level:2},{value:"\u8cac\u52d9",id:"\u8cac\u52d9",level:3},{value:"\u4e3b\u8981\u6a5f\u80fd",id:"\u4e3b\u8981\u6a5f\u80fd",level:3},{value:"EmailSender \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30fb\u5b9f\u88c5",id:"emailsender-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5",level:2},{value:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8",id:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8",level:2},{value:"Plugin\u767b\u9332",id:"plugin\u767b\u9332",level:2},{value:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"idp-server-email-aws-adapter",children:"idp-server-email-aws-adapter"})}),"\n",(0,r.jsx)(n.h2,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u6982\u8981"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,r.jsx)(n.code,{children:"libs/idp-server-email-aws-adapter/"}),"\n",(0,r.jsx)(n.strong,{children:"\u78ba\u8a8d\u65e5"}),": 2025-10-12"]}),"\n",(0,r.jsx)(n.h3,{id:"\u8cac\u52d9",children:"\u8cac\u52d9"}),"\n",(0,r.jsx)(n.p,{children:"AWS SES (Simple Email Service) \u306b\u3088\u308b\u30e1\u30fc\u30eb\u9001\u4fe1\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u4e3b\u8981\u6a5f\u80fd",children:"\u4e3b\u8981\u6a5f\u80fd"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HTML/Text"})," \u30e1\u30fc\u30eb"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb"}),": \u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u9001\u4fe1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"}),": SES\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f7f\u7528"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30d0\u30a6\u30f3\u30b9/\u82e6\u60c5"})," \u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"emailsender-\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5",children:"EmailSender \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30fb\u5b9f\u88c5"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),": ",(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(53562).A+"#L29-L82",children:"AwsEmailSender.java:29-82"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'/**\n * \u30e1\u30fc\u30eb\u9001\u4fe1\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\uff08Plugin\uff09\n */\npublic interface EmailSender {\n  String function();\n  EmailSendResult send(EmailSendingRequest request, EmailSenderConfiguration configuration);\n}\n\n/**\n * AWS SES\u5b9f\u88c5\n * \u78ba\u8a8d\u65b9\u6cd5: \u5b9f\u30d5\u30a1\u30a4\u30eb\u306e29-82\u884c\u76ee\n */\npublic class AwsEmailSender implements EmailSender {\n\n  JsonConverter jsonConverter = JsonConverter.snakeCaseInstance();\n\n  @Override\n  public String function() {\n    return "aws_ses";\n  }\n\n  @Override\n  public EmailSendResult send(\n      EmailSendingRequest request,\n      EmailSenderConfiguration configuration) {\n\n    // 1. SES\u8a2d\u5b9a\u53d6\u5f97\n    AwsSesEmailSenderConfig sesConfig =\n        jsonConverter.read(configuration.details(), AwsSesEmailSenderConfig.class);\n\n    // 2. SES\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u4f5c\u6210\uff08AWS SDK v2\uff09\n    Region region = Region.of(sesConfig.regionName());\n    SesClient sesClient =\n        SesClient.builder()\n            .credentialsProvider(\n                StaticCredentialsProvider.create(\n                    AwsBasicCredentials.create(\n                        sesConfig.accessKeyId(), sesConfig.secretAccessKey())))\n            .region(region)\n            .build();\n\n    // 3. \u30e1\u30fc\u30eb\u9001\u4fe1\u30ea\u30af\u30a8\u30b9\u30c8\u69cb\u7bc9\n    Destination destination = Destination.builder().toAddresses(request.to()).build();\n    Content subject = Content.builder().data(request.subject()).charset("UTF-8").build();\n    Content textBody = Content.builder().data(request.body()).charset("UTF-8").build();\n    Body body = Body.builder().text(textBody).build();\n    Message message = Message.builder().subject(subject).body(body).build();\n\n    SendEmailRequest emailRequest =\n        SendEmailRequest.builder()\n            .source(sesConfig.sender())\n            .destination(destination)\n            .message(message)\n            .build();\n\n    // 4. \u9001\u4fe1\n    SendEmailResponse response = sesClient.sendEmail(emailRequest);\n    return new EmailSendResult(true, Map.of("message_id", response.messageId()));\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8",children:"\u91cd\u8981\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 AWS SDK v2\u4f7f\u7528\uff08",(0,r.jsx)(n.code,{children:"software.amazon.awssdk"}),"\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"EmailSenderConfiguration"}),"\u306b\u3088\u308b\u8a2d\u5b9a\u99c6\u52d5"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"EmailSendResult"}),"\u306b\u3088\u308b\u7d50\u679c\u7ba1\u7406"]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u30ea\u30fc\u30b8\u30e7\u30f3\u30fb\u8a8d\u8a3c\u60c5\u5831\u306e\u8a2d\u5b9a\u53ef\u80fd"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"plugin\u767b\u9332",children:"Plugin\u767b\u9332"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# META-INF/services/org.idp.server.platform.notification.email.EmailSender\norg.idp.server.emai.aws.adapter.AwsEmailSender\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-50-notification-security-event",children:"\u901a\u77e5\u30fb\u30a4\u30d9\u30f3\u30c8\u5c64\u7d71\u5408\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"})," - \u30e1\u30fc\u30eb\u9001\u4fe1\u3092\u542b\u3080\u5168\u901a\u77e5\u30e2\u30b8\u30e5\u30fc\u30eb"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-51-notification-fcm",children:"idp-server-notification-fcm-adapter"})," - Firebase Cloud Messaging"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/idp-server/docs/content_10_ai_developer/ai-52-notification-apns",children:"idp-server-notification-apns-adapter"})," - Apple Push Notification"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u60c5\u5831\u6e90"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"libs/idp-server-email-aws-adapter/"}),"\u914d\u4e0b\u306e\u5b9f\u88c5\u30b3\u30fc\u30c9"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(53562).A+"",children:"AwsEmailSender.java"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-10-12"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},53562:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/files/AwsEmailSender-280e08ebe67200f8f66a6938b433a05d.java"},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(96540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);