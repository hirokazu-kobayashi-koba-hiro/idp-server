"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2644],{95081:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"content_06_developer-guide/implementation-guides/integration/http-request-executor","title":"HTTP Request Executor","description":"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","source":"@site/docs/content_06_developer-guide/04-implementation-guides/integration/http-request-executor.md","sourceDirName":"content_06_developer-guide/04-implementation-guides/integration","slug":"/content_06_developer-guide/implementation-guides/integration/http-request-executor","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/integration/http-request-executor","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/04-implementation-guides/integration/http-request-executor.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/integration/external-integration"},"next":{"title":"\u30d7\u30c3\u30b7\u30e5\u901a\u77e5 (FCM/APNs)","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/integration/notification-fcm-apns"}}');var i=t(74848),r=t(28453);const l={},d="HTTP Request Executor",c={},o=[{value:"\ud83c\udfaf \u76ee\u7684",id:"-\u76ee\u7684",level:2},{value:"\ud83d\udd3d \u56f3\uff1aHTTP Request Executor \u306e\u5168\u4f53\u50cf",id:"-\u56f3http-request-executor-\u306e\u5168\u4f53\u50cf",level:2},{value:"\ud83d\udcda \u4e3b\u8981\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8",id:"-\u4e3b\u8981\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8",level:2},{value:"HttpRequestExecutor",id:"httprequestexecutor",level:3},{value:"\u4e3b\u8981\u30e1\u30bd\u30c3\u30c9",id:"\u4e3b\u8981\u30e1\u30bd\u30c3\u30c9",level:4},{value:"HttpRetryConfiguration",id:"httpretryconfiguration",level:3},{value:"\u8a2d\u5b9a\u9805\u76ee",id:"\u8a2d\u5b9a\u9805\u76ee",level:4},{value:"\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a",id:"\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a",level:4},{value:"\ud83d\udd27 \u5b9f\u88c5\u30af\u30e9\u30b9",id:"-\u5b9f\u88c5\u30af\u30e9\u30b9",level:2},{value:"1. HttpRequestExecutionConfig",id:"1-httprequestexecutionconfig",level:3},{value:"2. SecurityEventHttpRequestConfig",id:"2-securityeventhttprequestconfig",level:3},{value:"3. IdentityVerificationHttpRequestConfig",id:"3-identityverificationhttprequestconfig",level:3},{value:"4. AdditionalParameterHttpRequestConfig",id:"4-additionalparameterhttprequestconfig",level:3},{value:"\ud83d\udcd6 \u4f7f\u7528\u4f8b",id:"-\u4f7f\u7528\u4f8b",level:2},{value:"\u57fa\u672c\u7684\u306a\u4f7f\u7528\u65b9\u6cd5",id:"\u57fa\u672c\u7684\u306a\u4f7f\u7528\u65b9\u6cd5",level:3},{value:"\u660e\u793a\u7684\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",id:"\u660e\u793a\u7684\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",level:3},{value:"JSON \u8a2d\u5b9a\u4f8b",id:"json-\u8a2d\u5b9a\u4f8b",level:3},{value:"\ud83d\udd10 OAuth 2.0 \u8a8d\u8a3c\u7d71\u5408",id:"-oauth-20-\u8a8d\u8a3c\u7d71\u5408",level:2},{value:"OAuth \u8a2d\u5b9a",id:"oauth-\u8a2d\u5b9a",level:3},{value:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",level:4},{value:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u751f\u6210",id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u751f\u6210",level:4},{value:"\u81ea\u52d5\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",id:"\u81ea\u52d5\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",level:3},{value:"401/403 \u30a8\u30e9\u30fc\u6642\u306e\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4",id:"401403-\u30a8\u30e9\u30fc\u6642\u306e\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4",level:3},{value:"\u51e6\u7406\u30d5\u30ed\u30fc\uff08\u8a73\u7d30\uff09",id:"\u51e6\u7406\u30d5\u30ed\u30fc\u8a73\u7d30",level:4},{value:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",id:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",level:4},{value:"\u30ed\u30b0\u51fa\u529b",id:"\u30ed\u30b0\u51fa\u529b",level:4},{value:"\u8a2d\u8a08\u30dd\u30a4\u30f3\u30c8",id:"\u8a2d\u8a08\u30dd\u30a4\u30f3\u30c8",level:4},{value:"\u95a2\u9023\u30af\u30e9\u30b9",id:"\u95a2\u9023\u30af\u30e9\u30b9",level:4},{value:"\u95a2\u9023Issue",id:"\u95a2\u9023issue",level:4},{value:"\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406",id:"\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406",level:3},{value:"TTL\uff08Time To Live\uff09\u306e\u6c7a\u5b9a",id:"ttltime-to-live\u306e\u6c7a\u5b9a",level:4},{value:"\u30d0\u30c3\u30d5\u30a1\u6642\u9593\uff08Buffer Seconds\uff09",id:"\u30d0\u30c3\u30d5\u30a1\u6642\u9593buffer-seconds",level:4},{value:"OAuthAuthorizationResolvers",id:"oauthauthorizationresolvers",level:3},{value:"\u30b5\u30dd\u30fc\u30c8\u3059\u308b OAuth \u30d5\u30ed\u30fc",id:"\u30b5\u30dd\u30fc\u30c8\u3059\u308b-oauth-\u30d5\u30ed\u30fc",level:4},{value:"\u521d\u671f\u5316\u65b9\u6cd5",id:"\u521d\u671f\u5316\u65b9\u6cd5",level:4},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:4},{value:"\u30ea\u30be\u30eb\u30d0\u30fc\u9078\u629e",id:"\u30ea\u30be\u30eb\u30d0\u30fc\u9078\u629e",level:4},{value:"\ud83d\uddfa\ufe0f Mapping Rules\uff08\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0\uff09",id:"\ufe0f-mapping-rules\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0",level:2},{value:"Mapping Rules\u306e\u7a2e\u985e",id:"mapping-rules\u306e\u7a2e\u985e",level:3},{value:"path_mapping_rules",id:"path_mapping_rules",level:3},{value:"header_mapping_rules / body_mapping_rules",id:"header_mapping_rules--body_mapping_rules",level:3},{value:"\ud83d\udd0d Response Resolver\uff08\u30ec\u30b9\u30dd\u30f3\u30b9\u89e3\u6c7a\uff09",id:"-response-resolver\u30ec\u30b9\u30dd\u30f3\u30b9\u89e3\u6c7a",level:2},{value:"\u76ee\u7684",id:"\u76ee\u7684",level:3},{value:"\u8a2d\u5b9a\u69cb\u9020",id:"\u8a2d\u5b9a\u69cb\u9020",level:3},{value:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8aac\u660e",id:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8aac\u660e",level:3},{value:"\u52d5\u4f5c",id:"\u52d5\u4f5c",level:3},{value:"\u4f7f\u7528\u30b7\u30fc\u30f3",id:"\u4f7f\u7528\u30b7\u30fc\u30f3",level:3},{value:"\u8a55\u4fa1\u9806\u5e8f",id:"\u8a55\u4fa1\u9806\u5e8f",level:3},{value:"\ud83d\udd04 \u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0",id:"-\u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0",level:2},{value:"\u518d\u8a66\u884c\u53ef\u80fd\u306a\u6761\u4ef6",id:"\u518d\u8a66\u884c\u53ef\u80fd\u306a\u6761\u4ef6",level:3},{value:"Retry-After \u30d8\u30c3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8",id:"retry-after-\u30d8\u30c3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8",level:3},{value:"\u30d0\u30c3\u30af\u30aa\u30d5\u6226\u7565",id:"\u30d0\u30c3\u30af\u30aa\u30d5\u6226\u7565",level:3},{value:"\ud83d\udee1\ufe0f \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",id:"\ufe0f-\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",level:2},{value:"\u6a5f\u68b0\u53ef\u8aad\u30a8\u30e9\u30fc\u60c5\u5831",id:"\u6a5f\u68b0\u53ef\u8aad\u30a8\u30e9\u30fc\u60c5\u5831",level:3},{value:"\u51aa\u7b49\u6027\u30c1\u30a7\u30c3\u30af",id:"\u51aa\u7b49\u6027\u30c1\u30a7\u30c3\u30af",level:3},{value:"\ud83e\uddea \u30c6\u30b9\u30c8",id:"-\u30c6\u30b9\u30c8",level:2},{value:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9",id:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9",level:3},{value:"\u30c6\u30b9\u30c8\u5b9f\u884c",id:"\u30c6\u30b9\u30c8\u5b9f\u884c",level:3},{value:"\ud83d\udccb \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",id:"-\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",level:2},{value:"1. \u8a2d\u5b9a\u30d9\u30fc\u30b9\u5b9f\u884c\u306e\u63a8\u5968",id:"1-\u8a2d\u5b9a\u30d9\u30fc\u30b9\u5b9f\u884c\u306e\u63a8\u5968",level:3},{value:"2. \u9069\u5207\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",id:"2-\u9069\u5207\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",level:3},{value:"3. \u51aa\u7b49\u6027\u306e\u8003\u616e",id:"3-\u51aa\u7b49\u6027\u306e\u8003\u616e",level:3},{value:"4. \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",id:"4-\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",level:3},{value:"\ud83d\udd17 \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2},{value:"\u5b9f\u88c5\u30ac\u30a4\u30c9",id:"\u5b9f\u88c5\u30ac\u30a4\u30c9",level:3},{value:"\u6280\u8853\u8a73\u7d30",id:"\u6280\u8853\u8a73\u7d30",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"http-request-executor",children:"HTTP Request Executor"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"impl-20-mapping-functions.md",children:"Mapping Functions \u958b\u767a\u30ac\u30a4\u30c9"})," - \u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30c7\u30fc\u30bf\u5909\u63db\uff0819\u500b\u306eFunction\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"impl-17-external-integration.md",children:"\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a\u30ac\u30a4\u30c9"})," - \u5b8c\u5168\u306a\u5b9f\u88c5\u4f8b"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001",(0,i.jsx)(n.code,{children:"idp-server"})," \u306b\u304a\u3051\u308b ",(0,i.jsx)(n.strong,{children:"HTTP Request Executor"})," \u30b7\u30b9\u30c6\u30e0\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3068\u306e HTTP \u901a\u4fe1\u306b\u304a\u3044\u3066\u3001\u5805\u7262\u306a\u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0\u3001\u5305\u62ec\u7684\u306a\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3001\u304a\u3088\u3073**\u52d5\u7684\u306a\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0\uff08Mapping Functions\uff09**\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u76ee\u7684",children:"\ud83c\udfaf \u76ee\u7684"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5916\u90e8 API \u3068\u306e\u901a\u4fe1\u306b\u304a\u3051\u308b\u4e00\u6642\u7684\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u969c\u5bb3\u3084\u30b5\u30fc\u30d0\u30fc\u30a8\u30e9\u30fc\u306b\u5bfe\u3059\u308b\u81ea\u52d5\u518d\u8a66\u884c"}),"\n",(0,i.jsx)(n.li,{children:"RFC 7231 \u6e96\u62e0\u306e Retry-After \u30d8\u30c3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8"}),"\n",(0,i.jsx)(n.li,{children:"499 \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u52d5\u7684\u518d\u8a66\u884c\u5236\u5fa1"}),"\n",(0,i.jsx)(n.li,{children:"OAuth 2.0 \u8a8d\u8a3c\u3068\u306e\u7d71\u5408"}),"\n",(0,i.jsx)(n.li,{children:"\u8a2d\u5b9a\u30d9\u30fc\u30b9\u306e\u67d4\u8edf\u306a\u518d\u8a66\u884c\u30dd\u30ea\u30b7\u30fc"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30c7\u30fc\u30bf\u5909\u63db\uff08Mapping Functions\u7d71\u5408\uff09"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u56f3http-request-executor-\u306e\u5168\u4f53\u50cf",children:"\ud83d\udd3d \u56f3\uff1aHTTP Request Executor \u306e\u5168\u4f53\u50cf"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    A[\ud83c\udf10 HTTP Request] --\x3e B{\ud83d\udccb Retry Config?}\n    B --\x3e|Yes| C[\ud83d\udd04 HttpRequestExecutor.executeWithRetry]\n    B --\x3e|No| D[\u26a1 HttpRequestExecutor.execute]\n\n    C --\x3e E{\ud83d\udd0d Response Check}\n    E --\x3e|Success 2xx| F[\u2705 Return Result]\n    E --\x3e|Retryable Error| G[\u23f1\ufe0f Backoff Delay]\n    E --\x3e|Non-retryable| H[\u274c Return Error]\n\n    G --\x3e I{\ud83d\udcca Max Retries?}\n    I --\x3e|Not Reached| C\n    I --\x3e|Exceeded| H\n\n    D --\x3e F"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u4e3b\u8981\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8",children:"\ud83d\udcda \u4e3b\u8981\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"}),"\n",(0,i.jsx)(n.h3,{id:"httprequestexecutor",children:"HttpRequestExecutor"}),"\n",(0,i.jsx)(n.p,{children:"HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5b9f\u884c\u3068\u518d\u8a66\u884c\u3092\u7ba1\u7406\u3059\u308b\u30e1\u30a4\u30f3\u30af\u30e9\u30b9\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"\u4e3b\u8981\u30e1\u30bd\u30c3\u30c9",children:"\u4e3b\u8981\u30e1\u30bd\u30c3\u30c9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u8a2d\u5b9a\u30d9\u30fc\u30b9\u306e\u5b9f\u884c\uff08\u81ea\u52d5\u518d\u8a66\u884c\u30b5\u30dd\u30fc\u30c8\uff09\npublic HttpRequestResult execute(\n    HttpRequestExecutionConfigInterface configuration,\n    HttpRequestBaseParams params\n)\n\n// \u660e\u793a\u7684\u306a\u518d\u8a66\u884c\u5b9f\u884c\npublic HttpRequestResult executeWithRetry(\n    HttpRequest request,\n    HttpRetryConfiguration retryConfig\n)\n\n// \u5358\u7d14\u5b9f\u884c\uff08\u518d\u8a66\u884c\u306a\u3057\uff09\npublic HttpRequestResult execute(HttpRequest request)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"httpretryconfiguration",children:"HttpRetryConfiguration"}),"\n",(0,i.jsx)(n.p,{children:"\u518d\u8a66\u884c\u306e\u8a73\u7d30\u8a2d\u5b9a\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"\u8a2d\u5b9a\u9805\u76ee",children:"\u8a2d\u5b9a\u9805\u76ee"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class HttpRetryConfiguration implements JsonReadable {\n    private int maxRetries = 0;                          // \u6700\u5927\u518d\u8a66\u884c\u56de\u6570\n    private Duration[] backoffDelays = new Duration[0];  // \u30d0\u30c3\u30af\u30aa\u30d5\u9045\u5ef6\n    private Set<Integer> retryableStatusCodes = Set.of(); // \u518d\u8a66\u884c\u53ef\u80fd\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\n    private boolean idempotencyRequired = false;         // \u51aa\u7b49\u6027\u8981\u6c42\n    private String strategy = "EXPONENTIAL_BACKOFF";     // \u518d\u8a66\u884c\u6226\u7565\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a",children:"\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u30c7\u30d5\u30a9\u30eb\u30c8\u518d\u8a66\u884c\u8a2d\u5b9a\nHttpRetryConfiguration defaultConfig = HttpRetryConfiguration.defaultRetry();\n// - \u6700\u5927\u518d\u8a66\u884c: 3\u56de\n// - \u30d0\u30c3\u30af\u30aa\u30d5: 1\u79d2 \u2192 5\u79d2 \u2192 30\u79d2\n// - \u518d\u8a66\u884c\u53ef\u80fd\u30b9\u30c6\u30fc\u30bf\u30b9: 408, 429, 500, 502, 503, 504\n// - \u51aa\u7b49\u6027\u8981\u6c42: false\n\n// \u518d\u8a66\u884c\u7121\u52b9\u5316\nHttpRetryConfiguration noRetry = HttpRetryConfiguration.noRetry();\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u5b9f\u88c5\u30af\u30e9\u30b9",children:"\ud83d\udd27 \u5b9f\u88c5\u30af\u30e9\u30b9"}),"\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u4e0b\u306e\u30af\u30e9\u30b9\u304c ",(0,i.jsx)(n.code,{children:"HttpRequestExecutionConfigInterface"})," \u3092\u5b9f\u88c5\u3057\u3001JSON \u304b\u3089\u306e\u81ea\u52d5\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\uff1a"]}),"\n",(0,i.jsx)(n.h3,{id:"1-httprequestexecutionconfig",children:"1. HttpRequestExecutionConfig"}),"\n",(0,i.jsx)(n.p,{children:"\u57fa\u672c\u7684\u306a HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a\u30af\u30e9\u30b9"}),"\n",(0,i.jsx)(n.h3,{id:"2-securityeventhttprequestconfig",children:"2. SecurityEventHttpRequestConfig"}),"\n",(0,i.jsx)(n.p,{children:"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30a4\u30d9\u30f3\u30c8\u7528 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.h3,{id:"3-identityverificationhttprequestconfig",children:"3. IdentityVerificationHttpRequestConfig"}),"\n",(0,i.jsx)(n.p,{children:"\u8eab\u5143\u78ba\u8a8d\u7528 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.h3,{id:"4-additionalparameterhttprequestconfig",children:"4. AdditionalParameterHttpRequestConfig"}),"\n",(0,i.jsx)(n.p,{children:"\u8ffd\u52a0\u30d1\u30e9\u30e1\u30fc\u30bf\u7528 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u8a2d\u5b9a"}),"\n",(0,i.jsxs)(n.p,{children:["\u3059\u3079\u3066\u306e\u30af\u30e9\u30b9\u306f ",(0,i.jsx)(n.code,{children:"@JsonIgnoreProperties(ignoreUnknown = true)"})," \u3068 ",(0,i.jsx)(n.code,{children:"JsonReadable"})," \u3092\u5b9f\u88c5\u3057\u3001\n",(0,i.jsx)(n.code,{children:"JsonConverter"})," \u306b\u3088\u308b\u81ea\u52d5\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u4f7f\u7528\u4f8b",children:"\ud83d\udcd6 \u4f7f\u7528\u4f8b"}),"\n",(0,i.jsx)(n.h3,{id:"\u57fa\u672c\u7684\u306a\u4f7f\u7528\u65b9\u6cd5",children:"\u57fa\u672c\u7684\u306a\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// 1. \u8a2d\u5b9a\u30d9\u30fc\u30b9\u306e\u5b9f\u884c\uff08\u63a8\u5968\uff09\n@Autowired\nprivate HttpRequestExecutor executor;\n\npublic void callExternalApi() {\n    // JSON \u304b\u3089\u81ea\u52d5\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u305f\u8a2d\u5b9a\n    HttpRequestExecutionConfig config = loadConfigFromDatabase();\n\n    HttpRequestBaseParams params = HttpRequestBaseParams.builder()\n        .body("request data")\n        .build();\n\n    HttpRequestResult result = executor.execute(config, params);\n\n    if (result.isSuccess()) {\n        // \u6210\u529f\u51e6\u7406\n        processResponse(result.body());\n    } else {\n        // \u30a8\u30e9\u30fc\u51e6\u7406\n        handleError(result.statusCode(), result.body());\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u660e\u793a\u7684\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",children:"\u660e\u793a\u7684\u306a\u518d\u8a66\u884c\u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public void callWithCustomRetry() {\n    HttpRetryConfiguration retryConfig = HttpRetryConfiguration.builder()\n        .maxRetries(5)\n        .backoffDelays(\n            Duration.ofSeconds(2),\n            Duration.ofSeconds(10),\n            Duration.ofMinutes(1)\n        )\n        .retryableStatusCodes(Set.of(500, 502, 503, 504, 408, 429))\n        .idempotencyRequired(true)\n        .build();\n\n    HttpRequest request = HttpRequest.newBuilder()\n        .uri(URI.create("https://api.example.com/endpoint"))\n        .POST(BodyPublishers.ofString("data"))\n        .build();\n\n    HttpRequestResult result = executor.executeWithRetry(request, retryConfig);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"json-\u8a2d\u5b9a\u4f8b",children:"JSON \u8a2d\u5b9a\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "url": "https://api.example.com/webhook",\n  "method": "POST",\n  "auth_type": "oauth",\n  "oauth_authorization": {\n    "client_id": "your-client-id",\n    "scope": "api:write"\n  },\n  "retry_configuration": {\n    "max_retries": 3,\n    "backoff_delays": [1000, 5000, 30000],\n    "retryable_status_codes": [500, 502, 503, 504, 408, 429],\n    "idempotency_required": false,\n    "strategy": "EXPONENTIAL_BACKOFF"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-oauth-20-\u8a8d\u8a3c\u7d71\u5408",children:"\ud83d\udd10 OAuth 2.0 \u8a8d\u8a3c\u7d71\u5408"}),"\n",(0,i.jsx)(n.p,{children:"HttpRequestExecutor \u306f OAuth 2.0 \u8a8d\u8a3c\u3092\u900f\u904e\u7684\u306b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"oauth-\u8a2d\u5b9a",children:"OAuth \u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "url": "https://api.example.com/webhook",\n  "method": "POST",\n  "auth_type": "oauth",\n  "oauth_authorization": {\n    "type": "client_credentials",\n    "token_endpoint": "https://auth.example.com/token",\n    "client_authentication_type": "client_secret_basic",\n    "client_id": "your-client-id",\n    "client_secret": "your-client-secret",\n    "scope": "api:write webhooks:send",\n    "cache_enabled": true,\n    "cache_buffer_seconds": 30,\n    "cache_ttl_seconds": 3600\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a",children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8a2d\u5b9a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"cache_enabled"})}),": \u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u52b9/\u7121\u52b9"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"cache_buffer_seconds"})}),": \u30c8\u30fc\u30af\u30f3\u671f\u9650\u524d\u306e\u30d0\u30c3\u30d5\u30a1\u6642\u9593\uff08\u79d2\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"cache_ttl_seconds"})}),": \u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30c7\u30d5\u30a9\u30eb\u30c8TTL\uff08\u79d2\uff09"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u751f\u6210",children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u751f\u6210"}),"\n",(0,i.jsx)(n.p,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u306f\u4ee5\u4e0b\u306e\u5f62\u5f0f\u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"oauth_token:type={grant_type}:client={client_id}:scope={scope}:user={username}:endpoint={token_endpoint}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"oauth_token:type=client_credentials:client=my_client_id:scope=api_write:endpoint=https://auth.example.com/token\noauth_token:type=password:client=app_client:scope=read_write:user=john_doe:endpoint=https://auth.example.com/token\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7279\u6b8a\u6587\u5b57\u306f ",(0,i.jsx)(n.code,{children:"_"})," \u306b\u7f6e\u63db"]}),"\n",(0,i.jsx)(n.li,{children:"\u5404\u8981\u7d20\u306f50\u6587\u5b57\u4ee5\u5185\u306b\u5236\u9650"}),"\n",(0,i.jsx)(n.li,{children:"\u30c7\u30d0\u30c3\u30b0\u30fb\u30ed\u30b0\u89e3\u6790\u304c\u5bb9\u6613\u306a\u4eba\u9593\u53ef\u8aad\u5f62\u5f0f"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u81ea\u52d5\u30c8\u30fc\u30af\u30f3\u7ba1\u7406",children:"\u81ea\u52d5\u30c8\u30fc\u30af\u30f3\u7ba1\u7406"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// OAuth\u8a2d\u5b9a\u304c\u3042\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u306f OAuthAuthorizationResolvers \u304c\u81ea\u52d5\u7684\u306b\u30c8\u30fc\u30af\u30f3\u3092\u89e3\u6c7a\u3057\u307e\u3059\nHttpRequestExecutionConfig config = loadConfigWithOAuth();\nHttpRequestResult result = executor.execute(config, params);\n\n// \u5185\u90e8\u51e6\u7406:\n// 1. OAuthAuthorizationResolvers \u304c\u30c8\u30fc\u30af\u30f3\u3092\u89e3\u6c7a\n// 2. Authorization \u30d8\u30c3\u30c0\u30fc\u306b Bearer \u30c8\u30fc\u30af\u30f3\u8a2d\u5b9a\n// 3. \u30ea\u30af\u30a8\u30b9\u30c8\u5b9f\u884c\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"\u6700\u9069\u5316\u6e08\u307f"}),": OAuth\u8a8d\u8a3c\u3068\u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd\u306f\u52b9\u7387\u7684\u306b\u7d71\u5408\u3055\u308c\u3066\u304a\u308a\u3001\u30c8\u30fc\u30af\u30f3\u89e3\u6c7a\u306e\u91cd\u8907\u5b9f\u884c\u306f\u3042\u308a\u307e\u305b\u3093\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"401403-\u30a8\u30e9\u30fc\u6642\u306e\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4",children:"401/403 \u30a8\u30e9\u30fc\u6642\u306e\u81ea\u52d5\u30ea\u30c8\u30e9\u30a4"}),"\n",(0,i.jsxs)(n.p,{children:["\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u304b\u3089 ",(0,i.jsx)(n.code,{children:"401 Unauthorized"})," \u307e\u305f\u306f ",(0,i.jsx)(n.code,{children:"403 Forbidden"})," \u304c\u8fd4\u5374\u3055\u308c\u305f\u5834\u5408\u3001HttpRequestExecutor \u306f\u81ea\u52d5\u7684\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u7121\u52b9\u5316\u3057\u3001\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3057\u3066\u30ea\u30c8\u30e9\u30a4\u3057\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u51e6\u7406\u30d5\u30ed\u30fc\u8a73\u7d30",children:"\u51e6\u7406\u30d5\u30ed\u30fc\uff08\u8a73\u7d30\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         execute(config, params)                              \u2502\n\u2502                                  \u2502                                           \u2502\n\u2502                                  \u25bc                                           \u2502\n\u2502                    executeWithOAuthRetry(config, params, isRetry=false)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  1. HttpRequestBuilder.build(config, params)                                 \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502     \u2502  - URL/Header/Body \u306e\u30de\u30c3\u30d4\u30f3\u30b0                                      \u2502 \u2502\n\u2502     \u2502  - auth_type == "oauth2" \u306e\u5834\u5408:                                     \u2502 \u2502\n\u2502     \u2502      OAuthAuthorizationResolver.resolve() \u3067\u30c8\u30fc\u30af\u30f3\u53d6\u5f97             \u2502 \u2502\n\u2502     \u2502      \u2192 Authorization: Bearer {token} \u30d8\u30c3\u30c0\u30fc\u8ffd\u52a0                    \u2502 \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  2. HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u5b9f\u884c                                                       \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502     \u2502  hasRetryConfiguration?                                              \u2502 \u2502\n\u2502     \u2502     YES \u2192 executeWithRetryAndCriteria() (\u6307\u6570\u30d0\u30c3\u30af\u30aa\u30d5\u30ea\u30c8\u30e9\u30a4)     \u2502 \u2502\n\u2502     \u2502     NO  \u2192 executeWithCriteria() (\u5358\u767a\u5b9f\u884c)                           \u2502 \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  3. \u30ec\u30b9\u30dd\u30f3\u30b9\u8a55\u4fa1                                                           \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502     \u2502  auth_type == "oauth2"                                               \u2502 \u2502\n\u2502     \u2502  AND (statusCode == 401 OR statusCode == 403)                        \u2502 \u2502\n\u2502     \u2502  AND isRetry == false                                                \u2502 \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                   \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502                             \u2502\n                   YES                           NO\n                    \u2502                             \u2502\n                    \u25bc                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  4. \u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5 & \u30ea\u30c8\u30e9\u30a4 \u2502   \u2502  \u7d50\u679c\u3092\u8fd4\u5374          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502   \u2502                     \u2502\n\u2502  \u2502 a. \u30ed\u30b0\u51fa\u529b:                \u2502  \u2502   \u2502  return result;     \u2502\n\u2502  \u2502    "Received 401/403,      \u2502  \u2502   \u2502                     \u2502\n\u2502  \u2502     invalidating cached    \u2502  \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u2502     token and retrying"    \u2502  \u2502\n\u2502  \u2502                            \u2502  \u2502\n\u2502  \u2502 b. resolver.invalidateCache()\u2502 \u2502\n\u2502  \u2502    \u2192 \u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u30c8\u30fc\u30af\u30f3\u524a\u9664\u2502 \u2502\n\u2502  \u2502    \u2192 \u30ed\u30b0: "Invalidated     \u2502  \u2502\n\u2502  \u2502      cached access token"  \u2502  \u2502\n\u2502  \u2502                            \u2502  \u2502\n\u2502  \u2502 c. executeWithOAuthRetry() \u2502  \u2502\n\u2502  \u2502    (isRetry=true \u3067\u518d\u5e30)   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  5. \u30ea\u30c8\u30e9\u30a4\u5b9f\u884c (isRetry=true)                                              \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502     \u2502  - \u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97 (\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u306a\u3044\u305f\u3081)                        \u2502 \u2502\n\u2502     \u2502  - HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u518d\u5b9f\u884c                                              \u2502 \u2502\n\u2502     \u2502  - 401/403\u3067\u3082 isRetry=true \u306a\u306e\u3067\u30ea\u30c8\u30e9\u30a4\u3057\u306a\u3044 (\u7121\u9650\u30eb\u30fc\u30d7\u9632\u6b62)     \u2502 \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502\n                    \u25bc\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502 \u7d50\u679c\u3092\u8fd4\u5374 \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3",children:"\u30b7\u30fc\u30b1\u30f3\u30b9\u56f3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Client \u2502     \u2502HttpRequestExecutor\u2502     \u2502HttpRequestBuilder\u2502     \u2502OAuthResolver \u2502     \u2502External API  \u2502\n\u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502 execute(config)   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502 build(config)          \u2502                     \u2502                    \u2502\n    \u2502                   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502 resolve(oAuthConfig)\u2502                    \u2502\n    \u2502                   \u2502                        \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502   access_token      \u2502                    \u2502\n    \u2502                   \u2502                        \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502   HttpRequest          \u2502                     \u2502                    \u2502\n    \u2502                   \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502 POST /api (Bearer token)                     \u2502                    \u2502\n    \u2502                   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502      401 Unauthorized\n    \u2502                   \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502 invalidateCache()      \u2502                     \u2502                    \u2502\n    \u2502                   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502 build(config) [RETRY]  \u2502                     \u2502                    \u2502\n    \u2502                   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502 resolve(oAuthConfig)\u2502                    \u2502\n    \u2502                   \u2502                        \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502   NEW access_token  \u2502                    \u2502\n    \u2502                   \u2502                        \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502   HttpRequest          \u2502                     \u2502                    \u2502\n    \u2502                   \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502 POST /api (NEW Bearer token)                 \u2502                    \u2502\n    \u2502                   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502      200 OK        \u2502\n    \u2502                   \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n    \u2502   result          \u2502                        \u2502                     \u2502                    \u2502\n    \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                        \u2502                     \u2502                    \u2502\n    \u2502                   \u2502                        \u2502                     \u2502                    \u2502\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u30ed\u30b0\u51fa\u529b",children:"\u30ed\u30b0\u51fa\u529b"}),"\n",(0,i.jsx)(n.p,{children:"\u30ea\u30c8\u30e9\u30a4\u6642\u306b\u306f\u4ee5\u4e0b\u306e\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\uff08\u904b\u7528\u6642\u306e\u78ba\u8a8d\u306b\u6709\u7528\uff09\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"INFO  HttpRequestExecutor - Received 401 Unauthorized, invalidating cached token and retrying: uri=https://api.example.com/endpoint\nINFO  SmartCachedOAuthAuthorizationResolver - Invalidated cached access token for key: oauth_token:type=password:client=my-client:scope=api_access:endpoint=https://auth.example.com/token\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u8a2d\u8a08\u30dd\u30a4\u30f3\u30c8",children:"\u8a2d\u8a08\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30dd\u30a4\u30f3\u30c8"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30ea\u30c8\u30e9\u30a4\u306f1\u56de\u306e\u307f"})}),(0,i.jsx)(n.td,{children:"\u7121\u9650\u30eb\u30fc\u30d7\u9632\u6b62\u3002\u30ea\u30c8\u30e9\u30a4\u5f8c\u3082401/403\u306a\u3089\u6700\u7d42\u7d50\u679c\u3068\u3057\u3066\u8fd4\u5374"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\u5316"})}),(0,i.jsx)(n.td,{children:"\u671f\u9650\u5207\u308c\u3084\u5931\u52b9\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u304b\u3089\u524a\u9664"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u65b0\u30c8\u30fc\u30af\u30f3\u53d6\u5f97"})}),(0,i.jsx)(n.td,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u30df\u30b9\u306b\u3088\u308a\u3001OAuth\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u65b0\u898f\u53d6\u5f97"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5bfe\u8c61\u30a8\u30e9\u30fc"})}),(0,i.jsx)(n.td,{children:"401\uff08\u8a8d\u8a3c\u5931\u6557\uff09\u3068403\uff08\u8a8d\u53ef\u5931\u6557\uff09\u306e\u4e21\u65b9\u306b\u5bfe\u5fdc"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"\u95a2\u9023\u30af\u30e9\u30b9",children:"\u95a2\u9023\u30af\u30e9\u30b9"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30af\u30e9\u30b9"}),(0,i.jsx)(n.th,{children:"\u8cac\u52d9"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HttpRequestExecutor"})}),(0,i.jsx)(n.td,{children:"HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u5b9f\u884c\u3001401/403\u30ea\u30c8\u30e9\u30a4\u5236\u5fa1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HttpRequestBuilder"})}),(0,i.jsx)(n.td,{children:"\u8a2d\u5b9a\u304b\u3089HttpRequest\u3092\u69cb\u7bc9\u3001OAuth\u30c8\u30fc\u30af\u30f3\u4ed8\u4e0e"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OAuthAuthorizationResolver"})}),(0,i.jsx)(n.td,{children:"OAuth\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u7ba1\u7406"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SmartCachedOAuthAuthorizationResolver"})}),(0,i.jsx)(n.td,{children:"\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u3001TTL\u7ba1\u7406\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u7121\u52b9\u5316"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CachedAccessToken"})}),(0,i.jsx)(n.td,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3001\u6709\u52b9\u671f\u9650\u5224\u5b9a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HttpRetryStrategy"})}),(0,i.jsx)(n.td,{children:"\u6307\u6570\u30d0\u30c3\u30af\u30aa\u30d5\u30ea\u30c8\u30e9\u30a4\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u7528\uff09"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"\u95a2\u9023issue",children:"\u95a2\u9023Issue"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/hirokazu-kobayashi-koba-hiro/idp-server/issues/1139",children:"Issue #1139"}),": \u30ad\u30e3\u30c3\u30b7\u30e5TTL\u500b\u5225\u8a2d\u5b9a"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/hirokazu-kobayashi-koba-hiro/idp-server/issues/1143",children:"Issue #1143"}),": 401/403\u30a8\u30e9\u30fc\u6642\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\uff06\u30ea\u30c8\u30e9\u30a4\u6a5f\u80fd"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406",children:"\u30c8\u30fc\u30af\u30f3\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406"}),"\n",(0,i.jsx)(n.h4,{id:"ttltime-to-live\u306e\u6c7a\u5b9a",children:"TTL\uff08Time To Live\uff09\u306e\u6c7a\u5b9a"}),"\n",(0,i.jsxs)(n.p,{children:["\u30c8\u30fc\u30af\u30f3\u306e\u30ad\u30e3\u30c3\u30b7\u30e5TTL\u306f\u3001OAuth\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8fd4\u5374\u3055\u308c\u308b ",(0,i.jsx)(n.code,{children:"expires_in"})," \u3092\u4f7f\u7528\u3057\u3066\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// OAuth\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\n{\n  "access_token": "eyJhbGciOiJSUzI1...",\n  "expires_in": 1800,  // 30\u5206\n  "token_type": "Bearer"\n}\n\n// \u30ad\u30e3\u30c3\u30b7\u30e5\u4fdd\u5b58\u6642\ncacheStore.put(cacheKey, cachedToken, expiresIn);  // TTL = 1800\u79d2\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u30d0\u30c3\u30d5\u30a1\u6642\u9593buffer-seconds",children:"\u30d0\u30c3\u30d5\u30a1\u6642\u9593\uff08Buffer Seconds\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u30c8\u30fc\u30af\u30f3\u671f\u9650\u5207\u308c\u76f4\u524d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u5931\u6557\u3092\u9632\u3050\u305f\u3081\u3001\u30d0\u30c3\u30d5\u30a1\u6642\u9593\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"|\u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 expires_in (1800\u79d2) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192|\n|                              |\u2190\u2500buffer\u2500\u2192|\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u53d6\u5f97\u6642\u523b                        \u2191          \u6709\u52b9\u671f\u9650\n                          \u3053\u3053\u3067isValid()=false\n                          \uff08\u30ea\u30af\u30a8\u30b9\u30c8\u524d\u306b\u65b0\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\uff09\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// CachedAccessToken.isValid()\npublic boolean isValid() {\n    long bufferTime = bufferSeconds * 1000L;\n    return currentTime < (expirationTimestamp - bufferTime);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"oauthauthorizationresolvers",children:"OAuthAuthorizationResolvers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"OAuthAuthorizationResolvers"})," \u306f OAuth 2.0 \u306e\u5404\u7a2e\u8a8d\u8a3c\u30d5\u30ed\u30fc\u306b\u5bfe\u5fdc\u3057\u305f\u30ea\u30be\u30eb\u30d0\u30fc\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u3067\u3059\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u30b5\u30dd\u30fc\u30c8\u3059\u308b-oauth-\u30d5\u30ed\u30fc",children:"\u30b5\u30dd\u30fc\u30c8\u3059\u308b OAuth \u30d5\u30ed\u30fc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class OAuthAuthorizationResolvers {\n    Map<String, OAuthAuthorizationResolver> resolvers = new HashMap<>();\n\n    // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u30d5\u30ed\u30fc:\n    // - Client Credentials Grant (client_credentials)\n    // - Resource Owner Password Credentials Grant (password)\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u521d\u671f\u5316\u65b9\u6cd5",children:"\u521d\u671f\u5316\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u57fa\u672c\u521d\u671f\u5316\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u30ea\u30be\u30eb\u30d0\u30fc\u306e\u307f\uff09\nOAuthAuthorizationResolvers resolvers = new OAuthAuthorizationResolvers();\n\n// \u30ab\u30b9\u30bf\u30e0\u30ea\u30be\u30eb\u30d0\u30fc\u8ffd\u52a0\nMap<String, OAuthAuthorizationResolver> customResolvers = new HashMap<>();\ncustomResolvers.put("custom_grant", customResolver);\nOAuthAuthorizationResolvers resolvers = new OAuthAuthorizationResolvers(customResolvers);\n\n// \u30ad\u30e3\u30c3\u30b7\u30e5\u6709\u52b9\u5316\nOAuthAuthorizationResolvers resolvers = new OAuthAuthorizationResolvers(\n    cacheStore,     // \u30ad\u30e3\u30c3\u30b7\u30e5\u30b9\u30c8\u30a2\n    30,            // \u30d0\u30c3\u30d5\u30a1\u79d2\u6570\n    3600           // \u30c7\u30d5\u30a9\u30eb\u30c8TTL\u79d2\u6570\n);\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// HttpRequestExecutor \u306e\u521d\u671f\u5316\u6642\u306b OAuth \u30ea\u30be\u30eb\u30d0\u30fc\u3092\u8a2d\u5b9a\nHttpRequestExecutor executor = new HttpRequestExecutor(\n    httpClient,\n    oAuthAuthorizationResolvers\n);\n\n// OAuth \u8a2d\u5b9a\u304c\u542b\u307e\u308c\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u306f\u81ea\u52d5\u7684\u306b\u30c8\u30fc\u30af\u30f3\u304c\u89e3\u6c7a\u3055\u308c\u307e\u3059\nHttpRequestResult result = executor.execute(configWithOAuth, params);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u30ea\u30be\u30eb\u30d0\u30fc\u9078\u629e",children:"\u30ea\u30be\u30eb\u30d0\u30fc\u9078\u629e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// grant_type \u306b\u57fa\u3065\u3044\u3066\u30ea\u30be\u30eb\u30d0\u30fc\u3092\u53d6\u5f97\nOAuthAuthorizationResolver resolver = resolvers.get("client_credentials");\n\n// \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044 grant_type \u306e\u5834\u5408\u306f UnSupportedException \u304c\u30b9\u30ed\u30fc\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-mapping-rules\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0",children:"\ud83d\uddfa\ufe0f Mapping Rules\uff08\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0\uff09"}),"\n",(0,i.jsx)(n.p,{children:"HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u52d5\u7684\u306a\u69cb\u7bc9\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u5909\u63db\u3092\u884c\u3046Mapping Rules\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"mapping-rules\u306e\u7a2e\u985e",children:"Mapping Rules\u306e\u7a2e\u985e"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Mapping Rule"}),(0,i.jsx)(n.th,{children:"\u7528\u9014"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"path_mapping_rules"})}),(0,i.jsx)(n.td,{children:"URL\u30d1\u30b9"}),(0,i.jsx)(n.td,{children:"URL\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5185\u306e\u5909\u6570\u3092\u52d5\u7684\u306b\u7f6e\u304d\u63db\u3048"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"header_mapping_rules"})}),(0,i.jsx)(n.td,{children:"HTTP\u30d8\u30c3\u30c0\u30fc"}),(0,i.jsx)(n.td,{children:"\u30d8\u30c3\u30c0\u30fc\u306e\u52d5\u7684\u8a2d\u5b9a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"body_mapping_rules"})}),(0,i.jsx)(n.td,{children:"\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3"}),(0,i.jsx)(n.td,{children:"JSON\u30dc\u30c7\u30a3\u306e\u52d5\u7684\u69cb\u7bc9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query_mapping_rules"})}),(0,i.jsx)(n.td,{children:"\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf"}),(0,i.jsx)(n.td,{children:"URL\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u52d5\u7684\u8a2d\u5b9a"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u8a73\u7d30"}),": ",(0,i.jsx)(n.a,{href:"impl-20-mapping-functions.md",children:"Mapping Functions \u958b\u767a\u30ac\u30a4\u30c9"})]}),"\n",(0,i.jsx)(n.h3,{id:"path_mapping_rules",children:"path_mapping_rules"}),"\n",(0,i.jsx)(n.p,{children:"URL\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u52d5\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u8a2d\u5b9a\u4f8b"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "http_request": {\n    "url": "https://api.example.com/v1/applications/{{application_id}}/documents/{{document_id}}",\n    "path_mapping_rules": [\n      {\n        "from": "$.application.id",\n        "to": "application_id"\n      },\n      {\n        "from": "$.document.id",\n        "to": "document_id"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u52d5\u4f5c"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["URL\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5185\u306e",(0,i.jsx)(n.code,{children:"{{application_id}}"}),"\u3068",(0,i.jsx)(n.code,{children:"{{document_id}}"}),"\u3092\u691c\u51fa"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"path_mapping_rules"}),"\u306b\u57fa\u3065\u3044\u3066\u5024\u3092\u53d6\u5f97"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6700\u7d42\u7684\u306aURL: ",(0,i.jsx)(n.code,{children:"https://api.example.com/v1/applications/12345/documents/67890"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f7f\u7528\u30b7\u30fc\u30f3"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"RESTful API\u306e\u30ea\u30bd\u30fc\u30b9ID\u3092\u30d1\u30b9\u306b\u57cb\u3081\u8fbc\u3080"}),"\n",(0,i.jsx)(n.li,{children:"\u52d5\u7684\u306a\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u69cb\u7bc9\uff08\u30e6\u30fc\u30b6\u30fcID\u3001\u30c6\u30ca\u30f3\u30c8ID\u7b49\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"header_mapping_rules--body_mapping_rules",children:"header_mapping_rules / body_mapping_rules"}),"\n",(0,i.jsxs)(n.p,{children:["\u30d8\u30c3\u30c0\u30fc\u3068\u30dc\u30c7\u30a3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u306b\u3064\u3044\u3066\u306f\u3001",(0,i.jsx)(n.a,{href:"impl-20-mapping-functions.md",children:"Mapping Functions \u958b\u767a\u30ac\u30a4\u30c9"}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-response-resolver\u30ec\u30b9\u30dd\u30f3\u30b9\u89e3\u6c7a",children:"\ud83d\udd0d Response Resolver\uff08\u30ec\u30b9\u30dd\u30f3\u30b9\u89e3\u6c7a\uff09"}),"\n",(0,i.jsx)(n.p,{children:"HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u76ee\u7684",children:"\u76ee\u7684"}),"\n",(0,i.jsx)(n.p,{children:"\u5916\u90e8API\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u69d8\u3005\u306a\u5f62\u5f0f\u304c\u3042\u308a\u307e\u3059\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["HTTP 200\u3067\u3082\u3001\u30dc\u30c7\u30a3\u5185\u306b",(0,i.jsx)(n.code,{children:'"status": "error"'}),"\u304c\u542b\u307e\u308c\u308b\u5834\u5408"]}),"\n",(0,i.jsx)(n.li,{children:"HTTP 503\u3067\u3082\u3001\u518d\u8a66\u884c\u53ef\u80fd\u306a\u30a8\u30e9\u30fc\u3068\u4e0d\u53ef\u80fd\u306a\u30a8\u30e9\u30fc\u304c\u3042\u308b"}),"\n",(0,i.jsx)(n.li,{children:"\u30d3\u30b8\u30cd\u30b9\u30ec\u30d9\u30eb\u306e\u6210\u529f/\u5931\u6557\u3092HTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u3068\u30dc\u30c7\u30a3\u3067\u8907\u5408\u5224\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Response Resolver\u306f\u3001\u3053\u308c\u3089\u306e\u8907\u96d1\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u7d71\u4e00\u7684\u306b\u6271\u3046\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u8a2d\u5b9a\u69cb\u9020",children:"\u8a2d\u5b9a\u69cb\u9020"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "http_request": {\n    "url": "https://api.example.com/verify",\n    "response_resolve_configs": {\n      "configs": [\n        {\n          "conditions": [\n            {"path": "$.httpStatusCode", "operation": "in", "value": [200, 201]},\n            {"path": "$.response_body.status", "operation": "eq", "value": "approved"}\n          ],\n          "match_mode": "all",\n          "mapped_status_code": 200\n        },\n        {\n          "conditions": [\n            {"path": "$.httpStatusCode", "operation": "eq", "value": 200},\n            {"path": "$.response_body.status", "operation": "eq", "value": "pending"}\n          ],\n          "match_mode": "all",\n          "mapped_status_code": 202\n        },\n        {\n          "conditions": [\n            {"path": "$.httpStatusCode", "operation": "eq", "value": 503}\n          ],\n          "match_mode": "all",\n          "mapped_status_code": 503,\n          "error_message_json_path": "$.response_body.message"\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8aac\u660e",children:"\u30d5\u30a3\u30fc\u30eb\u30c9\u8aac\u660e"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30d5\u30a3\u30fc\u30eb\u30c9"}),(0,i.jsx)(n.th,{children:"\u8aac\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions"})}),(0,i.jsx)(n.td,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9\u5224\u5b9a\u6761\u4ef6\u306e\u914d\u5217"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions[].path"})}),(0,i.jsxs)(n.td,{children:["JSONPath\uff08",(0,i.jsx)(n.code,{children:"$.httpStatusCode"}),"\u3001",(0,i.jsx)(n.code,{children:"$.response_body.*"}),"\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions[].operation"})}),(0,i.jsxs)(n.td,{children:["\u6f14\u7b97\u5b50\uff08",(0,i.jsx)(n.code,{children:"eq"}),", ",(0,i.jsx)(n.code,{children:"in"}),", ",(0,i.jsx)(n.code,{children:"ne"}),", ",(0,i.jsx)(n.code,{children:"gte"}),", ",(0,i.jsx)(n.code,{children:"lte"}),"\u7b49\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"conditions[].value"})}),(0,i.jsx)(n.td,{children:"\u6bd4\u8f03\u5024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"match_mode"})}),(0,i.jsxs)(n.td,{children:["\u30de\u30c3\u30c1\u30e2\u30fc\u30c9\uff08",(0,i.jsx)(n.code,{children:"all"}),": AND\u6761\u4ef6\u3001",(0,i.jsx)(n.code,{children:"any"}),": OR\u6761\u4ef6\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mapped_status_code"})}),(0,i.jsx)(n.td,{children:"\u30de\u30c3\u30d4\u30f3\u30b0\u5148\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"error_message_json_path"})}),(0,i.jsx)(n.td,{children:"\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u62bd\u51fa\u7528JSONPath\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u52d5\u4f5c",children:"\u52d5\u4f5c"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u53d7\u4fe1"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"configs"}),"\u3092\u9806\u756a\u306b\u8a55\u4fa1"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6700\u521d\u306b\u30de\u30c3\u30c1\u3057\u305f\u8a2d\u5b9a\u306e",(0,i.jsx)(n.code,{children:"mapped_status_code"}),"\u3092\u9069\u7528"]}),"\n",(0,i.jsx)(n.li,{children:"\u3069\u308c\u3082\u30de\u30c3\u30c1\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u5143\u306eHTTP\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u4f7f\u7528"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u4f7f\u7528\u30b7\u30fc\u30f3",children:"\u4f7f\u7528\u30b7\u30fc\u30f3"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u30b1\u30fc\u30b91: HTTP 200\u3067\u3082\u30a8\u30e9\u30fc\u3092\u691c\u51fa"})}),"\n",(0,i.jsx)(n.p,{children:"\u5916\u90e8API\u304c\u5e38\u306bHTTP 200\u3092\u8fd4\u3059\u304c\u3001\u30dc\u30c7\u30a3\u3067\u6210\u529f/\u5931\u6557\u3092\u533a\u5225\u3059\u308b\u5834\u5408\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "configs": [\n    {\n      "conditions": [\n        {"path": "$.response_body.result", "operation": "eq", "value": "success"}\n      ],\n      "match_mode": "all",\n      "mapped_status_code": 200\n    },\n    {\n      "conditions": [\n        {"path": "$.response_body.result", "operation": "eq", "value": "error"}\n      ],\n      "match_mode": "all",\n      "mapped_status_code": 400,\n      "error_message_json_path": "$.response_body.error_message"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u30b1\u30fc\u30b92: \u30d3\u30b8\u30cd\u30b9\u30b9\u30c6\u30fc\u30bf\u30b9\u306b\u3088\u308b\u5224\u5b9a"})}),"\n",(0,i.jsx)(n.p,{children:"eKYC\u306e\u5be9\u67fb\u7d50\u679c\u3092\u5224\u5b9a\u3059\u308b\u5834\u5408\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "configs": [\n    {\n      "conditions": [\n        {"path": "$.httpStatusCode", "operation": "eq", "value": 200},\n        {"path": "$.response_body.verification_status", "operation": "eq", "value": "approved"}\n      ],\n      "match_mode": "all",\n      "mapped_status_code": 200\n    },\n    {\n      "conditions": [\n        {"path": "$.httpStatusCode", "operation": "eq", "value": 200},\n        {"path": "$.response_body.verification_status", "operation": "eq", "value": "rejected"}\n      ],\n      "match_mode": "all",\n      "mapped_status_code": 400\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u30b1\u30fc\u30b93: \u8907\u6570\u6761\u4ef6\u306e\u7d44\u307f\u5408\u308f\u305b"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "conditions": [\n    {"path": "$.httpStatusCode", "operation": "in", "value": [200, 201, 204]},\n    {"path": "$.response_body.errors", "operation": "eq", "value": null}\n  ],\n  "match_mode": "all",\n  "mapped_status_code": 200\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u8a55\u4fa1\u9806\u5e8f",children:"\u8a55\u4fa1\u9806\u5e8f"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"configs"}),"\u914d\u5217\u306e",(0,i.jsx)(n.strong,{children:"\u9806\u756a"}),"\u304c\u91cd\u8981"]}),"\n",(0,i.jsx)(n.li,{children:"\u6700\u521d\u306b\u30de\u30c3\u30c1\u3057\u305f\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u308b"}),"\n",(0,i.jsx)(n.li,{children:"\u3088\u308a\u5177\u4f53\u7684\u306a\u6761\u4ef6\u3092\u5148\u306b\u3001\u4e00\u822c\u7684\u306a\u6761\u4ef6\u3092\u5f8c\u306b\u914d\u7f6e"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0",children:"\ud83d\udd04 \u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0"}),"\n",(0,i.jsx)(n.h3,{id:"\u518d\u8a66\u884c\u53ef\u80fd\u306a\u6761\u4ef6",children:"\u518d\u8a66\u884c\u53ef\u80fd\u306a\u6761\u4ef6"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"408 Request Timeout"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"429 Too Many Requests"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"5xx Server Errors"})," (500, 502, 503, 504)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f8b\u5916\u30d9\u30fc\u30b9"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"IOException"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ConnectException"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"SocketTimeoutException"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"HttpTimeoutException"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"499 \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u52d5\u7684\u5236\u5fa1"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// \u518d\u8a66\u884c\u3059\u308b\u5834\u5408\n{\n  "error": "temporary_unavailable",\n  "retryable": true\n}\n\n// \u518d\u8a66\u884c\u3057\u306a\u3044\u5834\u5408\n{\n  "error": "invalid_request",\n  "retryable": false\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u975eJSON\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u51e6\u7406"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["JSON\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306f ",(0,i.jsx)(n.code,{children:"retryable: false"})," \u3068\u3057\u3066\u6271\u3046"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retryable"})," \u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3082 ",(0,i.jsx)(n.code,{children:"false"})," \u3068\u3057\u3066\u6271\u3046"]}),"\n",(0,i.jsxs)(n.li,{children:["\u7a7a\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\u3082 ",(0,i.jsx)(n.code,{children:"false"})," \u3068\u3057\u3066\u6271\u3046"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u4f8b: \u975eJSON\u30ec\u30b9\u30dd\u30f3\u30b9\n// Response: "Client closed connection - not JSON"\n// \u2192 \u518d\u8a66\u884c\u3055\u308c\u306a\u3044 (retryable: false \u3068\u3057\u3066\u6271\u308f\u308c\u308b)\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"retry-after-\u30d8\u30c3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8",children:"Retry-After \u30d8\u30c3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8"}),"\n",(0,i.jsx)(n.p,{children:"RFC 7231 \u6e96\u62e0\u306e Retry-After \u30d8\u30c3\u30c0\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u79d2\u6570\u6307\u5b9a\nRetry-After: 120\n\n// HTTP\u65e5\u4ed8\u6307\u5b9a\nRetry-After: Fri, 31 Dec 1999 23:59:59 GMT\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u30d0\u30c3\u30af\u30aa\u30d5\u6226\u7565",children:"\u30d0\u30c3\u30af\u30aa\u30d5\u6226\u7565"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u6307\u6570\u30d0\u30c3\u30af\u30aa\u30d5"})," (Exponential Backoff) \u3092\u63a1\u7528\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1\u56de\u76ee\u306e\u518d\u8a66\u884c: 1\u79d2\u5f8c\n2\u56de\u76ee\u306e\u518d\u8a66\u884c: 5\u79d2\u5f8c\n3\u56de\u76ee\u306e\u518d\u8a66\u884c: 30\u79d2\u5f8c\n"})}),"\n",(0,i.jsx)(n.p,{children:"Retry-After \u30d8\u30c3\u30c0\u30fc\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001\u305d\u3061\u3089\u304c\u512a\u5148\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",children:"\ud83d\udee1\ufe0f \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"}),"\n",(0,i.jsx)(n.h3,{id:"\u6a5f\u68b0\u53ef\u8aad\u30a8\u30e9\u30fc\u60c5\u5831",children:"\u6a5f\u68b0\u53ef\u8aad\u30a8\u30e9\u30fc\u60c5\u5831"}),"\n",(0,i.jsx)(n.p,{children:"\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u306f\u8a73\u7d30\u306a\u518d\u8a66\u884c\u60c5\u5831\u304c\u542b\u307e\u308c\u307e\u3059\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "rate_limit_exceeded",\n  "error_description": "Too many requests",\n  "retry_info": {\n    "retryable": true,\n    "retry_after_seconds": 60,\n    "max_retries": 3,\n    "attempt": 2\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u51aa\u7b49\u6027\u30c1\u30a7\u30c3\u30af",children:"\u51aa\u7b49\u6027\u30c1\u30a7\u30c3\u30af"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"idempotencyRequired = true"})," \u306e\u5834\u5408\u3001POST/PUT/PATCH \u30ea\u30af\u30a8\u30b9\u30c8\u306b ",(0,i.jsx)(n.code,{children:"Idempotency-Key"})," \u30d8\u30c3\u30c0\u30fc\u304c\u81ea\u52d5\u8ffd\u52a0\u3055\u308c\u307e\u3059\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u30c6\u30b9\u30c8",children:"\ud83e\uddea \u30c6\u30b9\u30c8"}),"\n",(0,i.jsx)(n.h3,{id:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9",children:"\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9"}),"\n",(0,i.jsx)(n.p,{children:"\u5305\u62ec\u7684\u306a\u30c6\u30b9\u30c8\u30b9\u30a4\u30fc\u30c8\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u57fa\u672c\u6a5f\u80fd\u30c6\u30b9\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6210\u529f\u30ec\u30b9\u30dd\u30f3\u30b9\u51e6\u7406"}),"\n",(0,i.jsx)(n.li,{children:"\u30a8\u30e9\u30fc\u30ec\u30b9\u30dd\u30f3\u30b9\u51e6\u7406"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u518d\u8a66\u884c\u30e1\u30ab\u30cb\u30ba\u30e0\u30c6\u30b9\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8a2d\u5b9a\u30d9\u30fc\u30b9\u518d\u8a66\u884c"}),"\n",(0,i.jsx)(n.li,{children:"\u660e\u793a\u7684\u518d\u8a66\u884c"}),"\n",(0,i.jsx)(n.li,{children:"\u6700\u5927\u518d\u8a66\u884c\u56de\u6570\u30c1\u30a7\u30c3\u30af"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"499 \u30ec\u30b9\u30dd\u30f3\u30b9\u30c6\u30b9\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retryable: true"})," \u3067\u306e\u518d\u8a66\u884c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"retryable: false"})," \u3067\u306e\u505c\u6b62"]}),"\n",(0,i.jsx)(n.li,{children:"\u975eJSON\u30ec\u30b9\u30dd\u30f3\u30b9\u51e6\u7406"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Retry-After \u30d8\u30c3\u30c0\u30fc\u30c6\u30b9\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u79d2\u6570\u6307\u5b9a"}),"\n",(0,i.jsx)(n.li,{children:"HTTP\u65e5\u4ed8\u6307\u5b9a"}),"\n",(0,i.jsx)(n.li,{children:"\u5927\u5c0f\u6587\u5b57\u533a\u5225\u306a\u3057"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u30a8\u30e9\u30fc\u60c5\u5831\u30c6\u30b9\u30c8"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6a5f\u68b0\u53ef\u8aad\u30a8\u30e9\u30fc\u60c5\u5831"}),"\n",(0,i.jsx)(n.li,{children:"\u518d\u8a66\u884c\u60c5\u5831\u57cb\u3081\u8fbc\u307f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u30c6\u30b9\u30c8\u5b9f\u884c",children:"\u30c6\u30b9\u30c8\u5b9f\u884c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'./gradlew :libs:idp-server-platform:test --tests "*HttpRequestExecutorTest*"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9",children:"\ud83d\udccb \u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u8a2d\u5b9a\u30d9\u30fc\u30b9\u5b9f\u884c\u306e\u63a8\u5968",children:"1. \u8a2d\u5b9a\u30d9\u30fc\u30b9\u5b9f\u884c\u306e\u63a8\u5968"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u2705 \u63a8\u5968: \u8a2d\u5b9a\u30d9\u30fc\u30b9\nHttpRequestResult result = executor.execute(config, params);\n\n// \u274c \u975e\u63a8\u5968: \u624b\u52d5\u8a2d\u5b9a\nHttpRequest request = buildRequest();\nHttpRequestResult result = executor.executeWithRetry(request, retryConfig);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u9069\u5207\u306a\u518d\u8a66\u884c\u8a2d\u5b9a",children:"2. \u9069\u5207\u306a\u518d\u8a66\u884c\u8a2d\u5b9a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u2705 \u9069\u5207: \u6bb5\u968e\u7684\u30d0\u30c3\u30af\u30aa\u30d5\n.backoffDelays(\n    Duration.ofSeconds(1),   // \u77ed\u3044\u521d\u671f\u9045\u5ef6\n    Duration.ofSeconds(5),   // \u4e2d\u7a0b\u5ea6\u306e\u9045\u5ef6\n    Duration.ofSeconds(30)   // \u9577\u3044\u6700\u7d42\u9045\u5ef6\n)\n\n// \u274c \u4e0d\u9069\u5207: \u56fa\u5b9a\u9045\u5ef6\n.backoffDelays(Duration.ofSeconds(5), Duration.ofSeconds(5), Duration.ofSeconds(5))\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u51aa\u7b49\u6027\u306e\u8003\u616e",children:"3. \u51aa\u7b49\u6027\u306e\u8003\u616e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u2705 POST/PUT/PATCH \u306b\u306f\u51aa\u7b49\u6027\u3092\u8981\u6c42\n.idempotencyRequired(true)  // \u91cd\u8907\u5b9f\u884c\u3092\u9632\u6b62\n\n// \u2705 GET/HEAD/OPTIONS \u306f\u51aa\u7b49\n.idempotencyRequired(false) // \u51aa\u7b49\u6027\u30c1\u30a7\u30c3\u30af\u4e0d\u8981\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0",children:"4. \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public void handleResult(HttpRequestResult result) {\n    if (result.isSuccess()) {\n        // \u6210\u529f\u51e6\u7406\n        return;\n    }\n\n    // \u30a8\u30e9\u30fc\u8a73\u7d30\u306e\u78ba\u8a8d\n    JsonNodeWrapper errorBody = result.body();\n    if (errorBody != null && errorBody.contains("retry_info")) {\n        JsonNodeWrapper retryInfo = errorBody.getNode("retry_info");\n        boolean retryable = retryInfo.getValueAsBoolean("retryable");\n\n        if (retryable) {\n            // \u518d\u8a66\u884c\u53ef\u80fd\u30a8\u30e9\u30fc\n            scheduleRetry();\n        } else {\n            // \u518d\u8a66\u884c\u4e0d\u53ef\u30a8\u30e9\u30fc\n            handlePermanentError();\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\ud83d\udd17 \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,i.jsx)(n.h3,{id:"\u5b9f\u88c5\u30ac\u30a4\u30c9",children:"\u5b9f\u88c5\u30ac\u30a4\u30c9"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration-management-api.md",children:"\u8a2d\u5b9a\u7ba1\u7406 API"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../04-implementation-guides/impl-17-external-integration.md",children:"\u30bf\u30b9\u30af\u30ac\u30a4\u30c9: \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u9023\u643a"})," - HttpRequestExecutor\u5b9f\u8df5\u30ac\u30a4\u30c9"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6280\u8853\u8a73\u7d30",children:"\u6280\u8853\u8a73\u7d30"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../content_10_ai_developer/ai-12-platform.md#httprequestexecutor---http%E9%80%9A%E4%BF%A1",children:"AI\u958b\u767a\u8005\u5411\u3051: Platform - HttpRequestExecutor"})," - HTTP\u901a\u4fe1\u8a73\u7d30\u5b9f\u88c5"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var s=t(96540);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);