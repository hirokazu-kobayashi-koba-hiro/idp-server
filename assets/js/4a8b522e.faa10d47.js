"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[770],{89975:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>j,frontMatter:()=>s,metadata:()=>d,toc:()=>t});const d=JSON.parse('{"id":"content_11_learning/jvm/jvm-07-troubleshooting","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","description":"\u306f\u3058\u3081\u306b","source":"@site/docs/content_11_learning/20-jvm/jvm-07-troubleshooting.md","sourceDirName":"content_11_learning/20-jvm","slug":"/content_11_learning/jvm/jvm-07-troubleshooting","permalink":"/idp-server/docs/content_11_learning/jvm/jvm-07-troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/20-jvm/jvm-07-troubleshooting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9","permalink":"/idp-server/docs/content_11_learning/jvm/jvm-06-performance"},"next":{"title":"Java 21 \u65b0\u6a5f\u80fd","permalink":"/idp-server/docs/content_11_learning/jvm/jvm-08-java21"}}');var i=r(74848),l=r(28453);const s={},c="\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",a={},t=[{value:"\u306f\u3058\u3081\u306b",id:"\u306f\u3058\u3081\u306b",level:2},{value:"\u554f\u984c\u306e\u7a2e\u985e\u3068\u5bfe\u5fdc",id:"\u554f\u984c\u306e\u7a2e\u985e\u3068\u5bfe\u5fdc",level:2},{value:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u5206\u6790",id:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u5206\u6790",level:2},{value:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",id:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",level:3},{value:"Eclipse MAT \u3067\u306e\u5206\u6790",id:"eclipse-mat-\u3067\u306e\u5206\u6790",level:3},{value:"\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306e\u30d1\u30bf\u30fc\u30f3",id:"\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306e\u30d1\u30bf\u30fc\u30f3",level:3},{value:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5206\u6790",id:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5206\u6790",level:2},{value:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",id:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",level:3},{value:"\u30b9\u30ec\u30c3\u30c9\u306e\u72b6\u614b",id:"\u30b9\u30ec\u30c3\u30c9\u306e\u72b6\u614b",level:3},{value:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u691c\u51fa",id:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u691c\u51fa",level:3},{value:"GC\u554f\u984c\u306e\u8abf\u67fb",id:"gc\u554f\u984c\u306e\u8abf\u67fb",level:2},{value:"GC\u30ed\u30b0\u306e\u5206\u6790",id:"gc\u30ed\u30b0\u306e\u5206\u6790",level:3},{value:"\u3088\u304f\u3042\u308bGC\u554f\u984c",id:"\u3088\u304f\u3042\u308bgc\u554f\u984c",level:3},{value:"CPU\u9ad8\u8ca0\u8377\u306e\u8abf\u67fb",id:"cpu\u9ad8\u8ca0\u8377\u306e\u8abf\u67fb",level:2},{value:"\u624b\u9806",id:"\u624b\u9806",level:3},{value:"async-profiler \u306b\u3088\u308b\u5206\u6790",id:"async-profiler-\u306b\u3088\u308b\u5206\u6790",level:3},{value:"OutOfMemoryError \u306e\u7a2e\u985e\u3068\u5bfe\u51e6",id:"outofmemoryerror-\u306e\u7a2e\u985e\u3068\u5bfe\u51e6",level:2},{value:"Java heap space",id:"java-heap-space",level:3},{value:"Metaspace",id:"metaspace",level:3},{value:"Unable to create new native thread",id:"unable-to-create-new-native-thread",level:3},{value:"Direct buffer memory",id:"direct-buffer-memory",level:3},{value:"\u30af\u30e9\u30c3\u30b7\u30e5\u8abf\u67fb",id:"\u30af\u30e9\u30c3\u30b7\u30e5\u8abf\u67fb",level:2},{value:"hs_err_pid.log",id:"hs_err_pidlog",level:3},{value:"\u5206\u6790\u30dd\u30a4\u30f3\u30c8",id:"\u5206\u6790\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\u8a3a\u65ad\u30c4\u30fc\u30eb\u4e00\u89a7",id:"\u8a3a\u65ad\u30c4\u30fc\u30eb\u4e00\u89a7",level:2},{value:"JDK\u4ed8\u5c5e\u30c4\u30fc\u30eb",id:"jdk\u4ed8\u5c5e\u30c4\u30fc\u30eb",level:3},{value:"jcmd \u306e\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9",id:"jcmd-\u306e\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9",level:3},{value:"\u7dca\u6025\u6642\u306e\u5bfe\u5fdc\u30d5\u30ed\u30fc",id:"\u7dca\u6025\u6642\u306e\u5bfe\u5fdc\u30d5\u30ed\u30fc",level:2},{value:"\u307e\u3068\u3081",id:"\u307e\u3068\u3081",level:2},{value:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0",children:"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0"})}),"\n",(0,i.jsx)(n.h2,{id:"\u306f\u3058\u3081\u306b",children:"\u306f\u3058\u3081\u306b"}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u756a\u74b0\u5883\u3067JVM\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u8fc5\u901f\u304b\u3064\u7684\u78ba\u306b\u539f\u56e0\u3092\u7279\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u672c\u7ae0\u3067\u306f\u3001\u3088\u304f\u3042\u308b\u554f\u984c\u3068\u305d\u306e\u8abf\u67fb\u30fb\u89e3\u6c7a\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u554f\u984c\u306e\u7a2e\u985e\u3068\u5bfe\u5fdc",children:"\u554f\u984c\u306e\u7a2e\u985e\u3068\u5bfe\u5fdc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u3088\u304f\u3042\u308b\u554f\u984c\u3068\u8abf\u67fb\u30a2\u30d7\u30ed\u30fc\u30c1                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u554f\u984c                    \u4e3b\u306a\u539f\u56e0              \u8abf\u67fb\u30c4\u30fc\u30eb            \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  OutOfMemoryError       \u30e1\u30e2\u30ea\u30ea\u30fc\u30af           \u30d2\u30fc\u30d7\u30c0\u30f3\u30d7          \u2502\n\u2502  \u9ad8\u30ec\u30a4\u30c6\u30f3\u30b7           GC\u505c\u6b62\u3001\u30ed\u30c3\u30af\u7af6\u5408     GC\u30ed\u30b0\u3001\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u2502\n\u2502  CPU\u9ad8\u8ca0\u8377              \u7121\u9650\u30eb\u30fc\u30d7\u3001\u904e\u5270\u51e6\u7406   \u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3001JFR   \u2502\n\u2502  \u30cf\u30f3\u30b0                 \u30c7\u30c3\u30c9\u30ed\u30c3\u30af           \u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7        \u2502\n\u2502  \u30af\u30e9\u30c3\u30b7\u30e5             \u30cd\u30a4\u30c6\u30a3\u30d6\u554f\u984c         hs\u30a8\u30e9\u30fc\u30ed\u30b0\u3001\u30b3\u30a2\u30c0\u30f3\u30d7\u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u5206\u6790",children:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u5206\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",children:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u306e\u53d6\u5f97"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# jcmd\uff08\u63a8\u5968\uff09\njcmd <pid> GC.heap_dump /path/to/heapdump.hprof\n\n# jmap\njmap -dump:format=b,file=/path/to/heapdump.hprof <pid>\n\n# OOM\u6642\u306b\u81ea\u52d5\u53d6\u5f97\uff08\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\uff09\njava -XX:+HeapDumpOnOutOfMemoryError \\\n     -XX:HeapDumpPath=/var/log/app/heapdump.hprof \\\n     -jar app.jar\n"})}),"\n",(0,i.jsx)(n.h3,{id:"eclipse-mat-\u3067\u306e\u5206\u6790",children:"Eclipse MAT \u3067\u306e\u5206\u6790"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Eclipse MAT \u5206\u6790\u624b\u9806                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  1. \u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u3092\u958b\u304f                                               \u2502\n\u2502     File \u2192 Open Heap Dump                                           \u2502\n\u2502                                                                      \u2502\n\u2502  2. Leak Suspects Report \u3092\u78ba\u8a8d                                      \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502     \u2502 Problem Suspect 1                                          \u2502  \u2502\n\u2502     \u2502 1,234,567 instances of "com.example.Session"               \u2502  \u2502\n\u2502     \u2502 loaded by "org.springframework.boot.loader..."             \u2502  \u2502\n\u2502     \u2502 occupy 512 MB (45% of heap)                                \u2502  \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                      \u2502\n\u2502  3. Dominator Tree \u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u968e\u5c64\u3092\u78ba\u8a8d                          \u2502\n\u2502     \u3069\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30e1\u30e2\u30ea\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u304b                        \u2502\n\u2502                                                                      \u2502\n\u2502  4. Histogram \u3067\u30af\u30e9\u30b9\u5225\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6570\u3092\u78ba\u8a8d                         \u2502\n\u2502     \u7570\u5e38\u306b\u591a\u3044\u30af\u30e9\u30b9\u304c\u306a\u3044\u304b                                        \u2502\n\u2502                                                                      \u2502\n\u2502  5. GC Roots \u3078\u306e\u53c2\u7167\u30d1\u30b9\u3092\u78ba\u8a8d                                      \u2502\n\u2502     \u306a\u305c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cGC\u3055\u308c\u306a\u3044\u306e\u304b                                \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306e\u30d1\u30bf\u30fc\u30f3",children:"\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306e\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30d1\u30bf\u30fc\u30f3"}),(0,i.jsx)(n.th,{children:"\u539f\u56e0\u4f8b"}),(0,i.jsx)(n.th,{children:"\u5bfe\u51e6"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u80a5\u5927\u5316"}),(0,i.jsx)(n.td,{children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u306bTTL\u304c\u306a\u3044"}),(0,i.jsx)(n.td,{children:"TTL\u8a2d\u5b9a\u3001Weak\u53c2\u7167\u4f7f\u7528"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u30ea\u30b9\u30ca\u30fc\u672a\u767b\u9332\u89e3\u9664"}),(0,i.jsx)(n.td,{children:"\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u306e\u89e3\u9664\u5fd8\u308c"}),(0,i.jsx)(n.td,{children:"close()\u3067\u78ba\u5b9f\u306b\u89e3\u9664"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u30b9\u30ec\u30c3\u30c9\u30ed\u30fc\u30ab\u30eb"}),(0,i.jsx)(n.td,{children:"ThreadLocal\u306e\u5024\u672a\u30af\u30ea\u30a2"}),(0,i.jsx)(n.td,{children:"remove()\u3092\u547c\u3073\u51fa\u3059"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"static\u53c2\u7167"}),(0,i.jsx)(n.td,{children:"static\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u4fdd\u6301"}),(0,i.jsx)(n.td,{children:"\u5fc5\u8981\u6027\u3092\u898b\u76f4\u3059"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5206\u6790",children:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5206\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u306e\u53d6\u5f97",children:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u306e\u53d6\u5f97"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# jcmd\uff08\u63a8\u5968\uff09\njcmd <pid> Thread.print > threaddump.txt\n\n# jstack\njstack <pid> > threaddump.txt\n\n# kill -3\uff08\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u529b\uff09\nkill -3 <pid>\n\n# \u8907\u6570\u56de\u53d6\u5f97\uff08\u554f\u984c\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u628a\u63e1\uff09\nfor i in 1 2 3; do\n    jstack <pid> > threaddump_$i.txt\n    sleep 5\ndone\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u30b9\u30ec\u30c3\u30c9\u306e\u72b6\u614b",children:"\u30b9\u30ec\u30c3\u30c9\u306e\u72b6\u614b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u30b9\u30ec\u30c3\u30c9\u306e\u72b6\u614b                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  RUNNABLE                                                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u5b9f\u884c\u4e2d\u307e\u305f\u306f\u5b9f\u884c\u53ef\u80fd                                          \u2502 \u2502\n\u2502  \u2502  CPU\u8ca0\u8377\u304c\u9ad8\u3044\u5834\u5408\u3001\u591a\u304f\u306e\u30b9\u30ec\u30c3\u30c9\u304c\u3053\u306e\u72b6\u614b                   \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2502  BLOCKED                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u30e2\u30cb\u30bf\u30fc\u30ed\u30c3\u30af\u5f85\u3061                                            \u2502 \u2502\n\u2502  \u2502  "waiting to lock 0x00000007abc12345"                          \u2502 \u2502\n\u2502  \u2502  \u591a\u3044\u5834\u5408\u306f\u30ed\u30c3\u30af\u7af6\u5408\u306e\u53ef\u80fd\u6027                                  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2502  WAITING / TIMED_WAITING                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  wait() / sleep() / LockSupport.park() \u7b49\u3067\u5f85\u6a5f\u4e2d              \u2502 \u2502\n\u2502  \u2502  \u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u306e\u5f85\u6a5f\u30b9\u30ec\u30c3\u30c9\u306a\u3069\u6b63\u5e38\u306a\u5834\u5408\u3082\u591a\u3044              \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u691c\u51fa",children:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u691c\u51fa"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3067\u306e\u8868\u793a\u4f8b:\n\nFound one Java-level deadlock:\n=============================\n"Thread-1":\n  waiting to lock monitor 0x00007f1234567890 (object 0x00000007abc, a java.lang.Object),\n  which is held by "Thread-2"\n"Thread-2":\n  waiting to lock monitor 0x00007f1234567891 (object 0x00000007abd, a java.lang.Object),\n  which is held by "Thread-1"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u306e\u4f8b\n// Thread 1\nsynchronized(lockA) {\n    Thread.sleep(100);\n    synchronized(lockB) { ... }  // lockB\u5f85\u3061\n}\n\n// Thread 2\nsynchronized(lockB) {\n    Thread.sleep(100);\n    synchronized(lockA) { ... }  // lockA\u5f85\u3061\n}\n\n// \u89e3\u6c7a\u7b56: \u30ed\u30c3\u30af\u9806\u5e8f\u3092\u7d71\u4e00\nsynchronized(lockA) {\n    synchronized(lockB) { ... }\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"gc\u554f\u984c\u306e\u8abf\u67fb",children:"GC\u554f\u984c\u306e\u8abf\u67fb"}),"\n",(0,i.jsx)(n.h3,{id:"gc\u30ed\u30b0\u306e\u5206\u6790",children:"GC\u30ed\u30b0\u306e\u5206\u6790"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# GC\u30ed\u30b0\u304b\u3089\u505c\u6b62\u6642\u9593\u3092\u62bd\u51fa\ngrep "Pause" gc.log | awk \'{print $NF}\'\n\n# \u9577\u3044\u505c\u6b62\u6642\u9593\u306e\u307f\u62bd\u51fa\ngrep "Pause" gc.log | awk \'{gsub("ms","",$NF); if($NF > 200) print}\'\n\n# GC\u983b\u5ea6\u306e\u78ba\u8a8d\ngrep -c "Pause Young" gc.log\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u3088\u304f\u3042\u308bgc\u554f\u984c",children:"\u3088\u304f\u3042\u308bGC\u554f\u984c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    GC\u554f\u984c\u306e\u30d1\u30bf\u30fc\u30f3                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  \u75c7\u72b6: \u983b\u7e41\u306aMinor GC                                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u539f\u56e0: Eden\u9818\u57df\u304c\u5c0f\u3055\u3044\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u904e\u591a                  \u2502 \u2502\n\u2502  \u2502  \u5bfe\u7b56: \u30d2\u30fc\u30d7\u5897\u52a0\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u518d\u5229\u7528                          \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2502  \u75c7\u72b6: \u9577\u3044Full GC                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u539f\u56e0: Old\u9818\u57df\u306e\u80a5\u5927\u5316\u3001\u30e1\u30e2\u30ea\u30ea\u30fc\u30af                           \u2502 \u2502\n\u2502  \u2502  \u5bfe\u7b56: \u30ea\u30fc\u30af\u4fee\u6b63\u3001\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u5206\u6790                            \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2502  \u75c7\u72b6: GC overhead limit exceeded                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u539f\u56e0: GC\u306b98%\u4ee5\u4e0a\u306e\u6642\u9593\u3092\u8cbb\u3084\u3057\u3066\u30822%\u672a\u6e80\u3057\u304b\u56de\u53ce\u3067\u304d\u306a\u3044     \u2502 \u2502\n\u2502  \u2502  \u5bfe\u7b56: \u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u8abf\u67fb\u3001\u30d2\u30fc\u30d7\u5897\u52a0                            \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2502  \u75c7\u72b6: To-space exhausted (G1 GC)                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  \u539f\u56e0: \u6607\u683c\u5148\u306eOld\u9818\u57df\u4e0d\u8db3                                     \u2502 \u2502\n\u2502  \u2502  \u5bfe\u7b56: G1ReservePercent\u5897\u52a0\u3001\u30d2\u30fc\u30d7\u5897\u52a0                        \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"cpu\u9ad8\u8ca0\u8377\u306e\u8abf\u67fb",children:"CPU\u9ad8\u8ca0\u8377\u306e\u8abf\u67fb"}),"\n",(0,i.jsx)(n.h3,{id:"\u624b\u9806",children:"\u624b\u9806"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. CPU\u4f7f\u7528\u7387\u306e\u9ad8\u3044\u30d7\u30ed\u30bb\u30b9\u3092\u7279\u5b9a\ntop -c\n\n# 2. \u8a72\u5f53\u30d7\u30ed\u30bb\u30b9\u306e\u30b9\u30ec\u30c3\u30c9\u5225CPU\u4f7f\u7528\u7387\ntop -H -p <pid>\n\n# 3. \u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3092\u53d6\u5f97\njstack <pid> > threaddump.txt\n\n# 4. CPU\u4f7f\u7528\u7387\u306e\u9ad8\u3044\u30b9\u30ec\u30c3\u30c9ID\uff0810\u9032\u6570\u219216\u9032\u6570\u5909\u63db\uff09\nprintf '%x\\n' <thread_id>\n\n# 5. \u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u304b\u3089\u8a72\u5f53\u30b9\u30ec\u30c3\u30c9\u3092\u691c\u7d22\ngrep -A 30 \"nid=0x<hex_thread_id>\" threaddump.txt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"async-profiler-\u306b\u3088\u308b\u5206\u6790",children:"async-profiler \u306b\u3088\u308b\u5206\u6790"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# CPU \u30d7\u30ed\u30d5\u30a1\u30a4\u30ea\u30f3\u30b0\n./profiler.sh -d 30 -f flamegraph.html <pid>\n\n# \u51fa\u529b: \u30d5\u30ec\u30fc\u30e0\u30b0\u30e9\u30d5\uff08\u3069\u306e\u30e1\u30bd\u30c3\u30c9\u304cCPU\u3092\u6d88\u8cbb\u3057\u3066\u3044\u308b\u304b\u53ef\u8996\u5316\uff09\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"outofmemoryerror-\u306e\u7a2e\u985e\u3068\u5bfe\u51e6",children:"OutOfMemoryError \u306e\u7a2e\u985e\u3068\u5bfe\u51e6"}),"\n",(0,i.jsx)(n.h3,{id:"java-heap-space",children:"Java heap space"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"java.lang.OutOfMemoryError: Java heap space\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u5bfe\u51e6\n# 1. \u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u3092\u5206\u6790\u3057\u3066\u30ea\u30fc\u30af\u7b87\u6240\u3092\u7279\u5b9a\n# 2. \u30d2\u30fc\u30d7\u30b5\u30a4\u30ba\u3092\u5897\u52a0\njava -Xmx4g -jar app.jar\n\n# 3. GC\u30ed\u30b0\u3067\u983b\u5ea6\u30fb\u56de\u53ce\u91cf\u3092\u78ba\u8a8d\n"})}),"\n",(0,i.jsx)(n.h3,{id:"metaspace",children:"Metaspace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"java.lang.OutOfMemoryError: Metaspace\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u5bfe\u51e6\n# 1. \u30af\u30e9\u30b9\u30ed\u30fc\u30c0\u30fc\u30ea\u30fc\u30af\u306e\u8abf\u67fb\n# 2. Metaspace\u30b5\u30a4\u30ba\u3092\u5897\u52a0\njava -XX:MaxMetaspaceSize=512m -jar app.jar\n\n# 3. \u52d5\u7684\u30af\u30e9\u30b9\u751f\u6210\uff08\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3001CGLib\u7b49\uff09\u306e\u898b\u76f4\u3057\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unable-to-create-new-native-thread",children:"Unable to create new native thread"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"java.lang.OutOfMemoryError: unable to create new native thread\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u5bfe\u51e6\n# 1. \u30b9\u30ec\u30c3\u30c9\u6570\u4e0a\u9650\u306e\u78ba\u8a8d\nulimit -u\n\n# 2. \u30b9\u30bf\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6e1b\u3089\u3059\njava -Xss512k -jar app.jar\n\n# 3. \u30a2\u30d7\u30ea\u306e\u30b9\u30ec\u30c3\u30c9\u751f\u6210\u3092\u898b\u76f4\u3057\n"})}),"\n",(0,i.jsx)(n.h3,{id:"direct-buffer-memory",children:"Direct buffer memory"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"java.lang.OutOfMemoryError: Direct buffer memory\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u5bfe\u51e6\n# 1. Direct Memory\u30b5\u30a4\u30ba\u3092\u5897\u52a0\njava -XX:MaxDirectMemorySize=512m -jar app.jar\n\n# 2. NIO\u30d0\u30c3\u30d5\u30a1\u306e\u9069\u5207\u306a\u89e3\u653e\u3092\u78ba\u8a8d\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u30af\u30e9\u30c3\u30b7\u30e5\u8abf\u67fb",children:"\u30af\u30e9\u30c3\u30b7\u30e5\u8abf\u67fb"}),"\n",(0,i.jsx)(n.h3,{id:"hs_err_pidlog",children:"hs_err_pid.log"}),"\n",(0,i.jsxs)(n.p,{children:["JVM\u304c\u30af\u30e9\u30c3\u30b7\u30e5\u3059\u308b\u3068 ",(0,i.jsx)(n.code,{children:"hs_err_pid<pid>.log"})," \u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f1234567890, pid=12345, tid=0x00007f1234567891\n#\n# JRE version: OpenJDK Runtime Environment (21.0.1+12) (build 21.0.1+12-29)\n# Java VM: OpenJDK 64-Bit Server VM (21.0.1+12-29, mixed mode, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# C  [libc.so.6+0x12345]  strlen+0x20\n#\n# Core dump written. Default location: /path/to/core\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u5206\u6790\u30dd\u30a4\u30f3\u30c8",children:"\u5206\u6790\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30bb\u30af\u30b7\u30e7\u30f3"}),(0,i.jsx)(n.th,{children:"\u78ba\u8a8d\u5185\u5bb9"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Header"}),(0,i.jsx)(n.td,{children:"\u30b7\u30b0\u30ca\u30eb\u3001\u767a\u751f\u5834\u6240"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Thread"}),(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u306e\u30b9\u30bf\u30c3\u30af"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Process"}),(0,i.jsx)(n.td,{children:"\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3001\u74b0\u5883\u5909\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VM Arguments"}),(0,i.jsx)(n.td,{children:"JVM\u30aa\u30d7\u30b7\u30e7\u30f3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Dynamic libraries"}),(0,i.jsx)(n.td,{children:"\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30cd\u30a4\u30c6\u30a3\u30d6\u30e9\u30a4\u30d6\u30e9\u30ea"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u8a3a\u65ad\u30c4\u30fc\u30eb\u4e00\u89a7",children:"\u8a3a\u65ad\u30c4\u30fc\u30eb\u4e00\u89a7"}),"\n",(0,i.jsx)(n.h3,{id:"jdk\u4ed8\u5c5e\u30c4\u30fc\u30eb",children:"JDK\u4ed8\u5c5e\u30c4\u30fc\u30eb"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u30c4\u30fc\u30eb"}),(0,i.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jps"}),(0,i.jsx)(n.td,{children:"Java\u30d7\u30ed\u30bb\u30b9\u4e00\u89a7"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jinfo"}),(0,i.jsx)(n.td,{children:"JVM\u30aa\u30d7\u30b7\u30e7\u30f3\u78ba\u8a8d\u30fb\u5909\u66f4"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jstat"}),(0,i.jsx)(n.td,{children:"GC\u7d71\u8a08"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jstack"}),(0,i.jsx)(n.td,{children:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jmap"}),(0,i.jsx)(n.td,{children:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7\u3001\u30d2\u30fc\u30d7\u7d71\u8a08"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jcmd"}),(0,i.jsx)(n.td,{children:"\u7dcf\u5408\u8a3a\u65ad\u30b3\u30de\u30f3\u30c9"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"jfr"}),(0,i.jsx)(n.td,{children:"Flight Recorder\u64cd\u4f5c"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"jcmd-\u306e\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9",children:"jcmd \u306e\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u30d7\u30ed\u30bb\u30b9\u4e00\u89a7\njcmd\n\n# VM\u60c5\u5831\njcmd <pid> VM.version\njcmd <pid> VM.flags\njcmd <pid> VM.system_properties\n\n# GC\njcmd <pid> GC.run\njcmd <pid> GC.heap_info\njcmd <pid> GC.heap_dump /path/to/dump.hprof\n\n# \u30b9\u30ec\u30c3\u30c9\njcmd <pid> Thread.print\n\n# JFR\njcmd <pid> JFR.start duration=60s filename=recording.jfr\njcmd <pid> JFR.dump filename=recording.jfr\njcmd <pid> JFR.stop\n\n# Native Memory Tracking\uff08\u8981: -XX:NativeMemoryTracking=summary\uff09\njcmd <pid> VM.native_memory summary\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u7dca\u6025\u6642\u306e\u5bfe\u5fdc\u30d5\u30ed\u30fc",children:"\u7dca\u6025\u6642\u306e\u5bfe\u5fdc\u30d5\u30ed\u30fc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u7dca\u6025\u6642\u5bfe\u5fdc\u30d5\u30ed\u30fc                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  1. \u8a3c\u62e0\u4fdd\u5168\uff08\u6700\u512a\u5148\uff09                                               \u2502\n\u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502     \u2502 jcmd <pid> Thread.print > /tmp/thread_$(date +%s).txt      \u2502  \u2502\n\u2502     \u2502 jcmd <pid> GC.heap_dump /tmp/heap_$(date +%s).hprof        \u2502  \u2502\n\u2502     \u2502 cp gc.log /tmp/gc_$(date +%s).log                          \u2502  \u2502\n\u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                      \u2502\n\u2502  2. \u5f71\u97ff\u7bc4\u56f2\u306e\u78ba\u8a8d                                                   \u2502\n\u2502     \u30fb\u30a8\u30e9\u30fc\u7387\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u3001\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u3092\u76e3\u8996                      \u2502\n\u2502     \u30fb\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u5f71\u97ff                                          \u2502\n\u2502                                                                      \u2502\n\u2502  3. \u4e00\u6642\u5bfe\u51e6                                                         \u2502\n\u2502     \u30fb\u554f\u984c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u304b\u3089\u9664\u5916                      \u2502\n\u2502     \u30fb\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u518d\u8d77\u52d5                                            \u2502\n\u2502                                                                      \u2502\n\u2502  4. \u6839\u672c\u539f\u56e0\u5206\u6790\uff08\u4e8b\u5f8c\uff09                                             \u2502\n\u2502     \u30fb\u4fdd\u5168\u3057\u305f\u8a3c\u62e0\u3092\u5206\u6790                                            \u2502\n\u2502     \u30fb\u518d\u73fe\u624b\u9806\u306e\u7279\u5b9a                                                \u2502\n\u2502     \u30fb\u6052\u4e45\u5bfe\u7b56\u306e\u5b9f\u65bd                                                \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u307e\u3068\u3081",children:"\u307e\u3068\u3081"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u554f\u984c"}),(0,i.jsx)(n.th,{children:"\u4e3b\u8981\u30c4\u30fc\u30eb"}),(0,i.jsx)(n.th,{children:"\u4e3b\u306a\u5bfe\u51e6"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OOM (heap)"}),(0,i.jsx)(n.td,{children:"\u30d2\u30fc\u30d7\u30c0\u30f3\u30d7 + MAT"}),(0,i.jsx)(n.td,{children:"\u30ea\u30fc\u30af\u4fee\u6b63\u3001\u30d2\u30fc\u30d7\u5897\u52a0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u9ad8\u30ec\u30a4\u30c6\u30f3\u30b7"}),(0,i.jsx)(n.td,{children:"GC\u30ed\u30b0\u3001\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7"}),(0,i.jsx)(n.td,{children:"GC\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3001\u30ed\u30c3\u30af\u6539\u5584"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CPU\u9ad8\u8ca0\u8377"}),(0,i.jsx)(n.td,{children:"top -H\u3001async-profiler"}),(0,i.jsx)(n.td,{children:"\u554f\u984c\u30b3\u30fc\u30c9\u306e\u4fee\u6b63"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u30cf\u30f3\u30b0"}),(0,i.jsx)(n.td,{children:"\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7"}),(0,i.jsx)(n.td,{children:"\u30c7\u30c3\u30c9\u30ed\u30c3\u30af\u89e3\u6d88"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u30af\u30e9\u30c3\u30b7\u30e5"}),(0,i.jsx)(n.td,{children:"hs_err_pid.log"}),(0,i.jsx)(n.td,{children:"\u30cd\u30a4\u30c6\u30a3\u30d6\u554f\u984c\u306e\u8abf\u67fb"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7",children:"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/idp-server/docs/content_11_learning/jvm/jvm-08-java21",children:"Java 21\u65b0\u6a5f\u80fd"})," - Virtual Threads\u306b\u3088\u308b\u65b0\u3057\u3044\u30b9\u30ec\u30c3\u30c9\u30e2\u30c7\u30eb"]}),"\n"]})]})}function j(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var d=r(96540);const i={},l=d.createContext(i);function s(e){const n=d.useContext(l);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),d.createElement(l.Provider,{value:n},e.children)}}}]);