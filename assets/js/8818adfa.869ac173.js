"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9364],{92674:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"content_06_developer-guide/implementation-guides/oauth-oidc/scope-claims-management","title":"Scope & Claims","description":"\ud83d\udccd \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4f4d\u7f6e\u3065\u3051","source":"@site/docs/content_06_developer-guide/04-implementation-guides/oauth-oidc/scope-claims-management.md","sourceDirName":"content_06_developer-guide/04-implementation-guides/oauth-oidc","slug":"/content_06_developer-guide/implementation-guides/oauth-oidc/scope-claims-management","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/oauth-oidc/scope-claims-management","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_06_developer-guide/04-implementation-guides/oauth-oidc/scope-claims-management.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"PKCE","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/oauth-oidc/pkce"},"next":{"title":"\u8a8d\u8a3c\u30a4\u30f3\u30bf\u30e9\u30af\u30bf\u30fc","permalink":"/idp-server/docs/content_06_developer-guide/implementation-guides/authentication/authentication-interactor"}}');var r=i(74848),a=i(28453);const l={},c="Scope & Claims",t={},o=[{value:"\ud83d\udccd \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4f4d\u7f6e\u3065\u3051",id:"-\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4f4d\u7f6e\u3065\u3051",level:2},{value:"\ud83c\udfd7\ufe0f \u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u95a2\u4fc2",id:"\ufe0f-\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u95a2\u4fc2",level:2},{value:"OAuth 2.0\u306b\u304a\u3051\u308bScope",id:"oauth-20\u306b\u304a\u3051\u308bscope",level:3},{value:"OpenID Connect\u306b\u304a\u3051\u308bClaim",id:"openid-connect\u306b\u304a\u3051\u308bclaim",level:3},{value:"\ud83d\udccb \u6a19\u6e96\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u30de\u30c3\u30d4\u30f3\u30b0",id:"-\u6a19\u6e96\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u30de\u30c3\u30d4\u30f3\u30b0",level:2},{value:"\u6a19\u6e96\u30de\u30c3\u30d4\u30f3\u30b0",id:"\u6a19\u6e96\u30de\u30c3\u30d4\u30f3\u30b0",level:3},{value:"\u5b9f\u88c5: IndividualClaimsCreatable",id:"\u5b9f\u88c5-individualclaimscreatable",level:3},{value:"\ud83c\udfaf 3\u7a2e\u985e\u306e\u30af\u30ec\u30fc\u30e0\u51fa\u529b\u5148",id:"-3\u7a2e\u985e\u306e\u30af\u30ec\u30fc\u30e0\u51fa\u529b\u5148",level:2},{value:"1. ID\u30c8\u30fc\u30af\u30f3 (ID Token)",id:"1-id\u30c8\u30fc\u30af\u30f3-id-token",level:3},{value:"2. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 (Access Token)",id:"2-\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3-access-token",level:3},{value:"3. Userinfo \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",id:"3-userinfo-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",level:3},{value:"\ud83d\udd0c \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u88c5",id:"-\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u88c5",level:2},{value:"1. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",id:"1-\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",level:3},{value:"\u5b9f\u88c5\u4f8b: ScopeMappingCustomClaimsCreator",id:"\u5b9f\u88c5\u4f8b-scopemappingcustomclaimscreator",level:4},{value:"2. ID\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",id:"2-id\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",level:3},{value:"\u5b9f\u88c5\u4f8b: \u7d44\u7e54\u60c5\u5831\u306e\u8ffd\u52a0",id:"\u5b9f\u88c5\u4f8b-\u7d44\u7e54\u60c5\u5831\u306e\u8ffd\u52a0",level:4},{value:"3. \u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332",id:"3-\u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332",level:3},{value:"\ud83d\udd27 \u5b9f\u88c5\u30d5\u30ed\u30fc",id:"-\u5b9f\u88c5\u30d5\u30ed\u30fc",level:2},{value:"ID\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc",id:"id\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc",level:3},{value:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc\uff08JWT\u5f62\u5f0f\uff09",id:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fcjwt\u5f62\u5f0f",level:3},{value:"\ud83e\uddea \u30c6\u30b9\u30c8\u5b9f\u88c5\u4f8b",id:"-\u30c6\u30b9\u30c8\u5b9f\u88c5\u4f8b",level:2},{value:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30c6\u30b9\u30c8",id:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30c6\u30b9\u30c8",level:3},{value:"Scope\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30c6\u30b9\u30c8",id:"scope\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30c6\u30b9\u30c8",level:3},{value:"\ud83d\udccb \u5b9f\u88c5\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",id:"-\u5b9f\u88c5\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",level:2},{value:"AccessTokenCustomClaimsCreator",id:"accesstokencustomclaimscreator",level:3},{value:"CustomIndividualClaimsCreator (ID\u30c8\u30fc\u30af\u30f3\u7528)",id:"customindividualclaimscreator-id\u30c8\u30fc\u30af\u30f3\u7528",level:3},{value:"\ud83d\udea8 \u3088\u304f\u3042\u308b\u9593\u9055\u3044",id:"-\u3088\u304f\u3042\u308b\u9593\u9055\u3044",level:2},{value:"1. \u30b9\u30b3\u30fc\u30d7\u306e\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",id:"1-\u30b9\u30b3\u30fc\u30d7\u306e\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",level:3},{value:"2. \u30c7\u30fc\u30bf\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",id:"2-\u30c7\u30fc\u30bf\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",level:3},{value:"3. \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u53bb\u5fd8\u308c",id:"3-\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u53bb\u5fd8\u308c",level:3},{value:"4. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3068\u30b9\u30b3\u30fc\u30d7\u306e\u6df7\u540c",id:"4-\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3068\u30b9\u30b3\u30fc\u30d7\u306e\u6df7\u540c",level:3},{value:"\ud83d\udd17 \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",id:"-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"scope--claims",children:"Scope & Claims"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4f4d\u7f6e\u3065\u3051",children:"\ud83d\udccd \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4f4d\u7f6e\u3065\u3051"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5bfe\u8c61\u8aad\u8005"}),": OAuth 2.0/OIDC \u306e\u30b9\u30b3\u30fc\u30d7\u30fb\u30af\u30ec\u30fc\u30e0\u7ba1\u7406\u306e\u5b9f\u88c5\u8a73\u7d30\u3092\u7406\u89e3\u3057\u305f\u3044\u958b\u767a\u8005"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u5b66\u3079\u308b\u3053\u3068"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u30b9\u30b3\u30fc\u30d7\u7ba1\u7406\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3"}),"\n",(0,r.jsx)(n.li,{children:"ID\u30c8\u30fc\u30af\u30f3\u30fb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u30fbUserinfo\u3067\u306e\u30af\u30ec\u30fc\u30e0\u751f\u6210"}),"\n",(0,r.jsx)(n.li,{children:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5b9f\u88c5\u65b9\u6cd5"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:"}),"/",(0,r.jsx)(n.code,{children:"verified_claims:"}),"\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306e\u4ed5\u7d44\u307f"]}),"\n",(0,r.jsx)(n.li,{children:"\u6a19\u6e96\u30af\u30ec\u30fc\u30e0\u306e\u30b9\u30b3\u30fc\u30d7\u30de\u30c3\u30d4\u30f3\u30b0"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u524d\u63d0\u77e5\u8b58"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../content_03_concepts/basic/basic-12-openid-connect-detail.md",children:"basic-12: OpenID Connect\u8a73\u89e3"}),"\u306e\u7406\u89e3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../content_03_concepts/04-tokens-claims/concept-03-custom-claims.md",children:"concept-09: \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0"}),"\u306e\u7406\u89e3"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./impl-12-plugin-implementation.md",children:"impl-12: Plugin\u5b9f\u88c5\u30ac\u30a4\u30c9"}),"\u306e\u7406\u89e3"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u95a2\u4fc2",children:"\ud83c\udfd7\ufe0f \u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u95a2\u4fc2"}),"\n",(0,r.jsx)(n.h3,{id:"oauth-20\u306b\u304a\u3051\u308bscope",children:"OAuth 2.0\u306b\u304a\u3051\u308bScope"}),"\n",(0,r.jsx)(n.p,{children:"**Scope\uff08\u30b9\u30b3\u30fc\u30d7\uff09**\u306f\u3001\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e\u7bc4\u56f2\u3092\u5b9a\u7fa9\u3059\u308b\u6587\u5b57\u5217\u30ea\u30b9\u30c8\u3067\u3059\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class Scopes implements Iterable<String> {\n  Set<String> values;  // \u30b9\u30da\u30fc\u30b9\u533a\u5207\u308a\u6587\u5b57\u5217\u3092 Set \u3067\u7ba1\u7406\n\n  public Scopes(String value) {\n    // "openid profile email" \u2192 Set("openid", "profile", "email")\n    this.values = Arrays.stream(value.split(" ")).collect(Collectors.toSet());\n  }\n\n  public boolean contains(String scope) {\n    return values.contains(scope);\n  }\n\n  public boolean hasOpenidScope() {\n    return values.contains("openid");\n  }\n\n  public Scopes filterMatchedPrefix(String prefix) {\n    // \u7279\u5b9a\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u30de\u30c3\u30c1\u3059\u308b\u30b9\u30b3\u30fc\u30d7\u3092\u30d5\u30a3\u30eb\u30bf\n    Set<String> filteredValues =\n        values.stream().filter(value -> value.startsWith(prefix))\n              .collect(Collectors.toSet());\n    return new Scopes(filteredValues);\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/type/oauth/Scopes.java#L47",children:"Scopes.java:47"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u4e3b\u306a\u30e1\u30bd\u30c3\u30c9"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"contains(String scope)"})," - \u30b9\u30b3\u30fc\u30d7\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hasOpenidScope()"})," - ",(0,r.jsx)(n.code,{children:"openid"}),"\u30b9\u30b3\u30fc\u30d7\u306e\u6709\u7121\u78ba\u8a8d"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hasScopeMatchedPrefix(String prefix)"})," - \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30de\u30c3\u30c1\u30f3\u30b0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"filterMatchedPrefix(String prefix)"})," - \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"removeScopes(DeniedScopes)"})," - \u62d2\u5426\u30b9\u30b3\u30fc\u30d7\u306e\u9664\u5916"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"openid-connect\u306b\u304a\u3051\u308bclaim",children:"OpenID Connect\u306b\u304a\u3051\u308bClaim"}),"\n",(0,r.jsx)(n.p,{children:"**Claim\uff08\u30af\u30ec\u30fc\u30e0\uff09**\u306f\u3001ID\u30c8\u30fc\u30af\u30f3\u3084Userinfo\u3067\u8fd4\u3055\u308c\u308b\u30e6\u30fc\u30b6\u30fc\u5c5e\u6027\u60c5\u5831\u3067\u3059\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class Claims {\n  Set<String> values;\n\n  public Claims(String value) {\n    // "name email phone_number" \u2192 Set("name", "email", "phone_number")\n    this.values = Arrays.stream(value.split(" ")).collect(Collectors.toSet());\n  }\n\n  public boolean contains(String claim) {\n    return values.contains(claim);\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/type/oidc/Claims.java#L26",children:"Claims.java:26"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u6a19\u6e96\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u30de\u30c3\u30d4\u30f3\u30b0",children:"\ud83d\udccb \u6a19\u6e96\u30b9\u30b3\u30fc\u30d7\u3068\u30af\u30ec\u30fc\u30e0\u306e\u30de\u30c3\u30d4\u30f3\u30b0"}),"\n",(0,r.jsx)(n.p,{children:"OIDC Core\u4ed5\u69d8\u3067\u306f\u3001\u30b9\u30b3\u30fc\u30d7\u306b\u5bfe\u5fdc\u3059\u308b\u30af\u30ec\u30fc\u30e0\u30bb\u30c3\u30c8\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u6a19\u6e96\u30de\u30c3\u30d4\u30f3\u30b0",children:"\u6a19\u6e96\u30de\u30c3\u30d4\u30f3\u30b0"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scope"}),(0,r.jsx)(n.th,{children:"\u8fd4\u3055\u308c\u308bClaims"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"openid"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sub"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"profile"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"name"}),", ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"picture"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"}),", ",(0,r.jsx)(n.code,{children:"locale"}),", ",(0,r.jsx)(n.code,{children:"updated_at"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"email"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"email"}),", ",(0,r.jsx)(n.code,{children:"email_verified"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"phone"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"phone_number"}),", ",(0,r.jsx)(n.code,{children:"phone_number_verified"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"address"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"address"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u5b9f\u88c5-individualclaimscreatable",children:"\u5b9f\u88c5: IndividualClaimsCreatable"}),"\n",(0,r.jsxs)(n.p,{children:["\u6a19\u6e96\u30af\u30ec\u30fc\u30e0\u306e\u751f\u6210\u306f",(0,r.jsx)(n.code,{children:"IndividualClaimsCreatable"}),"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public interface IndividualClaimsCreatable extends ClaimHashable {\n\n  default Map<String, Object> createIndividualClaims(\n      User user,\n      GrantIdTokenClaims idTokenClaims,\n      boolean idTokenStrictMode,\n      RequestedIdTokenClaims requestedIdTokenClaims) {\n\n    HashMap<String, Object> claims = new HashMap<>();\n\n    // sub \u306f\u5e38\u306b\u542b\u307e\u308c\u308b\n    claims.put("sub", user.sub());\n\n    // profile \u30b9\u30b3\u30fc\u30d7\n    if (idTokenClaims.hasName() && user.hasName()) {\n      claims.put("name", user.name());\n    }\n    if (idTokenClaims.hasGivenName() && user.hasGivenName()) {\n      claims.put("given_name", user.givenName());\n    }\n    if (idTokenClaims.hasFamilyName() && user.hasFamilyName()) {\n      claims.put("family_name", user.familyName());\n    }\n    // ...\u305d\u306e\u4ed6\u306eprofile\u30af\u30ec\u30fc\u30e0\n\n    // email \u30b9\u30b3\u30fc\u30d7\n    if (idTokenClaims.hasEmail() && user.hasEmail()) {\n      claims.put("email", user.email());\n    }\n    if (idTokenClaims.hasEmailVerified() && user.hasEmailVerified()) {\n      claims.put("email_verified", user.emailVerified());\n    }\n\n    // phone \u30b9\u30b3\u30fc\u30d7\n    if (idTokenClaims.hasPhoneNumber() && user.hasPhoneNumber()) {\n      claims.put("phone_number", user.phoneNumber());\n    }\n\n    // address \u30b9\u30b3\u30fc\u30d7\n    if (idTokenClaims.hasAddress() && user.hasAddress()) {\n      claims.put("address", user.address().toMap());\n    }\n\n    return claims;\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/id_token/IndividualClaimsCreatable.java#L25",children:"IndividualClaimsCreatable.java:25"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c8"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"2\u6bb5\u968e\u30c1\u30a7\u30c3\u30af"}),": ",(0,r.jsx)(n.code,{children:"idTokenClaims.hasXxx() && user.hasXxx()"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"idTokenClaims.hasXxx()"}),": \u30b9\u30b3\u30fc\u30d7\u3067\u8981\u6c42\u3055\u308c\u3066\u3044\u308b\u304b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user.hasXxx()"}),": \u30e6\u30fc\u30b6\u30fc\u304c\u305d\u306e\u5c5e\u6027\u3092\u6301\u3063\u3066\u3044\u308b\u304b"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30c7\u30fc\u30bf\u304c\u306a\u3044\u5834\u5408\u306f\u542b\u3081\u306a\u3044"}),": \u4e21\u65b9\u304ctrue\u306e\u5834\u5408\u306e\u307f\u30af\u30ec\u30fc\u30e0\u3092\u8ffd\u52a0"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"sub \u306f\u5e38\u306b\u5fc5\u9808"}),": ",(0,r.jsx)(n.code,{children:"openid"}),"\u30b9\u30b3\u30fc\u30d7\u304c\u3042\u308b\u5834\u5408\u3001",(0,r.jsx)(n.code,{children:"sub"}),"\u306f\u5e38\u306b\u542b\u307e\u308c\u308b"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-3\u7a2e\u985e\u306e\u30af\u30ec\u30fc\u30e0\u51fa\u529b\u5148",children:"\ud83c\udfaf 3\u7a2e\u985e\u306e\u30af\u30ec\u30fc\u30e0\u51fa\u529b\u5148"}),"\n",(0,r.jsx)(n.p,{children:"idp-server\u3067\u306f\u3001\u30af\u30ec\u30fc\u30e0\u304c3\u3064\u306e\u5834\u6240\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"1-id\u30c8\u30fc\u30af\u30f3-id-token",children:"1. ID\u30c8\u30fc\u30af\u30f3 (ID Token)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u9014"}),": \u8a8d\u8a3c\u60c5\u5831\u306e\u8a3c\u660e\uff08JWT\u5f62\u5f0f\uff09"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class IdTokenCreator implements IndividualClaimsCreatable {\n\n  public IdToken createIdToken(\n      User user,\n      Authentication authentication,\n      AuthorizationGrant authorizationGrant,\n      IdTokenCustomClaims customClaims,\n      RequestedClaimsPayload requestedClaimsPayload,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration) {\n\n    // 1. \u6a19\u6e96\u30af\u30ec\u30fc\u30e0\u751f\u6210\n    Map<String, Object> claims = createIndividualClaims(\n        user, authentication, customClaims, authorizationGrant,\n        requestedClaimsPayload, ...);\n\n    // 2. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u751f\u6210\uff08\u30d7\u30e9\u30b0\u30a4\u30f3\uff09\n    Map<String, Object> customIndividualClaims =\n        customIndividualClaimsCreators.createCustomIndividualClaims(\n            user, authentication, authorizationGrant, ...);\n    claims.putAll(customIndividualClaims);\n\n    // 3. JWS\u7f72\u540d\n    JsonWebSignature jws = factory.createWithAsymmetricKey(claims, ...);\n\n    // 4. JWE\u6697\u53f7\u5316\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a\u306b\u3088\u308b\uff09\n    if (clientConfiguration.hasEncryptedIdTokenMeta()) {\n      String jwe = nestedJweCreator.create();\n      return new IdToken(jwe);\n    }\n\n    return new IdToken(jws.serialize());\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/id_token/IdTokenCreator.java#L36",children:"IdTokenCreator.java:36"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u542b\u307e\u308c\u308b\u5fc5\u9808\u30af\u30ec\u30fc\u30e0"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"iss"})," - \u30c8\u30fc\u30af\u30f3\u767a\u884c\u8005"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sub"})," - \u30e6\u30fc\u30b6\u30fcID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"aud"})," - \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"exp"})," - \u6709\u52b9\u671f\u9650"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"iat"})," - \u767a\u884c\u6642\u523b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"auth_time"})," - \u8a8d\u8a3c\u6642\u523b\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nonce"})," - \u30ea\u30d7\u30ec\u30a4\u653b\u6483\u5bfe\u7b56\uff08\u8981\u6c42\u6642\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"c_hash"}),", ",(0,r.jsx)(n.code,{children:"at_hash"}),", ",(0,r.jsx)(n.code,{children:"s_hash"})," - \u30cf\u30c3\u30b7\u30e5\u5024\uff08Hybrid\u30d5\u30ed\u30fc\u7b49\uff09"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3-access-token",children:"2. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 (Access Token)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u9014"}),": API \u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e\u8a3c\u660e\uff08Opaque \u307e\u305f\u306f JWT\uff09"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class AccessTokenCustomClaimsCreators {\n  List<AccessTokenCustomClaimsCreator> creators;\n\n  public AccessTokenCustomClaimsCreators() {\n    this.creators = new ArrayList<>();\n    // 1. \u30c7\u30d5\u30a9\u30eb\u30c8\u306eScopeMappingCustomClaimsCreator\u3092\u8ffd\u52a0\n    this.creators.add(new ScopeMappingCustomClaimsCreator());\n    // 2. \u5916\u90e8\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30ed\u30fc\u30c9\n    creators.addAll(AccessTokenCustomClaimsCreationPluginLoader.load());\n  }\n\n  public Map<String, Object> create(\n      AuthorizationGrant authorizationGrant,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration,\n      ClientCredentials clientCredentials) {\n\n    Map<String, Object> customClaims = new HashMap<>();\n\n    // \u5404Creator\u3092\u9806\u6b21\u5b9f\u884c\n    creators.forEach(creator -> {\n      if (creator.shouldCreate(...)) {\n        Map<String, Object> claims = creator.create(...);\n        customClaims.putAll(claims);\n      }\n    });\n\n    return customClaims;\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/plugin/AccessTokenCustomClaimsCreators.java#L30",children:"AccessTokenCustomClaimsCreators.java:30"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u7279\u5fb4"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u5411\u3051"}),": API\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u542b\u3080"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u5c0f\u5316\u539f\u5247"}),": \u5fc5\u8981\u6700\u5c0f\u9650\u306e\u30af\u30ec\u30fc\u30e0\u306e\u307f\u542b\u3081\u308b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JWT\u5f62\u5f0f\u306e\u5834\u5408"}),": \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3092\u8ffd\u52a0\u53ef\u80fd"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Opaque\u5f62\u5f0f\u306e\u5834\u5408"}),": \u30af\u30ec\u30fc\u30e0\u306f\u542b\u307e\u308c\u305a\u3001Introspection\u3067\u53d6\u5f97"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-userinfo-\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8",children:"3. Userinfo \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u9014"}),": \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u8a73\u7d30\u53d6\u5f97"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class UserinfoClaimsCreator implements IndividualClaimsCreatable {\n\n  public Map<String, Object> createClaims() {\n    Map<String, Object> claims = new HashMap<>();\n\n    // 1. \u6a19\u6e96\u30af\u30ec\u30fc\u30e0\u751f\u6210\n    Map<String, Object> individualClaims =\n        createIndividualClaims(user, authorizationGrant.userinfoClaims());\n\n    // 2. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u751f\u6210\uff08\u30d7\u30e9\u30b0\u30a4\u30f3\uff09\n    Map<String, Object> customIndividualClaims =\n        userinfoCustomIndividualClaimsCreators.createCustomIndividualClaims(\n            user, authorizationGrant,\n            authorizationServerConfiguration, clientConfiguration);\n\n    claims.putAll(individualClaims);\n    claims.putAll(customIndividualClaims);\n\n    return claims;\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/userinfo/UserinfoClaimsCreator.java#L28",children:"UserinfoClaimsCreator.java:28"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Userinfo\u306e\u7279\u5fb4"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8a73\u7d30\u306a\u5c5e\u6027\u60c5\u5831"}),": ID\u30c8\u30fc\u30af\u30f3\u3088\u308a\u591a\u304f\u306e\u30af\u30ec\u30fc\u30e0\u3092\u542b\u3081\u3089\u308c\u308b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52d5\u7684\u53d6\u5f97"}),": \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u63d0\u793a\u3067\u6700\u65b0\u60c5\u5831\u3092\u53d6\u5f97"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30b9\u30b3\u30fc\u30d7\u30d9\u30fc\u30b9"}),": \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u30b9\u30b3\u30fc\u30d7\u306b\u57fa\u3065\u3044\u3066\u60c5\u5831\u958b\u793a"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u88c5",children:"\ud83d\udd0c \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u5b9f\u88c5"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",children:"1. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"AccessTokenCustomClaimsCreator"}),"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public interface AccessTokenCustomClaimsCreator {\n\n  /**\n   * \u3053\u306eCreator\u3092\u5b9f\u884c\u3059\u3079\u304d\u304b\u5224\u5b9a\n   */\n  boolean shouldCreate(\n      AuthorizationGrant authorizationGrant,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration,\n      ClientCredentials clientCredentials);\n\n  /**\n   * \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3092\u751f\u6210\n   */\n  Map<String, Object> create(\n      AuthorizationGrant authorizationGrant,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration,\n      ClientCredentials clientCredentials);\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/plugin/AccessTokenCustomClaimsCreator.java#L25",children:"AccessTokenCustomClaimsCreator.java:25"})]}),"\n",(0,r.jsx)(n.h4,{id:"\u5b9f\u88c5\u4f8b-scopemappingcustomclaimscreator",children:"\u5b9f\u88c5\u4f8b: ScopeMappingCustomClaimsCreator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class ScopeMappingCustomClaimsCreator implements AccessTokenCustomClaimsCreator {\n\n  private static final String prefix = "claims:";\n\n  @Override\n  public boolean shouldCreate(\n      AuthorizationGrant authorizationGrant,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration,\n      ClientCredentials clientCredentials) {\n\n    // custom_claims_scope_mapping \u304c\u6709\u52b9\u304b\u78ba\u8a8d\n    if (!authorizationServerConfiguration.enabledCustomClaimsScopeMapping()) {\n      return false;\n    }\n\n    // claims: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u3042\u308b\u304b\u78ba\u8a8d\n    return authorizationGrant.scopes().hasScopeMatchedPrefix(prefix);\n  }\n\n  @Override\n  public Map<String, Object> create(\n      AuthorizationGrant authorizationGrant,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration,\n      ClientCredentials clientCredentials) {\n\n    User user = authorizationGrant.user();\n    Map<String, Object> claims = new HashMap<>();\n\n    // claims: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306e\u30b9\u30b3\u30fc\u30d7\u3092\u62bd\u51fa\n    Scopes scopes = authorizationGrant.scopes();\n    Scopes filteredClaimsScope = scopes.filterMatchedPrefix(prefix);\n    CustomProperties customProperties = user.customProperties();\n\n    for (String scope : filteredClaimsScope) {\n      // "claims:roles" \u2192 "roles"\n      String claimName = scope.substring(prefix.length());\n\n      // \u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3\u304b\u3089\u53d6\u5f97\n      if (customProperties.contains(claimName)) {\n        claims.put(claimName, customProperties.getValue(claimName));\n      }\n\n      // \u7279\u5b9a\u306e\u30af\u30ec\u30fc\u30e0\u3092\u500b\u5225\u51e6\u7406\n      if (claimName.equals("status")) {\n        claims.put("status", user.status().name());\n      }\n\n      if (claimName.equals("roles") && user.hasRoles()) {\n        claims.put("roles", user.roleNameAsListString());\n      }\n\n      if (claimName.equals("permissions") && user.hasPermissions()) {\n        claims.put("permissions", user.permissions());\n      }\n\n      if (claimName.equals("assigned_tenants") && user.hasAssignedTenants()) {\n        claims.put("assigned_tenants", user.assignedTenants());\n        claims.put("current_tenant_id", user.currentTenantIdentifier().value());\n      }\n\n      if (claimName.equals("authentication_devices") && user.hasAuthenticationDevices()) {\n        claims.put("authentication_devices", user.authenticationDevicesListAsMap());\n      }\n    }\n\n    return claims;\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/plugin/ScopeMappingCustomClaimsCreator.java#L29",children:"ScopeMappingCustomClaimsCreator.java:29"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30af\u30ec\u30fc\u30e0"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:status"})," - \u30e6\u30fc\u30b6\u30fc\u30b9\u30c6\u30fc\u30bf\u30b9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:ex_sub"})," - \u5916\u90e8\u30e6\u30fc\u30b6\u30fcID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:roles"})," - \u30ed\u30fc\u30eb\u4e00\u89a7"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:permissions"})," - \u6a29\u9650\u4e00\u89a7"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:assigned_tenants"})," - \u5272\u308a\u5f53\u3066\u30c6\u30ca\u30f3\u30c8\u4e00\u89a7"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:assigned_organizations"})," - \u5272\u308a\u5f53\u3066\u7d44\u7e54\u4e00\u89a7"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:authentication_devices"})," - \u8a8d\u8a3c\u30c7\u30d0\u30a4\u30b9\u4e00\u89a7"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"claims:{\u4efb\u610f\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3}"})," - \u30e6\u30fc\u30b6\u30fc\u306e\u30ab\u30b9\u30bf\u30e0\u30d7\u30ed\u30d1\u30c6\u30a3"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-id\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3",children:"2. ID\u30c8\u30fc\u30af\u30f3\u7528\u30d7\u30e9\u30b0\u30a4\u30f3"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CustomIndividualClaimsCreator"}),"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public interface CustomIndividualClaimsCreator {\n\n  boolean shouldCreate(\n      User user,\n      Authentication authentication,\n      AuthorizationGrant authorizationGrant,\n      IdTokenCustomClaims customClaims,\n      RequestedClaimsPayload requestedClaimsPayload,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration);\n\n  Map<String, Object> create(\n      User user,\n      Authentication authentication,\n      AuthorizationGrant authorizationGrant,\n      IdTokenCustomClaims customClaims,\n      RequestedClaimsPayload requestedClaimsPayload,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration);\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/id_token/plugin/CustomIndividualClaimsCreator.java#L28",children:"CustomIndividualClaimsCreator.java:28"})]}),"\n",(0,r.jsx)(n.h4,{id:"\u5b9f\u88c5\u4f8b-\u7d44\u7e54\u60c5\u5831\u306e\u8ffd\u52a0",children:"\u5b9f\u88c5\u4f8b: \u7d44\u7e54\u60c5\u5831\u306e\u8ffd\u52a0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public class OrganizationClaimsCreator implements CustomIndividualClaimsCreator {\n\n  @Override\n  public boolean shouldCreate(\n      User user,\n      Authentication authentication,\n      AuthorizationGrant authorizationGrant,\n      IdTokenCustomClaims customClaims,\n      RequestedClaimsPayload requestedClaimsPayload,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration) {\n\n    // org_info \u30b9\u30b3\u30fc\u30d7\u304c\u3042\u308b\u5834\u5408\u306e\u307f\u5b9f\u884c\n    return authorizationGrant.scopes().contains("org_info");\n  }\n\n  @Override\n  public Map<String, Object> create(\n      User user,\n      Authentication authentication,\n      AuthorizationGrant authorizationGrant,\n      IdTokenCustomClaims customClaims,\n      RequestedClaimsPayload requestedClaimsPayload,\n      AuthorizationServerConfiguration authorizationServerConfiguration,\n      ClientConfiguration clientConfiguration) {\n\n    Map<String, Object> claims = new HashMap<>();\n\n    if (user.hasAssignedOrganizations()) {\n      claims.put("org_id", user.currentOrganizationIdentifier().value());\n      claims.put("org_name", user.currentOrganizationName());\n      claims.put("org_role", user.organizationRole());\n    }\n\n    return claims;\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332",children:"3. \u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"META-INF/services"}),"\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u767b\u9332\u3057\u307e\u3059\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u540d"}),": ",(0,r.jsx)(n.code,{children:"META-INF/services/org.idp.server.core.openid.token.plugin.AccessTokenCustomClaimsCreator"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"com.example.idp.plugin.OrganizationClaimsCreator\ncom.example.idp.plugin.CustomRolesClaimsCreator\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u30d5\u30a1\u30a4\u30eb\u540d"}),": ",(0,r.jsx)(n.code,{children:"META-INF/services/org.idp.server.core.openid.identity.id_token.plugin.CustomIndividualClaimsCreator"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"com.example.idp.plugin.OrganizationClaimsCreator\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u30ed\u30fc\u30c0\u30fc\u306e\u4ed5\u7d44\u307f"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class AccessTokenCustomClaimsCreationPluginLoader extends PluginLoader {\n\n  public static List<AccessTokenCustomClaimsCreator> load() {\n    List<AccessTokenCustomClaimsCreator> customClaimsCreators = new ArrayList<>();\n\n    // 1. \u5185\u90e8\u30e2\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u30ed\u30fc\u30c9\n    List<AccessTokenCustomClaimsCreator> internals =\n        loadFromInternalModule(AccessTokenCustomClaimsCreator.class);\n    customClaimsCreators.addAll(internals);\n\n    // 2. \u5916\u90e8\u30e2\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u30ed\u30fc\u30c9\n    List<AccessTokenCustomClaimsCreator> externals =\n        loadFromExternalModule(AccessTokenCustomClaimsCreator.class);\n    customClaimsCreators.addAll(externals);\n\n    return customClaimsCreators;\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5"}),": ",(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/plugin/token/AccessTokenCustomClaimsCreationPluginLoader.java#L25",children:"AccessTokenCustomClaimsCreationPluginLoader.java:25"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u5b9f\u88c5\u30d5\u30ed\u30fc",children:"\ud83d\udd27 \u5b9f\u88c5\u30d5\u30ed\u30fc"}),"\n",(0,r.jsx)(n.h3,{id:"id\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc",children:"ID\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1. \u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                                    \u2502\n\u2502    - \u8a8d\u53ef\u30b3\u30fc\u30c9\u691c\u8a3c                                          \u2502\n\u2502    - AuthorizationGrant\u53d6\u5f97                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2. IdTokenCreator                                            \u2502\n\u2502    - createIdToken(user, authentication, grant, ...)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 3. \u6a19\u6e96\u30af\u30ec\u30fc\u30e0\u751f\u6210 (IndividualClaimsCreatable)             \u2502\n\u2502    - createIndividualClaims(user, idTokenClaims, ...)        \u2502\n\u2502    - \u30b9\u30b3\u30fc\u30d7\u306b\u57fa\u3065\u3044\u305f\u30af\u30ec\u30fc\u30e0\u9078\u629e                          \u2502\n\u2502    - sub, name, email, phone_number \u7b49                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 4. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u751f\u6210 (CustomIndividualClaimsCreators)    \u2502\n\u2502    - \u5404Plugin\u306e shouldCreate() \u5224\u5b9a                          \u2502\n\u2502    - \u5b9f\u884c\u3059\u3079\u304dPlugin\u306e create() \u5b9f\u884c                        \u2502\n\u2502    - \u5168Plugin\u306e\u7d50\u679c\u3092\u30de\u30fc\u30b8                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 5. JWT\u7f72\u540d\u30fb\u6697\u53f7\u5316                                           \u2502\n\u2502    - JWS\u7f72\u540d\uff08AuthorizationServer\u306eJWKS\u4f7f\u7528\uff09               \u2502\n\u2502    - JWE\u6697\u53f7\u5316\uff08Client\u306eJWKS\u4f7f\u7528\u3001\u8a2d\u5b9a\u306b\u3088\u308b\uff09              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 6. \u30ec\u30b9\u30dd\u30f3\u30b9\u8fd4\u5374                                            \u2502\n\u2502    - id_token, access_token, refresh_token \u7b49                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fcjwt\u5f62\u5f0f",children:"\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc\uff08JWT\u5f62\u5f0f\uff09"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 1. \u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8                                    \u2502\n\u2502    - OAuthTokenCreationService\u9078\u629e\uff08GrantType\u5225\uff09           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2. JwtAccessTokenCreator                                     \u2502\n\u2502    - createAccessToken(grant, configuration, ...)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 3. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u751f\u6210 (AccessTokenCustomClaimsCreators)   \u2502\n\u2502    - ScopeMappingCustomClaimsCreator (\u30c7\u30d5\u30a9\u30eb\u30c8)            \u2502\n\u2502    - \u5916\u90e8\u30d7\u30e9\u30b0\u30a4\u30f3\uff08ServiceLoader\u7d4c\u7531\uff09                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 4. JWT\u751f\u6210                                                   \u2502\n\u2502    - \u6a19\u6e96\u30af\u30ec\u30fc\u30e0\uff08iss, sub, aud, exp, iat, scope\uff09         \u2502\n\u2502    - \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\uff08\u4e0a\u8a18\u3067\u751f\u6210\uff09                          \u2502\n\u2502    - JWS\u7f72\u540d                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u30c6\u30b9\u30c8\u5b9f\u88c5\u4f8b",children:"\ud83e\uddea \u30c6\u30b9\u30c8\u5b9f\u88c5\u4f8b"}),"\n",(0,r.jsx)(n.h3,{id:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30c6\u30b9\u30c8",children:"\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30c6\u30b9\u30c8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Test\nvoid testAccessTokenCustomClaims() {\n  // 1. \u30b9\u30b3\u30fc\u30d7\u8a2d\u5b9a\n  Scopes scopes = new Scopes("openid profile claims:roles claims:permissions");\n\n  // 2. AuthorizationGrant\u4f5c\u6210\n  AuthorizationGrant grant = AuthorizationGrant.builder()\n      .scopes(scopes)\n      .user(user)\n      .build();\n\n  // 3. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u751f\u6210\n  ScopeMappingCustomClaimsCreator creator = new ScopeMappingCustomClaimsCreator();\n\n  assertTrue(creator.shouldCreate(grant, config, client, credentials));\n\n  Map<String, Object> claims = creator.create(grant, config, client, credentials);\n\n  // 4. \u691c\u8a3c\n  assertThat(claims).containsKey("roles");\n  assertThat(claims).containsKey("permissions");\n  assertThat(claims).doesNotContainKey("email");  // claims:email \u304c\u306a\u3044\u306e\u3067\u542b\u307e\u308c\u306a\u3044\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"scope\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30c6\u30b9\u30c8",children:"Scope\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u30c6\u30b9\u30c8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Test\nvoid testScopeFiltering() {\n  Scopes scopes = new Scopes("openid claims:name claims:roles verified_claims:given_name");\n\n  // claims: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306e\u307f\u62bd\u51fa\n  Scopes claimsScopes = scopes.filterMatchedPrefix("claims:");\n  assertThat(claimsScopes.toStringSet()).containsExactlyInAnyOrder("claims:name", "claims:roles");\n\n  // verified_claims: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u306e\u307f\u62bd\u51fa\n  Scopes verifiedScopes = scopes.filterMatchedPrefix("verified_claims:");\n  assertThat(verifiedScopes.toStringSet()).containsExactly("verified_claims:given_name");\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u5b9f\u88c5\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8",children:"\ud83d\udccb \u5b9f\u88c5\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8"}),"\n",(0,r.jsx)(n.p,{children:"\u65b0\u3057\u3044\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u969b\u306e\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8:"}),"\n",(0,r.jsx)(n.h3,{id:"accesstokencustomclaimscreator",children:"AccessTokenCustomClaimsCreator"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"}),": ",(0,r.jsx)(n.code,{children:"AccessTokenCustomClaimsCreator"}),"\u3092\u5b9f\u88c5"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public class MyCustomClaimsCreator implements AccessTokenCustomClaimsCreator {\n  @Override\n  public boolean shouldCreate(...) { ... }\n\n  @Override\n  public Map<String, Object> create(...) { ... }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"shouldCreate\u5224\u5b9a"}),": \u5b9f\u884c\u6761\u4ef6\u3092\u660e\u78ba\u306b\u5b9a\u7fa9"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u30b9\u30b3\u30fc\u30d7\u30c1\u30a7\u30c3\u30af"}),"\n",(0,r.jsx)(n.li,{children:"\u30c6\u30ca\u30f3\u30c8\u8a2d\u5b9a\u30c1\u30a7\u30c3\u30af"}),"\n",(0,r.jsx)(n.li,{children:"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a\u30c1\u30a7\u30c3\u30af"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"create\u5b9f\u88c5"}),": \u30af\u30ec\u30fc\u30e0\u751f\u6210\u30ed\u30b8\u30c3\u30af"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"null\u30c1\u30a7\u30c3\u30af"}),"\n",(0,r.jsxs)(n.li,{children:["\u30c7\u30fc\u30bf\u5b58\u5728\u30c1\u30a7\u30c3\u30af\uff08",(0,r.jsx)(n.code,{children:"user.hasXxx()"}),"\uff09"]}),"\n",(0,r.jsx)(n.li,{children:"\u9069\u5207\u306a\u578b\u5909\u63db"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332"}),": ",(0,r.jsx)(n.code,{children:"META-INF/services"}),"\u306b\u767b\u9332"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"META-INF/services/org.idp.server.core.openid.token.plugin.AccessTokenCustomClaimsCreator\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30c6\u30b9\u30c8\u4f5c\u6210"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shouldCreate"}),"\u306e\u30c6\u30b9\u30c8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"create"}),"\u306e\u30c6\u30b9\u30c8"]}),"\n",(0,r.jsx)(n.li,{children:"\u5883\u754c\u5024\u30c6\u30b9\u30c8"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"customindividualclaimscreator-id\u30c8\u30fc\u30af\u30f3\u7528",children:"CustomIndividualClaimsCreator (ID\u30c8\u30fc\u30af\u30f3\u7528)"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5b9f\u88c5"}),": ",(0,r.jsx)(n.code,{children:"CustomIndividualClaimsCreator"}),"\u3092\u5b9f\u88c5"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"shouldCreate\u5224\u5b9a"}),": ID\u30c8\u30fc\u30af\u30f3\u7279\u6709\u306e\u6761\u4ef6","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Authentication"}),"\u60c5\u5831\u306e\u6d3b\u7528"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RequestedClaimsPayload"}),"\u306e\u78ba\u8a8d"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"create\u5b9f\u88c5"}),": ID\u30c8\u30fc\u30af\u30f3\u7528\u30af\u30ec\u30fc\u30e0\u751f\u6210","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8a8d\u8a3c\u6642\u523b\uff08",(0,r.jsx)(n.code,{children:"auth_time"}),"\uff09\u95a2\u9023"]}),"\n",(0,r.jsx)(n.li,{children:"ACR/AMR\u95a2\u9023"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u767b\u9332"}),": ",(0,r.jsx)(n.code,{children:"META-INF/services"}),"\u306b\u767b\u9332"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"\u30c6\u30b9\u30c8\u4f5c\u6210"}),": ID\u30c8\u30fc\u30af\u30f3\u751f\u6210\u30d5\u30ed\u30fc\u5168\u4f53\u306e\u30c6\u30b9\u30c8"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u3088\u304f\u3042\u308b\u9593\u9055\u3044",children:"\ud83d\udea8 \u3088\u304f\u3042\u308b\u9593\u9055\u3044"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u30b9\u30b3\u30fc\u30d7\u306e\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",children:"1. \u30b9\u30b3\u30fc\u30d7\u306e\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// \u274c \u8aa4\u308a: \u30b9\u30b3\u30fc\u30d7\u306a\u3057\u3067\u30af\u30ec\u30fc\u30e0\u8ffd\u52a0\n@Override\npublic Map<String, Object> create(...) {\n  Map<String, Object> claims = new HashMap<>();\n  claims.put("roles", user.roleNameAsListString());  // \u5e38\u306b\u8ffd\u52a0\u3057\u3066\u3057\u307e\u3046\n  return claims;\n}\n\n// \u2705 \u6b63\u3057\u3044: shouldCreate\u3067\u5224\u5b9a\n@Override\npublic boolean shouldCreate(...) {\n  return authorizationGrant.scopes().contains("claims:roles");\n}\n\n@Override\npublic Map<String, Object> create(...) {\n  Map<String, Object> claims = new HashMap<>();\n  if (user.hasRoles()) {  // \u30c7\u30fc\u30bf\u5b58\u5728\u78ba\u8a8d\u3082\u5fd8\u308c\u305a\u306b\n    claims.put("roles", user.roleNameAsListString());\n  }\n  return claims;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u30c7\u30fc\u30bf\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c",children:"2. \u30c7\u30fc\u30bf\u5b58\u5728\u78ba\u8a8d\u5fd8\u308c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// \u274c \u8aa4\u308a: null\u30c1\u30a7\u30c3\u30af\u306a\u3057\nclaims.put("email", user.email());  // NullPointerException \u306e\u30ea\u30b9\u30af\n\n// \u2705 \u6b63\u3057\u3044: \u5b58\u5728\u78ba\u8a8d\nif (user.hasEmail()) {\n  claims.put("email", user.email());\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u53bb\u5fd8\u308c",children:"3. \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u53bb\u5fd8\u308c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// \u274c \u8aa4\u308a: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u4ed8\u304d\u3067\u30af\u30ec\u30fc\u30e0\u8ffd\u52a0\nfor (String scope : filteredClaimsScope) {\n  claims.put(scope, ...);  // "claims:roles" \u3068\u3044\u3046\u30ad\u30fc\u540d\u306b\u306a\u3063\u3066\u3057\u307e\u3046\n}\n\n// \u2705 \u6b63\u3057\u3044: \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u9664\u53bb\nfor (String scope : filteredClaimsScope) {\n  String claimName = scope.substring("claims:".length());\n  claims.put(claimName, ...);  // "roles" \u3068\u3044\u3046\u30ad\u30fc\u540d\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3068\u30b9\u30b3\u30fc\u30d7\u306e\u6df7\u540c",children:"4. \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u3068\u30b9\u30b3\u30fc\u30d7\u306e\u6df7\u540c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// \u274c \u8aa4\u308a: "claims:" \u30b9\u30b3\u30fc\u30d7\u3092\u6a19\u6e96\u30b9\u30b3\u30fc\u30d7\u3068\u540c\u5217\u306b\u6271\u3046\nif (scopes.contains("email")) {\n  // email \u30af\u30ec\u30fc\u30e0\u8ffd\u52a0\n}\nif (scopes.contains("claims:email")) {\n  // \u3053\u308c\u306f\u500b\u5225\u30af\u30ec\u30fc\u30e0\u6307\u5b9a\u306a\u306e\u3067\u5225\u51e6\u7406\n}\n\n// \u2705 \u6b63\u3057\u3044: \u660e\u78ba\u306b\u5206\u96e2\n// \u6a19\u6e96\u30b9\u30b3\u30fc\u30d7 \u2192 IndividualClaimsCreatable \u3067\u51e6\u7406\n// \u30ab\u30b9\u30bf\u30e0\u30b9\u30b3\u30fc\u30d7 \u2192 ScopeMappingCustomClaimsCreator \u3067\u51e6\u7406\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8",children:"\ud83d\udd17 \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6982\u5ff5\u30fb\u57fa\u790e"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../content_03_concepts/basic/basic-12-openid-connect-detail.md",children:"basic-12: OpenID Connect\u8a73\u89e3"})," - OIDC\u4ed5\u69d8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../content_03_concepts/basic/basic-14-oidc-claim-design.md",children:"basic-14: OIDC\u30af\u30ec\u30fc\u30e0\u8a2d\u8a08"})," - \u30af\u30ec\u30fc\u30e0\u8a2d\u8a08\u30ac\u30a4\u30c9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../../content_03_concepts/04-tokens-claims/concept-03-custom-claims.md",children:"concept-09: \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0"})," - \u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u306e\u6982\u5ff5"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5b9f\u88c5\u8a73\u7d30"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./impl-12-plugin-implementation.md",children:"impl-12: Plugin\u5b9f\u88c5\u30ac\u30a4\u30c9"})," - \u30d7\u30e9\u30b0\u30a4\u30f3\u30b7\u30b9\u30c6\u30e0\u306e\u8a73\u7d30"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../03-application-plane/03-token-endpoint.md",children:"03-application-plane/03-token-endpoint.md"})," - \u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../03-application-plane/05-userinfo.md",children:"03-application-plane/05-userinfo.md"})," - Userinfo\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53c2\u8003\u5b9f\u88c5\u30af\u30e9\u30b9"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/type/oauth/Scopes.java",children:"Scopes.java"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/oauth/type/oidc/Claims.java",children:"Claims.java"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/id_token/IndividualClaimsCreatable.java",children:"IndividualClaimsCreatable.java"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/plugin/ScopeMappingCustomClaimsCreator.java",children:"ScopeMappingCustomClaimsCreator.java"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/token/plugin/AccessTokenCustomClaimsCreator.java",children:"AccessTokenCustomClaimsCreator.java"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../../libs/idp-server-core/src/main/java/org/idp/server/core/openid/identity/id_token/plugin/CustomIndividualClaimsCreator.java",children:"CustomIndividualClaimsCreator.java"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"RFC/\u4ed5\u69d8"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-3.3",children:"RFC 6749 - OAuth 2.0 (Section 3.3: Access Token Scope)"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#ScopeClaims",children:"OpenID Connect Core 1.0 - 5.4: Requesting Claims using Scope Values"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html",children:"OpenID Connect for Identity Assurance 1.0"})," - verified_claims"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u7d42\u66f4\u65b0"}),": 2025-12-07\n",(0,r.jsx)(n.strong,{children:"\u96e3\u6613\u5ea6"}),": \u2b50\u2b50\u2b50 (\u4e2d\u7d1a)"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(96540);const r={},a=s.createContext(r);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);