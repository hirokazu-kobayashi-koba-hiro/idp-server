"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2195],{64785:(n,e,d)=>{d.r(e),d.d(e,{assets:()=>E,contentTitle:()=>t,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"content_11_learning/postgresql/dev-01-sql-basics","title":"PostgreSQL SQL\u57fa\u790e\u30ac\u30a4\u30c9","description":"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u3092\u4f7f\u7528\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u5411\u3051\u306b\u3001","source":"@site/docs/content_11_learning/11-postgresql/dev-01-sql-basics.md","sourceDirName":"content_11_learning/11-postgresql","slug":"/content_11_learning/postgresql/dev-01-sql-basics","permalink":"/idp-server/docs/content_11_learning/postgresql/dev-01-sql-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content_11_learning/11-postgresql/dev-01-sql-basics.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"PostgreSQL \u62e1\u5f35\u6a5f\u80fd\uff08Extensions\uff09\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dba-09-extensions"},"next":{"title":"PostgreSQL \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u30ac\u30a4\u30c9","permalink":"/idp-server/docs/content_11_learning/postgresql/dev-02-table-design"}}');var s=d(74848),a=d(28453);const l={},t="PostgreSQL SQL\u57fa\u790e\u30ac\u30a4\u30c9",E={},i=[{value:"\u76ee\u6b21",id:"\u76ee\u6b21",level:2},{value:"1. SQL\u306e\u57fa\u672c\u6982\u5ff5",id:"1-sql\u306e\u57fa\u672c\u6982\u5ff5",level:2},{value:"1.1 SQL\u3068\u306f",id:"11-sql\u3068\u306f",level:3},{value:"1.2 \u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb",id:"12-\u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb",level:3},{value:"2. \u30c7\u30fc\u30bf\u306e\u53d6\u5f97\uff08SELECT\uff09",id:"2-\u30c7\u30fc\u30bf\u306e\u53d6\u5f97select",level:2},{value:"2.1 \u57fa\u672c\u69cb\u6587",id:"21-\u57fa\u672c\u69cb\u6587",level:3},{value:"2.2 \u57fa\u672c\u7684\u306aSELECT",id:"22-\u57fa\u672c\u7684\u306aselect",level:3},{value:"2.3 \u6761\u4ef6\u6307\u5b9a\uff08WHERE\uff09",id:"23-\u6761\u4ef6\u6307\u5b9awhere",level:3},{value:"2.4 \u30bd\u30fc\u30c8\u3068\u4ef6\u6570\u5236\u9650",id:"24-\u30bd\u30fc\u30c8\u3068\u4ef6\u6570\u5236\u9650",level:3},{value:"2.5 DISTINCT\uff08\u91cd\u8907\u9664\u53bb\uff09",id:"25-distinct\u91cd\u8907\u9664\u53bb",level:3},{value:"3. \u30c7\u30fc\u30bf\u306e\u633f\u5165\uff08INSERT\uff09",id:"3-\u30c7\u30fc\u30bf\u306e\u633f\u5165insert",level:2},{value:"3.1 \u57fa\u672c\u69cb\u6587",id:"31-\u57fa\u672c\u69cb\u6587",level:3},{value:"3.2 SELECT\u7d50\u679c\u304b\u3089\u306e\u633f\u5165",id:"32-select\u7d50\u679c\u304b\u3089\u306e\u633f\u5165",level:3},{value:"3.3 UPSERT\uff08INSERT ON CONFLICT\uff09",id:"33-upsertinsert-on-conflict",level:3},{value:"4. \u30c7\u30fc\u30bf\u306e\u66f4\u65b0\uff08UPDATE\uff09",id:"4-\u30c7\u30fc\u30bf\u306e\u66f4\u65b0update",level:2},{value:"4.1 \u57fa\u672c\u69cb\u6587",id:"41-\u57fa\u672c\u69cb\u6587",level:3},{value:"4.2 \u66f4\u65b0\u7d50\u679c\u306e\u53d6\u5f97\uff08RETURNING\uff09",id:"42-\u66f4\u65b0\u7d50\u679c\u306e\u53d6\u5f97returning",level:3},{value:"4.3 \u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u66f4\u65b0",id:"43-\u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u66f4\u65b0",level:3},{value:"5. \u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08DELETE\uff09",id:"5-\u30c7\u30fc\u30bf\u306e\u524a\u9664delete",level:2},{value:"5.1 \u57fa\u672c\u69cb\u6587",id:"51-\u57fa\u672c\u69cb\u6587",level:3},{value:"5.2 \u5168\u4ef6\u524a\u9664",id:"52-\u5168\u4ef6\u524a\u9664",level:3},{value:"5.3 \u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u524a\u9664",id:"53-\u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u524a\u9664",level:3},{value:"6. \u30c6\u30fc\u30d6\u30eb\u7d50\u5408\uff08JOIN\uff09",id:"6-\u30c6\u30fc\u30d6\u30eb\u7d50\u5408join",level:2},{value:"6.1 JOIN\u306e\u7a2e\u985e",id:"61-join\u306e\u7a2e\u985e",level:3},{value:"6.2 INNER JOIN",id:"62-inner-join",level:3},{value:"6.3 LEFT JOIN",id:"63-left-join",level:3},{value:"6.4 \u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306eJOIN",id:"64-\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306ejoin",level:3},{value:"6.5 \u81ea\u5df1\u7d50\u5408\uff08Self Join\uff09",id:"65-\u81ea\u5df1\u7d50\u5408self-join",level:3},{value:"7. \u96c6\u7d04\u95a2\u6570\u3068\u30b0\u30eb\u30fc\u30d7\u5316",id:"7-\u96c6\u7d04\u95a2\u6570\u3068\u30b0\u30eb\u30fc\u30d7\u5316",level:2},{value:"7.1 \u4e3b\u306a\u96c6\u7d04\u95a2\u6570",id:"71-\u4e3b\u306a\u96c6\u7d04\u95a2\u6570",level:3},{value:"7.2 GROUP BY",id:"72-group-by",level:3},{value:"7.3 HAVING\uff08\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u6761\u4ef6\uff09",id:"73-having\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u6761\u4ef6",level:3},{value:"7.4 FILTER\u53e5\uff08PostgreSQL 9.4+\uff09",id:"74-filter\u53e5postgresql-94",level:3},{value:"8. \u30b5\u30d6\u30af\u30a8\u30ea",id:"8-\u30b5\u30d6\u30af\u30a8\u30ea",level:2},{value:"8.1 \u30b9\u30ab\u30e9\u30b5\u30d6\u30af\u30a8\u30ea\uff08\u5358\u4e00\u5024\u3092\u8fd4\u3059\uff09",id:"81-\u30b9\u30ab\u30e9\u30b5\u30d6\u30af\u30a8\u30ea\u5358\u4e00\u5024\u3092\u8fd4\u3059",level:3},{value:"8.2 IN\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea",id:"82-in\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea",level:3},{value:"8.3 EXISTS\uff08\u5b58\u5728\u78ba\u8a8d\uff09",id:"83-exists\u5b58\u5728\u78ba\u8a8d",level:3},{value:"8.4 FROM\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea\uff08\u5c0e\u51fa\u30c6\u30fc\u30d6\u30eb\uff09",id:"84-from\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea\u5c0e\u51fa\u30c6\u30fc\u30d6\u30eb",level:3},{value:"8.5 \u76f8\u95a2\u30b5\u30d6\u30af\u30a8\u30ea",id:"85-\u76f8\u95a2\u30b5\u30d6\u30af\u30a8\u30ea",level:3},{value:"9. \u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0f\uff08CTE\uff09",id:"9-\u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0fcte",level:2},{value:"9.1 \u57fa\u672c\u69cb\u6587\uff08WITH\u53e5\uff09",id:"91-\u57fa\u672c\u69cb\u6587with\u53e5",level:3},{value:"9.2 \u8907\u6570\u306eCTE",id:"92-\u8907\u6570\u306ecte",level:3},{value:"9.3 \u518d\u5e30CTE",id:"93-\u518d\u5e30cte",level:3},{value:"10. \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",id:"10-\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",level:2},{value:"10.1 \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570\u306e\u6982\u5ff5",id:"101-\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570\u306e\u6982\u5ff5",level:3},{value:"10.2 \u57fa\u672c\u7684\u306a\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",id:"102-\u57fa\u672c\u7684\u306a\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",level:3},{value:"10.3 PARTITION BY\uff08\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u306e\u96c6\u8a08\uff09",id:"103-partition-by\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u306e\u96c6\u8a08",level:3},{value:"10.4 ORDER BY \u3068\u884c\u756a\u53f7\u95a2\u6570",id:"104-order-by-\u3068\u884c\u756a\u53f7\u95a2\u6570",level:3},{value:"10.5 LAG / LEAD\uff08\u524d\u5f8c\u306e\u884c\u3092\u53c2\u7167\uff09",id:"105-lag--lead\u524d\u5f8c\u306e\u884c\u3092\u53c2\u7167",level:3},{value:"10.6 \u7d2f\u7a4d\u96c6\u8a08",id:"106-\u7d2f\u7a4d\u96c6\u8a08",level:3},{value:"10.7 FIRST_VALUE / LAST_VALUE",id:"107-first_value--last_value",level:3},{value:"\u53c2\u8003\u30ea\u30f3\u30af",id:"\u53c2\u8003\u30ea\u30f3\u30af",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"postgresql-sql\u57fa\u790e\u30ac\u30a4\u30c9",children:"PostgreSQL SQL\u57fa\u790e\u30ac\u30a4\u30c9"})}),"\n",(0,s.jsx)(e.p,{children:"\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u3001PostgreSQL\u3092\u4f7f\u7528\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u5411\u3051\u306b\u3001\nSQL \u306e\u57fa\u672c\u64cd\u4f5c\u304b\u3089\u5b9f\u8df5\u7684\u306a\u30af\u30a8\u30ea\u4f5c\u6210\u307e\u3067\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002"}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u76ee\u6b21",children:"\u76ee\u6b21"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#1-sql%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5",children:"SQL\u306e\u57fa\u672c\u6982\u5ff5"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#2-%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%8F%96%E5%BE%97select",children:"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\uff08SELECT\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#3-%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E6%8C%BF%E5%85%A5insert",children:"\u30c7\u30fc\u30bf\u306e\u633f\u5165\uff08INSERT\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#4-%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E6%9B%B4%E6%96%B0update",children:"\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\uff08UPDATE\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#5-%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%89%8A%E9%99%A4delete",children:"\u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08DELETE\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#6-%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E7%B5%90%E5%90%88join",children:"\u30c6\u30fc\u30d6\u30eb\u7d50\u5408\uff08JOIN\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#7-%E9%9B%86%E7%B4%84%E9%96%A2%E6%95%B0%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E5%8C%96",children:"\u96c6\u7d04\u95a2\u6570\u3068\u30b0\u30eb\u30fc\u30d7\u5316"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#8-%E3%82%B5%E3%83%96%E3%82%AF%E3%82%A8%E3%83%AA",children:"\u30b5\u30d6\u30af\u30a8\u30ea"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#9-%E5%85%B1%E9%80%9A%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%BC%8Fcte",children:"\u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0f\uff08CTE\uff09"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#10-%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E9%96%A2%E6%95%B0",children:"\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"1-sql\u306e\u57fa\u672c\u6982\u5ff5",children:"1. SQL\u306e\u57fa\u672c\u6982\u5ff5"}),"\n",(0,s.jsx)(e.h3,{id:"11-sql\u3068\u306f",children:"1.1 SQL\u3068\u306f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    SQL (Structured Query Language)              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010SQL\u306e\u7a2e\u985e\u3011                                                  \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502 DML (Data Manipulation Language) - \u30c7\u30fc\u30bf\u64cd\u4f5c           \u2502   \u2502\n\u2502  \u2502   SELECT, INSERT, UPDATE, DELETE                        \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 DDL (Data Definition Language) - \u30c7\u30fc\u30bf\u5b9a\u7fa9             \u2502   \u2502\n\u2502  \u2502   CREATE, ALTER, DROP, TRUNCATE                         \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 DCL (Data Control Language) - \u30a2\u30af\u30bb\u30b9\u5236\u5fa1              \u2502   \u2502\n\u2502  \u2502   GRANT, REVOKE                                         \u2502   \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502 TCL (Transaction Control Language) - \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3   \u2502   \u2502\n\u2502  \u2502   BEGIN, COMMIT, ROLLBACK, SAVEPOINT                    \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010\u958b\u767a\u8005\u304c\u4e3b\u306b\u4f7f\u7528\u3059\u308b\u306e\u306fDML\u3011                                \u2502\n\u2502  DDL/DCL\u306fDBA\u307e\u305f\u306f\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u3067\u7ba1\u7406                 \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"12-\u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb",children:"1.2 \u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u4f7f\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u30e6\u30fc\u30b6\u30fc\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    email VARCHAR(255) UNIQUE NOT NULL,\n    department_id INTEGER,\n    created_at TIMESTAMPTZ DEFAULT now(),\n    updated_at TIMESTAMPTZ DEFAULT now()\n);\n\n-- \u90e8\u7f72\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE departments (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    parent_id INTEGER REFERENCES departments(id)\n);\n\n-- \u6ce8\u6587\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id),\n    total_amount NUMERIC(10, 2) NOT NULL,\n    status VARCHAR(20) DEFAULT 'pending',\n    ordered_at TIMESTAMPTZ DEFAULT now()\n);\n\n-- \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\nINSERT INTO departments (id, name, parent_id) VALUES\n    (1, 'Engineering', NULL),\n    (2, 'Backend', 1),\n    (3, 'Frontend', 1),\n    (4, 'Sales', NULL);\n\nINSERT INTO users (id, name, email, department_id) VALUES\n    (1, 'Alice', 'alice@example.com', 2),\n    (2, 'Bob', 'bob@example.com', 2),\n    (3, 'Charlie', 'charlie@example.com', 3),\n    (4, 'Diana', 'diana@example.com', 4),\n    (5, 'Eve', 'eve@example.com', NULL);\n\nINSERT INTO orders (user_id, total_amount, status, ordered_at) VALUES\n    (1, 1500.00, 'completed', '2024-01-15'),\n    (1, 2300.00, 'completed', '2024-02-20'),\n    (2, 800.00, 'pending', '2024-03-01'),\n    (3, 1200.00, 'completed', '2024-03-05'),\n    (4, 3500.00, 'cancelled', '2024-03-10');\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"2-\u30c7\u30fc\u30bf\u306e\u53d6\u5f97select",children:"2. \u30c7\u30fc\u30bf\u306e\u53d6\u5f97\uff08SELECT\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"21-\u57fa\u672c\u69cb\u6587",children:"2.1 \u57fa\u672c\u69cb\u6587"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"SELECT column1, column2, ...\nFROM table_name\nWHERE condition\nORDER BY column1 [ASC|DESC]\nLIMIT n OFFSET m;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"22-\u57fa\u672c\u7684\u306aselect",children:"2.2 \u57fa\u672c\u7684\u306aSELECT"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5168\u30ab\u30e9\u30e0\u53d6\u5f97\nSELECT * FROM users;\n\n-- \u7279\u5b9a\u30ab\u30e9\u30e0\u306e\u307f\u53d6\u5f97\nSELECT id, name, email FROM users;\n\n-- \u30ab\u30e9\u30e0\u306b\u5225\u540d\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\uff09\u3092\u4ed8\u3051\u308b\nSELECT\n    id AS user_id,\n    name AS user_name,\n    email AS contact_email\nFROM users;\n\n-- \u8a08\u7b97\u7d50\u679c\u3092\u53d6\u5f97\nSELECT\n    id,\n    total_amount,\n    total_amount * 0.1 AS tax,\n    total_amount * 1.1 AS total_with_tax\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"23-\u6761\u4ef6\u6307\u5b9awhere",children:"2.3 \u6761\u4ef6\u6307\u5b9a\uff08WHERE\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u7b49\u4fa1\u6bd4\u8f03\nSELECT * FROM users WHERE department_id = 2;\n\n-- NULL\u5224\u5b9a\uff08= \u3067\u306f\u306a\u304f IS \u3092\u4f7f\u7528\uff09\nSELECT * FROM users WHERE department_id IS NULL;\nSELECT * FROM users WHERE department_id IS NOT NULL;\n\n-- \u8907\u6570\u6761\u4ef6\uff08AND, OR\uff09\nSELECT * FROM users\nWHERE department_id = 2 AND name LIKE 'A%';\n\nSELECT * FROM users\nWHERE department_id = 2 OR department_id = 3;\n\n-- IN\u53e5\uff08\u8907\u6570\u5024\u306e\u3044\u305a\u308c\u304b\uff09\nSELECT * FROM users\nWHERE department_id IN (2, 3, 4);\n\n-- BETWEEN\uff08\u7bc4\u56f2\u6307\u5b9a\uff09\nSELECT * FROM orders\nWHERE total_amount BETWEEN 1000 AND 2000;\n\n-- LIKE\uff08\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\uff09\nSELECT * FROM users WHERE name LIKE 'A%';      -- A\u3067\u59cb\u307e\u308b\nSELECT * FROM users WHERE name LIKE '%e';      -- e\u3067\u7d42\u308f\u308b\nSELECT * FROM users WHERE name LIKE '%li%';    -- li\u3092\u542b\u3080\nSELECT * FROM users WHERE name ILIKE '%ALICE%'; -- \u5927\u6587\u5b57\u5c0f\u6587\u5b57\u7121\u8996\n"})}),"\n",(0,s.jsx)(e.h3,{id:"24-\u30bd\u30fc\u30c8\u3068\u4ef6\u6570\u5236\u9650",children:"2.4 \u30bd\u30fc\u30c8\u3068\u4ef6\u6570\u5236\u9650"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6607\u9806\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\nSELECT * FROM users ORDER BY name ASC;\n\n-- \u964d\u9806\nSELECT * FROM users ORDER BY created_at DESC;\n\n-- \u8907\u6570\u30ab\u30e9\u30e0\u3067\u30bd\u30fc\u30c8\nSELECT * FROM users\nORDER BY department_id ASC, name DESC;\n\n-- \u4e0a\u4f4dN\u4ef6\nSELECT * FROM orders\nORDER BY total_amount DESC\nLIMIT 10;\n\n-- \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\uff082\u30da\u30fc\u30b8\u76ee\u30011\u30da\u30fc\u30b810\u4ef6\uff09\nSELECT * FROM orders\nORDER BY id\nLIMIT 10 OFFSET 10;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"25-distinct\u91cd\u8907\u9664\u53bb",children:"2.5 DISTINCT\uff08\u91cd\u8907\u9664\u53bb\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u91cd\u8907\u3092\u9664\u3044\u305f\u90e8\u7f72ID\u306e\u4e00\u89a7\nSELECT DISTINCT department_id FROM users;\n\n-- \u8907\u6570\u30ab\u30e9\u30e0\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u91cd\u8907\u9664\u53bb\nSELECT DISTINCT department_id, status FROM users, orders;\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"3-\u30c7\u30fc\u30bf\u306e\u633f\u5165insert",children:"3. \u30c7\u30fc\u30bf\u306e\u633f\u5165\uff08INSERT\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"31-\u57fa\u672c\u69cb\u6587",children:"3.1 \u57fa\u672c\u69cb\u6587"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5358\u4e00\u884c\u306e\u633f\u5165\nINSERT INTO users (name, email, department_id)\nVALUES ('Frank', 'frank@example.com', 2);\n\n-- \u8907\u6570\u884c\u306e\u633f\u5165\nINSERT INTO users (name, email, department_id)\nVALUES\n    ('Grace', 'grace@example.com', 3),\n    ('Henry', 'henry@example.com', 4),\n    ('Ivy', 'ivy@example.com', 2);\n\n-- \u633f\u5165\u5f8c\u306eID\u3092\u53d6\u5f97\uff08RETURNING\uff09\nINSERT INTO users (name, email, department_id)\nVALUES ('Jack', 'jack@example.com', 2)\nRETURNING id;\n\n-- \u633f\u5165\u3057\u305f\u884c\u5168\u4f53\u3092\u53d6\u5f97\nINSERT INTO users (name, email, department_id)\nVALUES ('Kate', 'kate@example.com', 3)\nRETURNING *;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"32-select\u7d50\u679c\u304b\u3089\u306e\u633f\u5165",children:"3.2 SELECT\u7d50\u679c\u304b\u3089\u306e\u633f\u5165"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5225\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u633f\u5165\nINSERT INTO users_backup (id, name, email)\nSELECT id, name, email FROM users\nWHERE created_at < '2024-01-01';\n"})}),"\n",(0,s.jsx)(e.h3,{id:"33-upsertinsert-on-conflict",children:"3.3 UPSERT\uff08INSERT ON CONFLICT\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u91cd\u8907\u6642\u306f\u4f55\u3082\u3057\u306a\u3044\nINSERT INTO users (id, name, email)\nVALUES (1, 'Alice Updated', 'alice@example.com')\nON CONFLICT (id) DO NOTHING;\n\n-- \u91cd\u8907\u6642\u306f\u66f4\u65b0\nINSERT INTO users (id, name, email, department_id)\nVALUES (1, 'Alice Updated', 'alice@example.com', 2)\nON CONFLICT (id) DO UPDATE SET\n    name = EXCLUDED.name,\n    updated_at = now();\n\n-- \u30e6\u30cb\u30fc\u30af\u5236\u7d04\u306e\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\nINSERT INTO users (name, email, department_id)\nVALUES ('Alice', 'alice@example.com', 3)\nON CONFLICT (email) DO UPDATE SET\n    department_id = EXCLUDED.department_id,\n    updated_at = now();\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"4-\u30c7\u30fc\u30bf\u306e\u66f4\u65b0update",children:"4. \u30c7\u30fc\u30bf\u306e\u66f4\u65b0\uff08UPDATE\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"41-\u57fa\u672c\u69cb\u6587",children:"4.1 \u57fa\u672c\u69cb\u6587"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u884c\u3092\u66f4\u65b0\nUPDATE users\nSET name = 'Alice Smith', updated_at = now()\nWHERE id = 1;\n\n-- \u8907\u6570\u30ab\u30e9\u30e0\u306e\u66f4\u65b0\nUPDATE orders\nSET\n    status = 'completed',\n    updated_at = now()\nWHERE id = 3;\n\n-- \u8a08\u7b97\u7d50\u679c\u3067\u66f4\u65b0\nUPDATE orders\nSET total_amount = total_amount * 1.1\nWHERE status = 'pending';\n"})}),"\n",(0,s.jsx)(e.h3,{id:"42-\u66f4\u65b0\u7d50\u679c\u306e\u53d6\u5f97returning",children:"4.2 \u66f4\u65b0\u7d50\u679c\u306e\u53d6\u5f97\uff08RETURNING\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u66f4\u65b0\u3057\u305f\u884c\u3092\u53d6\u5f97\nUPDATE users\nSET department_id = 3\nWHERE id = 5\nRETURNING *;\n\n-- \u66f4\u65b0\u524d\u5f8c\u306e\u5024\u3092\u6bd4\u8f03\uff08PostgreSQL\u56fa\u6709\u3067\u306f\u306a\u3044\u304c\u6709\u7528\uff09\nUPDATE users\nSET name = 'Alice Johnson'\nWHERE id = 1\nRETURNING id, name AS new_name;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"43-\u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u66f4\u65b0",children:"4.3 \u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u66f4\u65b0"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u30b5\u30d6\u30af\u30a8\u30ea\u3092\u4f7f\u7528\nUPDATE users\nSET department_id = (\n    SELECT id FROM departments WHERE name = 'Frontend'\n)\nWHERE email = 'eve@example.com';\n\n-- FROM\u53e5\u3092\u4f7f\u7528\uff08PostgreSQL\u62e1\u5f35\uff09\nUPDATE orders o\nSET status = 'archived'\nFROM users u\nWHERE o.user_id = u.id\n  AND u.department_id = 4;\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"5-\u30c7\u30fc\u30bf\u306e\u524a\u9664delete",children:"5. \u30c7\u30fc\u30bf\u306e\u524a\u9664\uff08DELETE\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"51-\u57fa\u672c\u69cb\u6587",children:"5.1 \u57fa\u672c\u69cb\u6587"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u884c\u3092\u524a\u9664\nDELETE FROM orders WHERE status = 'cancelled';\n\n-- \u8907\u6570\u6761\u4ef6\nDELETE FROM users\nWHERE department_id IS NULL\n  AND created_at < '2024-01-01';\n\n-- \u524a\u9664\u3057\u305f\u884c\u3092\u53d6\u5f97\nDELETE FROM orders\nWHERE id = 5\nRETURNING *;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"52-\u5168\u4ef6\u524a\u9664",children:"5.2 \u5168\u4ef6\u524a\u9664"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- DELETE\uff08\u30ed\u30b0\u3042\u308a\u3001\u9045\u3044\u3001\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u53ef\u80fd\uff09\nDELETE FROM temp_table;\n\n-- TRUNCATE\uff08\u30ed\u30b0\u306a\u3057\u3001\u9ad8\u901f\u3001\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u4e0d\u53ef*\uff09\n-- * PostgreSQL\u3067\u306f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5185\u306a\u3089\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u53ef\u80fd\nTRUNCATE TABLE temp_table;\n\n-- \u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3082\u542b\u3081\u3066TRUNCATE\nTRUNCATE TABLE orders, users CASCADE;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"53-\u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u524a\u9664",children:"5.3 \u4ed6\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u305f\u524a\u9664"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- USING\u3092\u4f7f\u7528\uff08PostgreSQL\u62e1\u5f35\uff09\nDELETE FROM orders o\nUSING users u\nWHERE o.user_id = u.id\n  AND u.email = 'alice@example.com';\n\n-- \u30b5\u30d6\u30af\u30a8\u30ea\u3092\u4f7f\u7528\nDELETE FROM orders\nWHERE user_id IN (\n    SELECT id FROM users WHERE department_id = 4\n);\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"6-\u30c6\u30fc\u30d6\u30eb\u7d50\u5408join",children:"6. \u30c6\u30fc\u30d6\u30eb\u7d50\u5408\uff08JOIN\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"61-join\u306e\u7a2e\u985e",children:"6.1 JOIN\u306e\u7a2e\u985e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      JOIN \u306e\u7a2e\u985e                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010INNER JOIN\u3011\u4e21\u65b9\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u5b58\u5728\u3059\u308b\u884c\u306e\u307f                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                     \u2502\n\u2502  \u2502 users   \u2502   \u2502  depts  \u2502                                     \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2510  \u2502   \u2502  \u250c\u2500\u2500\u2500\u2510  \u2502                                     \u2502\n\u2502  \u2502  \u2502 \u25cf \u2502\u2190\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2502 \u25cf \u2502  \u2502  \u2190 \u30de\u30c3\u30c1\u3057\u305f\u884c\u306e\u307f                \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2518  \u2502   \u2502  \u2514\u2500\u2500\u2500\u2518  \u2502                                     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                     \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010LEFT JOIN\u3011\u5de6\u30c6\u30fc\u30d6\u30eb\u306e\u5168\u884c + \u53f3\u306e\u30de\u30c3\u30c1                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                     \u2502\n\u2502  \u2502 users   \u2502   \u2502  depts  \u2502                                     \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2510  \u2502   \u2502  \u250c\u2500\u2500\u2500\u2510  \u2502                                     \u2502\n\u2502  \u2502  \u2502 \u25cf \u2502\u2190\u2500\u253c\u2500\u2500\u2500\u253c\u2500\u2500\u2502 \u25cf \u2502  \u2502                                     \u2502\n\u2502  \u2502  \u2502 \u25cb \u2502  \u2502   \u2502  \u2514\u2500\u2500\u2500\u2518  \u2502  \u2190 \u5de6\u306e\u307f\u3082\u542b\u3080\uff08\u53f3\u306fNULL\uff09        \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2518  \u2502   \u2502         \u2502                                     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                     \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010RIGHT JOIN\u3011\u53f3\u30c6\u30fc\u30d6\u30eb\u306e\u5168\u884c + \u5de6\u306e\u30de\u30c3\u30c1                    \u2502\n\u2502  \uff08LEFT JOIN\u306e\u9006\u3001\u5b9f\u52d9\u3067\u306fLEFT JOIN\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u591a\u3044\uff09    \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010FULL OUTER JOIN\u3011\u4e21\u65b9\u306e\u5168\u884c\uff08\u30de\u30c3\u30c1\u3057\u306a\u3044\u5834\u5408\u306fNULL\uff09        \u2502\n\u2502                                                                 \u2502\n\u2502  \u3010CROSS JOIN\u3011\u5168\u7d44\u307f\u5408\u308f\u305b\uff08\u30c7\u30ab\u30eb\u30c8\u7a4d\uff09                       \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"62-inner-join",children:"6.2 INNER JOIN"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u90e8\u7f72\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u53d6\u5f97\nSELECT\n    u.id,\n    u.name,\n    u.email,\n    d.name AS department_name\nFROM users u\nINNER JOIN departments d ON u.department_id = d.id;\n\n-- \u7d50\u679c: Eve\uff08department_id = NULL\uff09\u306f\u542b\u307e\u308c\u306a\u3044\n"})}),"\n",(0,s.jsx)(e.h3,{id:"63-left-join",children:"6.3 LEFT JOIN"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5168\u30e6\u30fc\u30b6\u30fc\uff08\u90e8\u7f72\u304c\u306a\u3044\u5834\u5408\u3082NULL\u3067\u542b\u3080\uff09\nSELECT\n    u.id,\n    u.name,\n    u.email,\n    d.name AS department_name\nFROM users u\nLEFT JOIN departments d ON u.department_id = d.id;\n\n-- \u7d50\u679c: Eve\u3082\u542b\u307e\u308c\u308b\uff08department_name = NULL\uff09\n"})}),"\n",(0,s.jsx)(e.h3,{id:"64-\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306ejoin",children:"6.4 \u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306eJOIN"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u30e6\u30fc\u30b6\u30fc\u3001\u90e8\u7f72\u3001\u6ce8\u6587\u3092\u7d50\u5408\nSELECT\n    u.name AS user_name,\n    d.name AS department_name,\n    o.total_amount,\n    o.status\nFROM users u\nLEFT JOIN departments d ON u.department_id = d.id\nLEFT JOIN orders o ON u.id = o.user_id\nORDER BY u.id, o.ordered_at;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"65-\u81ea\u5df1\u7d50\u5408self-join",children:"6.5 \u81ea\u5df1\u7d50\u5408\uff08Self Join\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u89aa\u90e8\u7f72\u306e\u540d\u524d\u3092\u53d6\u5f97\nSELECT\n    child.name AS department,\n    parent.name AS parent_department\nFROM departments child\nLEFT JOIN departments parent ON child.parent_id = parent.id;\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"7-\u96c6\u7d04\u95a2\u6570\u3068\u30b0\u30eb\u30fc\u30d7\u5316",children:"7. \u96c6\u7d04\u95a2\u6570\u3068\u30b0\u30eb\u30fc\u30d7\u5316"}),"\n",(0,s.jsx)(e.h3,{id:"71-\u4e3b\u306a\u96c6\u7d04\u95a2\u6570",children:"7.1 \u4e3b\u306a\u96c6\u7d04\u95a2\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- COUNT: \u884c\u6570\nSELECT COUNT(*) FROM users;                    -- \u5168\u884c\u6570\nSELECT COUNT(department_id) FROM users;        -- NULL\u3092\u9664\u3044\u305f\u884c\u6570\nSELECT COUNT(DISTINCT department_id) FROM users; -- \u30e6\u30cb\u30fc\u30af\u306a\u5024\u306e\u6570\n\n-- SUM: \u5408\u8a08\nSELECT SUM(total_amount) FROM orders;\n\n-- AVG: \u5e73\u5747\nSELECT AVG(total_amount) FROM orders;\n\n-- MAX / MIN: \u6700\u5927\u30fb\u6700\u5c0f\nSELECT MAX(total_amount), MIN(total_amount) FROM orders;\n\n-- \u8907\u6570\u306e\u96c6\u7d04\u3092\u540c\u6642\u306b\nSELECT\n    COUNT(*) AS order_count,\n    SUM(total_amount) AS total_sales,\n    AVG(total_amount) AS avg_order_value,\n    MAX(total_amount) AS max_order,\n    MIN(total_amount) AS min_order\nFROM orders\nWHERE status = 'completed';\n"})}),"\n",(0,s.jsx)(e.h3,{id:"72-group-by",children:"7.2 GROUP BY"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u90e8\u7f72\u3054\u3068\u306e\u30e6\u30fc\u30b6\u30fc\u6570\nSELECT\n    department_id,\n    COUNT(*) AS user_count\nFROM users\nGROUP BY department_id;\n\n-- \u90e8\u7f72\u540d\u3082\u8868\u793a\nSELECT\n    d.name AS department,\n    COUNT(u.id) AS user_count\nFROM departments d\nLEFT JOIN users u ON d.id = u.department_id\nGROUP BY d.id, d.name;\n\n-- \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u6ce8\u6587\u7d71\u8a08\nSELECT\n    u.name,\n    COUNT(o.id) AS order_count,\n    COALESCE(SUM(o.total_amount), 0) AS total_spent\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nGROUP BY u.id, u.name\nORDER BY total_spent DESC;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"73-having\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u6761\u4ef6",children:"7.3 HAVING\uff08\u30b0\u30eb\u30fc\u30d7\u3078\u306e\u6761\u4ef6\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- 2\u4ef6\u4ee5\u4e0a\u6ce8\u6587\u3057\u305f\u30e6\u30fc\u30b6\u30fc\nSELECT\n    user_id,\n    COUNT(*) AS order_count,\n    SUM(total_amount) AS total_spent\nFROM orders\nGROUP BY user_id\nHAVING COUNT(*) >= 2;\n\n-- \u5e73\u5747\u6ce8\u6587\u984d\u304c1000\u4ee5\u4e0a\u306e\u90e8\u7f72\nSELECT\n    d.name AS department,\n    AVG(o.total_amount) AS avg_order\nFROM departments d\nJOIN users u ON d.id = u.department_id\nJOIN orders o ON u.id = o.user_id\nGROUP BY d.id, d.name\nHAVING AVG(o.total_amount) >= 1000;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"74-filter\u53e5postgresql-94",children:"7.4 FILTER\u53e5\uff08PostgreSQL 9.4+\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6761\u4ef6\u4ed8\u304d\u96c6\u7d04\uff08CASE\u5f0f\u3088\u308a\u8aad\u307f\u3084\u3059\u3044\uff09\nSELECT\n    COUNT(*) AS total_orders,\n    COUNT(*) FILTER (WHERE status = 'completed') AS completed_orders,\n    COUNT(*) FILTER (WHERE status = 'pending') AS pending_orders,\n    COUNT(*) FILTER (WHERE status = 'cancelled') AS cancelled_orders,\n    SUM(total_amount) FILTER (WHERE status = 'completed') AS completed_revenue\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"8-\u30b5\u30d6\u30af\u30a8\u30ea",children:"8. \u30b5\u30d6\u30af\u30a8\u30ea"}),"\n",(0,s.jsx)(e.h3,{id:"81-\u30b9\u30ab\u30e9\u30b5\u30d6\u30af\u30a8\u30ea\u5358\u4e00\u5024\u3092\u8fd4\u3059",children:"8.1 \u30b9\u30ab\u30e9\u30b5\u30d6\u30af\u30a8\u30ea\uff08\u5358\u4e00\u5024\u3092\u8fd4\u3059\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5e73\u5747\u4ee5\u4e0a\u306e\u6ce8\u6587\u3092\u53d6\u5f97\nSELECT * FROM orders\nWHERE total_amount > (SELECT AVG(total_amount) FROM orders);\n\n-- \u6700\u65b0\u306e\u6ce8\u6587\u3092\u53d6\u5f97\nSELECT * FROM orders\nWHERE ordered_at = (SELECT MAX(ordered_at) FROM orders);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"82-in\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea",children:"8.2 IN\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6ce8\u6587\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u30e6\u30fc\u30b6\u30fc\nSELECT * FROM users\nWHERE id IN (SELECT DISTINCT user_id FROM orders);\n\n-- \u6ce8\u6587\u3057\u305f\u3053\u3068\u304c\u306a\u3044\u30e6\u30fc\u30b6\u30fc\nSELECT * FROM users\nWHERE id NOT IN (\n    SELECT user_id FROM orders WHERE user_id IS NOT NULL\n);\n-- \u6ce8\u610f: NOT IN \u306f\u30b5\u30d6\u30af\u30a8\u30ea\u306bNULL\u304c\u3042\u308b\u3068\u671f\u5f85\u901a\u308a\u52d5\u4f5c\u3057\u306a\u3044\n"})}),"\n",(0,s.jsx)(e.h3,{id:"83-exists\u5b58\u5728\u78ba\u8a8d",children:"8.3 EXISTS\uff08\u5b58\u5728\u78ba\u8a8d\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6ce8\u6587\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u30e6\u30fc\u30b6\u30fc\uff08EXISTS\u3092\u4f7f\u7528\uff09\nSELECT * FROM users u\nWHERE EXISTS (\n    SELECT 1 FROM orders o WHERE o.user_id = u.id\n);\n\n-- \u6ce8\u6587\u3057\u305f\u3053\u3068\u304c\u306a\u3044\u30e6\u30fc\u30b6\u30fc\nSELECT * FROM users u\nWHERE NOT EXISTS (\n    SELECT 1 FROM orders o WHERE o.user_id = u.id\n);\n-- NOT EXISTS \u306f NOT IN \u3088\u308a\u5b89\u5168\uff08NULL\u306e\u554f\u984c\u304c\u306a\u3044\uff09\n"})}),"\n",(0,s.jsx)(e.h3,{id:"84-from\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea\u5c0e\u51fa\u30c6\u30fc\u30d6\u30eb",children:"8.4 FROM\u53e5\u3067\u306e\u30b5\u30d6\u30af\u30a8\u30ea\uff08\u5c0e\u51fa\u30c6\u30fc\u30d6\u30eb\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u6ce8\u6587\u7d71\u8a08\u3092\u8a08\u7b97\u3057\u3066\u304b\u3089\u30d5\u30a3\u30eb\u30bf\nSELECT *\nFROM (\n    SELECT\n        user_id,\n        COUNT(*) AS order_count,\n        SUM(total_amount) AS total_spent\n    FROM orders\n    GROUP BY user_id\n) AS user_stats\nWHERE order_count >= 2;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"85-\u76f8\u95a2\u30b5\u30d6\u30af\u30a8\u30ea",children:"8.5 \u76f8\u95a2\u30b5\u30d6\u30af\u30a8\u30ea"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5404\u30e6\u30fc\u30b6\u30fc\u306e\u6700\u65b0\u6ce8\u6587\nSELECT * FROM orders o1\nWHERE ordered_at = (\n    SELECT MAX(ordered_at)\n    FROM orders o2\n    WHERE o2.user_id = o1.user_id\n);\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"9-\u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0fcte",children:"9. \u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0f\uff08CTE\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"91-\u57fa\u672c\u69cb\u6587with\u53e5",children:"9.1 \u57fa\u672c\u69cb\u6587\uff08WITH\u53e5\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u8aad\u307f\u3084\u3059\u3044\u30af\u30a8\u30ea\u69cb\u9020\nWITH user_order_stats AS (\n    SELECT\n        user_id,\n        COUNT(*) AS order_count,\n        SUM(total_amount) AS total_spent\n    FROM orders\n    GROUP BY user_id\n)\nSELECT\n    u.name,\n    u.email,\n    COALESCE(s.order_count, 0) AS order_count,\n    COALESCE(s.total_spent, 0) AS total_spent\nFROM users u\nLEFT JOIN user_order_stats s ON u.id = s.user_id\nORDER BY total_spent DESC;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"92-\u8907\u6570\u306ecte",children:"9.2 \u8907\u6570\u306eCTE"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"WITH\ndepartment_users AS (\n    SELECT\n        department_id,\n        COUNT(*) AS user_count\n    FROM users\n    GROUP BY department_id\n),\ndepartment_orders AS (\n    SELECT\n        u.department_id,\n        COUNT(o.id) AS order_count,\n        SUM(o.total_amount) AS total_revenue\n    FROM users u\n    JOIN orders o ON u.id = o.user_id\n    GROUP BY u.department_id\n)\nSELECT\n    d.name AS department,\n    COALESCE(du.user_count, 0) AS user_count,\n    COALESCE(do.order_count, 0) AS order_count,\n    COALESCE(do.total_revenue, 0) AS total_revenue\nFROM departments d\nLEFT JOIN department_users du ON d.id = du.department_id\nLEFT JOIN department_orders do ON d.id = do.department_id;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"93-\u518d\u5e30cte",children:"9.3 \u518d\u5e30CTE"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u90e8\u7f72\u306e\u968e\u5c64\u69cb\u9020\u3092\u5c55\u958b\nWITH RECURSIVE department_tree AS (\n    -- \u57fa\u5e95\u30b1\u30fc\u30b9: \u30eb\u30fc\u30c8\u90e8\u7f72\n    SELECT id, name, parent_id, 0 AS level, name::TEXT AS path\n    FROM departments\n    WHERE parent_id IS NULL\n\n    UNION ALL\n\n    -- \u518d\u5e30\u30b1\u30fc\u30b9: \u5b50\u90e8\u7f72\n    SELECT\n        d.id,\n        d.name,\n        d.parent_id,\n        dt.level + 1,\n        dt.path || ' > ' || d.name\n    FROM departments d\n    JOIN department_tree dt ON d.parent_id = dt.id\n)\nSELECT * FROM department_tree\nORDER BY path;\n\n-- \u7d50\u679c:\n-- id | name        | level | path\n-- 1  | Engineering | 0     | Engineering\n-- 2  | Backend     | 1     | Engineering > Backend\n-- 3  | Frontend    | 1     | Engineering > Frontend\n-- 4  | Sales       | 0     | Sales\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"10-\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",children:"10. \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570"}),"\n",(0,s.jsx)(e.h3,{id:"101-\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570\u306e\u6982\u5ff5",children:"10.1 \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570\u306e\u6982\u5ff5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u3010\u96c6\u7d04\u95a2\u6570\u3068\u306e\u9055\u3044\u3011                                           \u2502\n\u2502                                                                 \u2502\n\u2502  \u96c6\u7d04\u95a2\u6570 (GROUP BY):                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                             \u2502\n\u2502  \u2502 Row 1  \u2500\u2500\u2510    \u2502                                             \u2502\n\u2502  \u2502 Row 2  \u2500\u2500\u253c\u2500\u2500\u25ba \u2502 1\u3064\u306e\u7d50\u679c\u884c                                 \u2502\n\u2502  \u2502 Row 3  \u2500\u2500\u2518    \u2502                                             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                             \u2502\n\u2502                                                                 \u2502\n\u2502  \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570 (OVER):                                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                             \u2502\n\u2502  \u2502 Row 1  \u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 Row 1 + \u96c6\u8a08\u7d50\u679c                            \u2502\n\u2502  \u2502 Row 2  \u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 Row 2 + \u96c6\u8a08\u7d50\u679c                            \u2502\n\u2502  \u2502 Row 3  \u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 Row 3 + \u96c6\u8a08\u7d50\u679c                            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                             \u2502\n\u2502                                                                 \u2502\n\u2502  \u2192 \u5404\u884c\u3092\u4fdd\u6301\u3057\u305f\u307e\u307e\u3001\u96c6\u8a08\u7d50\u679c\u3092\u8ffd\u52a0\u3067\u304d\u308b                     \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.h3,{id:"102-\u57fa\u672c\u7684\u306a\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570",children:"10.2 \u57fa\u672c\u7684\u306a\u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5404\u6ce8\u6587\u306b\u5168\u4f53\u306e\u5408\u8a08\u3068\u5e73\u5747\u3092\u8ffd\u52a0\nSELECT\n    id,\n    user_id,\n    total_amount,\n    SUM(total_amount) OVER () AS grand_total,\n    AVG(total_amount) OVER () AS overall_avg,\n    total_amount / SUM(total_amount) OVER () * 100 AS percentage\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"103-partition-by\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u306e\u96c6\u8a08",children:"10.3 PARTITION BY\uff08\u30b0\u30eb\u30fc\u30d7\u5185\u3067\u306e\u96c6\u8a08\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u5408\u8a08\u3068\u3001\u5168\u4f53\u306b\u5bfe\u3059\u308b\u5272\u5408\nSELECT\n    id,\n    user_id,\n    total_amount,\n    SUM(total_amount) OVER (PARTITION BY user_id) AS user_total,\n    SUM(total_amount) OVER () AS grand_total\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"104-order-by-\u3068\u884c\u756a\u53f7\u95a2\u6570",children:"10.4 ORDER BY \u3068\u884c\u756a\u53f7\u95a2\u6570"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u884c\u756a\u53f7\u3001\u30e9\u30f3\u30ad\u30f3\u30b0\nSELECT\n    id,\n    user_id,\n    total_amount,\n    ROW_NUMBER() OVER (ORDER BY total_amount DESC) AS row_num,\n    RANK() OVER (ORDER BY total_amount DESC) AS rank,\n    DENSE_RANK() OVER (ORDER BY total_amount DESC) AS dense_rank\nFROM orders;\n\n-- \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u30e9\u30f3\u30ad\u30f3\u30b0\nSELECT\n    id,\n    user_id,\n    total_amount,\n    ROW_NUMBER() OVER (\n        PARTITION BY user_id\n        ORDER BY total_amount DESC\n    ) AS user_order_rank\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"105-lag--lead\u524d\u5f8c\u306e\u884c\u3092\u53c2\u7167",children:"10.5 LAG / LEAD\uff08\u524d\u5f8c\u306e\u884c\u3092\u53c2\u7167\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u524d\u56de\u306e\u6ce8\u6587\u3068\u306e\u5dee\u984d\u3092\u8a08\u7b97\nSELECT\n    id,\n    user_id,\n    ordered_at,\n    total_amount,\n    LAG(total_amount) OVER (\n        PARTITION BY user_id\n        ORDER BY ordered_at\n    ) AS prev_amount,\n    total_amount - LAG(total_amount) OVER (\n        PARTITION BY user_id\n        ORDER BY ordered_at\n    ) AS diff_from_prev\nFROM orders;\n\n-- \u6b21\u306e\u6ce8\u6587\u65e5\u3092\u53d6\u5f97\nSELECT\n    id,\n    user_id,\n    ordered_at,\n    LEAD(ordered_at) OVER (\n        PARTITION BY user_id\n        ORDER BY ordered_at\n    ) AS next_order_date\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"106-\u7d2f\u7a4d\u96c6\u8a08",children:"10.6 \u7d2f\u7a4d\u96c6\u8a08"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u7d2f\u7a4d\u5408\u8a08\nSELECT\n    id,\n    ordered_at,\n    total_amount,\n    SUM(total_amount) OVER (\n        ORDER BY ordered_at\n        ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW\n    ) AS running_total\nFROM orders;\n\n-- \u79fb\u52d5\u5e73\u5747\uff08\u76f4\u8fd13\u4ef6\uff09\nSELECT\n    id,\n    ordered_at,\n    total_amount,\n    AVG(total_amount) OVER (\n        ORDER BY ordered_at\n        ROWS BETWEEN 2 PRECEDING AND CURRENT ROW\n    ) AS moving_avg_3\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"107-first_value--last_value",children:"10.7 FIRST_VALUE / LAST_VALUE"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u5404\u30e6\u30fc\u30b6\u30fc\u306e\u6700\u521d\u3068\u6700\u5f8c\u306e\u6ce8\u6587\u984d\nSELECT\n    id,\n    user_id,\n    ordered_at,\n    total_amount,\n    FIRST_VALUE(total_amount) OVER (\n        PARTITION BY user_id\n        ORDER BY ordered_at\n    ) AS first_order_amount,\n    LAST_VALUE(total_amount) OVER (\n        PARTITION BY user_id\n        ORDER BY ordered_at\n        ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n    ) AS last_order_amount\nFROM orders;\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"\u53c2\u8003\u30ea\u30f3\u30af",children:"\u53c2\u8003\u30ea\u30f3\u30af"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/sql-commands.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - SQL\u30b3\u30de\u30f3\u30c9"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/functions.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u95a2\u6570\u3068\u6f14\u7b97\u5b50"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.postgresql.org/docs/current/tutorial-window.html",children:"PostgreSQL\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 - \u30a6\u30a3\u30f3\u30c9\u30a6\u95a2\u6570"})}),"\n"]})]})}function c(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},28453:(n,e,d)=>{d.d(e,{R:()=>l,x:()=>t});var r=d(96540);const s={},a=r.createContext(s);function l(n){const e=r.useContext(a);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);