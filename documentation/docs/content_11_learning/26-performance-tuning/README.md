# パフォーマンス・チューニング

システム全体のパフォーマンスを理解し、改善するための知識を学ぶセクションです。

---

## なぜパフォーマンスを学ぶのか

```
┌─────────────────────────────────────────────────────────────┐
│              「なんか遅いんですけど」                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  この一言を聞いたとき、あなたはどう動けるか？              │
│                                                             │
│  パフォーマンスを知らない人:                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 「えーと...どこだろう...」                          │   │
│  │ 「とりあえずキャッシュ入れてみる？」                │   │
│  │ 「サーバー増やせばいいんじゃない？」                │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  パフォーマンスを知っている人:                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 「P99はどのくらい？いつから？」                     │   │
│  │ 「APMでトレース見せて」                             │   │
│  │ 「DBの接続プール使用率は？」                        │   │
│  │ → 原因を特定し、的確に改善できる                   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  パフォーマンスの知識は「問題解決の武器」になる             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 学習の流れ

```
┌─────────────────────────────────────────────────────────────┐
│                    学習ロードマップ                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  基礎概念                                                   │
│  ├── パフォーマンスの基礎                                  │
│  │   └── レイテンシ、スループット、P99                    │
│  └── ボトルネックの見つけ方                                │
│      └── どこから調べるか、USE/REDメソッド                │
│                                                             │
│  計測                                                       │
│  ├── 計測の技術                                            │
│  │   └── メトリクス、プロファイリング、トレーシング       │
│  └── 負荷テスト                                            │
│      └── テスト設計、ツール、結果の読み方                 │
│                                                             │
│  レイヤー別チューニング                                     │
│  ├── アプリケーション層                                    │
│  │   └── コード最適化、キャッシュ、非同期処理             │
│  ├── データベース層                                        │
│  │   └── クエリ最適化、インデックス、接続プール           │
│  ├── ネットワーク層                                        │
│  │   └── レイテンシ、帯域、接続管理                       │
│  └── OS/インフラ層                                         │
│      └── CPU、メモリ、I/O、カーネルパラメータ             │
│                                                             │
│  実践                                                       │
│  ├── ローカル環境 vs クラウド環境                          │
│  │   └── 環境差を考慮した計測・チューニング               │
│  ├── 性能計測の実践テクニック                              │
│  │   └── 具体的な計測手法とツールの使い方                 │
│  └── 負荷テスト実践シミュレーション                        │
│      └── シナリオ形式で学ぶ調査・チューニングの流れ       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## ドキュメント一覧

### 基礎

| # | ドキュメント | 説明 |
|---|-------------|------|
| 01 | [パフォーマンスの基礎](01-basics.md) | レイテンシ、スループット、P99、リトルの法則 |
| 02 | [ボトルネックの見つけ方](02-finding-bottlenecks.md) | USE/REDメソッド、どこから調べるか |

### 計測

| # | ドキュメント | 説明 |
|---|-------------|------|
| 03 | [計測の技術](03-measurement.md) | メトリクス、ログ、トレース、プロファイリング |
| 04 | [負荷テスト](04-load-testing.md) | テスト設計、ツール、結果分析 |

### レイヤー別チューニング

| # | ドキュメント | 説明 |
|---|-------------|------|
| 05 | [アプリケーション層](05-application-layer.md) | コード最適化、キャッシュ、非同期処理 |
| 06 | [データベース層](06-database-layer.md) | クエリ最適化、インデックス、接続プール |
| 07 | [ネットワーク層](07-network-layer.md) | レイテンシ削減、接続管理、プロトコル選択 |
| 08 | [OS/インフラ層](08-os-layer.md) | CPU、メモリ、I/O、カーネルチューニング |

### 実践

| # | ドキュメント | 説明 |
|---|-------------|------|
| 09 | [ローカル環境 vs クラウド環境](09-local-vs-cloud.md) | 環境差を考慮した性能テストの実践 |
| 10 | [性能計測の実践テクニック](10-measurement-techniques.md) | 具体的な計測手法とツールの使い方 |
| 11 | [シナリオ設計の原則](11-scenario-design-principles.md) | 適切な負荷テストシナリオを設計するための考え方 |
| 12 | [負荷テスト実践シミュレーション](12-load-test-simulation.md) | シナリオ形式で学ぶ負荷テストの流れ |

### コラム

| # | ドキュメント | 説明 |
|---|-------------|------|
| 99 | [早すぎる最適化は諸悪の根源](99-column-premature-optimization.md) | いつ最適化すべきか |

---

## このセクションで学べること

### 考え方

| トピック | 内容 |
|---------|------|
| 計測ファースト | 推測ではなく計測に基づく改善 |
| ボトルネック思考 | 全体の1%を改善しても1%しか速くならない |
| トレードオフ | 速度 vs メモリ、レイテンシ vs スループット |

### 指標

| 指標 | 意味 |
|------|------|
| レイテンシ | 1リクエストの応答時間 |
| スループット | 単位時間あたりの処理量 |
| P50/P95/P99 | パーセンタイル（中央値、95%点、99%点） |
| エラーレート | エラーの割合 |

### 手法

| 手法 | 用途 |
|------|------|
| プロファイリング | CPUやメモリの使用箇所特定 |
| トレーシング | リクエストの流れを追跡 |
| 負荷テスト | 限界性能の把握 |
| A/Bテスト | 改善効果の検証 |

---

## 関連ドキュメント

### JVM

- [JVM パフォーマンス](../20-jvm/jvm-06-performance.md)
- [GC チューニング](../20-jvm/jvm-05-gc-tuning.md)
- [トラブルシューティング](../20-jvm/jvm-07-troubleshooting.md)

### PostgreSQL

- [クエリ最適化](../11-postgresql/dev-05-query-optimization.md)
- [接続プーリング](../11-postgresql/dev-06-connection-pooling.md)
- [大量データの検索パターン](../11-postgresql/dev-09-large-data-search.md)
- [実行計画](../11-postgresql/dba-08-planner.md)

### Linux

- [パフォーマンス](../14-linux/performance.md)

### ネットワーク

- [Webサーバーアーキテクチャ](../15-networking/10-web-server-architecture.md)
- [ロードバランシング](../15-networking/03-load-balancing.md)
