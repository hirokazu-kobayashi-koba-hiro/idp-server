# 機能

**idp-server** は、下記機能をサポートしています（一部予定）。

## 機能一覧

* ✅ - 対応済み
* ⚠️ - 実装中

| カテゴリ         | サブカテゴリ                       | 対応状況 | 説明                                                              |
|--------------|------------------------------|------|-----------------------------------------------------------------|
| **認証**       | パスワード認証                      | ✅    | ユーザー名とパスワードによる認証。                                               |
|              | 多要素認証（MFA）                   | ✅    | SMS、メール、プッシュ通知などによる多要素認証を追加。                                    |
|              | WebAuthn（Passkey, FIDO2）     | ✅    | FIDO2 または Passkey によるパスワードレス認証をサポート。                            |
|              | FIDO-UAF                     | ✅    | FIDO-UAF による認証をサポート。                                            |
|              | ソーシャルログイン                    | ✅    | Google や Facebook などの外部アカウントによる認証をサポート。                         |
|              | エンタープライズフェデレーション             | ⚠️   | SAML、OIDC、LDAP、Azure AD、Google Workspace など外部IdP連携によるログインをサポート。 |
|              | IdP連携（フェデレーション）              | ⚠️   | サードパーティIdPとのフェデレーション認証をサポート。                                    |
|              | MFAルールのカスタマイズ                | ✅    | テナントやユーザー単位で柔軟にMFAルールを定義可能。                                     |
|              | ログイン画面のカスタマイズ                | ⚠️   | Universal Login や Lock.js によるUIブランディングをサポート。                    |
| **認可**       | ロールベースアクセス制御（RBAC）           | ✅    | ユーザーにロールと権限を割り当てて、アクセスを制御。                                      |
|              | パーミッション管理                    | ✅    | ユーザーごとの詳細なアクセス権限を管理。                                            |
|              | API認可                        | ✅    | OAuth 2.0 に基づくJWTトークンを用いてAPIを保護。                                |
|              | M2M（マシン間）認証                  | ✅    | クライアントクレデンシャルによるサービス間認証をサポート。                                   |
|              | セッション管理                      | ✅    | トークンの有効期限、リフレッシュ、ログアウト対応。                                       |
|              | 認可プロバイダーの選択                  | ✅    | カスタム認可プロバイダーを選択して利用可能。                                          |
| **トラスト基盤**   | VC申請・発行ワークフロー                | ✅    | ユーザーの申請・審査から発行までのVerified Credentials（VC）管理ワークフローを提供。           |
|              | 複数eKYCプロバイダーとの連携             | ✅    | テナントごとのポリシーに応じて適切なeKYCフローを動的に選択して統合。                            |
| **セキュリティ**   | 認証フローにおけるHook対応              | ✅    | テナント設定に応じて、各種セキュリティイベントごとに複数のHookを順次実行可能。                       |
|              | 拡張可能なIDワークフロー                | ✅    | ID管理におけるルールやHookのカスタム処理をサポート。                                   |
|              | ユーザー同意とプライバシー対応              | ✅    | FAPIに基づいたgrant管理により、GDPRやCCPA等の規制に準拠。                           |
|              | セキュアなトークン管理                  | ✅    | アクセストークンの安全な管理と漏洩防止に対応。                                         |
|              | 金融グレードAPI（FAPI）準拠            | ✅    | 金融機関向けの高セキュリティ要件に準拠。                                            |
|              | SSF（Shared Signal Framework） | ✅    | セキュリティイベントをRelying Partyへ連携可能。                                  |
| **管理**       | 組織（Organization）機能           | ⚠️   | 複数テナントやメンバー、SSO、課金を一括管理できる組織機能。                                 |
|              | 組織メンバー管理                     | ✅    | テナントごとのメンバー権限管理を提供。                                             |
|              | テナント管理                       | ✅    | 複数テナントを一元管理可能。                                                  |
|              | 組織向けSSO強制                    | ⚠️   | 組織に所属するユーザーに対してSSOを強制。                                          |
|              | テナント作成権限の制御                  | ✅    | テナントの作成権限を柔軟に管理可能。                                              |
|              | サブスクリプション・課金                 | ⚠️   | 課金・プラン管理機能を提供。                                                  |
|              | アプリケーション管理                   | ✅    | アプリケーションの作成・編集・削除。                                              |
|              | ユーザー管理                       | ✅    | ユーザーの作成・編集・削除。                                                  |
|              | 認証設定の管理                      | ✅    | 認証方式・設定の作成・編集・削除。                                               |
|              | IdentityVerification設定       | ✅    | 身元確認設定の作成・編集・削除。                                                |
|              | トランザクションデータのクリーンアップ          | ⚠️   | 認証リクエストやMFA挑戦などの期限切れ・未使用データを定期的に自動削除。                           |
| **モニタリング**   | 監査ログ                         | ✅    | 認証イベントの記録とセキュリティアクティビティの追跡。                                     |
|              | モニタリングログ連携                   | ✅    | ログ収集サービス（例：Datadog）との統合。                                        |
|              | セキュリティアラート通知                 | ⚠️   | 異常なログインや侵害検知を管理者へ通知。                                            |
|              | SIEM連携                       | ⚠️   | セキュリティ監視ツール（SIEM）との統合に対応。                                       |
| **開発者向けツール** | SDK・ライブラリ提供                  | ⚠️   | React Android iOS などのSDKを提供予定。                                  |
|              | カスタムHookなどプラグイン実装            | ✅    | 独自のビジネスロジックを実装可能。                                               |
|              | UIのカスタムブランディング               | ⚠️   | 認証ページ、メール、エラーメッセージなどのUIをカスタマイズ可能。                               |
| **インフラ**     | 複数データベースのサポート                | ✅    | テナントごとにデータベース種別（PostgreSQL, MySQL）を切り替え可能。                      |

## 対応プロトコル

- **OAuth 2.0 (RFC 6749)**
    - 認可コード Grant
    - インプリシット Grant
    - クライアントクレデンシャルズ Grant
    - リソースオーナーパスワードクレデンシャルズ Grant

- **OpenID Connect (OIDC)**
    - 認可コードフロー
    - インプリシットフロー
    - ハイブリットフロー
    - リクエストオブジェクト（署名付き／暗号化／平文）
    - UserInfo エンドポイント

- **Financial-grade API (FAPI)**
    - Part 1: Baseline
    - Part 2: Advanced（JARM, PAR）

- **クライアント主導型バックチャネル認証（CIBA）**
    - Poll / Ping / Push モード
    - リクエストオブジェクト対応
    - デバイス通知（例：FCM / APNs）

- **トークン管理**
    - JWT アクセストークン
    - IDトークンのカスタマイズ
    - トークン失効 / インスペクション（RFC 7009 / RFC 7662）

---
